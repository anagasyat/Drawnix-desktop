const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D5O5Ora_.js","assets/index.dom-C3-224fz.js"])))=>i.map(i=>d[i]);
function wb(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var As=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var N7={exports:{}},mg={},H7={exports:{}},Jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uy;function Cb(){if(Uy)return Jt;Uy=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),g=Symbol.iterator;function v(U){return U===null||typeof U!="object"?null:(U=g&&U[g]||U["@@iterator"],typeof U=="function"?U:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,E={};function T(U,xe,Ie){this.props=U,this.context=xe,this.refs=E,this.updater=Ie||y}T.prototype.isReactComponent={},T.prototype.setState=function(U,xe){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,xe,"setState")},T.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function D(){}D.prototype=T.prototype;function S(U,xe,Ie){this.props=U,this.context=xe,this.refs=E,this.updater=Ie||y}var R=S.prototype=new D;R.constructor=S,x(R,T.prototype),R.isPureReactComponent=!0;var k=Array.isArray,O=Object.prototype.hasOwnProperty,$={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function K(U,xe,Ie){var Le,$e={},Fe=null,Ze=null;if(xe!=null)for(Le in xe.ref!==void 0&&(Ze=xe.ref),xe.key!==void 0&&(Fe=""+xe.key),xe)O.call(xe,Le)&&!z.hasOwnProperty(Le)&&($e[Le]=xe[Le]);var et=arguments.length-2;if(et===1)$e.children=Ie;else if(1<et){for(var Q=Array(et),Se=0;Se<et;Se++)Q[Se]=arguments[Se+2];$e.children=Q}if(U&&U.defaultProps)for(Le in et=U.defaultProps,et)$e[Le]===void 0&&($e[Le]=et[Le]);return{$$typeof:e,type:U,key:Fe,ref:Ze,props:$e,_owner:$.current}}function te(U,xe){return{$$typeof:e,type:U.type,key:xe,ref:U.ref,props:U.props,_owner:U._owner}}function se(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function me(U){var xe={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(Ie){return xe[Ie]})}var ne=/\/+/g;function oe(U,xe){return typeof U=="object"&&U!==null&&U.key!=null?me(""+U.key):xe.toString(36)}function ve(U,xe,Ie,Le,$e){var Fe=typeof U;(Fe==="undefined"||Fe==="boolean")&&(U=null);var Ze=!1;if(U===null)Ze=!0;else switch(Fe){case"string":case"number":Ze=!0;break;case"object":switch(U.$$typeof){case e:case t:Ze=!0}}if(Ze)return Ze=U,$e=$e(Ze),U=Le===""?"."+oe(Ze,0):Le,k($e)?(Ie="",U!=null&&(Ie=U.replace(ne,"$&/")+"/"),ve($e,xe,Ie,"",function(Se){return Se})):$e!=null&&(se($e)&&($e=te($e,Ie+(!$e.key||Ze&&Ze.key===$e.key?"":(""+$e.key).replace(ne,"$&/")+"/")+U)),xe.push($e)),1;if(Ze=0,Le=Le===""?".":Le+":",k(U))for(var et=0;et<U.length;et++){Fe=U[et];var Q=Le+oe(Fe,et);Ze+=ve(Fe,xe,Ie,Q,$e)}else if(Q=v(U),typeof Q=="function")for(U=Q.call(U),et=0;!(Fe=U.next()).done;)Fe=Fe.value,Q=Le+oe(Fe,et++),Ze+=ve(Fe,xe,Ie,Q,$e);else if(Fe==="object")throw xe=String(U),Error("Objects are not valid as a React child (found: "+(xe==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":xe)+"). If you meant to render a collection of children, use an array instead.");return Ze}function ge(U,xe,Ie){if(U==null)return U;var Le=[],$e=0;return ve(U,Le,"","",function(Fe){return xe.call(Ie,Fe,$e++)}),Le}function Me(U){if(U._status===-1){var xe=U._result;xe=xe(),xe.then(function(Ie){(U._status===0||U._status===-1)&&(U._status=1,U._result=Ie)},function(Ie){(U._status===0||U._status===-1)&&(U._status=2,U._result=Ie)}),U._status===-1&&(U._status=0,U._result=xe)}if(U._status===1)return U._result.default;throw U._result}var Pe={current:null},he={transition:null},le={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:he,ReactCurrentOwner:$};function we(){throw Error("act(...) is not supported in production builds of React.")}return Jt.Children={map:ge,forEach:function(U,xe,Ie){ge(U,function(){xe.apply(this,arguments)},Ie)},count:function(U){var xe=0;return ge(U,function(){xe++}),xe},toArray:function(U){return ge(U,function(xe){return xe})||[]},only:function(U){if(!se(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Jt.Component=T,Jt.Fragment=n,Jt.Profiler=i,Jt.PureComponent=S,Jt.StrictMode=r,Jt.Suspense=c,Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=le,Jt.act=we,Jt.cloneElement=function(U,xe,Ie){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Le=x({},U.props),$e=U.key,Fe=U.ref,Ze=U._owner;if(xe!=null){if(xe.ref!==void 0&&(Fe=xe.ref,Ze=$.current),xe.key!==void 0&&($e=""+xe.key),U.type&&U.type.defaultProps)var et=U.type.defaultProps;for(Q in xe)O.call(xe,Q)&&!z.hasOwnProperty(Q)&&(Le[Q]=xe[Q]===void 0&&et!==void 0?et[Q]:xe[Q])}var Q=arguments.length-2;if(Q===1)Le.children=Ie;else if(1<Q){et=Array(Q);for(var Se=0;Se<Q;Se++)et[Se]=arguments[Se+2];Le.children=et}return{$$typeof:e,type:U.type,key:$e,ref:Fe,props:Le,_owner:Ze}},Jt.createContext=function(U){return U={$$typeof:s,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:o,_context:U},U.Consumer=U},Jt.createElement=K,Jt.createFactory=function(U){var xe=K.bind(null,U);return xe.type=U,xe},Jt.createRef=function(){return{current:null}},Jt.forwardRef=function(U){return{$$typeof:l,render:U}},Jt.isValidElement=se,Jt.lazy=function(U){return{$$typeof:d,_payload:{_status:-1,_result:U},_init:Me}},Jt.memo=function(U,xe){return{$$typeof:h,type:U,compare:xe===void 0?null:xe}},Jt.startTransition=function(U){var xe=he.transition;he.transition={};try{U()}finally{he.transition=xe}},Jt.unstable_act=we,Jt.useCallback=function(U,xe){return Pe.current.useCallback(U,xe)},Jt.useContext=function(U){return Pe.current.useContext(U)},Jt.useDebugValue=function(){},Jt.useDeferredValue=function(U){return Pe.current.useDeferredValue(U)},Jt.useEffect=function(U,xe){return Pe.current.useEffect(U,xe)},Jt.useId=function(){return Pe.current.useId()},Jt.useImperativeHandle=function(U,xe,Ie){return Pe.current.useImperativeHandle(U,xe,Ie)},Jt.useInsertionEffect=function(U,xe){return Pe.current.useInsertionEffect(U,xe)},Jt.useLayoutEffect=function(U,xe){return Pe.current.useLayoutEffect(U,xe)},Jt.useMemo=function(U,xe){return Pe.current.useMemo(U,xe)},Jt.useReducer=function(U,xe,Ie){return Pe.current.useReducer(U,xe,Ie)},Jt.useRef=function(U){return Pe.current.useRef(U)},Jt.useState=function(U){return Pe.current.useState(U)},Jt.useSyncExternalStore=function(U,xe,Ie){return Pe.current.useSyncExternalStore(U,xe,Ie)},Jt.useTransition=function(){return Pe.current.useTransition()},Jt.version="18.3.1",Jt}var Xy;function E4(){return Xy||(Xy=1,H7.exports=Cb()),H7.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky;function xb(){if(Ky)return mg;Ky=1;var e=E4(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(l,c,h){var d,g={},v=null,y=null;h!==void 0&&(v=""+h),c.key!==void 0&&(v=""+c.key),c.ref!==void 0&&(y=c.ref);for(d in c)r.call(c,d)&&!o.hasOwnProperty(d)&&(g[d]=c[d]);if(l&&l.defaultProps)for(d in c=l.defaultProps,c)g[d]===void 0&&(g[d]=c[d]);return{$$typeof:t,type:l,key:v,ref:y,props:g,_owner:i.current}}return mg.Fragment=n,mg.jsx=s,mg.jsxs=s,mg}var Yy;function Eb(){return Yy||(Yy=1,N7.exports=xb()),N7.exports}var M=Eb(),G=E4();const xt=Cc(G),Pb=wb({__proto__:null,default:xt},[G]);var am={},G7={exports:{}},go={},j7={exports:{}},$7={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qy;function Sb(){return qy||(qy=1,function(e){function t(he,le){var we=he.length;he.push(le);e:for(;0<we;){var U=we-1>>>1,xe=he[U];if(0<i(xe,le))he[U]=le,he[we]=xe,we=U;else break e}}function n(he){return he.length===0?null:he[0]}function r(he){if(he.length===0)return null;var le=he[0],we=he.pop();if(we!==le){he[0]=we;e:for(var U=0,xe=he.length,Ie=xe>>>1;U<Ie;){var Le=2*(U+1)-1,$e=he[Le],Fe=Le+1,Ze=he[Fe];if(0>i($e,we))Fe<xe&&0>i(Ze,$e)?(he[U]=Ze,he[Fe]=we,U=Fe):(he[U]=$e,he[Le]=we,U=Le);else if(Fe<xe&&0>i(Ze,we))he[U]=Ze,he[Fe]=we,U=Fe;else break e}}return le}function i(he,le){var we=he.sortIndex-le.sortIndex;return we!==0?we:he.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var c=[],h=[],d=1,g=null,v=3,y=!1,x=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(he){for(var le=n(h);le!==null;){if(le.callback===null)r(h);else if(le.startTime<=he)r(h),le.sortIndex=le.expirationTime,t(c,le);else break;le=n(h)}}function k(he){if(E=!1,R(he),!x)if(n(c)!==null)x=!0,Me(O);else{var le=n(h);le!==null&&Pe(k,le.startTime-he)}}function O(he,le){x=!1,E&&(E=!1,D(K),K=-1),y=!0;var we=v;try{for(R(le),g=n(c);g!==null&&(!(g.expirationTime>le)||he&&!me());){var U=g.callback;if(typeof U=="function"){g.callback=null,v=g.priorityLevel;var xe=U(g.expirationTime<=le);le=e.unstable_now(),typeof xe=="function"?g.callback=xe:g===n(c)&&r(c),R(le)}else r(c);g=n(c)}if(g!==null)var Ie=!0;else{var Le=n(h);Le!==null&&Pe(k,Le.startTime-le),Ie=!1}return Ie}finally{g=null,v=we,y=!1}}var $=!1,z=null,K=-1,te=5,se=-1;function me(){return!(e.unstable_now()-se<te)}function ne(){if(z!==null){var he=e.unstable_now();se=he;var le=!0;try{le=z(!0,he)}finally{le?oe():($=!1,z=null)}}else $=!1}var oe;if(typeof S=="function")oe=function(){S(ne)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,ge=ve.port2;ve.port1.onmessage=ne,oe=function(){ge.postMessage(null)}}else oe=function(){T(ne,0)};function Me(he){z=he,$||($=!0,oe())}function Pe(he,le){K=T(function(){he(e.unstable_now())},le)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(he){he.callback=null},e.unstable_continueExecution=function(){x||y||(x=!0,Me(O))},e.unstable_forceFrameRate=function(he){0>he||125<he?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<he?Math.floor(1e3/he):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(he){switch(v){case 1:case 2:case 3:var le=3;break;default:le=v}var we=v;v=le;try{return he()}finally{v=we}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(he,le){switch(he){case 1:case 2:case 3:case 4:case 5:break;default:he=3}var we=v;v=he;try{return le()}finally{v=we}},e.unstable_scheduleCallback=function(he,le,we){var U=e.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?U+we:U):we=U,he){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=we+xe,he={id:d++,callback:le,priorityLevel:he,startTime:we,expirationTime:xe,sortIndex:-1},we>U?(he.sortIndex=we,t(h,he),n(c)===null&&he===n(h)&&(E?(D(K),K=-1):E=!0,Pe(k,we-U))):(he.sortIndex=xe,t(c,he),x||y||(x=!0,Me(O))),he},e.unstable_shouldYield=me,e.unstable_wrapCallback=function(he){var le=v;return function(){var we=v;v=le;try{return he.apply(this,arguments)}finally{v=we}}}}($7)),$7}var Zy;function Tb(){return Zy||(Zy=1,j7.exports=Sb()),j7.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qy;function Db(){if(Qy)return go;Qy=1;var e=E4(),t=Tb();function n(a){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+a,m=1;m<arguments.length;m++)u+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+a+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(a,u){s(a,u),s(a+"Capture",u)}function s(a,u){for(i[a]=u,a=0;a<u.length;a++)r.add(u[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},g={};function v(a){return c.call(g,a)?!0:c.call(d,a)?!1:h.test(a)?g[a]=!0:(d[a]=!0,!1)}function y(a,u,m,w){if(m!==null&&m.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return w?!1:m!==null?!m.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function x(a,u,m,w){if(u===null||typeof u>"u"||y(a,u,m,w))return!0;if(w)return!1;if(m!==null)switch(m.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function E(a,u,m,w,P,A,_){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=w,this.attributeNamespace=P,this.mustUseProperty=m,this.propertyName=a,this.type=u,this.sanitizeURL=A,this.removeEmptyString=_}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){T[a]=new E(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var u=a[0];T[u]=new E(u,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){T[a]=new E(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){T[a]=new E(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){T[a]=new E(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){T[a]=new E(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){T[a]=new E(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){T[a]=new E(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){T[a]=new E(a,5,!1,a.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function S(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var u=a.replace(D,S);T[u]=new E(u,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var u=a.replace(D,S);T[u]=new E(u,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var u=a.replace(D,S);T[u]=new E(u,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){T[a]=new E(a,1,!1,a.toLowerCase(),null,!1,!1)}),T.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){T[a]=new E(a,1,!1,a.toLowerCase(),null,!0,!0)});function R(a,u,m,w){var P=T.hasOwnProperty(u)?T[u]:null;(P!==null?P.type!==0:w||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(x(u,m,P,w)&&(m=null),w||P===null?v(u)&&(m===null?a.removeAttribute(u):a.setAttribute(u,""+m)):P.mustUseProperty?a[P.propertyName]=m===null?P.type===3?!1:"":m:(u=P.attributeName,w=P.attributeNamespace,m===null?a.removeAttribute(u):(P=P.type,m=P===3||P===4&&m===!0?"":""+m,w?a.setAttributeNS(w,u,m):a.setAttribute(u,m))))}var k=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),$=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),se=Symbol.for("react.provider"),me=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),ge=Symbol.for("react.memo"),Me=Symbol.for("react.lazy"),Pe=Symbol.for("react.offscreen"),he=Symbol.iterator;function le(a){return a===null||typeof a!="object"?null:(a=he&&a[he]||a["@@iterator"],typeof a=="function"?a:null)}var we=Object.assign,U;function xe(a){if(U===void 0)try{throw Error()}catch(m){var u=m.stack.trim().match(/\n( *(at )?)/);U=u&&u[1]||""}return`
`+U+a}var Ie=!1;function Le(a,u){if(!a||Ie)return"";Ie=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(Ce){var w=Ce}Reflect.construct(a,[],u)}else{try{u.call()}catch(Ce){w=Ce}a.call(u.prototype)}else{try{throw Error()}catch(Ce){w=Ce}a()}}catch(Ce){if(Ce&&w&&typeof Ce.stack=="string"){for(var P=Ce.stack.split(`
`),A=w.stack.split(`
`),_=P.length-1,V=A.length-1;1<=_&&0<=V&&P[_]!==A[V];)V--;for(;1<=_&&0<=V;_--,V--)if(P[_]!==A[V]){if(_!==1||V!==1)do if(_--,V--,0>V||P[_]!==A[V]){var Z=`
`+P[_].replace(" at new "," at ");return a.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",a.displayName)),Z}while(1<=_&&0<=V);break}}}finally{Ie=!1,Error.prepareStackTrace=m}return(a=a?a.displayName||a.name:"")?xe(a):""}function $e(a){switch(a.tag){case 5:return xe(a.type);case 16:return xe("Lazy");case 13:return xe("Suspense");case 19:return xe("SuspenseList");case 0:case 2:case 15:return a=Le(a.type,!1),a;case 11:return a=Le(a.type.render,!1),a;case 1:return a=Le(a.type,!0),a;default:return""}}function Fe(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case z:return"Fragment";case $:return"Portal";case te:return"Profiler";case K:return"StrictMode";case oe:return"Suspense";case ve:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case me:return(a.displayName||"Context")+".Consumer";case se:return(a._context.displayName||"Context")+".Provider";case ne:var u=a.render;return a=a.displayName,a||(a=u.displayName||u.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case ge:return u=a.displayName||null,u!==null?u:Fe(a.type)||"Memo";case Me:u=a._payload,a=a._init;try{return Fe(a(u))}catch{}}return null}function Ze(a){var u=a.type;switch(a.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=u.render,a=a.displayName||a.name||"",u.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fe(u);case 8:return u===K?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function et(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Q(a){var u=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Se(a){var u=Q(a)?"checked":"value",m=Object.getOwnPropertyDescriptor(a.constructor.prototype,u),w=""+a[u];if(!a.hasOwnProperty(u)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var P=m.get,A=m.set;return Object.defineProperty(a,u,{configurable:!0,get:function(){return P.call(this)},set:function(_){w=""+_,A.call(this,_)}}),Object.defineProperty(a,u,{enumerable:m.enumerable}),{getValue:function(){return w},setValue:function(_){w=""+_},stopTracking:function(){a._valueTracker=null,delete a[u]}}}}function Te(a){a._valueTracker||(a._valueTracker=Se(a))}function ke(a){if(!a)return!1;var u=a._valueTracker;if(!u)return!0;var m=u.getValue(),w="";return a&&(w=Q(a)?a.checked?"true":"false":a.value),a=w,a!==m?(u.setValue(a),!0):!1}function vt(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Ye(a,u){var m=u.checked;return we({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??a._wrapperState.initialChecked})}function At(a,u){var m=u.defaultValue==null?"":u.defaultValue,w=u.checked!=null?u.checked:u.defaultChecked;m=et(u.value!=null?u.value:m),a._wrapperState={initialChecked:w,initialValue:m,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function hn(a,u){u=u.checked,u!=null&&R(a,"checked",u,!1)}function Mt(a,u){hn(a,u);var m=et(u.value),w=u.type;if(m!=null)w==="number"?(m===0&&a.value===""||a.value!=m)&&(a.value=""+m):a.value!==""+m&&(a.value=""+m);else if(w==="submit"||w==="reset"){a.removeAttribute("value");return}u.hasOwnProperty("value")?Cn(a,u.type,m):u.hasOwnProperty("defaultValue")&&Cn(a,u.type,et(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(a.defaultChecked=!!u.defaultChecked)}function kn(a,u,m){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var w=u.type;if(!(w!=="submit"&&w!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+a._wrapperState.initialValue,m||u===a.value||(a.value=u),a.defaultValue=u}m=a.name,m!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,m!==""&&(a.name=m)}function Cn(a,u,m){(u!=="number"||vt(a.ownerDocument)!==a)&&(m==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+m&&(a.defaultValue=""+m))}var dn=Array.isArray;function _t(a,u,m,w){if(a=a.options,u){u={};for(var P=0;P<m.length;P++)u["$"+m[P]]=!0;for(m=0;m<a.length;m++)P=u.hasOwnProperty("$"+a[m].value),a[m].selected!==P&&(a[m].selected=P),P&&w&&(a[m].defaultSelected=!0)}else{for(m=""+et(m),u=null,P=0;P<a.length;P++){if(a[P].value===m){a[P].selected=!0,w&&(a[P].defaultSelected=!0);return}u!==null||a[P].disabled||(u=a[P])}u!==null&&(u.selected=!0)}}function an(a,u){if(u.dangerouslySetInnerHTML!=null)throw Error(n(91));return we({},u,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function pr(a,u){var m=u.value;if(m==null){if(m=u.children,u=u.defaultValue,m!=null){if(u!=null)throw Error(n(92));if(dn(m)){if(1<m.length)throw Error(n(93));m=m[0]}u=m}u==null&&(u=""),m=u}a._wrapperState={initialValue:et(m)}}function Ki(a,u){var m=et(u.value),w=et(u.defaultValue);m!=null&&(m=""+m,m!==a.value&&(a.value=m),u.defaultValue==null&&a.defaultValue!==m&&(a.defaultValue=m)),w!=null&&(a.defaultValue=""+w)}function $n(a){var u=a.textContent;u===a._wrapperState.initialValue&&u!==""&&u!==null&&(a.value=u)}function Yi(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mr(a,u){return a==null||a==="http://www.w3.org/1999/xhtml"?Yi(u):a==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var wn,On=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,m,w,P){MSApp.execUnsafeLocalFunction(function(){return a(u,m,w,P)})}:a}(function(a,u){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=u;else{for(wn=wn||document.createElement("div"),wn.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=wn.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;u.firstChild;)a.appendChild(u.firstChild)}});function Lr(a,u){if(u){var m=a.firstChild;if(m&&m===a.lastChild&&m.nodeType===3){m.nodeValue=u;return}}a.textContent=u}var ki={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fs=["Webkit","ms","Moz","O"];Object.keys(ki).forEach(function(a){Fs.forEach(function(u){u=u+a.charAt(0).toUpperCase()+a.substring(1),ki[u]=ki[a]})});function ns(a,u,m){return u==null||typeof u=="boolean"||u===""?"":m||typeof u!="number"||u===0||ki.hasOwnProperty(a)&&ki[a]?(""+u).trim():u+"px"}function Mo(a,u){a=a.style;for(var m in u)if(u.hasOwnProperty(m)){var w=m.indexOf("--")===0,P=ns(m,u[m],w);m==="float"&&(m="cssFloat"),w?a.setProperty(m,P):a[m]=P}}var ll=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ro(a,u){if(u){if(ll[a]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(n(137,a));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(n(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(n(61))}if(u.style!=null&&typeof u.style!="object")throw Error(n(62))}}function qi(a,u){if(a.indexOf("-")===-1)return typeof u.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uu=null;function Rc(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Zi=null,Ls=null,_s=null;function bc(a){if(a=Gr(a)){if(typeof Zi!="function")throw Error(n(280));var u=a.stateNode;u&&(u=Kh(u),Zi(a.stateNode,a.type,u))}}function gh(a){Ls?_s?_s.push(a):_s=[a]:Ls=a}function ph(){if(Ls){var a=Ls,u=_s;if(_s=Ls=null,bc(a),u)for(a=0;a<u.length;a++)bc(u[a])}}function mh(a,u){return a(u)}function kc(){}var Oc=!1;function vh(a,u,m){if(Oc)return a(u,m);Oc=!0;try{return mh(a,u,m)}finally{Oc=!1,(Ls!==null||_s!==null)&&(kc(),ph())}}function ul(a,u){var m=a.stateNode;if(m===null)return null;var w=Kh(m);if(w===null)return null;m=w[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(a=a.type,w=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!w;break e;default:a=!1}if(a)return null;if(m&&typeof m!="function")throw Error(n(231,u,typeof m));return m}var cl=!1;if(l)try{var fl={};Object.defineProperty(fl,"passive",{get:function(){cl=!0}}),window.addEventListener("test",fl,fl),window.removeEventListener("test",fl,fl)}catch{cl=!1}function Ic(a,u,m,w,P,A,_,V,Z){var Ce=Array.prototype.slice.call(arguments,3);try{u.apply(m,Ce)}catch(Ne){this.onError(Ne)}}var ma=!1,cu=null,fu=!1,Fc=null,Z0={onError:function(a){ma=!0,cu=a}};function Q0(a,u,m,w,P,A,_,V,Z){ma=!1,cu=null,Ic.apply(Z0,arguments)}function J0(a,u,m,w,P,A,_,V,Z){if(Q0.apply(this,arguments),ma){if(ma){var Ce=cu;ma=!1,cu=null}else throw Error(n(198));fu||(fu=!0,Fc=Ce)}}function Ns(a){var u=a,m=a;if(a.alternate)for(;u.return;)u=u.return;else{a=u;do u=a,(u.flags&4098)!==0&&(m=u.return),a=u.return;while(a)}return u.tag===3?m:null}function Lc(a){if(a.tag===13){var u=a.memoizedState;if(u===null&&(a=a.alternate,a!==null&&(u=a.memoizedState)),u!==null)return u.dehydrated}return null}function yh(a){if(Ns(a)!==a)throw Error(n(188))}function e1(a){var u=a.alternate;if(!u){if(u=Ns(a),u===null)throw Error(n(188));return u!==a?null:a}for(var m=a,w=u;;){var P=m.return;if(P===null)break;var A=P.alternate;if(A===null){if(w=P.return,w!==null){m=w;continue}break}if(P.child===A.child){for(A=P.child;A;){if(A===m)return yh(P),a;if(A===w)return yh(P),u;A=A.sibling}throw Error(n(188))}if(m.return!==w.return)m=P,w=A;else{for(var _=!1,V=P.child;V;){if(V===m){_=!0,m=P,w=A;break}if(V===w){_=!0,w=P,m=A;break}V=V.sibling}if(!_){for(V=A.child;V;){if(V===m){_=!0,m=A,w=P;break}if(V===w){_=!0,w=A,m=P;break}V=V.sibling}if(!_)throw Error(n(189))}}if(m.alternate!==w)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?a:u}function wh(a){return a=e1(a),a!==null?Ch(a):null}function Ch(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var u=Ch(a);if(u!==null)return u;a=a.sibling}return null}var xh=t.unstable_scheduleCallback,Eh=t.unstable_cancelCallback,hu=t.unstable_shouldYield,Ph=t.unstable_requestPaint,xn=t.unstable_now,Sh=t.unstable_getCurrentPriorityLevel,rs=t.unstable_ImmediatePriority,Th=t.unstable_UserBlockingPriority,is=t.unstable_NormalPriority,du=t.unstable_LowPriority,_c=t.unstable_IdlePriority,gu=null,yi=null;function t1(a){if(yi&&typeof yi.onCommitFiberRoot=="function")try{yi.onCommitFiberRoot(gu,a,void 0,(a.current.flags&128)===128)}catch{}}var Oi=Math.clz32?Math.clz32:W,H=Math.log,q=Math.LN2;function W(a){return a>>>=0,a===0?32:31-(H(a)/q|0)|0}var ie=64,ue=4194304;function ee(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function De(a,u){var m=a.pendingLanes;if(m===0)return 0;var w=0,P=a.suspendedLanes,A=a.pingedLanes,_=m&268435455;if(_!==0){var V=_&~P;V!==0?w=ee(V):(A&=_,A!==0&&(w=ee(A)))}else _=m&~P,_!==0?w=ee(_):A!==0&&(w=ee(A));if(w===0)return 0;if(u!==0&&u!==w&&(u&P)===0&&(P=w&-w,A=u&-u,P>=A||P===16&&(A&4194240)!==0))return u;if((w&4)!==0&&(w|=m&16),u=a.entangledLanes,u!==0)for(a=a.entanglements,u&=w;0<u;)m=31-Oi(u),P=1<<m,w|=a[m],u&=~P;return w}function He(a,u){switch(a){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ve(a,u){for(var m=a.suspendedLanes,w=a.pingedLanes,P=a.expirationTimes,A=a.pendingLanes;0<A;){var _=31-Oi(A),V=1<<_,Z=P[_];Z===-1?((V&m)===0||(V&w)!==0)&&(P[_]=He(V,u)):Z<=u&&(a.expiredLanes|=V),A&=~V}}function We(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function qe(){var a=ie;return ie<<=1,(ie&4194240)===0&&(ie=64),a}function st(a){for(var u=[],m=0;31>m;m++)u.push(a);return u}function Nt(a,u,m){a.pendingLanes|=u,u!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,u=31-Oi(u),a[u]=m}function ln(a,u){var m=a.pendingLanes&~u;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=u,a.mutableReadLanes&=u,a.entangledLanes&=u,u=a.entanglements;var w=a.eventTimes;for(a=a.expirationTimes;0<m;){var P=31-Oi(m),A=1<<P;u[P]=0,w[P]=-1,a[P]=-1,m&=~A}}function en(a,u){var m=a.entangledLanes|=u;for(a=a.entanglements;m;){var w=31-Oi(m),P=1<<w;P&u|a[w]&u&&(a[w]|=u),m&=~P}}var Et=0;function Tn(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var _r,os,pu,Nc,hl,Hc=!1,dl=[],ss=null,bo=null,va=null,mu=new Map,Gc=new Map,ya=[],$v="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Up(a,u){switch(a){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":bo=null;break;case"mouseover":case"mouseout":va=null;break;case"pointerover":case"pointerout":mu.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gc.delete(u.pointerId)}}function gl(a,u,m,w,P,A){return a===null||a.nativeEvent!==A?(a={blockedOn:u,domEventName:m,eventSystemFlags:w,nativeEvent:A,targetContainers:[P]},u!==null&&(u=Gr(u),u!==null&&os(u)),a):(a.eventSystemFlags|=w,u=a.targetContainers,P!==null&&u.indexOf(P)===-1&&u.push(P),a)}function Wv(a,u,m,w,P){switch(u){case"focusin":return ss=gl(ss,a,u,m,w,P),!0;case"dragenter":return bo=gl(bo,a,u,m,w,P),!0;case"mouseover":return va=gl(va,a,u,m,w,P),!0;case"pointerover":var A=P.pointerId;return mu.set(A,gl(mu.get(A)||null,a,u,m,w,P)),!0;case"gotpointercapture":return A=P.pointerId,Gc.set(A,gl(Gc.get(A)||null,a,u,m,w,P)),!0}return!1}function Xp(a){var u=cs(a.target);if(u!==null){var m=Ns(u);if(m!==null){if(u=m.tag,u===13){if(u=Lc(m),u!==null){a.blockedOn=u,hl(a.priority,function(){pu(m)});return}}else if(u===3&&m.stateNode.current.memoizedState.isDehydrated){a.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Dh(a){if(a.blockedOn!==null)return!1;for(var u=a.targetContainers;0<u.length;){var m=Mh(a.domEventName,a.eventSystemFlags,u[0],a.nativeEvent);if(m===null){m=a.nativeEvent;var w=new m.constructor(m.type,m);uu=w,m.target.dispatchEvent(w),uu=null}else return u=Gr(m),u!==null&&os(u),a.blockedOn=m,!1;u.shift()}return!0}function Kp(a,u,m){Dh(a)&&m.delete(u)}function zv(){Hc=!1,ss!==null&&Dh(ss)&&(ss=null),bo!==null&&Dh(bo)&&(bo=null),va!==null&&Dh(va)&&(va=null),mu.forEach(Kp),Gc.forEach(Kp)}function Dn(a,u){a.blockedOn===u&&(a.blockedOn=null,Hc||(Hc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,zv)))}function En(a){function u(P){return Dn(P,a)}if(0<dl.length){Dn(dl[0],a);for(var m=1;m<dl.length;m++){var w=dl[m];w.blockedOn===a&&(w.blockedOn=null)}}for(ss!==null&&Dn(ss,a),bo!==null&&Dn(bo,a),va!==null&&Dn(va,a),mu.forEach(u),Gc.forEach(u),m=0;m<ya.length;m++)w=ya[m],w.blockedOn===a&&(w.blockedOn=null);for(;0<ya.length&&(m=ya[0],m.blockedOn===null);)Xp(m),m.blockedOn===null&&ya.shift()}var vu=k.ReactCurrentBatchConfig,Ah=!0;function Vv(a,u,m,w){var P=Et,A=vu.transition;vu.transition=null;try{Et=1,n1(a,u,m,w)}finally{Et=P,vu.transition=A}}function Uv(a,u,m,w){var P=Et,A=vu.transition;vu.transition=null;try{Et=4,n1(a,u,m,w)}finally{Et=P,vu.transition=A}}function n1(a,u,m,w){if(Ah){var P=Mh(a,u,m,w);if(P===null)w1(a,u,w,Bh,m),Up(a,w);else if(Wv(P,a,u,m,w))w.stopPropagation();else if(Up(a,w),u&4&&-1<$v.indexOf(a)){for(;P!==null;){var A=Gr(P);if(A!==null&&_r(A),A=Mh(a,u,m,w),A===null&&w1(a,u,w,Bh,m),A===P)break;P=A}P!==null&&w.stopPropagation()}else w1(a,u,w,null,m)}}var Bh=null;function Mh(a,u,m,w){if(Bh=null,a=Rc(w),a=cs(a),a!==null)if(u=Ns(a),u===null)a=null;else if(m=u.tag,m===13){if(a=Lc(u),a!==null)return a;a=null}else if(m===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;a=null}else u!==a&&(a=null);return Bh=a,null}function Yp(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sh()){case rs:return 1;case Th:return 4;case is:case du:return 16;case _c:return 536870912;default:return 16}default:return 16}}var Wn=null,jc=null,as=null;function r1(){if(as)return as;var a,u=jc,m=u.length,w,P="value"in Wn?Wn.value:Wn.textContent,A=P.length;for(a=0;a<m&&u[a]===P[a];a++);var _=m-a;for(w=1;w<=_&&u[m-w]===P[A-w];w++);return as=P.slice(a,1<w?1-w:void 0)}function yu(a){var u=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&u===13&&(a=13)):a=u,a===10&&(a=13),32<=a||a===13?a:0}function ni(){return!0}function i1(){return!1}function wi(a){function u(m,w,P,A,_){this._reactName=m,this._targetInst=P,this.type=w,this.nativeEvent=A,this.target=_,this.currentTarget=null;for(var V in a)a.hasOwnProperty(V)&&(m=a[V],this[V]=m?m(A):A[V]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?ni:i1,this.isPropagationStopped=i1,this}return we(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=ni)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=ni)},persist:function(){},isPersistent:ni}),u}var pl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rh=wi(pl),wu=we({},pl,{view:0,detail:0}),qp=wi(wu),ri,o1,Nr,bh=we({},wu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:c1,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Nr&&(Nr&&a.type==="mousemove"?(ri=a.screenX-Nr.screenX,o1=a.screenY-Nr.screenY):o1=ri=0,Nr=a),ri)},movementY:function(a){return"movementY"in a?a.movementY:o1}}),s1=wi(bh),wa=we({},bh,{dataTransfer:0}),kh=wi(wa),a1=we({},wu,{relatedTarget:0}),In=wi(a1),Ca=we({},pl,{animationName:0,elapsedTime:0,pseudoElement:0}),l1=wi(Ca),Xv=we({},pl,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),u1=wi(Xv),Kv=we({},pl,{data:0}),Zp=wi(Kv),Yv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Oh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cu(a){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(a):(a=Oh[a])?!!u[a]:!1}function c1(){return Cu}var Jp=we({},wu,{key:function(a){if(a.key){var u=Yv[a.key]||a.key;if(u!=="Unidentified")return u}return a.type==="keypress"?(a=yu(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Qp[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:c1,charCode:function(a){return a.type==="keypress"?yu(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?yu(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),e2=wi(Jp),f1=we({},bh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ih=wi(f1),t2=we({},wu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:c1}),qv=wi(t2),h1=we({},pl,{propertyName:0,elapsedTime:0,pseudoElement:0}),d1=wi(h1),Zv=we({},bh,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),n2=wi(Zv),Ii=[9,13,27,32],$c=l&&"CompositionEvent"in window,Hs=null;l&&"documentMode"in document&&(Hs=document.documentMode);var r2=l&&"TextEvent"in window&&!Hs,g1=l&&(!$c||Hs&&8<Hs&&11>=Hs),i2=" ",o2=!1;function s2(a,u){switch(a){case"keyup":return Ii.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function a2(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var xu=!1;function Eu(a,u){switch(a){case"compositionend":return a2(u);case"keypress":return u.which!==32?null:(o2=!0,i2);case"textInput":return a=u.data,a===i2&&o2?null:a;default:return null}}function Qv(a,u){if(xu)return a==="compositionend"||!$c&&s2(a,u)?(a=r1(),as=jc=Wn=null,xu=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return g1&&u.locale!=="ko"?null:u.data;default:return null}}var Jv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fh(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u==="input"?!!Jv[a.type]:u==="textarea"}function p1(a,u,m,w){gh(w),u=zh(u,"onChange"),0<u.length&&(m=new Rh("onChange","change",null,m,w),a.push({event:m,listeners:u}))}var Qi=null,xa=null;function e7(a){g2(a,0)}function Lh(a){var u=$t(a);if(ke(u))return a}function t7(a,u){if(a==="change")return u}var ml=!1;if(l){var Fi;if(l){var _h="oninput"in document;if(!_h){var l2=document.createElement("div");l2.setAttribute("oninput","return;"),_h=typeof l2.oninput=="function"}Fi=_h}else Fi=!1;ml=Fi&&(!document.documentMode||9<document.documentMode)}function u2(){Qi&&(Qi.detachEvent("onpropertychange",c2),xa=Qi=null)}function c2(a){if(a.propertyName==="value"&&Lh(xa)){var u=[];p1(u,xa,a,Rc(a)),vh(e7,u)}}function n7(a,u,m){a==="focusin"?(u2(),Qi=u,xa=m,Qi.attachEvent("onpropertychange",c2)):a==="focusout"&&u2()}function r7(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Lh(xa)}function Pu(a,u){if(a==="click")return Lh(u)}function ae(a,u){if(a==="input"||a==="change")return Lh(u)}function Ae(a,u){return a===u&&(a!==0||1/a===1/u)||a!==a&&u!==u}var ye=typeof Object.is=="function"?Object.is:Ae;function nt(a,u){if(ye(a,u))return!0;if(typeof a!="object"||a===null||typeof u!="object"||u===null)return!1;var m=Object.keys(a),w=Object.keys(u);if(m.length!==w.length)return!1;for(w=0;w<m.length;w++){var P=m[w];if(!c.call(u,P)||!ye(a[P],u[P]))return!1}return!0}function Ft(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function gn(a,u){var m=Ft(a);a=0;for(var w;m;){if(m.nodeType===3){if(w=a+m.textContent.length,a<=u&&w>=u)return{node:m,offset:u-a};a=w}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Ft(m)}}function lr(a,u){return a&&u?a===u?!0:a&&a.nodeType===3?!1:u&&u.nodeType===3?lr(a,u.parentNode):"contains"in a?a.contains(u):a.compareDocumentPosition?!!(a.compareDocumentPosition(u)&16):!1:!1}function Bn(){for(var a=window,u=vt();u instanceof a.HTMLIFrameElement;){try{var m=typeof u.contentWindow.location.href=="string"}catch{m=!1}if(m)a=u.contentWindow;else break;u=vt(a.document)}return u}function Wc(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u&&(u==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||u==="textarea"||a.contentEditable==="true")}function i7(a){var u=Bn(),m=a.focusedElem,w=a.selectionRange;if(u!==m&&m&&m.ownerDocument&&lr(m.ownerDocument.documentElement,m)){if(w!==null&&Wc(m)){if(u=w.start,a=w.end,a===void 0&&(a=u),"selectionStart"in m)m.selectionStart=u,m.selectionEnd=Math.min(a,m.value.length);else if(a=(u=m.ownerDocument||document)&&u.defaultView||window,a.getSelection){a=a.getSelection();var P=m.textContent.length,A=Math.min(w.start,P);w=w.end===void 0?A:Math.min(w.end,P),!a.extend&&A>w&&(P=w,w=A,A=P),P=gn(m,A);var _=gn(m,w);P&&_&&(a.rangeCount!==1||a.anchorNode!==P.node||a.anchorOffset!==P.offset||a.focusNode!==_.node||a.focusOffset!==_.offset)&&(u=u.createRange(),u.setStart(P.node,P.offset),a.removeAllRanges(),A>w?(a.addRange(u),a.extend(_.node,_.offset)):(u.setEnd(_.node,_.offset),a.addRange(u)))}}for(u=[],a=m;a=a.parentNode;)a.nodeType===1&&u.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<u.length;m++)a=u[m],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Ji=l&&"documentMode"in document&&11>=document.documentMode,Gs=null,m1=null,ls=null,Su=!1;function zc(a,u,m){var w=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Su||Gs==null||Gs!==vt(w)||(w=Gs,"selectionStart"in w&&Wc(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),ls&&nt(ls,w)||(ls=w,w=zh(m1,"onSelect"),0<w.length&&(u=new Rh("onSelect","select",null,u,m),a.push({event:u,listeners:w}),u.target=Gs)))}function pn(a,u){var m={};return m[a.toLowerCase()]=u.toLowerCase(),m["Webkit"+a]="webkit"+u,m["Moz"+a]="moz"+u,m}var Tu={animationend:pn("Animation","AnimationEnd"),animationiteration:pn("Animation","AnimationIteration"),animationstart:pn("Animation","AnimationStart"),transitionend:pn("Transition","TransitionEnd")},Nh={},Vc={};l&&(Vc=document.createElement("div").style,"AnimationEvent"in window||(delete Tu.animationend.animation,delete Tu.animationiteration.animation,delete Tu.animationstart.animation),"TransitionEvent"in window||delete Tu.transitionend.transition);function Hh(a){if(Nh[a])return Nh[a];if(!Tu[a])return a;var u=Tu[a],m;for(m in u)if(u.hasOwnProperty(m)&&m in Vc)return Nh[a]=u[m];return a}var f2=Hh("animationend"),h2=Hh("animationiteration"),Uc=Hh("animationstart"),js=Hh("transitionend"),Xc=new Map,v1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ko(a,u){Xc.set(a,u),o(u,[a])}for(var Gh=0;Gh<v1.length;Gh++){var jh=v1[Gh],$h=jh.toLowerCase(),d2=jh[0].toUpperCase()+jh.slice(1);ko($h,"on"+d2)}ko(f2,"onAnimationEnd"),ko(h2,"onAnimationIteration"),ko(Uc,"onAnimationStart"),ko("dblclick","onDoubleClick"),ko("focusin","onFocus"),ko("focusout","onBlur"),ko(js,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $s="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vl=new Set("cancel close invalid load scroll toggle".split(" ").concat($s));function Kc(a,u,m){var w=a.type||"unknown-event";a.currentTarget=m,J0(w,u,void 0,a),a.currentTarget=null}function g2(a,u){u=(u&4)!==0;for(var m=0;m<a.length;m++){var w=a[m],P=w.event;w=w.listeners;e:{var A=void 0;if(u)for(var _=w.length-1;0<=_;_--){var V=w[_],Z=V.instance,Ce=V.currentTarget;if(V=V.listener,Z!==A&&P.isPropagationStopped())break e;Kc(P,V,Ce),A=Z}else for(_=0;_<w.length;_++){if(V=w[_],Z=V.instance,Ce=V.currentTarget,V=V.listener,Z!==A&&P.isPropagationStopped())break e;Kc(P,V,Ce),A=Z}}}if(fu)throw a=Fc,fu=!1,Fc=null,a}function Nn(a,u){var m=u[Xh];m===void 0&&(m=u[Xh]=new Set);var w=a+"__bubble";m.has(w)||(Wh(u,a,2,!1),m.add(w))}function y1(a,u,m){var w=0;u&&(w|=4),Wh(m,a,w,u)}var yl="_reactListening"+Math.random().toString(36).slice(2);function Ea(a){if(!a[yl]){a[yl]=!0,r.forEach(function(m){m!=="selectionchange"&&(vl.has(m)||y1(m,!1,a),y1(m,!0,a))});var u=a.nodeType===9?a:a.ownerDocument;u===null||u[yl]||(u[yl]=!0,y1("selectionchange",!1,u))}}function Wh(a,u,m,w){switch(Yp(u)){case 1:var P=Vv;break;case 4:P=Uv;break;default:P=n1}m=P.bind(null,u,m,a),P=void 0,!cl||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(P=!0),w?P!==void 0?a.addEventListener(u,m,{capture:!0,passive:P}):a.addEventListener(u,m,!0):P!==void 0?a.addEventListener(u,m,{passive:P}):a.addEventListener(u,m,!1)}function w1(a,u,m,w,P){var A=w;if((u&1)===0&&(u&2)===0&&w!==null)e:for(;;){if(w===null)return;var _=w.tag;if(_===3||_===4){var V=w.stateNode.containerInfo;if(V===P||V.nodeType===8&&V.parentNode===P)break;if(_===4)for(_=w.return;_!==null;){var Z=_.tag;if((Z===3||Z===4)&&(Z=_.stateNode.containerInfo,Z===P||Z.nodeType===8&&Z.parentNode===P))return;_=_.return}for(;V!==null;){if(_=cs(V),_===null)return;if(Z=_.tag,Z===5||Z===6){w=A=_;continue e}V=V.parentNode}}w=w.return}vh(function(){var Ce=A,Ne=Rc(m),je=[];e:{var _e=Xc.get(a);if(_e!==void 0){var rt=Rh,at=a;switch(a){case"keypress":if(yu(m)===0)break e;case"keydown":case"keyup":rt=e2;break;case"focusin":at="focus",rt=In;break;case"focusout":at="blur",rt=In;break;case"beforeblur":case"afterblur":rt=In;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rt=s1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rt=kh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rt=qv;break;case f2:case h2:case Uc:rt=l1;break;case js:rt=d1;break;case"scroll":rt=qp;break;case"wheel":rt=n2;break;case"copy":case"cut":case"paste":rt=u1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rt=Ih}var ct=(u&4)!==0,or=!ct&&a==="scroll",de=ct?_e!==null?_e+"Capture":null:_e;ct=[];for(var re=Ce,pe;re!==null;){pe=re;var Ue=pe.stateNode;if(pe.tag===5&&Ue!==null&&(pe=Ue,de!==null&&(Ue=ul(re,de),Ue!=null&&ct.push(Du(re,Ue,pe)))),or)break;re=re.return}0<ct.length&&(_e=new rt(_e,at,null,m,Ne),je.push({event:_e,listeners:ct}))}}if((u&7)===0){e:{if(_e=a==="mouseover"||a==="pointerover",rt=a==="mouseout"||a==="pointerout",_e&&m!==uu&&(at=m.relatedTarget||m.fromElement)&&(cs(at)||at[Li]))break e;if((rt||_e)&&(_e=Ne.window===Ne?Ne:(_e=Ne.ownerDocument)?_e.defaultView||_e.parentWindow:window,rt?(at=m.relatedTarget||m.toElement,rt=Ce,at=at?cs(at):null,at!==null&&(or=Ns(at),at!==or||at.tag!==5&&at.tag!==6)&&(at=null)):(rt=null,at=Ce),rt!==at)){if(ct=s1,Ue="onMouseLeave",de="onMouseEnter",re="mouse",(a==="pointerout"||a==="pointerover")&&(ct=Ih,Ue="onPointerLeave",de="onPointerEnter",re="pointer"),or=rt==null?_e:$t(rt),pe=at==null?_e:$t(at),_e=new ct(Ue,re+"leave",rt,m,Ne),_e.target=or,_e.relatedTarget=pe,Ue=null,cs(Ne)===Ce&&(ct=new ct(de,re+"enter",at,m,Ne),ct.target=pe,ct.relatedTarget=or,Ue=ct),or=Ue,rt&&at)t:{for(ct=rt,de=at,re=0,pe=ct;pe;pe=Au(pe))re++;for(pe=0,Ue=de;Ue;Ue=Au(Ue))pe++;for(;0<re-pe;)ct=Au(ct),re--;for(;0<pe-re;)de=Au(de),pe--;for(;re--;){if(ct===de||de!==null&&ct===de.alternate)break t;ct=Au(ct),de=Au(de)}ct=null}else ct=null;rt!==null&&ur(je,_e,rt,ct,!1),at!==null&&or!==null&&ur(je,or,at,ct,!0)}}e:{if(_e=Ce?$t(Ce):window,rt=_e.nodeName&&_e.nodeName.toLowerCase(),rt==="select"||rt==="input"&&_e.type==="file")var ht=t7;else if(Fh(_e))if(ml)ht=ae;else{ht=r7;var Pt=n7}else(rt=_e.nodeName)&&rt.toLowerCase()==="input"&&(_e.type==="checkbox"||_e.type==="radio")&&(ht=Pu);if(ht&&(ht=ht(a,Ce))){p1(je,ht,m,Ne);break e}Pt&&Pt(a,_e,Ce),a==="focusout"&&(Pt=_e._wrapperState)&&Pt.controlled&&_e.type==="number"&&Cn(_e,"number",_e.value)}switch(Pt=Ce?$t(Ce):window,a){case"focusin":(Fh(Pt)||Pt.contentEditable==="true")&&(Gs=Pt,m1=Ce,ls=null);break;case"focusout":ls=m1=Gs=null;break;case"mousedown":Su=!0;break;case"contextmenu":case"mouseup":case"dragend":Su=!1,zc(je,m,Ne);break;case"selectionchange":if(Ji)break;case"keydown":case"keyup":zc(je,m,Ne)}var Ct;if($c)e:{switch(a){case"compositionstart":var Rt="onCompositionStart";break e;case"compositionend":Rt="onCompositionEnd";break e;case"compositionupdate":Rt="onCompositionUpdate";break e}Rt=void 0}else xu?s2(a,m)&&(Rt="onCompositionEnd"):a==="keydown"&&m.keyCode===229&&(Rt="onCompositionStart");Rt&&(g1&&m.locale!=="ko"&&(xu||Rt!=="onCompositionStart"?Rt==="onCompositionEnd"&&xu&&(Ct=r1()):(Wn=Ne,jc="value"in Wn?Wn.value:Wn.textContent,xu=!0)),Pt=zh(Ce,Rt),0<Pt.length&&(Rt=new Zp(Rt,a,null,m,Ne),je.push({event:Rt,listeners:Pt}),Ct?Rt.data=Ct:(Ct=a2(m),Ct!==null&&(Rt.data=Ct)))),(Ct=r2?Eu(a,m):Qv(a,m))&&(Ce=zh(Ce,"onBeforeInput"),0<Ce.length&&(Ne=new Zp("onBeforeInput","beforeinput",null,m,Ne),je.push({event:Ne,listeners:Ce}),Ne.data=Ct))}g2(je,u)})}function Du(a,u,m){return{instance:a,listener:u,currentTarget:m}}function zh(a,u){for(var m=u+"Capture",w=[];a!==null;){var P=a,A=P.stateNode;P.tag===5&&A!==null&&(P=A,A=ul(a,m),A!=null&&w.unshift(Du(a,A,P)),A=ul(a,u),A!=null&&w.push(Du(a,A,P))),a=a.return}return w}function Au(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function ur(a,u,m,w,P){for(var A=u._reactName,_=[];m!==null&&m!==w;){var V=m,Z=V.alternate,Ce=V.stateNode;if(Z!==null&&Z===w)break;V.tag===5&&Ce!==null&&(V=Ce,P?(Z=ul(m,A),Z!=null&&_.unshift(Du(m,Z,V))):P||(Z=ul(m,A),Z!=null&&_.push(Du(m,Z,V)))),m=m.return}_.length!==0&&a.push({event:u,listeners:_})}var Hr=/\r\n?/g,o7=/\u0000|\uFFFD/g;function p2(a){return(typeof a=="string"?a:""+a).replace(Hr,`
`).replace(o7,"")}function Yc(a,u,m){if(u=p2(u),p2(a)!==u&&m)throw Error(n(425))}function Vh(){}var qc=null,wl=null;function Zc(a,u){return a==="textarea"||a==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Pa=typeof setTimeout=="function"?setTimeout:void 0,Qc=typeof clearTimeout=="function"?clearTimeout:void 0,Bu=typeof Promise=="function"?Promise:void 0,Uh=typeof queueMicrotask=="function"?queueMicrotask:typeof Bu<"u"?function(a){return Bu.resolve(null).then(a).catch(Mu)}:Pa;function Mu(a){setTimeout(function(){throw a})}function C1(a,u){var m=u,w=0;do{var P=m.nextSibling;if(a.removeChild(m),P&&P.nodeType===8)if(m=P.data,m==="/$"){if(w===0){a.removeChild(P),En(u);return}w--}else m!=="$"&&m!=="$?"&&m!=="$!"||w++;m=P}while(m);En(u)}function Sa(a){for(;a!=null;a=a.nextSibling){var u=a.nodeType;if(u===1||u===3)break;if(u===8){if(u=a.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return a}function m2(a){a=a.previousSibling;for(var u=0;a;){if(a.nodeType===8){var m=a.data;if(m==="$"||m==="$!"||m==="$?"){if(u===0)return a;u--}else m==="/$"&&u++}a=a.previousSibling}return null}var Ru=Math.random().toString(36).slice(2),us="__reactFiber$"+Ru,Ta="__reactProps$"+Ru,Li="__reactContainer$"+Ru,Xh="__reactEvents$"+Ru,N="__reactListeners$"+Ru,bu="__reactHandles$"+Ru;function cs(a){var u=a[us];if(u)return u;for(var m=a.parentNode;m;){if(u=m[Li]||m[us]){if(m=u.alternate,u.child!==null||m!==null&&m.child!==null)for(a=m2(a);a!==null;){if(m=a[us])return m;a=m2(a)}return u}a=m,m=a.parentNode}return null}function Gr(a){return a=a[us]||a[Li],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function $t(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(n(33))}function Kh(a){return a[Ta]||null}var x1=[],ku=-1;function Ci(a){return{current:a}}function Hn(a){0>ku||(a.current=x1[ku],x1[ku]=null,ku--)}function Fn(a,u){ku++,x1[ku]=a.current,a.current=u}var Da={},jr=Ci(Da),xi=Ci(!1),ii=Da;function Ou(a,u){var m=a.type.contextTypes;if(!m)return Da;var w=a.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===u)return w.__reactInternalMemoizedMaskedChildContext;var P={},A;for(A in m)P[A]=u[A];return w&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=u,a.__reactInternalMemoizedMaskedChildContext=P),P}function Ei(a){return a=a.childContextTypes,a!=null}function Yh(){Hn(xi),Hn(jr)}function v2(a,u,m){if(jr.current!==Da)throw Error(n(168));Fn(jr,u),Fn(xi,m)}function y2(a,u,m){var w=a.stateNode;if(u=u.childContextTypes,typeof w.getChildContext!="function")return m;w=w.getChildContext();for(var P in w)if(!(P in u))throw Error(n(108,Ze(a)||"Unknown",P));return we({},m,w)}function eo(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Da,ii=jr.current,Fn(jr,a),Fn(xi,xi.current),!0}function w2(a,u,m){var w=a.stateNode;if(!w)throw Error(n(169));m?(a=y2(a,u,ii),w.__reactInternalMemoizedMergedChildContext=a,Hn(xi),Hn(jr),Fn(jr,a)):Hn(xi),Fn(xi,m)}var Ws=null,qh=!1,E1=!1;function C2(a){Ws===null?Ws=[a]:Ws.push(a)}function Cl(a){qh=!0,C2(a)}function Aa(){if(!E1&&Ws!==null){E1=!0;var a=0,u=Et;try{var m=Ws;for(Et=1;a<m.length;a++){var w=m[a];do w=w(!0);while(w!==null)}Ws=null,qh=!1}catch(P){throw Ws!==null&&(Ws=Ws.slice(a+1)),xh(rs,Aa),P}finally{Et=u,E1=!1}}return null}var Iu=[],$r=0,Zh=null,Qh=0,to=[],no=0,xl=null,fs=1,hs="";function El(a,u){Iu[$r++]=Qh,Iu[$r++]=Zh,Zh=a,Qh=u}function x2(a,u,m){to[no++]=fs,to[no++]=hs,to[no++]=xl,xl=a;var w=fs;a=hs;var P=32-Oi(w)-1;w&=~(1<<P),m+=1;var A=32-Oi(u)+P;if(30<A){var _=P-P%5;A=(w&(1<<_)-1).toString(32),w>>=_,P-=_,fs=1<<32-Oi(u)+P|m<<P|w,hs=A+a}else fs=1<<A|m<<P|w,hs=a}function Jc(a){a.return!==null&&(El(a,1),x2(a,1,0))}function Pl(a){for(;a===Zh;)Zh=Iu[--$r],Iu[$r]=null,Qh=Iu[--$r],Iu[$r]=null;for(;a===xl;)xl=to[--no],to[no]=null,hs=to[--no],to[no]=null,fs=to[--no],to[no]=null}var Wr=null,_i=null,Gn=!1,Oo=null;function ds(a,u){var m=uo(5,null,null,0);m.elementType="DELETED",m.stateNode=u,m.return=a,u=a.deletions,u===null?(a.deletions=[m],a.flags|=16):u.push(m)}function Jh(a,u){switch(a.tag){case 5:var m=a.type;return u=u.nodeType!==1||m.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(a.stateNode=u,Wr=a,_i=Sa(u.firstChild),!0):!1;case 6:return u=a.pendingProps===""||u.nodeType!==3?null:u,u!==null?(a.stateNode=u,Wr=a,_i=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(m=xl!==null?{id:fs,overflow:hs}:null,a.memoizedState={dehydrated:u,treeContext:m,retryLane:1073741824},m=uo(18,null,null,0),m.stateNode=u,m.return=a,a.child=m,Wr=a,_i=null,!0):!1;default:return!1}}function zs(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Pi(a){if(Gn){var u=_i;if(u){var m=u;if(!Jh(a,u)){if(zs(a))throw Error(n(418));u=Sa(m.nextSibling);var w=Wr;u&&Jh(a,u)?ds(w,m):(a.flags=a.flags&-4097|2,Gn=!1,Wr=a)}}else{if(zs(a))throw Error(n(418));a.flags=a.flags&-4097|2,Gn=!1,Wr=a}}}function E2(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Wr=a}function ef(a){if(a!==Wr)return!1;if(!Gn)return E2(a),Gn=!0,!1;var u;if((u=a.tag!==3)&&!(u=a.tag!==5)&&(u=a.type,u=u!=="head"&&u!=="body"&&!Zc(a.type,a.memoizedProps)),u&&(u=_i)){if(zs(a))throw P1(),Error(n(418));for(;u;)ds(a,u),u=Sa(u.nextSibling)}if(E2(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,u=0;a;){if(a.nodeType===8){var m=a.data;if(m==="/$"){if(u===0){_i=Sa(a.nextSibling);break e}u--}else m!=="$"&&m!=="$!"&&m!=="$?"||u++}a=a.nextSibling}_i=null}}else _i=Wr?Sa(a.stateNode.nextSibling):null;return!0}function P1(){for(var a=_i;a;)a=Sa(a.nextSibling)}function gs(){_i=Wr=null,Gn=!1}function ps(a){Oo===null?Oo=[a]:Oo.push(a)}var P2=k.ReactCurrentBatchConfig;function tf(a,u,m){if(a=m.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(n(309));var w=m.stateNode}if(!w)throw Error(n(147,a));var P=w,A=""+a;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===A?u.ref:(u=function(_){var V=P.refs;_===null?delete V[A]:V[A]=_},u._stringRef=A,u)}if(typeof a!="string")throw Error(n(284));if(!m._owner)throw Error(n(290,a))}return a}function Sl(a,u){throw a=Object.prototype.toString.call(u),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":a))}function S2(a){var u=a._init;return u(a._payload)}function S1(a){function u(de,re){if(a){var pe=de.deletions;pe===null?(de.deletions=[re],de.flags|=16):pe.push(re)}}function m(de,re){if(!a)return null;for(;re!==null;)u(de,re),re=re.sibling;return null}function w(de,re){for(de=new Map;re!==null;)re.key!==null?de.set(re.key,re):de.set(re.index,re),re=re.sibling;return de}function P(de,re){return de=Go(de,re),de.index=0,de.sibling=null,de}function A(de,re,pe){return de.index=pe,a?(pe=de.alternate,pe!==null?(pe=pe.index,pe<re?(de.flags|=2,re):pe):(de.flags|=2,re)):(de.flags|=1048576,re)}function _(de){return a&&de.alternate===null&&(de.flags|=2),de}function V(de,re,pe,Ue){return re===null||re.tag!==6?(re=cg(pe,de.mode,Ue),re.return=de,re):(re=P(re,pe),re.return=de,re)}function Z(de,re,pe,Ue){var ht=pe.type;return ht===z?Ne(de,re,pe.props.children,Ue,pe.key):re!==null&&(re.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===Me&&S2(ht)===re.type)?(Ue=P(re,pe.props),Ue.ref=tf(de,re,pe),Ue.return=de,Ue):(Ue=Id(pe.type,pe.key,pe.props,null,de.mode,Ue),Ue.ref=tf(de,re,pe),Ue.return=de,Ue)}function Ce(de,re,pe,Ue){return re===null||re.tag!==4||re.stateNode.containerInfo!==pe.containerInfo||re.stateNode.implementation!==pe.implementation?(re=fg(pe,de.mode,Ue),re.return=de,re):(re=P(re,pe.children||[]),re.return=de,re)}function Ne(de,re,pe,Ue,ht){return re===null||re.tag!==7?(re=Fl(pe,de.mode,Ue,ht),re.return=de,re):(re=P(re,pe),re.return=de,re)}function je(de,re,pe){if(typeof re=="string"&&re!==""||typeof re=="number")return re=cg(""+re,de.mode,pe),re.return=de,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case O:return pe=Id(re.type,re.key,re.props,null,de.mode,pe),pe.ref=tf(de,null,re),pe.return=de,pe;case $:return re=fg(re,de.mode,pe),re.return=de,re;case Me:var Ue=re._init;return je(de,Ue(re._payload),pe)}if(dn(re)||le(re))return re=Fl(re,de.mode,pe,null),re.return=de,re;Sl(de,re)}return null}function _e(de,re,pe,Ue){var ht=re!==null?re.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number")return ht!==null?null:V(de,re,""+pe,Ue);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case O:return pe.key===ht?Z(de,re,pe,Ue):null;case $:return pe.key===ht?Ce(de,re,pe,Ue):null;case Me:return ht=pe._init,_e(de,re,ht(pe._payload),Ue)}if(dn(pe)||le(pe))return ht!==null?null:Ne(de,re,pe,Ue,null);Sl(de,pe)}return null}function rt(de,re,pe,Ue,ht){if(typeof Ue=="string"&&Ue!==""||typeof Ue=="number")return de=de.get(pe)||null,V(re,de,""+Ue,ht);if(typeof Ue=="object"&&Ue!==null){switch(Ue.$$typeof){case O:return de=de.get(Ue.key===null?pe:Ue.key)||null,Z(re,de,Ue,ht);case $:return de=de.get(Ue.key===null?pe:Ue.key)||null,Ce(re,de,Ue,ht);case Me:var Pt=Ue._init;return rt(de,re,pe,Pt(Ue._payload),ht)}if(dn(Ue)||le(Ue))return de=de.get(pe)||null,Ne(re,de,Ue,ht,null);Sl(re,Ue)}return null}function at(de,re,pe,Ue){for(var ht=null,Pt=null,Ct=re,Rt=re=0,Pr=null;Ct!==null&&Rt<pe.length;Rt++){Ct.index>Rt?(Pr=Ct,Ct=null):Pr=Ct.sibling;var mn=_e(de,Ct,pe[Rt],Ue);if(mn===null){Ct===null&&(Ct=Pr);break}a&&Ct&&mn.alternate===null&&u(de,Ct),re=A(mn,re,Rt),Pt===null?ht=mn:Pt.sibling=mn,Pt=mn,Ct=Pr}if(Rt===pe.length)return m(de,Ct),Gn&&El(de,Rt),ht;if(Ct===null){for(;Rt<pe.length;Rt++)Ct=je(de,pe[Rt],Ue),Ct!==null&&(re=A(Ct,re,Rt),Pt===null?ht=Ct:Pt.sibling=Ct,Pt=Ct);return Gn&&El(de,Rt),ht}for(Ct=w(de,Ct);Rt<pe.length;Rt++)Pr=rt(Ct,de,Rt,pe[Rt],Ue),Pr!==null&&(a&&Pr.alternate!==null&&Ct.delete(Pr.key===null?Rt:Pr.key),re=A(Pr,re,Rt),Pt===null?ht=Pr:Pt.sibling=Pr,Pt=Pr);return a&&Ct.forEach(function(Ha){return u(de,Ha)}),Gn&&El(de,Rt),ht}function ct(de,re,pe,Ue){var ht=le(pe);if(typeof ht!="function")throw Error(n(150));if(pe=ht.call(pe),pe==null)throw Error(n(151));for(var Pt=ht=null,Ct=re,Rt=re=0,Pr=null,mn=pe.next();Ct!==null&&!mn.done;Rt++,mn=pe.next()){Ct.index>Rt?(Pr=Ct,Ct=null):Pr=Ct.sibling;var Ha=_e(de,Ct,mn.value,Ue);if(Ha===null){Ct===null&&(Ct=Pr);break}a&&Ct&&Ha.alternate===null&&u(de,Ct),re=A(Ha,re,Rt),Pt===null?ht=Ha:Pt.sibling=Ha,Pt=Ha,Ct=Pr}if(mn.done)return m(de,Ct),Gn&&El(de,Rt),ht;if(Ct===null){for(;!mn.done;Rt++,mn=pe.next())mn=je(de,mn.value,Ue),mn!==null&&(re=A(mn,re,Rt),Pt===null?ht=mn:Pt.sibling=mn,Pt=mn);return Gn&&El(de,Rt),ht}for(Ct=w(de,Ct);!mn.done;Rt++,mn=pe.next())mn=rt(Ct,de,Rt,mn.value,Ue),mn!==null&&(a&&mn.alternate!==null&&Ct.delete(mn.key===null?Rt:mn.key),re=A(mn,re,Rt),Pt===null?ht=mn:Pt.sibling=mn,Pt=mn);return a&&Ct.forEach(function(D7){return u(de,D7)}),Gn&&El(de,Rt),ht}function or(de,re,pe,Ue){if(typeof pe=="object"&&pe!==null&&pe.type===z&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case O:e:{for(var ht=pe.key,Pt=re;Pt!==null;){if(Pt.key===ht){if(ht=pe.type,ht===z){if(Pt.tag===7){m(de,Pt.sibling),re=P(Pt,pe.props.children),re.return=de,de=re;break e}}else if(Pt.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===Me&&S2(ht)===Pt.type){m(de,Pt.sibling),re=P(Pt,pe.props),re.ref=tf(de,Pt,pe),re.return=de,de=re;break e}m(de,Pt);break}else u(de,Pt);Pt=Pt.sibling}pe.type===z?(re=Fl(pe.props.children,de.mode,Ue,pe.key),re.return=de,de=re):(Ue=Id(pe.type,pe.key,pe.props,null,de.mode,Ue),Ue.ref=tf(de,re,pe),Ue.return=de,de=Ue)}return _(de);case $:e:{for(Pt=pe.key;re!==null;){if(re.key===Pt)if(re.tag===4&&re.stateNode.containerInfo===pe.containerInfo&&re.stateNode.implementation===pe.implementation){m(de,re.sibling),re=P(re,pe.children||[]),re.return=de,de=re;break e}else{m(de,re);break}else u(de,re);re=re.sibling}re=fg(pe,de.mode,Ue),re.return=de,de=re}return _(de);case Me:return Pt=pe._init,or(de,re,Pt(pe._payload),Ue)}if(dn(pe))return at(de,re,pe,Ue);if(le(pe))return ct(de,re,pe,Ue);Sl(de,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"?(pe=""+pe,re!==null&&re.tag===6?(m(de,re.sibling),re=P(re,pe),re.return=de,de=re):(m(de,re),re=cg(pe,de.mode,Ue),re.return=de,de=re),_(de)):m(de,re)}return or}var Qn=S1(!0),ed=S1(!1),nf=Ci(null),Ni=null,Ba=null,Fu=null;function Vs(){Fu=Ba=Ni=null}function td(a){var u=nf.current;Hn(nf),a._currentValue=u}function Br(a,u,m){for(;a!==null;){var w=a.alternate;if((a.childLanes&u)!==u?(a.childLanes|=u,w!==null&&(w.childLanes|=u)):w!==null&&(w.childLanes&u)!==u&&(w.childLanes|=u),a===m)break;a=a.return}}function Ma(a,u){Ni=a,Fu=Ba=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&u)!==0&&(si=!0),a.firstContext=null)}function ro(a){var u=a._currentValue;if(Fu!==a)if(a={context:a,memoizedValue:u,next:null},Ba===null){if(Ni===null)throw Error(n(308));Ba=a,Ni.dependencies={lanes:0,firstContext:a}}else Ba=Ba.next=a;return u}var Tl=null;function T1(a){Tl===null?Tl=[a]:Tl.push(a)}function nd(a,u,m,w){var P=u.interleaved;return P===null?(m.next=m,T1(u)):(m.next=P.next,P.next=m),u.interleaved=m,Us(a,w)}function Us(a,u){a.lanes|=u;var m=a.alternate;for(m!==null&&(m.lanes|=u),m=a,a=a.return;a!==null;)a.childLanes|=u,m=a.alternate,m!==null&&(m.childLanes|=u),m=a,a=a.return;return m.tag===3?m.stateNode:null}var io=!1;function rd(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function T2(a,u){a=a.updateQueue,u.updateQueue===a&&(u.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Xs(a,u){return{eventTime:a,lane:u,tag:0,payload:null,callback:null,next:null}}function oo(a,u,m){var w=a.updateQueue;if(w===null)return null;if(w=w.shared,(un&2)!==0){var P=w.pending;return P===null?u.next=u:(u.next=P.next,P.next=u),w.pending=u,Us(a,m)}return P=w.interleaved,P===null?(u.next=u,T1(w)):(u.next=P.next,P.next=u),w.interleaved=u,Us(a,m)}function id(a,u,m){if(u=u.updateQueue,u!==null&&(u=u.shared,(m&4194240)!==0)){var w=u.lanes;w&=a.pendingLanes,m|=w,u.lanes=m,en(a,m)}}function D2(a,u){var m=a.updateQueue,w=a.alternate;if(w!==null&&(w=w.updateQueue,m===w)){var P=null,A=null;if(m=m.firstBaseUpdate,m!==null){do{var _={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};A===null?P=A=_:A=A.next=_,m=m.next}while(m!==null);A===null?P=A=u:A=A.next=u}else P=A=u;m={baseState:w.baseState,firstBaseUpdate:P,lastBaseUpdate:A,shared:w.shared,effects:w.effects},a.updateQueue=m;return}a=m.lastBaseUpdate,a===null?m.firstBaseUpdate=u:a.next=u,m.lastBaseUpdate=u}function Lu(a,u,m,w){var P=a.updateQueue;io=!1;var A=P.firstBaseUpdate,_=P.lastBaseUpdate,V=P.shared.pending;if(V!==null){P.shared.pending=null;var Z=V,Ce=Z.next;Z.next=null,_===null?A=Ce:_.next=Ce,_=Z;var Ne=a.alternate;Ne!==null&&(Ne=Ne.updateQueue,V=Ne.lastBaseUpdate,V!==_&&(V===null?Ne.firstBaseUpdate=Ce:V.next=Ce,Ne.lastBaseUpdate=Z))}if(A!==null){var je=P.baseState;_=0,Ne=Ce=Z=null,V=A;do{var _e=V.lane,rt=V.eventTime;if((w&_e)===_e){Ne!==null&&(Ne=Ne.next={eventTime:rt,lane:0,tag:V.tag,payload:V.payload,callback:V.callback,next:null});e:{var at=a,ct=V;switch(_e=u,rt=m,ct.tag){case 1:if(at=ct.payload,typeof at=="function"){je=at.call(rt,je,_e);break e}je=at;break e;case 3:at.flags=at.flags&-65537|128;case 0:if(at=ct.payload,_e=typeof at=="function"?at.call(rt,je,_e):at,_e==null)break e;je=we({},je,_e);break e;case 2:io=!0}}V.callback!==null&&V.lane!==0&&(a.flags|=64,_e=P.effects,_e===null?P.effects=[V]:_e.push(V))}else rt={eventTime:rt,lane:_e,tag:V.tag,payload:V.payload,callback:V.callback,next:null},Ne===null?(Ce=Ne=rt,Z=je):Ne=Ne.next=rt,_|=_e;if(V=V.next,V===null){if(V=P.shared.pending,V===null)break;_e=V,V=_e.next,_e.next=null,P.lastBaseUpdate=_e,P.shared.pending=null}}while(!0);if(Ne===null&&(Z=je),P.baseState=Z,P.firstBaseUpdate=Ce,P.lastBaseUpdate=Ne,u=P.shared.interleaved,u!==null){P=u;do _|=P.lane,P=P.next;while(P!==u)}else A===null&&(P.shared.lanes=0);Ia|=_,a.lanes=_,a.memoizedState=je}}function D1(a,u,m){if(a=u.effects,u.effects=null,a!==null)for(u=0;u<a.length;u++){var w=a[u],P=w.callback;if(P!==null){if(w.callback=null,w=m,typeof P!="function")throw Error(n(191,P));P.call(w)}}}var rf={},ms=Ci(rf),of=Ci(rf),_u=Ci(rf);function Ks(a){if(a===rf)throw Error(n(174));return a}function A1(a,u){switch(Fn(_u,u),Fn(of,a),Fn(ms,rf),a=u.nodeType,a){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:mr(null,"");break;default:a=a===8?u.parentNode:u,u=a.namespaceURI||null,a=a.tagName,u=mr(u,a)}Hn(ms),Fn(ms,u)}function Ra(){Hn(ms),Hn(of),Hn(_u)}function B1(a){Ks(_u.current);var u=Ks(ms.current),m=mr(u,a.type);u!==m&&(Fn(of,a),Fn(ms,m))}function od(a){of.current===a&&(Hn(ms),Hn(of))}var zn=Ci(0);function Dl(a){for(var u=a;u!==null;){if(u.tag===13){var m=u.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var M1=[];function sd(){for(var a=0;a<M1.length;a++)M1[a]._workInProgressVersionPrimary=null;M1.length=0}var sf=k.ReactCurrentDispatcher,R1=k.ReactCurrentBatchConfig,ba=0,Un=null,ir=null,vr=null,Nu=!1,af=!1,Al=0,Ut=0;function zr(){throw Error(n(321))}function b1(a,u){if(u===null)return!1;for(var m=0;m<u.length&&m<a.length;m++)if(!ye(a[m],u[m]))return!1;return!0}function Bl(a,u,m,w,P,A){if(ba=A,Un=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,sf.current=a===null||a.memoizedState===null?a7:dd,a=m(w,P),af){A=0;do{if(af=!1,Al=0,25<=A)throw Error(n(301));A+=1,vr=ir=null,u.updateQueue=null,sf.current=$u,a=m(w,P)}while(af)}if(sf.current=hd,u=ir!==null&&ir.next!==null,ba=0,vr=ir=Un=null,Nu=!1,u)throw Error(n(300));return a}function ad(){var a=Al!==0;return Al=0,a}function vs(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vr===null?Un.memoizedState=vr=a:vr=vr.next=a,vr}function so(){if(ir===null){var a=Un.alternate;a=a!==null?a.memoizedState:null}else a=ir.next;var u=vr===null?Un.memoizedState:vr.next;if(u!==null)vr=u,ir=a;else{if(a===null)throw Error(n(310));ir=a,a={memoizedState:ir.memoizedState,baseState:ir.baseState,baseQueue:ir.baseQueue,queue:ir.queue,next:null},vr===null?Un.memoizedState=vr=a:vr=vr.next=a}return vr}function Vr(a,u){return typeof u=="function"?u(a):u}function k1(a){var u=so(),m=u.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=a;var w=ir,P=w.baseQueue,A=m.pending;if(A!==null){if(P!==null){var _=P.next;P.next=A.next,A.next=_}w.baseQueue=P=A,m.pending=null}if(P!==null){A=P.next,w=w.baseState;var V=_=null,Z=null,Ce=A;do{var Ne=Ce.lane;if((ba&Ne)===Ne)Z!==null&&(Z=Z.next={lane:0,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null}),w=Ce.hasEagerState?Ce.eagerState:a(w,Ce.action);else{var je={lane:Ne,action:Ce.action,hasEagerState:Ce.hasEagerState,eagerState:Ce.eagerState,next:null};Z===null?(V=Z=je,_=w):Z=Z.next=je,Un.lanes|=Ne,Ia|=Ne}Ce=Ce.next}while(Ce!==null&&Ce!==A);Z===null?_=w:Z.next=V,ye(w,u.memoizedState)||(si=!0),u.memoizedState=w,u.baseState=_,u.baseQueue=Z,m.lastRenderedState=w}if(a=m.interleaved,a!==null){P=a;do A=P.lane,Un.lanes|=A,Ia|=A,P=P.next;while(P!==a)}else P===null&&(m.lanes=0);return[u.memoizedState,m.dispatch]}function Hu(a){var u=so(),m=u.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=a;var w=m.dispatch,P=m.pending,A=u.memoizedState;if(P!==null){m.pending=null;var _=P=P.next;do A=a(A,_.action),_=_.next;while(_!==P);ye(A,u.memoizedState)||(si=!0),u.memoizedState=A,u.baseQueue===null&&(u.baseState=A),m.lastRenderedState=A}return[A,w]}function ld(){}function O1(a,u){var m=Un,w=so(),P=u(),A=!ye(w.memoizedState,P);if(A&&(w.memoizedState=P,si=!0),w=w.queue,ys(Ys.bind(null,m,w,a),[a]),w.getSnapshot!==u||A||vr!==null&&vr.memoizedState.tag&1){if(m.flags|=2048,Gu(9,Si.bind(null,m,w,P,u),void 0,null),Er===null)throw Error(n(349));(ba&30)!==0||I1(m,u,P)}return P}function I1(a,u,m){a.flags|=16384,a={getSnapshot:u,value:m},u=Un.updateQueue,u===null?(u={lastEffect:null,stores:null},Un.updateQueue=u,u.stores=[a]):(m=u.stores,m===null?u.stores=[a]:m.push(a))}function Si(a,u,m,w){u.value=m,u.getSnapshot=w,ud(u)&&F1(a)}function Ys(a,u,m){return m(function(){ud(u)&&F1(a)})}function ud(a){var u=a.getSnapshot;a=a.value;try{var m=u();return!ye(a,m)}catch{return!0}}function F1(a){var u=Us(a,1);u!==null&&Ho(u,a,1,-1)}function lf(a){var u=vs();return typeof a=="function"&&(a=a()),u.memoizedState=u.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vr,lastRenderedState:a},u.queue=a,a=a.dispatch=k2.bind(null,Un,a),[u.memoizedState,a]}function Gu(a,u,m,w){return a={tag:a,create:u,destroy:m,deps:w,next:null},u=Un.updateQueue,u===null?(u={lastEffect:null,stores:null},Un.updateQueue=u,u.lastEffect=a.next=a):(m=u.lastEffect,m===null?u.lastEffect=a.next=a:(w=m.next,m.next=a,a.next=w,u.lastEffect=a)),a}function cd(){return so().memoizedState}function uf(a,u,m,w){var P=vs();Un.flags|=a,P.memoizedState=Gu(1|u,m,void 0,w===void 0?null:w)}function ju(a,u,m,w){var P=so();w=w===void 0?null:w;var A=void 0;if(ir!==null){var _=ir.memoizedState;if(A=_.destroy,w!==null&&b1(w,_.deps)){P.memoizedState=Gu(u,m,A,w);return}}Un.flags|=a,P.memoizedState=Gu(1|u,m,A,w)}function fd(a,u){return uf(8390656,8,a,u)}function ys(a,u){return ju(2048,8,a,u)}function A2(a,u){return ju(4,2,a,u)}function qs(a,u){return ju(4,4,a,u)}function L1(a,u){if(typeof u=="function")return a=a(),u(a),function(){u(null)};if(u!=null)return a=a(),u.current=a,function(){u.current=null}}function _1(a,u,m){return m=m!=null?m.concat([a]):null,ju(4,4,L1.bind(null,u,a),m)}function cf(){}function B2(a,u){var m=so();u=u===void 0?null:u;var w=m.memoizedState;return w!==null&&u!==null&&b1(u,w[1])?w[0]:(m.memoizedState=[a,u],a)}function M2(a,u){var m=so();u=u===void 0?null:u;var w=m.memoizedState;return w!==null&&u!==null&&b1(u,w[1])?w[0]:(a=a(),m.memoizedState=[a,u],a)}function R2(a,u,m){return(ba&21)===0?(a.baseState&&(a.baseState=!1,si=!0),a.memoizedState=m):(ye(m,u)||(m=qe(),Un.lanes|=m,Ia|=m,a.baseState=!0),u)}function b2(a,u){var m=Et;Et=m!==0&&4>m?m:4,a(!0);var w=R1.transition;R1.transition={};try{a(!1),u()}finally{Et=m,R1.transition=w}}function N1(){return so().memoizedState}function s7(a,u,m){var w=_a(a);if(m={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null},H1(a))oi(u,m);else if(m=nd(a,u,m,w),m!==null){var P=ui();Ho(m,a,w,P),Io(m,u,w)}}function k2(a,u,m){var w=_a(a),P={lane:w,action:m,hasEagerState:!1,eagerState:null,next:null};if(H1(a))oi(u,P);else{var A=a.alternate;if(a.lanes===0&&(A===null||A.lanes===0)&&(A=u.lastRenderedReducer,A!==null))try{var _=u.lastRenderedState,V=A(_,m);if(P.hasEagerState=!0,P.eagerState=V,ye(V,_)){var Z=u.interleaved;Z===null?(P.next=P,T1(u)):(P.next=Z.next,Z.next=P),u.interleaved=P;return}}catch{}finally{}m=nd(a,u,P,w),m!==null&&(P=ui(),Ho(m,a,w,P),Io(m,u,w))}}function H1(a){var u=a.alternate;return a===Un||u!==null&&u===Un}function oi(a,u){af=Nu=!0;var m=a.pending;m===null?u.next=u:(u.next=m.next,m.next=u),a.pending=u}function Io(a,u,m){if((m&4194240)!==0){var w=u.lanes;w&=a.pendingLanes,m|=w,u.lanes=m,en(a,m)}}var hd={readContext:ro,useCallback:zr,useContext:zr,useEffect:zr,useImperativeHandle:zr,useInsertionEffect:zr,useLayoutEffect:zr,useMemo:zr,useReducer:zr,useRef:zr,useState:zr,useDebugValue:zr,useDeferredValue:zr,useTransition:zr,useMutableSource:zr,useSyncExternalStore:zr,useId:zr,unstable_isNewReconciler:!1},a7={readContext:ro,useCallback:function(a,u){return vs().memoizedState=[a,u===void 0?null:u],a},useContext:ro,useEffect:fd,useImperativeHandle:function(a,u,m){return m=m!=null?m.concat([a]):null,uf(4194308,4,L1.bind(null,u,a),m)},useLayoutEffect:function(a,u){return uf(4194308,4,a,u)},useInsertionEffect:function(a,u){return uf(4,2,a,u)},useMemo:function(a,u){var m=vs();return u=u===void 0?null:u,a=a(),m.memoizedState=[a,u],a},useReducer:function(a,u,m){var w=vs();return u=m!==void 0?m(u):u,w.memoizedState=w.baseState=u,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:u},w.queue=a,a=a.dispatch=s7.bind(null,Un,a),[w.memoizedState,a]},useRef:function(a){var u=vs();return a={current:a},u.memoizedState=a},useState:lf,useDebugValue:cf,useDeferredValue:function(a){return vs().memoizedState=a},useTransition:function(){var a=lf(!1),u=a[0];return a=b2.bind(null,a[1]),vs().memoizedState=a,[u,a]},useMutableSource:function(){},useSyncExternalStore:function(a,u,m){var w=Un,P=vs();if(Gn){if(m===void 0)throw Error(n(407));m=m()}else{if(m=u(),Er===null)throw Error(n(349));(ba&30)!==0||I1(w,u,m)}P.memoizedState=m;var A={value:m,getSnapshot:u};return P.queue=A,fd(Ys.bind(null,w,A,a),[a]),w.flags|=2048,Gu(9,Si.bind(null,w,A,m,u),void 0,null),m},useId:function(){var a=vs(),u=Er.identifierPrefix;if(Gn){var m=hs,w=fs;m=(w&~(1<<32-Oi(w)-1)).toString(32)+m,u=":"+u+"R"+m,m=Al++,0<m&&(u+="H"+m.toString(32)),u+=":"}else m=Ut++,u=":"+u+"r"+m.toString(32)+":";return a.memoizedState=u},unstable_isNewReconciler:!1},dd={readContext:ro,useCallback:B2,useContext:ro,useEffect:ys,useImperativeHandle:_1,useInsertionEffect:A2,useLayoutEffect:qs,useMemo:M2,useReducer:k1,useRef:cd,useState:function(){return k1(Vr)},useDebugValue:cf,useDeferredValue:function(a){var u=so();return R2(u,ir.memoizedState,a)},useTransition:function(){var a=k1(Vr)[0],u=so().memoizedState;return[a,u]},useMutableSource:ld,useSyncExternalStore:O1,useId:N1,unstable_isNewReconciler:!1},$u={readContext:ro,useCallback:B2,useContext:ro,useEffect:ys,useImperativeHandle:_1,useInsertionEffect:A2,useLayoutEffect:qs,useMemo:M2,useReducer:Hu,useRef:cd,useState:function(){return Hu(Vr)},useDebugValue:cf,useDeferredValue:function(a){var u=so();return ir===null?u.memoizedState=a:R2(u,ir.memoizedState,a)},useTransition:function(){var a=Hu(Vr)[0],u=so().memoizedState;return[a,u]},useMutableSource:ld,useSyncExternalStore:O1,useId:N1,unstable_isNewReconciler:!1};function ao(a,u){if(a&&a.defaultProps){u=we({},u),a=a.defaultProps;for(var m in a)u[m]===void 0&&(u[m]=a[m]);return u}return u}function gd(a,u,m,w){u=a.memoizedState,m=m(w,u),m=m==null?u:we({},u,m),a.memoizedState=m,a.lanes===0&&(a.updateQueue.baseState=m)}var pd={isMounted:function(a){return(a=a._reactInternals)?Ns(a)===a:!1},enqueueSetState:function(a,u,m){a=a._reactInternals;var w=ui(),P=_a(a),A=Xs(w,P);A.payload=u,m!=null&&(A.callback=m),u=oo(a,A,P),u!==null&&(Ho(u,a,P,w),id(u,a,P))},enqueueReplaceState:function(a,u,m){a=a._reactInternals;var w=ui(),P=_a(a),A=Xs(w,P);A.tag=1,A.payload=u,m!=null&&(A.callback=m),u=oo(a,A,P),u!==null&&(Ho(u,a,P,w),id(u,a,P))},enqueueForceUpdate:function(a,u){a=a._reactInternals;var m=ui(),w=_a(a),P=Xs(m,w);P.tag=2,u!=null&&(P.callback=u),u=oo(a,P,w),u!==null&&(Ho(u,a,w,m),id(u,a,w))}};function G1(a,u,m,w,P,A,_){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(w,A,_):u.prototype&&u.prototype.isPureReactComponent?!nt(m,w)||!nt(P,A):!0}function Ml(a,u,m){var w=!1,P=Da,A=u.contextType;return typeof A=="object"&&A!==null?A=ro(A):(P=Ei(u)?ii:jr.current,w=u.contextTypes,A=(w=w!=null)?Ou(a,P):Da),u=new u(m,A),a.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=pd,a.stateNode=u,u._reactInternals=a,w&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=P,a.__reactInternalMemoizedMaskedChildContext=A),u}function Wu(a,u,m,w){a=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(m,w),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(m,w),u.state!==a&&pd.enqueueReplaceState(u,u.state,null)}function j1(a,u,m,w){var P=a.stateNode;P.props=m,P.state=a.memoizedState,P.refs={},rd(a);var A=u.contextType;typeof A=="object"&&A!==null?P.context=ro(A):(A=Ei(u)?ii:jr.current,P.context=Ou(a,A)),P.state=a.memoizedState,A=u.getDerivedStateFromProps,typeof A=="function"&&(gd(a,u,A,m),P.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(u=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),u!==P.state&&pd.enqueueReplaceState(P,P.state,null),Lu(a,m,P,w),P.state=a.memoizedState),typeof P.componentDidMount=="function"&&(a.flags|=4194308)}function Rl(a,u){try{var m="",w=u;do m+=$e(w),w=w.return;while(w);var P=m}catch(A){P=`
Error generating stack: `+A.message+`
`+A.stack}return{value:a,source:u,stack:P,digest:null}}function md(a,u,m){return{value:a,source:null,stack:m??null,digest:u??null}}function zu(a,u){try{console.error(u.value)}catch(m){setTimeout(function(){throw m})}}var O2=typeof WeakMap=="function"?WeakMap:Map;function ff(a,u,m){m=Xs(-1,m),m.tag=3,m.payload={element:null};var w=u.value;return m.callback=function(){Ad||(Ad=!0,rg=w),zu(a,u)},m}function vd(a,u,m){m=Xs(-1,m),m.tag=3;var w=a.type.getDerivedStateFromError;if(typeof w=="function"){var P=u.value;m.payload=function(){return w(P)},m.callback=function(){zu(a,u)}}var A=a.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(m.callback=function(){zu(a,u),typeof w!="function"&&(Fa===null?Fa=new Set([this]):Fa.add(this));var _=u.stack;this.componentDidCatch(u.value,{componentStack:_!==null?_:""})}),m}function hf(a,u,m){var w=a.pingCache;if(w===null){w=a.pingCache=new O2;var P=new Set;w.set(u,P)}else P=w.get(u),P===void 0&&(P=new Set,w.set(u,P));P.has(m)||(P.add(m),a=p7.bind(null,a,u,m),u.then(a,a))}function I2(a){do{var u;if((u=a.tag===13)&&(u=a.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return a;a=a.return}while(a!==null);return null}function $1(a,u,m,w,P){return(a.mode&1)===0?(a===u?a.flags|=65536:(a.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(u=Xs(-1,1),u.tag=2,oo(m,u,1))),m.lanes|=1),a):(a.flags|=65536,a.lanes=P,a)}var yd=k.ReactCurrentOwner,si=!1;function Mr(a,u,m,w){u.child=a===null?ed(u,null,m,w):Qn(u,a.child,m,w)}function F2(a,u,m,w,P){m=m.render;var A=u.ref;return Ma(u,P),w=Bl(a,u,m,w,A,P),m=ad(),a!==null&&!si?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~P,Fo(a,u,P)):(Gn&&m&&Jc(u),u.flags|=1,Mr(a,u,w,P),u.child)}function W1(a,u,m,w,P){if(a===null){var A=m.type;return typeof A=="function"&&!Od(A)&&A.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(u.tag=15,u.type=A,ws(a,u,A,w,P)):(a=Id(m.type,null,w,u,u.mode,P),a.ref=u.ref,a.return=u,u.child=a)}if(A=a.child,(a.lanes&P)===0){var _=A.memoizedProps;if(m=m.compare,m=m!==null?m:nt,m(_,w)&&a.ref===u.ref)return Fo(a,u,P)}return u.flags|=1,a=Go(A,w),a.ref=u.ref,a.return=u,u.child=a}function ws(a,u,m,w,P){if(a!==null){var A=a.memoizedProps;if(nt(A,w)&&a.ref===u.ref)if(si=!1,u.pendingProps=w=A,(a.lanes&P)!==0)(a.flags&131072)!==0&&(si=!0);else return u.lanes=a.lanes,Fo(a,u,P)}return U1(a,u,m,w,P)}function z1(a,u,m){var w=u.pendingProps,P=w.children,A=a!==null?a.memoizedState:null;if(w.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fn(Ku,Gi),Gi|=m;else{if((m&1073741824)===0)return a=A!==null?A.baseLanes|m:m,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:a,cachePool:null,transitions:null},u.updateQueue=null,Fn(Ku,Gi),Gi|=a,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=A!==null?A.baseLanes:m,Fn(Ku,Gi),Gi|=w}else A!==null?(w=A.baseLanes|m,u.memoizedState=null):w=m,Fn(Ku,Gi),Gi|=w;return Mr(a,u,P,m),u.child}function V1(a,u){var m=u.ref;(a===null&&m!==null||a!==null&&a.ref!==m)&&(u.flags|=512,u.flags|=2097152)}function U1(a,u,m,w,P){var A=Ei(m)?ii:jr.current;return A=Ou(u,A),Ma(u,P),m=Bl(a,u,m,w,A,P),w=ad(),a!==null&&!si?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~P,Fo(a,u,P)):(Gn&&w&&Jc(u),u.flags|=1,Mr(a,u,m,P),u.child)}function X1(a,u,m,w,P){if(Ei(m)){var A=!0;eo(u)}else A=!1;if(Ma(u,P),u.stateNode===null)Cd(a,u),Ml(u,m,w),j1(u,m,w,P),w=!0;else if(a===null){var _=u.stateNode,V=u.memoizedProps;_.props=V;var Z=_.context,Ce=m.contextType;typeof Ce=="object"&&Ce!==null?Ce=ro(Ce):(Ce=Ei(m)?ii:jr.current,Ce=Ou(u,Ce));var Ne=m.getDerivedStateFromProps,je=typeof Ne=="function"||typeof _.getSnapshotBeforeUpdate=="function";je||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(V!==w||Z!==Ce)&&Wu(u,_,w,Ce),io=!1;var _e=u.memoizedState;_.state=_e,Lu(u,w,_,P),Z=u.memoizedState,V!==w||_e!==Z||xi.current||io?(typeof Ne=="function"&&(gd(u,m,Ne,w),Z=u.memoizedState),(V=io||G1(u,m,V,w,_e,Z,Ce))?(je||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(u.flags|=4194308)):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=w,u.memoizedState=Z),_.props=w,_.state=Z,_.context=Ce,w=V):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),w=!1)}else{_=u.stateNode,T2(a,u),V=u.memoizedProps,Ce=u.type===u.elementType?V:ao(u.type,V),_.props=Ce,je=u.pendingProps,_e=_.context,Z=m.contextType,typeof Z=="object"&&Z!==null?Z=ro(Z):(Z=Ei(m)?ii:jr.current,Z=Ou(u,Z));var rt=m.getDerivedStateFromProps;(Ne=typeof rt=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(V!==je||_e!==Z)&&Wu(u,_,w,Z),io=!1,_e=u.memoizedState,_.state=_e,Lu(u,w,_,P);var at=u.memoizedState;V!==je||_e!==at||xi.current||io?(typeof rt=="function"&&(gd(u,m,rt,w),at=u.memoizedState),(Ce=io||G1(u,m,Ce,w,_e,at,Z)||!1)?(Ne||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(w,at,Z),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(w,at,Z)),typeof _.componentDidUpdate=="function"&&(u.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof _.componentDidUpdate!="function"||V===a.memoizedProps&&_e===a.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||V===a.memoizedProps&&_e===a.memoizedState||(u.flags|=1024),u.memoizedProps=w,u.memoizedState=at),_.props=w,_.state=at,_.context=Z,w=Ce):(typeof _.componentDidUpdate!="function"||V===a.memoizedProps&&_e===a.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||V===a.memoizedProps&&_e===a.memoizedState||(u.flags|=1024),w=!1)}return K1(a,u,m,w,A,P)}function K1(a,u,m,w,P,A){V1(a,u);var _=(u.flags&128)!==0;if(!w&&!_)return P&&w2(u,m,!1),Fo(a,u,A);w=u.stateNode,yd.current=u;var V=_&&typeof m.getDerivedStateFromError!="function"?null:w.render();return u.flags|=1,a!==null&&_?(u.child=Qn(u,a.child,null,A),u.child=Qn(u,null,V,A)):Mr(a,u,V,A),u.memoizedState=w.state,P&&w2(u,m,!0),u.child}function L2(a){var u=a.stateNode;u.pendingContext?v2(a,u.pendingContext,u.pendingContext!==u.context):u.context&&v2(a,u.context,!1),A1(a,u.containerInfo)}function Cs(a,u,m,w,P){return gs(),ps(P),u.flags|=256,Mr(a,u,m,w),u.child}var df={dehydrated:null,treeContext:null,retryLane:0};function gf(a){return{baseLanes:a,cachePool:null,transitions:null}}function wd(a,u,m){var w=u.pendingProps,P=zn.current,A=!1,_=(u.flags&128)!==0,V;if((V=_)||(V=a!==null&&a.memoizedState===null?!1:(P&2)!==0),V?(A=!0,u.flags&=-129):(a===null||a.memoizedState!==null)&&(P|=1),Fn(zn,P&1),a===null)return Pi(u),a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((u.mode&1)===0?u.lanes=1:a.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(_=w.children,a=w.fallback,A?(w=u.mode,A=u.child,_={mode:"hidden",children:_},(w&1)===0&&A!==null?(A.childLanes=0,A.pendingProps=_):A=Fd(_,w,0,null),a=Fl(a,w,m,null),A.return=u,a.return=u,A.sibling=a,u.child=A,u.child.memoizedState=gf(m),u.memoizedState=df,a):Vu(u,_));if(P=a.memoizedState,P!==null&&(V=P.dehydrated,V!==null))return St(a,u,_,w,V,P,m);if(A){A=w.fallback,_=u.mode,P=a.child,V=P.sibling;var Z={mode:"hidden",children:w.children};return(_&1)===0&&u.child!==P?(w=u.child,w.childLanes=0,w.pendingProps=Z,u.deletions=null):(w=Go(P,Z),w.subtreeFlags=P.subtreeFlags&14680064),V!==null?A=Go(V,A):(A=Fl(A,_,m,null),A.flags|=2),A.return=u,w.return=u,w.sibling=A,u.child=w,w=A,A=u.child,_=a.child.memoizedState,_=_===null?gf(m):{baseLanes:_.baseLanes|m,cachePool:null,transitions:_.transitions},A.memoizedState=_,A.childLanes=a.childLanes&~m,u.memoizedState=df,w}return A=a.child,a=A.sibling,w=Go(A,{mode:"visible",children:w.children}),(u.mode&1)===0&&(w.lanes=m),w.return=u,w.sibling=null,a!==null&&(m=u.deletions,m===null?(u.deletions=[a],u.flags|=16):m.push(a)),u.child=w,u.memoizedState=null,w}function Vu(a,u){return u=Fd({mode:"visible",children:u},a.mode,0,null),u.return=a,a.child=u}function Zs(a,u,m,w){return w!==null&&ps(w),Qn(u,a.child,null,m),a=Vu(u,u.pendingProps.children),a.flags|=2,u.memoizedState=null,a}function St(a,u,m,w,P,A,_){if(m)return u.flags&256?(u.flags&=-257,w=md(Error(n(422))),Zs(a,u,_,w)):u.memoizedState!==null?(u.child=a.child,u.flags|=128,null):(A=w.fallback,P=u.mode,w=Fd({mode:"visible",children:w.children},P,0,null),A=Fl(A,P,_,null),A.flags|=2,w.return=u,A.return=u,w.sibling=A,u.child=w,(u.mode&1)!==0&&Qn(u,a.child,null,_),u.child.memoizedState=gf(_),u.memoizedState=df,A);if((u.mode&1)===0)return Zs(a,u,_,null);if(P.data==="$!"){if(w=P.nextSibling&&P.nextSibling.dataset,w)var V=w.dgst;return w=V,A=Error(n(419)),w=md(A,w,void 0),Zs(a,u,_,w)}if(V=(_&a.childLanes)!==0,si||V){if(w=Er,w!==null){switch(_&-_){case 4:P=2;break;case 16:P=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:P=32;break;case 536870912:P=268435456;break;default:P=0}P=(P&(w.suspendedLanes|_))!==0?0:P,P!==0&&P!==A.retryLane&&(A.retryLane=P,Us(a,P),Ho(w,a,P,-1))}return ug(),w=md(Error(n(421))),Zs(a,u,_,w)}return P.data==="$?"?(u.flags|=128,u.child=a.child,u=m7.bind(null,a),P._reactRetry=u,null):(a=A.treeContext,_i=Sa(P.nextSibling),Wr=u,Gn=!0,Oo=null,a!==null&&(to[no++]=fs,to[no++]=hs,to[no++]=xl,fs=a.id,hs=a.overflow,xl=u),u=Vu(u,w.children),u.flags|=4096,u)}function pf(a,u,m){a.lanes|=u;var w=a.alternate;w!==null&&(w.lanes|=u),Br(a.return,u,m)}function mf(a,u,m,w,P){var A=a.memoizedState;A===null?a.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:w,tail:m,tailMode:P}:(A.isBackwards=u,A.rendering=null,A.renderingStartTime=0,A.last=w,A.tail=m,A.tailMode=P)}function ka(a,u,m){var w=u.pendingProps,P=w.revealOrder,A=w.tail;if(Mr(a,u,w.children,m),w=zn.current,(w&2)!==0)w=w&1|2,u.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=u.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&pf(a,m,u);else if(a.tag===19)pf(a,m,u);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===u)break e;for(;a.sibling===null;){if(a.return===null||a.return===u)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}w&=1}if(Fn(zn,w),(u.mode&1)===0)u.memoizedState=null;else switch(P){case"forwards":for(m=u.child,P=null;m!==null;)a=m.alternate,a!==null&&Dl(a)===null&&(P=m),m=m.sibling;m=P,m===null?(P=u.child,u.child=null):(P=m.sibling,m.sibling=null),mf(u,!1,P,m,A);break;case"backwards":for(m=null,P=u.child,u.child=null;P!==null;){if(a=P.alternate,a!==null&&Dl(a)===null){u.child=P;break}a=P.sibling,P.sibling=m,m=P,P=a}mf(u,!0,m,null,A);break;case"together":mf(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Cd(a,u){(u.mode&1)===0&&a!==null&&(a.alternate=null,u.alternate=null,u.flags|=2)}function Fo(a,u,m){if(a!==null&&(u.dependencies=a.dependencies),Ia|=u.lanes,(m&u.childLanes)===0)return null;if(a!==null&&u.child!==a.child)throw Error(n(153));if(u.child!==null){for(a=u.child,m=Go(a,a.pendingProps),u.child=m,m.return=u;a.sibling!==null;)a=a.sibling,m=m.sibling=Go(a,a.pendingProps),m.return=u;m.sibling=null}return u.child}function _2(a,u,m){switch(u.tag){case 3:L2(u),gs();break;case 5:B1(u);break;case 1:Ei(u.type)&&eo(u);break;case 4:A1(u,u.stateNode.containerInfo);break;case 10:var w=u.type._context,P=u.memoizedProps.value;Fn(nf,w._currentValue),w._currentValue=P;break;case 13:if(w=u.memoizedState,w!==null)return w.dehydrated!==null?(Fn(zn,zn.current&1),u.flags|=128,null):(m&u.child.childLanes)!==0?wd(a,u,m):(Fn(zn,zn.current&1),a=Fo(a,u,m),a!==null?a.sibling:null);Fn(zn,zn.current&1);break;case 19:if(w=(m&u.childLanes)!==0,(a.flags&128)!==0){if(w)return ka(a,u,m);u.flags|=128}if(P=u.memoizedState,P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),Fn(zn,zn.current),w)break;return null;case 22:case 23:return u.lanes=0,z1(a,u,m)}return Fo(a,u,m)}var Rr,Y1,N2,q1;Rr=function(a,u){for(var m=u.child;m!==null;){if(m.tag===5||m.tag===6)a.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===u)break;for(;m.sibling===null;){if(m.return===null||m.return===u)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},Y1=function(){},N2=function(a,u,m,w){var P=a.memoizedProps;if(P!==w){a=u.stateNode,Ks(ms.current);var A=null;switch(m){case"input":P=Ye(a,P),w=Ye(a,w),A=[];break;case"select":P=we({},P,{value:void 0}),w=we({},w,{value:void 0}),A=[];break;case"textarea":P=an(a,P),w=an(a,w),A=[];break;default:typeof P.onClick!="function"&&typeof w.onClick=="function"&&(a.onclick=Vh)}Ro(m,w);var _;m=null;for(Ce in P)if(!w.hasOwnProperty(Ce)&&P.hasOwnProperty(Ce)&&P[Ce]!=null)if(Ce==="style"){var V=P[Ce];for(_ in V)V.hasOwnProperty(_)&&(m||(m={}),m[_]="")}else Ce!=="dangerouslySetInnerHTML"&&Ce!=="children"&&Ce!=="suppressContentEditableWarning"&&Ce!=="suppressHydrationWarning"&&Ce!=="autoFocus"&&(i.hasOwnProperty(Ce)?A||(A=[]):(A=A||[]).push(Ce,null));for(Ce in w){var Z=w[Ce];if(V=P!=null?P[Ce]:void 0,w.hasOwnProperty(Ce)&&Z!==V&&(Z!=null||V!=null))if(Ce==="style")if(V){for(_ in V)!V.hasOwnProperty(_)||Z&&Z.hasOwnProperty(_)||(m||(m={}),m[_]="");for(_ in Z)Z.hasOwnProperty(_)&&V[_]!==Z[_]&&(m||(m={}),m[_]=Z[_])}else m||(A||(A=[]),A.push(Ce,m)),m=Z;else Ce==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,V=V?V.__html:void 0,Z!=null&&V!==Z&&(A=A||[]).push(Ce,Z)):Ce==="children"?typeof Z!="string"&&typeof Z!="number"||(A=A||[]).push(Ce,""+Z):Ce!=="suppressContentEditableWarning"&&Ce!=="suppressHydrationWarning"&&(i.hasOwnProperty(Ce)?(Z!=null&&Ce==="onScroll"&&Nn("scroll",a),A||V===Z||(A=[])):(A=A||[]).push(Ce,Z))}m&&(A=A||[]).push("style",m);var Ce=A;(u.updateQueue=Ce)&&(u.flags|=4)}},q1=function(a,u,m,w){m!==w&&(u.flags|=4)};function vf(a,u){if(!Gn)switch(a.tailMode){case"hidden":u=a.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?a.tail=null:m.sibling=null;break;case"collapsed":m=a.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?u||a.tail===null?a.tail=null:a.tail.sibling=null:w.sibling=null}}function br(a){var u=a.alternate!==null&&a.alternate.child===a.child,m=0,w=0;if(u)for(var P=a.child;P!==null;)m|=P.lanes|P.childLanes,w|=P.subtreeFlags&14680064,w|=P.flags&14680064,P.return=a,P=P.sibling;else for(P=a.child;P!==null;)m|=P.lanes|P.childLanes,w|=P.subtreeFlags,w|=P.flags,P.return=a,P=P.sibling;return a.subtreeFlags|=w,a.childLanes=m,u}function l7(a,u,m){var w=u.pendingProps;switch(Pl(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return br(u),null;case 1:return Ei(u.type)&&Yh(),br(u),null;case 3:return w=u.stateNode,Ra(),Hn(xi),Hn(jr),sd(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(a===null||a.child===null)&&(ef(u)?u.flags|=4:a===null||a.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Oo!==null&&(sg(Oo),Oo=null))),Y1(a,u),br(u),null;case 5:od(u);var P=Ks(_u.current);if(m=u.type,a!==null&&u.stateNode!=null)N2(a,u,m,w,P),a.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!w){if(u.stateNode===null)throw Error(n(166));return br(u),null}if(a=Ks(ms.current),ef(u)){w=u.stateNode,m=u.type;var A=u.memoizedProps;switch(w[us]=u,w[Ta]=A,a=(u.mode&1)!==0,m){case"dialog":Nn("cancel",w),Nn("close",w);break;case"iframe":case"object":case"embed":Nn("load",w);break;case"video":case"audio":for(P=0;P<$s.length;P++)Nn($s[P],w);break;case"source":Nn("error",w);break;case"img":case"image":case"link":Nn("error",w),Nn("load",w);break;case"details":Nn("toggle",w);break;case"input":At(w,A),Nn("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!A.multiple},Nn("invalid",w);break;case"textarea":pr(w,A),Nn("invalid",w)}Ro(m,A),P=null;for(var _ in A)if(A.hasOwnProperty(_)){var V=A[_];_==="children"?typeof V=="string"?w.textContent!==V&&(A.suppressHydrationWarning!==!0&&Yc(w.textContent,V,a),P=["children",V]):typeof V=="number"&&w.textContent!==""+V&&(A.suppressHydrationWarning!==!0&&Yc(w.textContent,V,a),P=["children",""+V]):i.hasOwnProperty(_)&&V!=null&&_==="onScroll"&&Nn("scroll",w)}switch(m){case"input":Te(w),kn(w,A,!0);break;case"textarea":Te(w),$n(w);break;case"select":case"option":break;default:typeof A.onClick=="function"&&(w.onclick=Vh)}w=P,u.updateQueue=w,w!==null&&(u.flags|=4)}else{_=P.nodeType===9?P:P.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Yi(m)),a==="http://www.w3.org/1999/xhtml"?m==="script"?(a=_.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof w.is=="string"?a=_.createElement(m,{is:w.is}):(a=_.createElement(m),m==="select"&&(_=a,w.multiple?_.multiple=!0:w.size&&(_.size=w.size))):a=_.createElementNS(a,m),a[us]=u,a[Ta]=w,Rr(a,u,!1,!1),u.stateNode=a;e:{switch(_=qi(m,w),m){case"dialog":Nn("cancel",a),Nn("close",a),P=w;break;case"iframe":case"object":case"embed":Nn("load",a),P=w;break;case"video":case"audio":for(P=0;P<$s.length;P++)Nn($s[P],a);P=w;break;case"source":Nn("error",a),P=w;break;case"img":case"image":case"link":Nn("error",a),Nn("load",a),P=w;break;case"details":Nn("toggle",a),P=w;break;case"input":At(a,w),P=Ye(a,w),Nn("invalid",a);break;case"option":P=w;break;case"select":a._wrapperState={wasMultiple:!!w.multiple},P=we({},w,{value:void 0}),Nn("invalid",a);break;case"textarea":pr(a,w),P=an(a,w),Nn("invalid",a);break;default:P=w}Ro(m,P),V=P;for(A in V)if(V.hasOwnProperty(A)){var Z=V[A];A==="style"?Mo(a,Z):A==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Z!=null&&On(a,Z)):A==="children"?typeof Z=="string"?(m!=="textarea"||Z!=="")&&Lr(a,Z):typeof Z=="number"&&Lr(a,""+Z):A!=="suppressContentEditableWarning"&&A!=="suppressHydrationWarning"&&A!=="autoFocus"&&(i.hasOwnProperty(A)?Z!=null&&A==="onScroll"&&Nn("scroll",a):Z!=null&&R(a,A,Z,_))}switch(m){case"input":Te(a),kn(a,w,!1);break;case"textarea":Te(a),$n(a);break;case"option":w.value!=null&&a.setAttribute("value",""+et(w.value));break;case"select":a.multiple=!!w.multiple,A=w.value,A!=null?_t(a,!!w.multiple,A,!1):w.defaultValue!=null&&_t(a,!!w.multiple,w.defaultValue,!0);break;default:typeof P.onClick=="function"&&(a.onclick=Vh)}switch(m){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return br(u),null;case 6:if(a&&u.stateNode!=null)q1(a,u,a.memoizedProps,w);else{if(typeof w!="string"&&u.stateNode===null)throw Error(n(166));if(m=Ks(_u.current),Ks(ms.current),ef(u)){if(w=u.stateNode,m=u.memoizedProps,w[us]=u,(A=w.nodeValue!==m)&&(a=Wr,a!==null))switch(a.tag){case 3:Yc(w.nodeValue,m,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Yc(w.nodeValue,m,(a.mode&1)!==0)}A&&(u.flags|=4)}else w=(m.nodeType===9?m:m.ownerDocument).createTextNode(w),w[us]=u,u.stateNode=w}return br(u),null;case 13:if(Hn(zn),w=u.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Gn&&_i!==null&&(u.mode&1)!==0&&(u.flags&128)===0)P1(),gs(),u.flags|=98560,A=!1;else if(A=ef(u),w!==null&&w.dehydrated!==null){if(a===null){if(!A)throw Error(n(318));if(A=u.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));A[us]=u}else gs(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;br(u),A=!1}else Oo!==null&&(sg(Oo),Oo=null),A=!0;if(!A)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=m,u):(w=w!==null,w!==(a!==null&&a.memoizedState!==null)&&w&&(u.child.flags|=8192,(u.mode&1)!==0&&(a===null||(zn.current&1)!==0?yr===0&&(yr=3):ug())),u.updateQueue!==null&&(u.flags|=4),br(u),null);case 4:return Ra(),Y1(a,u),a===null&&Ea(u.stateNode.containerInfo),br(u),null;case 10:return td(u.type._context),br(u),null;case 17:return Ei(u.type)&&Yh(),br(u),null;case 19:if(Hn(zn),A=u.memoizedState,A===null)return br(u),null;if(w=(u.flags&128)!==0,_=A.rendering,_===null)if(w)vf(A,!1);else{if(yr!==0||a!==null&&(a.flags&128)!==0)for(a=u.child;a!==null;){if(_=Dl(a),_!==null){for(u.flags|=128,vf(A,!1),w=_.updateQueue,w!==null&&(u.updateQueue=w,u.flags|=4),u.subtreeFlags=0,w=m,m=u.child;m!==null;)A=m,a=w,A.flags&=14680066,_=A.alternate,_===null?(A.childLanes=0,A.lanes=a,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=_.childLanes,A.lanes=_.lanes,A.child=_.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=_.memoizedProps,A.memoizedState=_.memoizedState,A.updateQueue=_.updateQueue,A.type=_.type,a=_.dependencies,A.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),m=m.sibling;return Fn(zn,zn.current&1|2),u.child}a=a.sibling}A.tail!==null&&xn()>bl&&(u.flags|=128,w=!0,vf(A,!1),u.lanes=4194304)}else{if(!w)if(a=Dl(_),a!==null){if(u.flags|=128,w=!0,m=a.updateQueue,m!==null&&(u.updateQueue=m,u.flags|=4),vf(A,!0),A.tail===null&&A.tailMode==="hidden"&&!_.alternate&&!Gn)return br(u),null}else 2*xn()-A.renderingStartTime>bl&&m!==1073741824&&(u.flags|=128,w=!0,vf(A,!1),u.lanes=4194304);A.isBackwards?(_.sibling=u.child,u.child=_):(m=A.last,m!==null?m.sibling=_:u.child=_,A.last=_)}return A.tail!==null?(u=A.tail,A.rendering=u,A.tail=u.sibling,A.renderingStartTime=xn(),u.sibling=null,m=zn.current,Fn(zn,w?m&1|2:m&1),u):(br(u),null);case 22:case 23:return lg(),w=u.memoizedState!==null,a!==null&&a.memoizedState!==null!==w&&(u.flags|=8192),w&&(u.mode&1)!==0?(Gi&1073741824)!==0&&(br(u),u.subtreeFlags&6&&(u.flags|=8192)):br(u),null;case 24:return null;case 25:return null}throw Error(n(156,u.tag))}function u7(a,u){switch(Pl(u),u.tag){case 1:return Ei(u.type)&&Yh(),a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 3:return Ra(),Hn(xi),Hn(jr),sd(),a=u.flags,(a&65536)!==0&&(a&128)===0?(u.flags=a&-65537|128,u):null;case 5:return od(u),null;case 13:if(Hn(zn),a=u.memoizedState,a!==null&&a.dehydrated!==null){if(u.alternate===null)throw Error(n(340));gs()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 19:return Hn(zn),null;case 4:return Ra(),null;case 10:return td(u.type._context),null;case 22:case 23:return lg(),null;case 24:return null;default:return null}}var xd=!1,Vn=!1,ai=typeof WeakSet=="function"?WeakSet:Set,it=null;function Uu(a,u){var m=a.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(w){Xn(a,u,w)}else m.current=null}function yf(a,u,m){try{m()}catch(w){Xn(a,u,w)}}var H2=!1;function c7(a,u){if(qc=Ah,a=Bn(),Wc(a)){if("selectionStart"in a)var m={start:a.selectionStart,end:a.selectionEnd};else e:{m=(m=a.ownerDocument)&&m.defaultView||window;var w=m.getSelection&&m.getSelection();if(w&&w.rangeCount!==0){m=w.anchorNode;var P=w.anchorOffset,A=w.focusNode;w=w.focusOffset;try{m.nodeType,A.nodeType}catch{m=null;break e}var _=0,V=-1,Z=-1,Ce=0,Ne=0,je=a,_e=null;t:for(;;){for(var rt;je!==m||P!==0&&je.nodeType!==3||(V=_+P),je!==A||w!==0&&je.nodeType!==3||(Z=_+w),je.nodeType===3&&(_+=je.nodeValue.length),(rt=je.firstChild)!==null;)_e=je,je=rt;for(;;){if(je===a)break t;if(_e===m&&++Ce===P&&(V=_),_e===A&&++Ne===w&&(Z=_),(rt=je.nextSibling)!==null)break;je=_e,_e=je.parentNode}je=rt}m=V===-1||Z===-1?null:{start:V,end:Z}}else m=null}m=m||{start:0,end:0}}else m=null;for(wl={focusedElem:a,selectionRange:m},Ah=!1,it=u;it!==null;)if(u=it,a=u.child,(u.subtreeFlags&1028)!==0&&a!==null)a.return=u,it=a;else for(;it!==null;){u=it;try{var at=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(at!==null){var ct=at.memoizedProps,or=at.memoizedState,de=u.stateNode,re=de.getSnapshotBeforeUpdate(u.elementType===u.type?ct:ao(u.type,ct),or);de.__reactInternalSnapshotBeforeUpdate=re}break;case 3:var pe=u.stateNode.containerInfo;pe.nodeType===1?pe.textContent="":pe.nodeType===9&&pe.documentElement&&pe.removeChild(pe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ue){Xn(u,u.return,Ue)}if(a=u.sibling,a!==null){a.return=u.return,it=a;break}it=u.return}return at=H2,H2=!1,at}function Qs(a,u,m){var w=u.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var P=w=w.next;do{if((P.tag&a)===a){var A=P.destroy;P.destroy=void 0,A!==void 0&&yf(u,m,A)}P=P.next}while(P!==w)}}function wf(a,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var m=u=u.next;do{if((m.tag&a)===a){var w=m.create;m.destroy=w()}m=m.next}while(m!==u)}}function Ed(a){var u=a.ref;if(u!==null){var m=a.stateNode;switch(a.tag){case 5:a=m;break;default:a=m}typeof u=="function"?u(a):u.current=a}}function G2(a){var u=a.alternate;u!==null&&(a.alternate=null,G2(u)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(u=a.stateNode,u!==null&&(delete u[us],delete u[Ta],delete u[Xh],delete u[N],delete u[bu])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function j2(a){return a.tag===5||a.tag===3||a.tag===4}function $2(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||j2(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Z1(a,u,m){var w=a.tag;if(w===5||w===6)a=a.stateNode,u?m.nodeType===8?m.parentNode.insertBefore(a,u):m.insertBefore(a,u):(m.nodeType===8?(u=m.parentNode,u.insertBefore(a,m)):(u=m,u.appendChild(a)),m=m._reactRootContainer,m!=null||u.onclick!==null||(u.onclick=Vh));else if(w!==4&&(a=a.child,a!==null))for(Z1(a,u,m),a=a.sibling;a!==null;)Z1(a,u,m),a=a.sibling}function Pd(a,u,m){var w=a.tag;if(w===5||w===6)a=a.stateNode,u?m.insertBefore(a,u):m.appendChild(a);else if(w!==4&&(a=a.child,a!==null))for(Pd(a,u,m),a=a.sibling;a!==null;)Pd(a,u,m),a=a.sibling}var xr=null,Lo=!1;function xs(a,u,m){for(m=m.child;m!==null;)Q1(a,u,m),m=m.sibling}function Q1(a,u,m){if(yi&&typeof yi.onCommitFiberUnmount=="function")try{yi.onCommitFiberUnmount(gu,m)}catch{}switch(m.tag){case 5:Vn||Uu(m,u);case 6:var w=xr,P=Lo;xr=null,xs(a,u,m),xr=w,Lo=P,xr!==null&&(Lo?(a=xr,m=m.stateNode,a.nodeType===8?a.parentNode.removeChild(m):a.removeChild(m)):xr.removeChild(m.stateNode));break;case 18:xr!==null&&(Lo?(a=xr,m=m.stateNode,a.nodeType===8?C1(a.parentNode,m):a.nodeType===1&&C1(a,m),En(a)):C1(xr,m.stateNode));break;case 4:w=xr,P=Lo,xr=m.stateNode.containerInfo,Lo=!0,xs(a,u,m),xr=w,Lo=P;break;case 0:case 11:case 14:case 15:if(!Vn&&(w=m.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){P=w=w.next;do{var A=P,_=A.destroy;A=A.tag,_!==void 0&&((A&2)!==0||(A&4)!==0)&&yf(m,u,_),P=P.next}while(P!==w)}xs(a,u,m);break;case 1:if(!Vn&&(Uu(m,u),w=m.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=m.memoizedProps,w.state=m.memoizedState,w.componentWillUnmount()}catch(V){Xn(m,u,V)}xs(a,u,m);break;case 21:xs(a,u,m);break;case 22:m.mode&1?(Vn=(w=Vn)||m.memoizedState!==null,xs(a,u,m),Vn=w):xs(a,u,m);break;default:xs(a,u,m)}}function Xu(a){var u=a.updateQueue;if(u!==null){a.updateQueue=null;var m=a.stateNode;m===null&&(m=a.stateNode=new ai),u.forEach(function(w){var P=v7.bind(null,a,w);m.has(w)||(m.add(w),w.then(P,P))})}}function Hi(a,u){var m=u.deletions;if(m!==null)for(var w=0;w<m.length;w++){var P=m[w];try{var A=a,_=u,V=_;e:for(;V!==null;){switch(V.tag){case 5:xr=V.stateNode,Lo=!1;break e;case 3:xr=V.stateNode.containerInfo,Lo=!0;break e;case 4:xr=V.stateNode.containerInfo,Lo=!0;break e}V=V.return}if(xr===null)throw Error(n(160));Q1(A,_,P),xr=null,Lo=!1;var Z=P.alternate;Z!==null&&(Z.return=null),P.return=null}catch(Ce){Xn(P,u,Ce)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)J1(u,a),u=u.sibling}function J1(a,u){var m=a.alternate,w=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Hi(u,a),_o(a),w&4){try{Qs(3,a,a.return),wf(3,a)}catch(ct){Xn(a,a.return,ct)}try{Qs(5,a,a.return)}catch(ct){Xn(a,a.return,ct)}}break;case 1:Hi(u,a),_o(a),w&512&&m!==null&&Uu(m,m.return);break;case 5:if(Hi(u,a),_o(a),w&512&&m!==null&&Uu(m,m.return),a.flags&32){var P=a.stateNode;try{Lr(P,"")}catch(ct){Xn(a,a.return,ct)}}if(w&4&&(P=a.stateNode,P!=null)){var A=a.memoizedProps,_=m!==null?m.memoizedProps:A,V=a.type,Z=a.updateQueue;if(a.updateQueue=null,Z!==null)try{V==="input"&&A.type==="radio"&&A.name!=null&&hn(P,A),qi(V,_);var Ce=qi(V,A);for(_=0;_<Z.length;_+=2){var Ne=Z[_],je=Z[_+1];Ne==="style"?Mo(P,je):Ne==="dangerouslySetInnerHTML"?On(P,je):Ne==="children"?Lr(P,je):R(P,Ne,je,Ce)}switch(V){case"input":Mt(P,A);break;case"textarea":Ki(P,A);break;case"select":var _e=P._wrapperState.wasMultiple;P._wrapperState.wasMultiple=!!A.multiple;var rt=A.value;rt!=null?_t(P,!!A.multiple,rt,!1):_e!==!!A.multiple&&(A.defaultValue!=null?_t(P,!!A.multiple,A.defaultValue,!0):_t(P,!!A.multiple,A.multiple?[]:"",!1))}P[Ta]=A}catch(ct){Xn(a,a.return,ct)}}break;case 6:if(Hi(u,a),_o(a),w&4){if(a.stateNode===null)throw Error(n(162));P=a.stateNode,A=a.memoizedProps;try{P.nodeValue=A}catch(ct){Xn(a,a.return,ct)}}break;case 3:if(Hi(u,a),_o(a),w&4&&m!==null&&m.memoizedState.isDehydrated)try{En(u.containerInfo)}catch(ct){Xn(a,a.return,ct)}break;case 4:Hi(u,a),_o(a);break;case 13:Hi(u,a),_o(a),P=a.child,P.flags&8192&&(A=P.memoizedState!==null,P.stateNode.isHidden=A,!A||P.alternate!==null&&P.alternate.memoizedState!==null||(ng=xn())),w&4&&Xu(a);break;case 22:if(Ne=m!==null&&m.memoizedState!==null,a.mode&1?(Vn=(Ce=Vn)||Ne,Hi(u,a),Vn=Ce):Hi(u,a),_o(a),w&8192){if(Ce=a.memoizedState!==null,(a.stateNode.isHidden=Ce)&&!Ne&&(a.mode&1)!==0)for(it=a,Ne=a.child;Ne!==null;){for(je=it=Ne;it!==null;){switch(_e=it,rt=_e.child,_e.tag){case 0:case 11:case 14:case 15:Qs(4,_e,_e.return);break;case 1:Uu(_e,_e.return);var at=_e.stateNode;if(typeof at.componentWillUnmount=="function"){w=_e,m=_e.return;try{u=w,at.props=u.memoizedProps,at.state=u.memoizedState,at.componentWillUnmount()}catch(ct){Xn(w,m,ct)}}break;case 5:Uu(_e,_e.return);break;case 22:if(_e.memoizedState!==null){Oa(je);continue}}rt!==null?(rt.return=_e,it=rt):Oa(je)}Ne=Ne.sibling}e:for(Ne=null,je=a;;){if(je.tag===5){if(Ne===null){Ne=je;try{P=je.stateNode,Ce?(A=P.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none"):(V=je.stateNode,Z=je.memoizedProps.style,_=Z!=null&&Z.hasOwnProperty("display")?Z.display:null,V.style.display=ns("display",_))}catch(ct){Xn(a,a.return,ct)}}}else if(je.tag===6){if(Ne===null)try{je.stateNode.nodeValue=Ce?"":je.memoizedProps}catch(ct){Xn(a,a.return,ct)}}else if((je.tag!==22&&je.tag!==23||je.memoizedState===null||je===a)&&je.child!==null){je.child.return=je,je=je.child;continue}if(je===a)break e;for(;je.sibling===null;){if(je.return===null||je.return===a)break e;Ne===je&&(Ne=null),je=je.return}Ne===je&&(Ne=null),je.sibling.return=je.return,je=je.sibling}}break;case 19:Hi(u,a),_o(a),w&4&&Xu(a);break;case 21:break;default:Hi(u,a),_o(a)}}function _o(a){var u=a.flags;if(u&2){try{e:{for(var m=a.return;m!==null;){if(j2(m)){var w=m;break e}m=m.return}throw Error(n(160))}switch(w.tag){case 5:var P=w.stateNode;w.flags&32&&(Lr(P,""),w.flags&=-33);var A=$2(a);Pd(a,A,P);break;case 3:case 4:var _=w.stateNode.containerInfo,V=$2(a);Z1(a,V,_);break;default:throw Error(n(161))}}catch(Z){Xn(a,a.return,Z)}a.flags&=-3}u&4096&&(a.flags&=-4097)}function Sd(a,u,m){it=a,eg(a)}function eg(a,u,m){for(var w=(a.mode&1)!==0;it!==null;){var P=it,A=P.child;if(P.tag===22&&w){var _=P.memoizedState!==null||xd;if(!_){var V=P.alternate,Z=V!==null&&V.memoizedState!==null||Vn;V=xd;var Ce=Vn;if(xd=_,(Vn=Z)&&!Ce)for(it=P;it!==null;)_=it,Z=_.child,_.tag===22&&_.memoizedState!==null?W2(P):Z!==null?(Z.return=_,it=Z):W2(P);for(;A!==null;)it=A,eg(A),A=A.sibling;it=P,xd=V,Vn=Ce}No(a)}else(P.subtreeFlags&8772)!==0&&A!==null?(A.return=P,it=A):No(a)}}function No(a){for(;it!==null;){var u=it;if((u.flags&8772)!==0){var m=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:Vn||wf(5,u);break;case 1:var w=u.stateNode;if(u.flags&4&&!Vn)if(m===null)w.componentDidMount();else{var P=u.elementType===u.type?m.memoizedProps:ao(u.type,m.memoizedProps);w.componentDidUpdate(P,m.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var A=u.updateQueue;A!==null&&D1(u,A,w);break;case 3:var _=u.updateQueue;if(_!==null){if(m=null,u.child!==null)switch(u.child.tag){case 5:m=u.child.stateNode;break;case 1:m=u.child.stateNode}D1(u,_,m)}break;case 5:var V=u.stateNode;if(m===null&&u.flags&4){m=V;var Z=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":Z.autoFocus&&m.focus();break;case"img":Z.src&&(m.src=Z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var Ce=u.alternate;if(Ce!==null){var Ne=Ce.memoizedState;if(Ne!==null){var je=Ne.dehydrated;je!==null&&En(je)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Vn||u.flags&512&&Ed(u)}catch(_e){Xn(u,u.return,_e)}}if(u===a){it=null;break}if(m=u.sibling,m!==null){m.return=u.return,it=m;break}it=u.return}}function Oa(a){for(;it!==null;){var u=it;if(u===a){it=null;break}var m=u.sibling;if(m!==null){m.return=u.return,it=m;break}it=u.return}}function W2(a){for(;it!==null;){var u=it;try{switch(u.tag){case 0:case 11:case 15:var m=u.return;try{wf(4,u)}catch(Z){Xn(u,m,Z)}break;case 1:var w=u.stateNode;if(typeof w.componentDidMount=="function"){var P=u.return;try{w.componentDidMount()}catch(Z){Xn(u,P,Z)}}var A=u.return;try{Ed(u)}catch(Z){Xn(u,A,Z)}break;case 5:var _=u.return;try{Ed(u)}catch(Z){Xn(u,_,Z)}}}catch(Z){Xn(u,u.return,Z)}if(u===a){it=null;break}var V=u.sibling;if(V!==null){V.return=u.return,it=V;break}it=u.return}}var z2=Math.ceil,Td=k.ReactCurrentDispatcher,tg=k.ReactCurrentOwner,lo=k.ReactCurrentBatchConfig,un=0,Er=null,cr=null,kr=0,Gi=0,Ku=Ci(0),yr=0,Cf=null,Ia=0,xf=0,Dd=0,Ef=null,Ti=null,ng=0,bl=1/0,Js=null,Ad=!1,rg=null,Fa=null,Bd=!1,La=null,li=0,Pf=0,ig=null,Md=-1,Sf=0;function ui(){return(un&6)!==0?xn():Md!==-1?Md:Md=xn()}function _a(a){return(a.mode&1)===0?1:(un&2)!==0&&kr!==0?kr&-kr:P2.transition!==null?(Sf===0&&(Sf=qe()),Sf):(a=Et,a!==0||(a=window.event,a=a===void 0?16:Yp(a.type)),a)}function Ho(a,u,m,w){if(50<Pf)throw Pf=0,ig=null,Error(n(185));Nt(a,m,w),((un&2)===0||a!==Er)&&(a===Er&&((un&2)===0&&(xf|=m),yr===4&&Na(a,kr)),Di(a,w),m===1&&un===0&&(u.mode&1)===0&&(bl=xn()+500,qh&&Aa()))}function Di(a,u){var m=a.callbackNode;Ve(a,u);var w=De(a,a===Er?kr:0);if(w===0)m!==null&&Eh(m),a.callbackNode=null,a.callbackPriority=0;else if(u=w&-w,a.callbackPriority!==u){if(m!=null&&Eh(m),u===1)a.tag===0?Cl(V2.bind(null,a)):C2(V2.bind(null,a)),Uh(function(){(un&6)===0&&Aa()}),m=null;else{switch(Tn(w)){case 1:m=rs;break;case 4:m=Th;break;case 16:m=is;break;case 536870912:m=_c;break;default:m=is}m=Q2(m,Rd.bind(null,a))}a.callbackPriority=u,a.callbackNode=m}}function Rd(a,u){if(Md=-1,Sf=0,(un&6)!==0)throw Error(n(327));var m=a.callbackNode;if(Yu()&&a.callbackNode!==m)return null;var w=De(a,a===Er?kr:0);if(w===0)return null;if((w&30)!==0||(w&a.expiredLanes)!==0||u)u=bd(a,w);else{u=w;var P=un;un|=2;var A=X2();(Er!==a||kr!==u)&&(Js=null,bl=xn()+500,Ol(a,u));do try{d7();break}catch(V){U2(a,V)}while(!0);Vs(),Td.current=A,un=P,cr!==null?u=0:(Er=null,kr=0,u=yr)}if(u!==0){if(u===2&&(P=We(a),P!==0&&(w=P,u=og(a,P))),u===1)throw m=Cf,Ol(a,0),Na(a,w),Di(a,xn()),m;if(u===6)Na(a,w);else{if(P=a.current.alternate,(w&30)===0&&!f7(P)&&(u=bd(a,w),u===2&&(A=We(a),A!==0&&(w=A,u=og(a,A))),u===1))throw m=Cf,Ol(a,0),Na(a,w),Di(a,xn()),m;switch(a.finishedWork=P,a.finishedLanes=w,u){case 0:case 1:throw Error(n(345));case 2:Il(a,Ti,Js);break;case 3:if(Na(a,w),(w&130023424)===w&&(u=ng+500-xn(),10<u)){if(De(a,0)!==0)break;if(P=a.suspendedLanes,(P&w)!==w){ui(),a.pingedLanes|=a.suspendedLanes&P;break}a.timeoutHandle=Pa(Il.bind(null,a,Ti,Js),u);break}Il(a,Ti,Js);break;case 4:if(Na(a,w),(w&4194240)===w)break;for(u=a.eventTimes,P=-1;0<w;){var _=31-Oi(w);A=1<<_,_=u[_],_>P&&(P=_),w&=~A}if(w=P,w=xn()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*z2(w/1960))-w,10<w){a.timeoutHandle=Pa(Il.bind(null,a,Ti,Js),w);break}Il(a,Ti,Js);break;case 5:Il(a,Ti,Js);break;default:throw Error(n(329))}}}return Di(a,xn()),a.callbackNode===m?Rd.bind(null,a):null}function og(a,u){var m=Ef;return a.current.memoizedState.isDehydrated&&(Ol(a,u).flags|=256),a=bd(a,u),a!==2&&(u=Ti,Ti=m,u!==null&&sg(u)),a}function sg(a){Ti===null?Ti=a:Ti.push.apply(Ti,a)}function f7(a){for(var u=a;;){if(u.flags&16384){var m=u.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var w=0;w<m.length;w++){var P=m[w],A=P.getSnapshot;P=P.value;try{if(!ye(A(),P))return!1}catch{return!1}}}if(m=u.child,u.subtreeFlags&16384&&m!==null)m.return=u,u=m;else{if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Na(a,u){for(u&=~Dd,u&=~xf,a.suspendedLanes|=u,a.pingedLanes&=~u,a=a.expirationTimes;0<u;){var m=31-Oi(u),w=1<<m;a[m]=-1,u&=~w}}function V2(a){if((un&6)!==0)throw Error(n(327));Yu();var u=De(a,0);if((u&1)===0)return Di(a,xn()),null;var m=bd(a,u);if(a.tag!==0&&m===2){var w=We(a);w!==0&&(u=w,m=og(a,w))}if(m===1)throw m=Cf,Ol(a,0),Na(a,u),Di(a,xn()),m;if(m===6)throw Error(n(345));return a.finishedWork=a.current.alternate,a.finishedLanes=u,Il(a,Ti,Js),Di(a,xn()),null}function ag(a,u){var m=un;un|=1;try{return a(u)}finally{un=m,un===0&&(bl=xn()+500,qh&&Aa())}}function kl(a){La!==null&&La.tag===0&&(un&6)===0&&Yu();var u=un;un|=1;var m=lo.transition,w=Et;try{if(lo.transition=null,Et=1,a)return a()}finally{Et=w,lo.transition=m,un=u,(un&6)===0&&Aa()}}function lg(){Gi=Ku.current,Hn(Ku)}function Ol(a,u){a.finishedWork=null,a.finishedLanes=0;var m=a.timeoutHandle;if(m!==-1&&(a.timeoutHandle=-1,Qc(m)),cr!==null)for(m=cr.return;m!==null;){var w=m;switch(Pl(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&Yh();break;case 3:Ra(),Hn(xi),Hn(jr),sd();break;case 5:od(w);break;case 4:Ra();break;case 13:Hn(zn);break;case 19:Hn(zn);break;case 10:td(w.type._context);break;case 22:case 23:lg()}m=m.return}if(Er=a,cr=a=Go(a.current,null),kr=Gi=u,yr=0,Cf=null,Dd=xf=Ia=0,Ti=Ef=null,Tl!==null){for(u=0;u<Tl.length;u++)if(m=Tl[u],w=m.interleaved,w!==null){m.interleaved=null;var P=w.next,A=m.pending;if(A!==null){var _=A.next;A.next=P,w.next=_}m.pending=w}Tl=null}return a}function U2(a,u){do{var m=cr;try{if(Vs(),sf.current=hd,Nu){for(var w=Un.memoizedState;w!==null;){var P=w.queue;P!==null&&(P.pending=null),w=w.next}Nu=!1}if(ba=0,vr=ir=Un=null,af=!1,Al=0,tg.current=null,m===null||m.return===null){yr=1,Cf=u,cr=null;break}e:{var A=a,_=m.return,V=m,Z=u;if(u=kr,V.flags|=32768,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var Ce=Z,Ne=V,je=Ne.tag;if((Ne.mode&1)===0&&(je===0||je===11||je===15)){var _e=Ne.alternate;_e?(Ne.updateQueue=_e.updateQueue,Ne.memoizedState=_e.memoizedState,Ne.lanes=_e.lanes):(Ne.updateQueue=null,Ne.memoizedState=null)}var rt=I2(_);if(rt!==null){rt.flags&=-257,$1(rt,_,V,A,u),rt.mode&1&&hf(A,Ce,u),u=rt,Z=Ce;var at=u.updateQueue;if(at===null){var ct=new Set;ct.add(Z),u.updateQueue=ct}else at.add(Z);break e}else{if((u&1)===0){hf(A,Ce,u),ug();break e}Z=Error(n(426))}}else if(Gn&&V.mode&1){var or=I2(_);if(or!==null){(or.flags&65536)===0&&(or.flags|=256),$1(or,_,V,A,u),ps(Rl(Z,V));break e}}A=Z=Rl(Z,V),yr!==4&&(yr=2),Ef===null?Ef=[A]:Ef.push(A),A=_;do{switch(A.tag){case 3:A.flags|=65536,u&=-u,A.lanes|=u;var de=ff(A,Z,u);D2(A,de);break e;case 1:V=Z;var re=A.type,pe=A.stateNode;if((A.flags&128)===0&&(typeof re.getDerivedStateFromError=="function"||pe!==null&&typeof pe.componentDidCatch=="function"&&(Fa===null||!Fa.has(pe)))){A.flags|=65536,u&=-u,A.lanes|=u;var Ue=vd(A,V,u);D2(A,Ue);break e}}A=A.return}while(A!==null)}Y2(m)}catch(ht){u=ht,cr===m&&m!==null&&(cr=m=m.return);continue}break}while(!0)}function X2(){var a=Td.current;return Td.current=hd,a===null?hd:a}function ug(){(yr===0||yr===3||yr===2)&&(yr=4),Er===null||(Ia&268435455)===0&&(xf&268435455)===0||Na(Er,kr)}function bd(a,u){var m=un;un|=2;var w=X2();(Er!==a||kr!==u)&&(Js=null,Ol(a,u));do try{h7();break}catch(P){U2(a,P)}while(!0);if(Vs(),un=m,Td.current=w,cr!==null)throw Error(n(261));return Er=null,kr=0,yr}function h7(){for(;cr!==null;)K2(cr)}function d7(){for(;cr!==null&&!hu();)K2(cr)}function K2(a){var u=Z2(a.alternate,a,Gi);a.memoizedProps=a.pendingProps,u===null?Y2(a):cr=u,tg.current=null}function Y2(a){var u=a;do{var m=u.alternate;if(a=u.return,(u.flags&32768)===0){if(m=l7(m,u,Gi),m!==null){cr=m;return}}else{if(m=u7(m,u),m!==null){m.flags&=32767,cr=m;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{yr=6,cr=null;return}}if(u=u.sibling,u!==null){cr=u;return}cr=u=a}while(u!==null);yr===0&&(yr=5)}function Il(a,u,m){var w=Et,P=lo.transition;try{lo.transition=null,Et=1,g7(a,u,m,w)}finally{lo.transition=P,Et=w}return null}function g7(a,u,m,w){do Yu();while(La!==null);if((un&6)!==0)throw Error(n(327));m=a.finishedWork;var P=a.finishedLanes;if(m===null)return null;if(a.finishedWork=null,a.finishedLanes=0,m===a.current)throw Error(n(177));a.callbackNode=null,a.callbackPriority=0;var A=m.lanes|m.childLanes;if(ln(a,A),a===Er&&(cr=Er=null,kr=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||Bd||(Bd=!0,Q2(is,function(){return Yu(),null})),A=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||A){A=lo.transition,lo.transition=null;var _=Et;Et=1;var V=un;un|=4,tg.current=null,c7(a,m),J1(m,a),i7(wl),Ah=!!qc,wl=qc=null,a.current=m,Sd(m),Ph(),un=V,Et=_,lo.transition=A}else a.current=m;if(Bd&&(Bd=!1,La=a,li=P),A=a.pendingLanes,A===0&&(Fa=null),t1(m.stateNode),Di(a,xn()),u!==null)for(w=a.onRecoverableError,m=0;m<u.length;m++)P=u[m],w(P.value,{componentStack:P.stack,digest:P.digest});if(Ad)throw Ad=!1,a=rg,rg=null,a;return(li&1)!==0&&a.tag!==0&&Yu(),A=a.pendingLanes,(A&1)!==0?a===ig?Pf++:(Pf=0,ig=a):Pf=0,Aa(),null}function Yu(){if(La!==null){var a=Tn(li),u=lo.transition,m=Et;try{if(lo.transition=null,Et=16>a?16:a,La===null)var w=!1;else{if(a=La,La=null,li=0,(un&6)!==0)throw Error(n(331));var P=un;for(un|=4,it=a.current;it!==null;){var A=it,_=A.child;if((it.flags&16)!==0){var V=A.deletions;if(V!==null){for(var Z=0;Z<V.length;Z++){var Ce=V[Z];for(it=Ce;it!==null;){var Ne=it;switch(Ne.tag){case 0:case 11:case 15:Qs(8,Ne,A)}var je=Ne.child;if(je!==null)je.return=Ne,it=je;else for(;it!==null;){Ne=it;var _e=Ne.sibling,rt=Ne.return;if(G2(Ne),Ne===Ce){it=null;break}if(_e!==null){_e.return=rt,it=_e;break}it=rt}}}var at=A.alternate;if(at!==null){var ct=at.child;if(ct!==null){at.child=null;do{var or=ct.sibling;ct.sibling=null,ct=or}while(ct!==null)}}it=A}}if((A.subtreeFlags&2064)!==0&&_!==null)_.return=A,it=_;else e:for(;it!==null;){if(A=it,(A.flags&2048)!==0)switch(A.tag){case 0:case 11:case 15:Qs(9,A,A.return)}var de=A.sibling;if(de!==null){de.return=A.return,it=de;break e}it=A.return}}var re=a.current;for(it=re;it!==null;){_=it;var pe=_.child;if((_.subtreeFlags&2064)!==0&&pe!==null)pe.return=_,it=pe;else e:for(_=re;it!==null;){if(V=it,(V.flags&2048)!==0)try{switch(V.tag){case 0:case 11:case 15:wf(9,V)}}catch(ht){Xn(V,V.return,ht)}if(V===_){it=null;break e}var Ue=V.sibling;if(Ue!==null){Ue.return=V.return,it=Ue;break e}it=V.return}}if(un=P,Aa(),yi&&typeof yi.onPostCommitFiberRoot=="function")try{yi.onPostCommitFiberRoot(gu,a)}catch{}w=!0}return w}finally{Et=m,lo.transition=u}}return!1}function kd(a,u,m){u=Rl(m,u),u=ff(a,u,1),a=oo(a,u,1),u=ui(),a!==null&&(Nt(a,1,u),Di(a,u))}function Xn(a,u,m){if(a.tag===3)kd(a,a,m);else for(;u!==null;){if(u.tag===3){kd(u,a,m);break}else if(u.tag===1){var w=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Fa===null||!Fa.has(w))){a=Rl(m,a),a=vd(u,a,1),u=oo(u,a,1),a=ui(),u!==null&&(Nt(u,1,a),Di(u,a));break}}u=u.return}}function p7(a,u,m){var w=a.pingCache;w!==null&&w.delete(u),u=ui(),a.pingedLanes|=a.suspendedLanes&m,Er===a&&(kr&m)===m&&(yr===4||yr===3&&(kr&130023424)===kr&&500>xn()-ng?Ol(a,0):Dd|=m),Di(a,u)}function q2(a,u){u===0&&((a.mode&1)===0?u=1:(u=ue,ue<<=1,(ue&130023424)===0&&(ue=4194304)));var m=ui();a=Us(a,u),a!==null&&(Nt(a,u,m),Di(a,m))}function m7(a){var u=a.memoizedState,m=0;u!==null&&(m=u.retryLane),q2(a,m)}function v7(a,u){var m=0;switch(a.tag){case 13:var w=a.stateNode,P=a.memoizedState;P!==null&&(m=P.retryLane);break;case 19:w=a.stateNode;break;default:throw Error(n(314))}w!==null&&w.delete(u),q2(a,m)}var Z2;Z2=function(a,u,m){if(a!==null)if(a.memoizedProps!==u.pendingProps||xi.current)si=!0;else{if((a.lanes&m)===0&&(u.flags&128)===0)return si=!1,_2(a,u,m);si=(a.flags&131072)!==0}else si=!1,Gn&&(u.flags&1048576)!==0&&x2(u,Qh,u.index);switch(u.lanes=0,u.tag){case 2:var w=u.type;Cd(a,u),a=u.pendingProps;var P=Ou(u,jr.current);Ma(u,m),P=Bl(null,u,w,a,P,m);var A=ad();return u.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,Ei(w)?(A=!0,eo(u)):A=!1,u.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,rd(u),P.updater=pd,u.stateNode=P,P._reactInternals=u,j1(u,w,a,m),u=K1(null,u,w,!0,A,m)):(u.tag=0,Gn&&A&&Jc(u),Mr(null,u,P,m),u=u.child),u;case 16:w=u.elementType;e:{switch(Cd(a,u),a=u.pendingProps,P=w._init,w=P(w._payload),u.type=w,P=u.tag=w7(w),a=ao(w,a),P){case 0:u=U1(null,u,w,a,m);break e;case 1:u=X1(null,u,w,a,m);break e;case 11:u=F2(null,u,w,a,m);break e;case 14:u=W1(null,u,w,ao(w.type,a),m);break e}throw Error(n(306,w,""))}return u;case 0:return w=u.type,P=u.pendingProps,P=u.elementType===w?P:ao(w,P),U1(a,u,w,P,m);case 1:return w=u.type,P=u.pendingProps,P=u.elementType===w?P:ao(w,P),X1(a,u,w,P,m);case 3:e:{if(L2(u),a===null)throw Error(n(387));w=u.pendingProps,A=u.memoizedState,P=A.element,T2(a,u),Lu(u,w,null,m);var _=u.memoizedState;if(w=_.element,A.isDehydrated)if(A={element:w,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},u.updateQueue.baseState=A,u.memoizedState=A,u.flags&256){P=Rl(Error(n(423)),u),u=Cs(a,u,w,m,P);break e}else if(w!==P){P=Rl(Error(n(424)),u),u=Cs(a,u,w,m,P);break e}else for(_i=Sa(u.stateNode.containerInfo.firstChild),Wr=u,Gn=!0,Oo=null,m=ed(u,null,w,m),u.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(gs(),w===P){u=Fo(a,u,m);break e}Mr(a,u,w,m)}u=u.child}return u;case 5:return B1(u),a===null&&Pi(u),w=u.type,P=u.pendingProps,A=a!==null?a.memoizedProps:null,_=P.children,Zc(w,P)?_=null:A!==null&&Zc(w,A)&&(u.flags|=32),V1(a,u),Mr(a,u,_,m),u.child;case 6:return a===null&&Pi(u),null;case 13:return wd(a,u,m);case 4:return A1(u,u.stateNode.containerInfo),w=u.pendingProps,a===null?u.child=Qn(u,null,w,m):Mr(a,u,w,m),u.child;case 11:return w=u.type,P=u.pendingProps,P=u.elementType===w?P:ao(w,P),F2(a,u,w,P,m);case 7:return Mr(a,u,u.pendingProps,m),u.child;case 8:return Mr(a,u,u.pendingProps.children,m),u.child;case 12:return Mr(a,u,u.pendingProps.children,m),u.child;case 10:e:{if(w=u.type._context,P=u.pendingProps,A=u.memoizedProps,_=P.value,Fn(nf,w._currentValue),w._currentValue=_,A!==null)if(ye(A.value,_)){if(A.children===P.children&&!xi.current){u=Fo(a,u,m);break e}}else for(A=u.child,A!==null&&(A.return=u);A!==null;){var V=A.dependencies;if(V!==null){_=A.child;for(var Z=V.firstContext;Z!==null;){if(Z.context===w){if(A.tag===1){Z=Xs(-1,m&-m),Z.tag=2;var Ce=A.updateQueue;if(Ce!==null){Ce=Ce.shared;var Ne=Ce.pending;Ne===null?Z.next=Z:(Z.next=Ne.next,Ne.next=Z),Ce.pending=Z}}A.lanes|=m,Z=A.alternate,Z!==null&&(Z.lanes|=m),Br(A.return,m,u),V.lanes|=m;break}Z=Z.next}}else if(A.tag===10)_=A.type===u.type?null:A.child;else if(A.tag===18){if(_=A.return,_===null)throw Error(n(341));_.lanes|=m,V=_.alternate,V!==null&&(V.lanes|=m),Br(_,m,u),_=A.sibling}else _=A.child;if(_!==null)_.return=A;else for(_=A;_!==null;){if(_===u){_=null;break}if(A=_.sibling,A!==null){A.return=_.return,_=A;break}_=_.return}A=_}Mr(a,u,P.children,m),u=u.child}return u;case 9:return P=u.type,w=u.pendingProps.children,Ma(u,m),P=ro(P),w=w(P),u.flags|=1,Mr(a,u,w,m),u.child;case 14:return w=u.type,P=ao(w,u.pendingProps),P=ao(w.type,P),W1(a,u,w,P,m);case 15:return ws(a,u,u.type,u.pendingProps,m);case 17:return w=u.type,P=u.pendingProps,P=u.elementType===w?P:ao(w,P),Cd(a,u),u.tag=1,Ei(w)?(a=!0,eo(u)):a=!1,Ma(u,m),Ml(u,w,P),j1(u,w,P,m),K1(null,u,w,!0,a,m);case 19:return ka(a,u,m);case 22:return z1(a,u,m)}throw Error(n(156,u.tag))};function Q2(a,u){return xh(a,u)}function y7(a,u,m,w){this.tag=a,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function uo(a,u,m,w){return new y7(a,u,m,w)}function Od(a){return a=a.prototype,!(!a||!a.isReactComponent)}function w7(a){if(typeof a=="function")return Od(a)?1:0;if(a!=null){if(a=a.$$typeof,a===ne)return 11;if(a===ge)return 14}return 2}function Go(a,u){var m=a.alternate;return m===null?(m=uo(a.tag,u,a.key,a.mode),m.elementType=a.elementType,m.type=a.type,m.stateNode=a.stateNode,m.alternate=a,a.alternate=m):(m.pendingProps=u,m.type=a.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=a.flags&14680064,m.childLanes=a.childLanes,m.lanes=a.lanes,m.child=a.child,m.memoizedProps=a.memoizedProps,m.memoizedState=a.memoizedState,m.updateQueue=a.updateQueue,u=a.dependencies,m.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},m.sibling=a.sibling,m.index=a.index,m.ref=a.ref,m}function Id(a,u,m,w,P,A){var _=2;if(w=a,typeof a=="function")Od(a)&&(_=1);else if(typeof a=="string")_=5;else e:switch(a){case z:return Fl(m.children,P,A,u);case K:_=8,P|=8;break;case te:return a=uo(12,m,u,P|2),a.elementType=te,a.lanes=A,a;case oe:return a=uo(13,m,u,P),a.elementType=oe,a.lanes=A,a;case ve:return a=uo(19,m,u,P),a.elementType=ve,a.lanes=A,a;case Pe:return Fd(m,P,A,u);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case se:_=10;break e;case me:_=9;break e;case ne:_=11;break e;case ge:_=14;break e;case Me:_=16,w=null;break e}throw Error(n(130,a==null?a:typeof a,""))}return u=uo(_,m,u,P),u.elementType=a,u.type=w,u.lanes=A,u}function Fl(a,u,m,w){return a=uo(7,a,w,u),a.lanes=m,a}function Fd(a,u,m,w){return a=uo(22,a,w,u),a.elementType=Pe,a.lanes=m,a.stateNode={isHidden:!1},a}function cg(a,u,m){return a=uo(6,a,null,u),a.lanes=m,a}function fg(a,u,m){return u=uo(4,a.children!==null?a.children:[],a.key,u),u.lanes=m,u.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},u}function C7(a,u,m,w,P){this.tag=u,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=st(0),this.expirationTimes=st(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=st(0),this.identifierPrefix=w,this.onRecoverableError=P,this.mutableSourceEagerHydrationData=null}function hg(a,u,m,w,P,A,_,V,Z){return a=new C7(a,u,m,V,Z),u===1?(u=1,A===!0&&(u|=8)):u=0,A=uo(3,null,null,u),a.current=A,A.stateNode=a,A.memoizedState={element:w,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},rd(A),a}function x7(a,u,m){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:w==null?null:""+w,children:a,containerInfo:u,implementation:m}}function J2(a){if(!a)return Da;a=a._reactInternals;e:{if(Ns(a)!==a||a.tag!==1)throw Error(n(170));var u=a;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Ei(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(n(171))}if(a.tag===1){var m=a.type;if(Ei(m))return y2(a,m,u)}return u}function em(a,u,m,w,P,A,_,V,Z){return a=hg(m,w,!0,a,P,A,_,V,Z),a.context=J2(null),m=a.current,w=ui(),P=_a(m),A=Xs(w,P),A.callback=u??null,oo(m,A,P),a.current.lanes=P,Nt(a,P,w),Di(a,w),a}function Ld(a,u,m,w){var P=u.current,A=ui(),_=_a(P);return m=J2(m),u.context===null?u.context=m:u.pendingContext=m,u=Xs(A,_),u.payload={element:a},w=w===void 0?null:w,w!==null&&(u.callback=w),a=oo(P,u,_),a!==null&&(Ho(a,P,_,A),id(a,P,_)),_}function _d(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function tm(a,u){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var m=a.retryLane;a.retryLane=m!==0&&m<u?m:u}}function dg(a,u){tm(a,u),(a=a.alternate)&&tm(a,u)}function E7(){return null}var nm=typeof reportError=="function"?reportError:function(a){console.error(a)};function Nd(a){this._internalRoot=a}Tf.prototype.render=Nd.prototype.render=function(a){var u=this._internalRoot;if(u===null)throw Error(n(409));Ld(a,u,null,null)},Tf.prototype.unmount=Nd.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var u=a.containerInfo;kl(function(){Ld(null,a,null,null)}),u[Li]=null}};function Tf(a){this._internalRoot=a}Tf.prototype.unstable_scheduleHydration=function(a){if(a){var u=Nc();a={blockedOn:null,target:a,priority:u};for(var m=0;m<ya.length&&u!==0&&u<ya[m].priority;m++);ya.splice(m,0,a),m===0&&Xp(a)}};function gg(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Hd(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function rm(){}function P7(a,u,m,w,P){if(P){if(typeof w=="function"){var A=w;w=function(){var Ce=_d(_);A.call(Ce)}}var _=em(u,w,a,0,null,!1,!1,"",rm);return a._reactRootContainer=_,a[Li]=_.current,Ea(a.nodeType===8?a.parentNode:a),kl(),_}for(;P=a.lastChild;)a.removeChild(P);if(typeof w=="function"){var V=w;w=function(){var Ce=_d(Z);V.call(Ce)}}var Z=hg(a,0,!1,null,null,!1,!1,"",rm);return a._reactRootContainer=Z,a[Li]=Z.current,Ea(a.nodeType===8?a.parentNode:a),kl(function(){Ld(u,Z,m,w)}),Z}function Ll(a,u,m,w,P){var A=m._reactRootContainer;if(A){var _=A;if(typeof P=="function"){var V=P;P=function(){var Z=_d(_);V.call(Z)}}Ld(u,_,a,P)}else _=P7(m,u,a,P,w);return _d(_)}_r=function(a){switch(a.tag){case 3:var u=a.stateNode;if(u.current.memoizedState.isDehydrated){var m=ee(u.pendingLanes);m!==0&&(en(u,m|1),Di(u,xn()),(un&6)===0&&(bl=xn()+500,Aa()))}break;case 13:kl(function(){var w=Us(a,1);if(w!==null){var P=ui();Ho(w,a,1,P)}}),dg(a,1)}},os=function(a){if(a.tag===13){var u=Us(a,134217728);if(u!==null){var m=ui();Ho(u,a,134217728,m)}dg(a,134217728)}},pu=function(a){if(a.tag===13){var u=_a(a),m=Us(a,u);if(m!==null){var w=ui();Ho(m,a,u,w)}dg(a,u)}},Nc=function(){return Et},hl=function(a,u){var m=Et;try{return Et=a,u()}finally{Et=m}},Zi=function(a,u,m){switch(u){case"input":if(Mt(a,m),u=m.name,m.type==="radio"&&u!=null){for(m=a;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<m.length;u++){var w=m[u];if(w!==a&&w.form===a.form){var P=Kh(w);if(!P)throw Error(n(90));ke(w),Mt(w,P)}}}break;case"textarea":Ki(a,m);break;case"select":u=m.value,u!=null&&_t(a,!!m.multiple,u,!1)}},mh=ag,kc=kl;var S7={usingClientEntryPoint:!1,Events:[Gr,$t,Kh,gh,ph,ag]},Df={findFiberByHostInstance:cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},T7={bundleType:Df.bundleType,version:Df.version,rendererPackageName:Df.rendererPackageName,rendererConfig:Df.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=wh(a),a===null?null:a.stateNode},findFiberByHostInstance:Df.findFiberByHostInstance||E7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gd.isDisabled&&Gd.supportsFiber)try{gu=Gd.inject(T7),yi=Gd}catch{}}return go.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S7,go.createPortal=function(a,u){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gg(u))throw Error(n(200));return x7(a,u,null,m)},go.createRoot=function(a,u){if(!gg(a))throw Error(n(299));var m=!1,w="",P=nm;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onRecoverableError!==void 0&&(P=u.onRecoverableError)),u=hg(a,1,!1,null,null,m,!1,w,P),a[Li]=u.current,Ea(a.nodeType===8?a.parentNode:a),new Nd(u)},go.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var u=a._reactInternals;if(u===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=wh(u),a=a===null?null:a.stateNode,a},go.flushSync=function(a){return kl(a)},go.hydrate=function(a,u,m){if(!Hd(u))throw Error(n(200));return Ll(null,a,u,!0,m)},go.hydrateRoot=function(a,u,m){if(!gg(a))throw Error(n(405));var w=m!=null&&m.hydratedSources||null,P=!1,A="",_=nm;if(m!=null&&(m.unstable_strictMode===!0&&(P=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onRecoverableError!==void 0&&(_=m.onRecoverableError)),u=em(u,null,a,1,m??null,P,!1,A,_),a[Li]=u.current,Ea(a),w)for(a=0;a<w.length;a++)m=w[a],P=m._getVersion,P=P(m._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[m,P]:u.mutableSourceEagerHydrationData.push(m,P);return new Tf(u)},go.render=function(a,u,m){if(!Hd(u))throw Error(n(200));return Ll(null,a,u,!1,m)},go.unmountComponentAtNode=function(a){if(!Hd(a))throw Error(n(40));return a._reactRootContainer?(kl(function(){Ll(null,null,a,!1,function(){a._reactRootContainer=null,a[Li]=null})}),!0):!1},go.unstable_batchedUpdates=ag,go.unstable_renderSubtreeIntoContainer=function(a,u,m,w){if(!Hd(m))throw Error(n(200));if(a==null||a._reactInternals===void 0)throw Error(n(38));return Ll(a,u,m,!1,w)},go.version="18.3.1-next-f1338f8080-20240426",go}var Jy;function ME(){if(Jy)return G7.exports;Jy=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),G7.exports=Db(),G7.exports}var ew;function Ab(){if(ew)return am;ew=1;var e=ME();return am.createRoot=e.createRoot,am.hydrateRoot=e.hydrateRoot,am}var q3=Ab();const Bb=[{id:"Sfftf",type:"geometry",shape:"terminal",angle:0,opacity:1,textHeight:20,text:{children:[{text:""}],align:"center"},points:[[-276.50609579402317,624.50390625],[-156.50609579402317,684.50390625]],strokeWidth:2},{id:"aMJWD",type:"geometry",shape:"process",angle:0,opacity:1,textHeight:20,text:{children:[{text:""}],align:"center"},points:[[-71.50609579402317,464.50390625],[48.49390420597683,524.50390625]],strokeWidth:2},{id:"FHSxH",type:"geometry",shape:"decision",angle:0,opacity:1,textHeight:20,text:{children:[{text:""}],align:"center"},points:[[-286.50609579402317,459.50390625],[-146.50609579402317,529.50390625]],strokeWidth:2},{id:"xnnhM",type:"geometry",shape:"process",angle:0,opacity:1,textHeight:20,text:{children:[{text:""}],align:"center"},points:[[-276.50609579402317,344.50390625],[-156.50609579402317,404.50390625]],strokeWidth:2},{id:"FAkXk",type:"geometry",shape:"terminal",angle:0,opacity:1,textHeight:20,text:{children:[{text:""}],align:"center"},points:[[-276.50609579402317,229.50390625],[-156.50609579402317,289.50390625]],strokeWidth:2},{id:"mrdfi",type:"line",shape:"elbow",source:{marker:"none",connection:[.5,1],boundId:"aMJWD"},texts:[],target:{marker:"arrow",connection:[1,.5],boundId:"Sfftf"},opacity:1,points:[[-11.506095794023167,524.50390625],[-156.50609579402317,654.50390625]],strokeWidth:2},{id:"bjjcw",type:"line",shape:"elbow",source:{marker:"none",connection:[1,.5],boundId:"FHSxH"},texts:[{text:{children:[{text:""}]},position:.5,width:14,height:20}],target:{marker:"arrow",connection:[0,.5],boundId:"aMJWD"},opacity:1,points:[[-146.50609579402317,494.50390625],[-71.50609579402317,494.50390625]],strokeWidth:2},{id:"mnzKm",type:"line",shape:"elbow",source:{marker:"none",connection:[.5,1],boundId:"FHSxH"},texts:[{text:{children:[{text:""}]},position:.5,width:14,height:20}],target:{marker:"arrow",connection:[.5,0],boundId:"Sfftf"},opacity:1,points:[[-216.50609579402317,529.50390625],[-216.50609579402317,624.50390625]],strokeWidth:2},{id:"bJmWK",type:"line",shape:"elbow",source:{marker:"none",connection:[.5,1],boundId:"xnnhM"},texts:[],target:{marker:"arrow",connection:[.5,0],boundId:"FHSxH"},opacity:1,points:[[-216.50609579402317,404.50390625],[-216.50609579402317,459.50390625]],strokeWidth:2},{id:"zZtTs",type:"line",shape:"elbow",source:{marker:"none",connection:[.5,1],boundId:"FAkXk"},texts:[],target:{marker:"arrow",connection:[.5,0],boundId:"xnnhM"},opacity:1,points:[[-216.50609579402317,289.50390625],[-216.50609579402317,344.50390625]],strokeWidth:2},{type:"mindmap",id:"rzdDJ",rightNodeCount:4,data:{topic:{children:[{text:""}]}},children:[{id:"WKQyj",data:{topic:{children:[{text:""}]}},children:[{id:"RYSRd",data:{topic:{children:[{text:""}]}},children:[{id:"nDBRj",data:{topic:{children:[{text:""}]}},children:[],width:14,height:20}],width:14,height:20}],width:42,height:20},{id:"PWzAD",data:{topic:{children:[{text:""}]}},children:[{id:"bTRmh",data:{topic:{children:[{text:""}]}},children:[{id:"bnZEJ",data:{topic:{children:[{text:""}]}},children:[],width:14,height:20}],width:14,height:20}],width:42,height:20},{id:"nJTYp",data:{topic:{children:[{text:""}]}},children:[{id:"GtyaH",data:{topic:{children:[{text:""}]}},children:[{id:"JsPEN",data:{topic:{children:[{text:""}]}},children:[],width:14,height:20}],width:14,height:20}],width:42,height:20},{id:"aCpyY",data:{topic:{children:[{text:""}]}},children:[{id:"iHynm",data:{topic:{children:[{text:""}]}},children:[{id:"TiZGR",data:{topic:{children:[{text:""}]}},children:[],width:14,height:20}],width:14,height:20}],width:42,height:20}],width:72,height:25,isRoot:!0,points:[[248.24308817248368,470.83369157012714]]},{id:"KXysP",type:"freehand",shape:"feltTipPen",points:[[42.91255547331053,302.4106436724954],[42.91255547331053,302.4106436724954],[42.91255547331053,302.94303472562143],[42.91255547331053,303.6494630350447],[43.30577852049311,305.2479999310129],[43.56933178275932,307.7310582325393],[43.739438069128084,311.12389489834214],[43.855740766990095,315.8164264100736],[43.96492597868843,322.6297134163672],[44.04510428695181,331.4298388256405],[43.800067978237905,341.65545526338],[43.57330869752974,352.71036640029735],[43.07346103637457,363.90530146670363],[42.36826123801535,373.77911119731317],[41.80176985242798,382.6007917969476],[41.050101023702894,390.22783046821706],[40.13474095313774,396.15692679809973],[39.39258212224382,400.6820450814642],[38.54748622256426,403.7768437354819],[37.6139535260923,405.2185182175875],[36.92333546175661,405.2964726869589],[36.131425080979454,404.20079465502687],[35.50071089523186,401.899151188188],[34.73785580109626,398.6839479717576]],strokeWidth:2},{id:"ieFQi",type:"freehand",shape:"feltTipPen",points:[[25.61158363876399,370.9967488504811],[24.916797897797608,369.6071773685483],[24.67749697208211,368.6131714048036],[24.568808312533577,367.69766584799555],[24.885076423453768,366.7492749338374],[25.814401426806455,365.80719346179495],[27.472139546659776,364.8344983351174],[29.643691195005033,363.49568318743997],[32.693254384731574,361.9420582621281],[36.67141481223808,360.52686710208155],[41.460509155073225,358.7994936728549],[46.363154873429096,357.5239529722815],[51.357258169067165,356.2862923784672],[56.080029524996746,355.0491584530558],[60.609899785114806,353.4775345173878],[64.56194534795014,352.02103573276264],[68.11000361516409,350.60845154555255],[71.0432829003974,348.88126019241946]],strokeWidth:2},{id:"ZjTpX",type:"freehand",shape:"feltTipPen",points:[[68.86401322513058,312.91491483450346],[68.1735521778042,310.84353169252546],[67.41961422156675,309.6087095594078],[67.00428402343306,309.3536935515943],[66.81450089413721,310.0550514771515],[66.34038086399784,311.9321737730109],[65.99930516212868,314.9252733774777],[65.76493120773563,319.0075757836469],[65.50698001538291,324.8454447611596],[65.02776614620694,332.64203520547954],[64.67902100438306,341.6264849819357],[64.11463195585026,351.0762550531984],[63.657958293810964,360.48902188913536],[63.04473447686752,368.75232276852813],[62.55449492935492,375.95277981063674],[62.18436301867911,381.56388568202357],[61.893086608457736,386.0039779745096],[62.00383585376545,389.32395830976594],[62.44846840613474,390.88398031753724],[63.15060860052046,391.07489696871954],[64.34449034644518,390.5884944484836],[65.64211346916642,389.4261418477857],[67.25944277236914,387.782242059898],[69.23165633563673,385.76120575866327],[71.71743027002805,383.19494124915974],[74.20940897208703,380.6129718614996],[76.77953783638219,377.6509795241994],[79.34979535526082,374.4745011719527],[81.89429223163853,370.7737675988022],[84.10618191487475,367.04968089075675],[86.03563505299923,363.63088507493677],[87.46080352054906,360.399521388795],[88.1056750656117,357.6989220306362],[88.16828991777567,355.7236120330629],[87.48244052706974,355.00434990648984],[86.2333550765257,355.27069617696844],[84.51910378471422,356.9340997592056],[82.51573374887522,359.32984726594015],[80.27308198379643,362.24551851202096],[78.21667296709421,365.22803860275263],[76.35201341247313,368.5401097166253],[74.99308933654112,371.6932036120464],[74.35212759703364,374.70821482483126],[74.60967360095816,377.26474387207355],[75.8849959549687,379.3530494492573],[77.94172322119522,380.842715697145],[80.57299755293872,381.8430887164298],[83.95715202891785,382.2149938287469],[87.7255628157082,381.7306166114225],[91.40530995863634,380.2991663616734],[95.13913472270957,378.13128514703686],[98.92708765115646,375.7552142431162],[102.0579850561092,372.9253456761065],[104.97507141472926,369.44997213897597]],strokeWidth:2},{id:"BcwPw",type:"freehand",shape:"feltTipPen",points:[[107.17330800162682,315.3864822394383],[107.17330800162682,314.68788165725556],[107.68605557639017,312.90885394396474],[107.96149974513816,313.2362923673821],[108.10703733793963,315.0497318130668],[107.8487479673318,318.03523127197906],[107.32153980175809,322.12789466339774],[106.61305306052401,327.6496629440474],[105.74690506062763,335.00159663015376],[104.73739866196371,343.78755873208894],[103.94267964865736,352.97766303651343],[103.35592288485196,361.47102300039325],[102.91428825429313,368.76097715745465],[102.6058707992234,374.9056149852507],[102.71664913860292,379.9377566430242],[103.17859970557953,383.6504834901055],[103.92926148783505,386.2850629415473],[105.18518596763676,387.2232908455765],[106.47876774090406,386.58627383548384],[108.42878794523818,384.57530357161824],[110.29842036408337,381.5909146492971],[112.34070966123869,377.28716626469696]],strokeWidth:2},{id:"yMmdM",type:"freehand",shape:"feltTipPen",points:[[128.1816309435763,331.4516703715174],[129.51989239862593,327.43688600636807],[131.005085696143,323.4655010709533],[132.17321403650323,320.22803619761754],[133.24924577177063,317.90628029633746],[134.02975227964959,316.5798884844974],[134.14783424896297,316.54041718292166],[133.8926984321866,317.4977479623561],[133.22287144213902,318.7988827390612],[132.27887681412,321.3442647147925],[130.829808383076,324.8231649206603],[129.27178361773264,329.3964588424354],[127.78393542349028,334.4312208988461],[126.31888454196638,340.2327386833279],[125.22792882378127,346.5727097657512],[124.13664240037093,353.24911989309595],[123.36064559305925,359.88700063912194],[122.81705197935372,366.0875872230375],[122.79462123094964,371.3624312339792],[123.15298153689861,375.5286555827964],[123.81108128708121,378.64043637310743],[124.6839217725904,380.3996198544631],[125.97026539321524,380.7890049944302],[127.99056067292241,380.19213831837743],[130.21153900142696,378.88476388393275],[132.56469019269213,377.07184390433423],[134.71141990522602,374.91101506003025],[136.96790159302333,372.5508270030653],[138.9351434822873,370.14526674676773],[140.72162313101268,367.6906625775785],[142.03572860518085,365.5229081393748],[142.89232465753918,363.3325348487063],[143.47467228900274,361.3929185298751],[143.84497915370986,359.6507432215033],[144.08901675659746,358.05932667710414],[143.8855064656289,356.820346202075],[143.34705522373548,356.3725972874557],[142.5808927595545,356.7898143492387],[141.9800274132959,357.49246689183866],[141.20573421822047,358.75234451256193],[140.60413838294454,360.40611171229585],[140.11465596613886,362.41982095785744],[139.76488822540597,364.9797643765863],[139.54737858625236,367.56314059669813],[139.74002812916643,370.2232473322459],[140.26313308226082,372.78694339848727],[141.0063724813411,375.06357617497207],[142.27660832589373,376.7366991982256],[143.90287253970297,377.2456393097712],[145.77666987749132,376.86319717881844],[147.58367859613742,375.4638233638746],[149.25082847105915,373.33115185586604],[150.50962222932145,370.61436904767044],[151.43056032976693,367.46666561075864],[151.44918900033605,364.2979858863094],[150.68786139509513,361.64371212257294],[148.71372979842073,359.9930422568298],[146.43462336140402,359.1790375455451]],strokeWidth:2},{id:"mGnrA",type:"freehand",shape:"feltTipPen",points:[[177.499248662022,358.6389118258051],[178.19838756103655,357.240634027776],[178.44740448759654,357.73951734758367],[178.55074397484105,359.33715074880394],[178.61014442712673,361.4559598986337],[178.64812496426435,364.2721952687746],[178.67290254524488,367.2007471343571],[179.01405705257372,370.25629081582184],[179.32285897543971,373.5847859160079],[179.84516425618978,376.4537648810213],[180.89634486087044,378.84118449524004],[182.04776635223294,380.5504960546162],[183.59627761223265,381.1254591487498],[185.41297733632092,380.38858883018776],[187.4644196745192,378.70642262542907],[190.0164112387286,376.2831107782752],[192.61780039149068,373.0528249699667],[195.21903098900867,369.54518732001935],[197.46178243734954,366.1757458818859],[199.45547340950435,363.28229190347093],[201.02062392742647,361.29363533703264],[201.6806297994729,360.75294306951065],[201.77853184386782,361.7431025372819],[201.72497431135622,363.63138804040074],[201.29432857716762,366.2245554151353],[200.87616025463996,369.3207624083346],[200.50422730959127,372.52586028824345],[200.5296583169607,375.60774436001003],[200.89620266978778,378.2107264732288],[201.87814701245662,380.18178744391145],[203.3237210060252,381.1444162192723],[205.0952749780102,381.0964166703482],[207.12816635710493,380.2710789162705],[209.69166653409167,378.53143858393224],[212.3259393904696,376.11874256230595],[214.96944377406982,373.1964359099332],[217.6021329743906,369.60896619783244],[220.1777634274652,365.88642929980443],[222.37298449208703,362.7935994579123],[223.6327261608729,360.8606551033893],[224.5684389548988,359.7015188824592],[224.848266046967,358.9966931873808],[224.61214610266467,358.909744955666],[224.33578711229762,359.2864283518914],[224.33158681173774,359.7816923132753],[224.33524221214162,359.9371871220031],[224.5894090448324,360.01990397554465]],strokeWidth:2},{id:"zZrtc",type:"freehand",shape:"feltTipPen",points:[[235.5810826780001,358.6389118258051],[234.87964309260298,358.6389118258051],[234.61889445335038,358.1611628971107],[234.12449763453247,357.8656015196187],[233.46096624185958,357.7287023810416],[232.64446222875682,357.96746526656835],[231.76248040139313,358.80157625025123],[231.11962755143333,360.3701824969706],[230.17840909863168,362.6051131656107],[229.4605095880559,365.37953360092007],[228.64780049405414,368.46029452436534],[228.04048779767805,371.5130428011137],[227.9466860371993,374.48234753046864],[228.57108726883013,376.7707524845849],[229.75509474791085,378.03104531888886],[231.33021885632598,378.2125552146311],[233.2322381762786,377.24153734271596],[235.350270710728,375.3812154051514],[237.66842033402082,372.8432426035336],[239.49839693217888,369.784392518722],[241.1186238910853,366.75311790215375],[241.97995651143202,363.75648976309395],[242.20144532604337,361.4990092726251],[241.62986112851473,359.9686264420855],[240.7453803173824,359.4909918772258],[239.70060619713928,359.61493973409625],[238.46628906983943,359.86025588147396],[237.4495263714012,360.48134818521913],[237.32546352205378,361.03727631242265],[237.67287740498483,361.4655667580785],[238.6168285626605,361.8240157781095],[240.09541291123065,361.7730616971306],[241.94515372652637,361.6449551519184],[244.0967417348616,361.5205918740306],[246.47485211045438,361.7366995224559],[248.5281031434509,362.2144873500386],[250.0551312107114,363.24407262563483],[251.141761027491,365.0075690683382],[251.57281377925102,367.3754897553393],[251.47296243247825,369.8655611461757],[250.9934349814344,372.4362369970025],[250.53594587826825,374.7619348242309],[249.76259042304292,376.65352381560507],[249.13345875134888,377.59033921163],[249.01758827576901,377.5135455035091],[249.2624580703403,376.38359800758855],[250.12886115846942,374.1032174977402],[251.49417534682476,370.9500521532448],[253.27634649718476,367.34397132727764],[255.34885490762855,363.50176547657185],[257.57968519334173,360.0180973881018],[259.93922766570523,357.0787636938888],[262.0338021629971,354.5988338504333]],strokeWidth:2},{id:"yrTcA",type:"freehand",shape:"feltTipPen",points:[[278.8335122643667,328.9801029665826],[278.8335122643667,327.58830961444465],[278.8335122643667,326.5959858143718],[278.8335122643667,325.2256164828744],[279.2202967000033,324.008793202733],[279.4897740257475,322.8820472857736],[279.64959309551983,322.8548143681749],[279.76489652259744,323.81932610205087],[279.55136734276704,325.7282939759892],[279.0469836389587,328.9265161868364],[278.32282063931353,333.4341849751875],[277.10897753909836,338.967797349744],[275.80804316619884,345.12771157867274],[274.17889365103616,352.1356790585608],[272.6178913237164,358.64921406843797],[271.41762031628906,364.19170052087367],[270.54105291047614,368.60978897979686],[270.4934399784657,372.05877484991225],[271.21196242857883,373.64407770722056],[272.48962823800144,373.91799434599244],[274.1945640050822,372.91718788023474],[276.56099368131737,370.8606177518944],[279.05255793107864,368.16885395093806],[281.6954588460365,365.6147549907885],[284.3210051820004,363.0317168239456],[286.5745619365569,361.06681357824556],[287.8386683035131,359.701713408231],[288.41766561788614,358.71257258676934],[288.46219133030223,357.71887731353246],[288.3509886237719,356.74788405508053],[288.21574014326217,355.81649124761344],[287.6921519926746,355.04123324765834],[287.20458811748864,354.28059387569857],[286.5366712370856,353.67469994964114],[286.0639823531331,353.26353898266126],[285.4028205618868,353.2472010262457],[284.89198925774696,353.6075500359978],[284.1754186117499,354.5654800797532],[283.6143451968117,356.3366877408201],[282.89526099457754,358.744193285432],[282.0497432745652,361.5342572721623],[281.42469080018606,364.6708777838733],[280.94234835119533,368.111457274031],[280.6220914499307,370.98002970199497],[280.6919263435569,373.5788838303336],[281.13260414606276,375.42029417245186],[282.1178378200148,376.3341376652573],[283.570040972345,376.2527794576102],[285.391336049941,374.76440288736677],[287.75696108880953,372.1776960561668],[290.2704700021132,368.7432288511066],[292.8572238825105,364.40833820819563],[295.76403028033593,359.0734292865994],[298.614612813743,352.7127720393922],[301.33369432594924,345.64741876713407],[304.31571852994176,338.29865298186206],[306.85002528026104,331.5874947865453],[308.98008917265,325.9873090464628],[310.87505010500837,321.17110936169894],[312.64995449177974,317.471917041323],[313.94677557613323,314.55913036891735],[314.7208301206402,312.5081990010961],[315.2561778603836,310.8273470804464],[315.26904792981105,309.6496526322556],[315.17033200858265,309.2719821681497],[314.7824604408059,309.7235194802009],[314.10816358766994,310.78949256064817],[313.2312029081143,312.61697650816615],[312.22582977048097,315.36794383162606],[310.7534439208212,319.281782296823],[308.9489254373196,324.35597900703516],[306.9755744939469,330.12329863704446],[304.493667287492,337.11131793098076],[302.31011773607935,344.5789287650153],[300.3790682428367,351.50855019317197],[299.22926948805804,357.7435772931197],[298.740627570031,362.97524129361165],[299.09200346723725,367.2079571723273],[300.11060198752654,370.19497449338206],[301.95944004060544,371.9472792300979],[304.48750888277056,372.2649938952066],[307.4720288779993,371.2380847471798],[310.4153822205861,369.94518305581397]],strokeWidth:2},{id:"HbPrm",type:"freehand",shape:"feltTipPen",points:[[109.79648768166226,133.37994384765625],[109.79648768166226,133.37994384765625],[109.79648768166226,133.9123349007832],[109.35614145739532,135.0590592685703],[107.92467957992176,136.9081105477071],[105.54602400589988,139.89632636757142],[102.22437505814241,143.97527653826364],[98.2323240448261,148.82873858727453],[93.03957175123014,154.77254023719797],[87.82217952377141,160.22274567033946],[82.87207777257095,164.97604470290207],[78.43988043643094,168.89361830389134],[74.92514185628988,171.65364666951973],[73.16273355102089,172.8008668319053],[72.72678674637518,172.75799013834512],[73.56446149572434,171.5057982144417],[75.46011315061105,169.30611943401436],[78.06326495751387,166.83023687563946],[80.89177496218963,164.1492169154344],[83.74302232315267,161.77609084008327],[86.52786623520956,159.72121594618693],[88.92919005742374,157.88893596626713],[90.83737637182617,156.76316868521644],[91.96824066614568,156.499483152842],[92.74501288515603,157.05151147170636],[93.23631882298469,158.54590251763057],[93.21063268077478,161.10313759670316],[93.09991735976064,164.7555844442213],[92.61551771865675,170.06007640283133],[92.19777453728466,176.64557341439468],[91.57947742445594,184.88165725068666],[91.08734598566502,193.733023773686],[90.4100087041877,203.39437308513607],[89.56907229557487,212.84067133937333],[88.94170137486913,221.55993804135778],[88.46988974647365,228.69696750760158],[88.1386715665974,234.6720730365687],[88.18530703949568,238.60818260499582],[88.60912347798967,240.26579825107638],[89.27882089095988,239.9505076331161],[90.1680066995807,237.32672133212418],[91.21010746975185,233.36227246339604],[92.31854092168419,229.1926961149211]],strokeWidth:2},{id:"kMZAM",type:"freehand",shape:"feltTipPen",points:[[109.79648768166226,176.01455212283236],[110.47730304077572,173.97210604549218],[113.60359420488385,168.88895139502438],[116.55805167600397,165.32083242489352],[119.07015329460933,162.48903314530617],[121.08808758329019,160.60806238385976],[122.59399319206136,159.5449683533252],[123.4383540132701,159.63081944625537],[124.47644899613306,160.5056192368811],[124.68081080472007,162.58220980128863],[123.87039770098863,166.21483986701696],[122.14649040750373,170.43777706596939],[120.04625823383185,174.81654420157338],[117.44861914941498,179.3449239145848],[114.48392604556079,183.74285710743152],[111.55243060776866,187.37306490617084],[108.96531256464687,190.00587273526708],[106.89756953989877,191.67963897436857],[105.63239245311524,191.61777196173716],[105.69073445652862,190.41486647040438],[106.50334253691972,188.411643983638],[108.22396503161735,185.72552327618723],[110.65678013453339,182.88013718326783],[114.00310168570081,179.88153451767266],[117.81528899610657,177.09553020166823],[122.10298304415164,174.6241675184092],[126.67412525685359,172.54312507943268],[131.03259880876362,171.07496677106155],[135.63274730673675,169.740897555861],[139.6485547432594,168.84001753127814],[143.3010582388713,168.54362376587596],[146.24445645689957,168.73770189413426],[148.38372205561677,169.62494926835734],[149.48357508174172,171.32170048543685],[149.4985441387903,173.66066774159754],[148.40464690482418,176.45576577130305],[146.08596713506427,179.94211424173682],[142.90077150256775,183.28842837446882],[139.0435370732214,186.79938392325766],[134.78688485788848,189.73916435197953],[131.24274161566223,191.86461980618424]],strokeWidth:2},{id:"zRYyC",type:"freehand",shape:"feltTipPen",points:[[125.86167581374139,185.9008217425735],[125.86167581374139,185.20137187537875],[126.33634777264842,184.93865978775648],[127.01205571525793,184.8452152910486],[127.48372706680584,184.42526521858872],[128.0781427591328,184.10418497309274],[128.80083983394275,184.53177880910607],[129.32182407505888,185.19062012362065],[129.8404950950137,186.62539903127526],[130.20600353478062,188.74760676485766],[130.4730519524419,191.44528758157685],[130.64704728480933,194.91556697310352],[130.75964075113166,198.89369789348075],[130.48040536152484,203.2462307066753],[130.2145160211844,208.09953094585308],[129.6979902316143,213.06423902224196],[129.2881101043597,218.06172587877245],[128.6616968845758,222.41483867346687],[128.16900154264022,225.9684511247442],[127.45729599567244,228.72681328942326],[126.89238376667026,230.21359041232336],[126.55329688370807,230.4423000068282],[126.28838884215929,229.79279292528554],[126.11511349518992,228.49183102940333],[125.66272929726551,226.32730342068862],[124.9996570541291,223.86850546535698],[124.15557193372524,220.9112663852875],[122.89575666454198,218.08398566082815],[121.26827359280583,214.99563295945427],[120.02019183115067,212.38609744841233]],strokeWidth:2},{id:"iixpb",type:"freehand",shape:"feltTipPen",points:[[115.97540619400024,201.96600987465172],[115.97540619400024,201.96600987465172],[115.97540619400024,203.02985937583708],[115.54032758907783,204.0070671514286],[114.88800913723844,205.33321060054277],[113.74972834251412,206.90973225832658],[112.62888170390261,208.65340637972622],[111.52872781486985,210.5177311502839],[110.58280353034593,212.47644418757773]],strokeWidth:2},{id:"xaJii",type:"freehand",shape:"feltTipPen",points:[[139.455296540885,200.7302261721843],[140.15474640807975,200.7302261721843],[141.43569668226633,200.7302261721843],[142.95263655931922,200.7302261721843],[144.2463899393897,201.112900216227],[145.42172017496,201.3817113071973],[146.54306293509512,201.88117725575376],[147.9361619503029,202.55635001542396],[149.52934565224496,203.43187635623053],[151.03365414805467,204.425541391327],[152.53195236756756,205.2591203687398],[153.91735055263598,206.18576475125337],[155.25118970327185,206.87342478932715]],strokeWidth:2},{id:"nHaGM",type:"freehand",shape:"feltTipPen",points:[[195.06556315192802,184.66503804010517],[194.36577270567545,183.96524759385284],[194.11966243371353,183.2156912285518],[194.42839689931543,182.413391420685],[195.38255817085064,181.93059307953172],[196.71015574468674,181.64745291630243],[198.9836776168852,181.45047424326094],[202.24180015166553,181.31342301711902],[206.5531121045251,181.4341227980467],[211.55474336330417,181.5866082480352],[217.4207978979657,181.74723474440088],[223.32020948372315,181.8912387717337],[229.06086802732807,181.99931874442427],[234.37513761124728,182.08183961140458],[238.96182670526377,182.1454340663986],[242.6114125480285,182.19347063517034],[245.45635766125383,182.50532452339849]],strokeWidth:2},{id:"EDFJM",type:"freehand",shape:"feltTipPen",points:[[224.72437201115076,169.83563361049437],[224.72437201115076,169.13455663361037],[225.2079955920576,169.36076453227815],[225.89008018478512,170.3583013813186],[226.31165432393618,172.1067967876479],[226.57572496593116,174.66616349979358],[226.7538355421318,178.12330470745565],[226.87645078870196,182.52686844185246],[226.41127251909484,188.3322416368237],[225.0348371284283,194.60819591541895],[222.95133088796047,200.9662623094182],[220.33316719163213,207.03685764458442],[217.34622210823318,212.23298829259875],[214.0825521121924,216.69038015615297],[210.87450113748218,219.98009561713116],[208.14025566872465,222.2130275818863],[205.77022936942967,223.71135888882418],[203.9556967168569,224.0171503529582],[202.82487976095376,223.02012038579687]],strokeWidth:2},{id:"tPPjW",type:"freehand",shape:"feltTipPen",points:[[214.83810239140985,174.77876842036403],[215.53557379662493,174.77876842036403],[215.31310253187962,175.26021256012427],[215.14029082245952,176.34950917375045],[214.67482574322503,178.13835448118243],[214.01172808707815,180.72119891576767],[212.8818987570528,184.53974762699363],[211.42967488231852,188.87145114071245],[209.55013469246683,193.93392264882277],[207.4512400567005,198.69907022289226],[205.23306515042214,202.9184009216524],[203.1813185653882,206.10501297465999],[201.54427258160263,208.21386687290487],[200.50406876930015,208.82949491306226],[200.07467236854131,208.42414579901924],[200.48235915331747,207.2563553075879],[201.53793171604798,205.87624633142332],[203.41501919103302,204.36880053149162],[205.651966890802,202.75698331904277],[208.35284358660806,201.59237753626167],[211.10942180954476,201.38335532602196],[214.4799684297409,201.99610116851727],[217.70672589360743,203.85157615492972],[221.0369614966396,206.68130269487938],[224.486754623965,210.19983154970123],[227.3261063084026,213.56297067303785],[229.79142906059064,216.55482508601926],[231.84971094453863,219.10534193545482],[233.75743845898182,221.09207119329403],[235.06137802772287,221.85164764448928],[235.89807799547953,221.54480701567536],[236.4394236685862,220.17265552988738]],strokeWidth:2},{id:"XDkHb",type:"freehand",shape:"feltTipPen",points:[[243.26112754816495,179.7219032302346],[243.9553454502302,179.02768532816935],[245.73672549383127,177.75999517274977],[247.5136816472534,176.680809019128],[249.3223450780731,176.05208500486788],[251.19330404012317,176.0175285502355],[252.79138229464093,176.35245384896552],[254.2541983529636,177.5682024874468],[255.6123567509444,179.0794366765167],[256.6125158297839,181.2610535734575],[257.2758319461491,184.02050198639336],[257.3698832334496,186.84793701923445],[256.69694657784544,189.6541390298471],[255.43939762442483,192.38743898242137],[253.76668343730717,194.7846885095114],[252.12347143357056,196.798490382801],[250.56091296426553,198.57701124288815],[249.58067663030442,200.2417691450164],[249.5877017085238,201.33624500092628],[250.3188877290031,202.38617334846367],[251.93125810250763,203.4512825550837],[253.92814674970646,204.84919151460053],[256.1573646351769,206.53192054550072],[258.6631790176077,208.8338036803816],[260.5723064903159,211.21133565093805],[261.9397068152184,213.61976578067242],[262.89862021824933,216.1173477296261],[262.93442953438625,218.41333535572358],[262.147722023112,220.33481639801903],[260.79266282845697,221.7653773917973],[258.7018707536306,222.76865069811447],[256.0384345196378,223.4011301710807],[252.9966311789076,223.48582088860076],[249.62805325619365,222.81743646421182],[246.1436457459588,221.55825801419724],[243.16471868710937,219.55471773904628],[240.72762713587053,217.34651813267374],[238.9182240135217,215.30389314654803],[237.67665323034134,213.45473674811092],[236.83616348649457,211.70325416805554],[236.59105858497264,210.27018170077918],[237.20109361257528,209.07679116086365],[238.44405265699902,208.23692119782845],[240.42238456774317,207.3806517592593],[242.93733507957313,206.47994488699896],[246.19814135098704,205.48644301196146],[250.16646687275124,204.7140316132709],[255.08717034644496,203.8670772531559],[260.4572753294242,202.8944418535366],[266.1195053352783,202.1766410687669],[271.6412270226606,201.3269350051969],[276.726360314849,200.7030789180326],[281.4963040134933,200.26471123997908],[285.973613519139,199.64451363184253],[289.62570919265227,199.15668653786543]],strokeWidth:2},{id:"NicwR",type:"freehand",shape:"feltTipPen",points:[[342.01009336531547,146.35574326360893],[342.01009336531547,145.65399656252248],[342.01009336531547,144.8934740953964],[342.01009336531547,144.0775657119675],[342.01009336531547,144.41155598738715],[342.01009336531547,145.73307910776293],[341.66807622233637,148.37242924565817],[341.0859877072487,152.55639928089658],[339.98185339807173,158.4461032419722],[338.46454493618194,165.95401097693048],[336.34585554829846,174.63198105936408],[334.42287007583946,182.6932632759399],[332.29504882543915,190.20648056754817],[330.63104357555653,196.8598463814169],[329.07316436873043,202.48321008783387],[327.8980925404353,207.20483149622396],[327.08638402232964,210.8244265314197]],strokeWidth:2},{id:"sRRNe",type:"freehand",shape:"feltTipPen",points:[[325.94490523323634,229.1532513289394],[325.94490523323634,229.1532513289394],[324.3864443272455,230.1922252662671],[323.15511529456035,231.59301219439112]],strokeWidth:2},{id:"fDPmi",type:"freehand",shape:"feltTipPen",points:[[374.1194388638175,314.3101386264214],[374.1194388638175,312.90885394396474],[374.1194388638175,312.97706458911836],[373.68949949337656,313.44495624835037],[373.41768138077686,314.4947913296067],[372.55584973202275,315.89797343314586],[371.60093397098916,318.51904651078513],[370.2979754680743,322.01260799246376],[368.25803353264854,326.76344141777537],[365.65514993901587,332.8658419135343],[363.0286503468671,339.0943755060028],[360.41589638485283,345.10017410159327],[357.7660572894553,350.60803775120013],[355.4783138672312,355.3928104359887],[353.73843928786,359.24461585987393],[352.145855053867,362.38485242157304]],strokeWidth:2},{id:"PFTyp",type:"freehand",shape:"feltTipPen",points:[[344.2248463021271,379.692944476946],[343.5242524666848,378.9923506415037],[343.2941655804586,378.7622637552775]],strokeWidth:2},{id:"EeWSd",type:"freehand",shape:"feltTipPen",points:[[75.57564342783854,644.5415974683578],[75.57564342783854,643.8385579392179],[75.57564342783854,643.0796575063282],[75.57564342783854,642.2677210400775],[75.57564342783854,641.4019218420626],[75.92187667473496,640.7739867948403],[76.16339270042232,640.4548279256232],[76.33722823708473,640.5516967715471],[76.48720382086464,641.1756645455907],[76.60183769043493,642.3574088920172],[76.68840733065946,644.6293706552124],[76.766042817646,648.165255983994],[76.48957632156095,653.1765765295272],[75.9012288867703,660.2662940903779],[75.12093540804568,668.6402020184591],[74.20349433032817,677.5470422456829],[73.50007616539352,686.1183469659713],[72.97053661515503,693.9103119511383],[72.56140253640598,701.1168091231693],[72.24827008271842,707.1174623470365],[72.0410612067165,711.8584176597974],[72.23942893241093,715.5925951784202],[72.44120753341241,717.90124325235],[72.30939807170836,719.0310647714455],[72.19444383556475,719.0083390676632],[71.78945398767411,718.1506887918395],[71.46365766852142,716.3521167298923],[71.22265759186513,713.9049694119617],[71.0432829003974,711.0279308067707],[71.19726333307113,707.7876489654013],[71.3311867843816,703.9432269024292],[71.78736079772085,699.7587142406205],[72.79812225504458,695.3069314006079],[73.95450257060162,690.3670344007573],[75.48078749024995,685.3830771352232],[77.30436958766069,680.7187710430962],[79.36020088762149,676.2825370064916],[81.56615586488243,672.6448661018771],[83.89141064196298,669.7372465962353],[86.33203490054308,667.6169228234412],[88.40979459794318,666.2005641581095],[90.6710824253808,665.6091077763322],[92.61731004875134,665.6707495795363],[94.37219744736382,666.4917002862089],[95.93641683306015,668.2250799204767],[97.07897963098691,670.9282819438145],[98.17249855409005,674.3511361857209],[98.95099797590052,678.2994353770432],[99.49355174953467,682.6081693638394],[99.51166443935796,687.2097681583327],[98.82464199803604,691.9825938529038],[97.59319390291972,696.8526046861857],[95.94344326661104,701.795611232038],[94.02128205500986,706.4127425773727],[91.52891831023527,711.0984064742734],[88.62897918819255,715.2030995703008],[85.76861230191258,718.4784638926353],[82.93096546138514,720.8615223716733],[80.22692780560038,722.4751272502353],[77.89256512259777,723.5655931920651],[75.77664198546137,723.9401303227578],[74.26976340281664,723.7562186077826],[73.30918441983619,723.145838922595]],strokeWidth:2},{id:"Zhdzy",type:"freehand",shape:"feltTipPen",points:[[100.29131747719094,695.2087292695301],[100.29131747719094,694.5055751793593],[100.76966360387274,694.2453382857807],[101.44995130332501,694.5516872371127],[101.88006659063313,695.1294102296083],[102.48049533703085,696.5371374217834],[102.90193726861031,698.1937387632697],[103.19557285768593,700.3340639329072],[103.52708017741867,703.4869171366563],[103.75641186405397,706.9112632097472],[103.56373869815167,710.2191386566988],[103.03962837531691,712.9735101830584],[102.30819490270375,715.3400081560421],[101.65347929452747,716.5028074684824],[101.22139409427956,716.1848621701693],[101.20565884396257,714.8319811703609],[101.85324497798439,712.3179577173973],[103.0235506191487,709.2942712077629],[104.62955050710258,705.5929151359351],[106.9193778730417,701.6009741078246],[108.96267065634021,698.3970410314837]],strokeWidth:2},{id:"eiKfZ",type:"freehand",shape:"feltTipPen",points:[[123.7712078240757,706.3307825917386],[123.7712078240757,706.3307825917386],[123.7712078240757,705.2761926782796],[123.7712078240757,704.3145223805373],[123.7712078240757,703.361119801777],[123.7712078240757,702.3922299898618],[123.7712078240757,701.4002262617037],[123.7712078240757,700.3740223295949],[123.45256473406636,699.3645323308979],[122.87729243630889,698.7251925043042],[122.08142705286224,698.6052768440809],[121.18200880254454,698.9003467090674],[120.14043722958701,699.8221815883121],[119.02228785489962,700.9032457092344],[117.77059684842021,702.4695240391661],[116.87486624587615,703.9928042188853],[115.87562064722471,705.8621946948738],[115.17665876841585,707.8834494653688],[114.6905124299729,710.0338522647708],[114.35198111899768,712.3167261862536],[114.13209368364124,714.319799078909],[114.31833288032959,716.2337395784234],[114.8441827110376,717.5772521582967],[115.56389468362732,718.5009060395896],[116.51417361303749,718.825561403723],[117.85101736632947,718.3212065714847],[119.22681798206014,717.193379976316],[120.62346613025335,715.5916787188812],[122.02726211111218,713.6467621375518],[123.37268928277064,711.8002811976144],[124.42097911640127,709.6694634373398],[125.44228335184181,707.7763729324697],[126.20990054952819,706.0325815234605],[126.6777732997769,704.8590743700711],[126.68107075519134,704.0126922013733],[126.62382346323199,703.6891669665497],[126.56920378082356,703.9004700285918],[126.49179692669992,704.7609961278854],[126.42626489748619,706.1716801772659],[126.34705521319535,707.9482609896295],[126.28780600179522,709.9991347104256],[126.24277522901076,711.9867825757856],[126.24277522901076,713.749379837252],[126.55861886728991,715.1886852703674],[127.13054080643411,716.0617838414232],[128.23942704652205,716.0533200671603],[129.41415150286986,715.2888733173613],[130.96459251497714,713.6448630245213],[132.48552656240287,711.3250076702561],[134.38553768932167,708.4179884935511],[136.09588482548207,705.2591490379841],[137.70733913403757,702.4781889135452],[139.20678791887764,700.0808673095498],[140.38844815103613,698.4736917075488],[141.12685659108575,698.4806535436633],[141.61822218414665,699.2734454319093],[141.964634872114,700.9859742054023],[141.83606540321108,703.4316994171609],[141.68160482542618,706.0440142346438],[141.5248487535676,708.8581312435103],[141.3803651589638,711.2272921503754],[141.5713918019713,713.2027507927687],[142.06337546734704,714.3485894414634],[142.77393478656046,715.1845347937187],[143.69072449068204,715.10178087023],[144.7124835254918,714.5525525267899],[145.83016490294705,713.4074158119874],[147.3946291202613,711.7530728256056],[148.87311307890246,709.8298922747331],[150.32152114158504,708.297920693788],[151.68515346665305,707.1903964815419],[153.01652545307394,706.3640384710961],[154.08314721596145,706.4080548049992],[154.76694404962592,707.5081769011699],[155.25250359013245,709.0986836759794],[155.56409486911917,710.7432590701142],[155.74990229361634,712.7183970414626],[156.1770496959296,714.3318000114018],[156.8124886974611,715.2214242140808],[157.58198231593957,715.1341022023071],[158.82137270226605,714.0070550872638],[160.4359008269842,711.7139538964789],[162.3249274886462,708.8869239636847],[164.48413593667334,705.6287517110131],[166.4510487282194,702.4219371951322],[168.22662032946693,699.670893638618]],strokeWidth:2},{id:"cNdFJ",type:"freehand",shape:"feltTipPen",points:[[175.67412332771556,698.9160803769328],[175.67412332771556,698.2124853192436],[175.67412332771556,697.45203132511],[175.67412332771556,697.0864144078773],[175.67412332771556,697.2784546087973],[175.67412332771556,697.7723820321603],[175.67412332771556,698.4536754865471],[175.67412332771556,699.602972334973],[175.67412332771556,701.1357568406443],[175.67412332771556,703.0019128042481],[175.67412332771556,705.1179848171382],[175.34696232119455,707.105690608535],[175.07753086065082,709.2010686957301],[174.89158432702044,710.3622730380744],[174.7456465345793,710.5808576651134],[174.95867806103826,709.9992394342198],[175.13781713213558,709.1340835505812],[175.59582547094766,707.7372604208927],[176.28543820854298,706.2659507757471],[177.17850474939388,704.4651633095427],[178.18207167431416,702.705312341066],[179.3116231948041,701.3328972824474],[180.49591090668906,700.0747106136655],[181.67539354011234,699.191145705408],[182.861229449811,698.5925689170481],[184.07120417375592,698.2003113688393],[185.30882081421447,697.9321223728275],[186.5709324861744,697.796244635043],[187.60812035820192,698.0403123877936],[188.22663587018957,698.5724507716759],[188.64661417248823,699.6723755708531],[188.93302768940504,700.8492772485415],[189.1169743771489,702.4170480730345],[189.22245781712655,703.9406610800229],[189.2677440548594,705.8640488128972],[188.93956387798477,707.6280214296535],[188.68686388226303,708.8495533540672]],strokeWidth:2},{id:"hmmjc",type:"freehand",shape:"feltTipPen",points:[[200.38979737706796,697.6802966744654],[200.38979737706796,697.6802966744654],[200.38979737706796,698.2127217049133],[200.38979737706796,698.9191749464858],[200.38979737706796,700.126494837863],[200.38979737706796,701.2530669607504],[200.38979737706796,702.7082833439104],[200.38979737706796,704.7287249537499],[200.0611720047212,706.7655088549905],[199.7908527592445,708.9542978686154],[199.60495599109464,710.8302703945869],[199.46160557782497,711.9174850129948]],strokeWidth:2},{id:"DwBED",type:"freehand",shape:"feltTipPen",points:[[200.38979737706796,687.7940270547242],[200.38979737706796,687.7940270547242],[200.38979737706796,687.7940270547242]],strokeWidth:2},{id:"fESHQ",type:"freehand",shape:"feltTipPen",points:[[211.51185069927652,696.4445129719975],[211.51185069927652,695.7408492696472],[211.51185069927652,696.0430111300902],[211.94356769423808,696.631248017894],[212.59242452326345,697.3596160980187],[213.36955171369783,698.186128465637],[214.25164589492357,699.4427407832541],[215.19098614128785,700.6536521457447],[216.31312322507375,702.3124849862361],[217.51837500538323,703.9751224459233],[218.73086971323875,705.4870107873367],[219.97377706426988,707.2898758447864],[221.2361662320414,708.6833743007328],[222.4411979102013,709.6237118211743],[223.4345273460263,710.6394762180062],[224.02886743579262,710.9955408421006]],strokeWidth:2},{id:"NRyaM",type:"freehand",shape:"feltTipPen",points:[[225.10547142642037,695.2087292695301],[225.10547142642037,695.2087292695301],[224.57601989136793,695.2087292695301],[224.31960697719302,695.2087292695301],[223.77109816870126,695.2087292695301],[223.04278886415506,695.569422926334],[222.23224821092032,696.1614573792913],[221.32022611042754,697.2461158440669],[219.8956423877542,698.7672849938258],[218.47528716045014,700.5826083915404],[216.7761435770022,702.6313082677298],[215.1119546892881,704.8885346502848],[213.59173390328357,706.8939530772636],[212.13929261359345,708.7119430607377],[210.9525657393845,709.8861957043268]],strokeWidth:2},{id:"rExRd",type:"freehand",shape:"feltTipPen",points:[[233.75595734369364,711.2739174016092],[233.75595734369364,711.2739174016092]],strokeWidth:2},{id:"DkEDR",type:"freehand",shape:"feltTipPen",points:[[257.2358476905784,697.6802966744654],[257.2358476905784,696.9765692186488],[256.75181966316296,696.7196201950646],[256.4585099754036,696.2196345087668],[255.9580752004436,695.8734114456884],[255.3013204417967,695.6930926266905],[254.50570153748714,695.5646101490129],[253.60874299833432,695.4718188617626],[252.68670632137292,695.632365188028],[251.77532857777584,696.4514989393547],[250.77362453005145,697.7670939463092],[250.0300584423092,699.4752293716929],[249.1851690853162,701.4397319006457],[248.56305062982784,703.9122799425118],[248.10589353799202,706.5542782011194],[247.8133385114341,708.8282604387946],[248.22020914220462,710.6476112964392],[249.24745261635968,711.818773306853],[250.7665336376336,712.0245498827912],[252.88876486685314,711.0907082736644],[255.22413632198396,709.2895446194834],[257.9829703285532,707.1268850078486],[260.84875463165855,704.3683989684359],[263.2457364083787,701.973143937762],[265.11582754869943,699.7068603754838],[266.75836385329154,697.9521498657923],[267.62928373671986,697.0733963084485],[267.7666450311934,697.2282207827843],[267.16919894094195,698.1055403973269],[266.27296963279883,699.1785208012161],[265.14566085794655,700.8033174222292],[263.89597102610725,702.7927137523502],[262.8834622051125,704.748618602518],[262.16337466714987,706.453081513147],[261.9507255131235,708.1133896960473],[262.19072681814197,709.2759461532896],[263.09730044858253,710.3682679183585],[264.16817689879286,711.164317884557],[265.6881335797182,711.3945772234038],[267.5077078606267,711.1445370371953],[269.3128781726501,710.26103554677],[270.9874167183621,708.8797952501845],[272.5528789303708,707.4365481864288],[273.7433710608514,705.6502709152605],[274.517100190574,703.9787557954728],[274.7663367732969,702.3110958285952],[274.5312129826521,700.8110321573786],[273.6073319203272,699.6629161389606],[272.5499333524711,698.9061048116141],[271.0208945519476,698.3819383748905],[269.4511841788238,698.3530943371661],[267.90241153525886,698.425392058592],[266.7007660302514,698.8367032310325],[266.17286141487403,699.2278455650203],[266.21969376101043,699.501302464203],[266.6440558461441,699.7166495277602],[267.655805806131,699.8951017809977],[268.8913360686109,699.7135757645292],[270.55652301070046,699.5169653679104],[272.1769512292106,699.3653866410045],[273.7424130686164,698.8940396084972],[275.1965881429542,698.5150460502296],[276.5369897715644,698.2511837773582],[277.6807403458045,697.7111667430195],[278.7084177008831,697.2665550776564],[279.69573658754604,697.0160268534032],[280.7795642277677,697.107634521517],[281.5979574314097,697.5251634013739],[282.13408413205894,698.5114150478958],[282.5489242517745,699.9535098080969],[282.84098599868395,701.7743724611605],[283.02843058220066,703.824551042736],[282.81477093169957,706.1243719532199],[282.5932251731436,708.5354121674004],[282.40443780365973,709.9057029739824],[282.57959049244283,710.3036280965493],[283.0561392050798,709.8255664165581],[284.08719079904273,708.3820517353352],[285.2144216770599,706.538897036512],[286.74667183779053,704.370445668344],[288.5995133568345,702.3415936070719],[290.6747708704809,700.4052369256219],[292.60660986895465,698.9584806416424],[294.33204007114097,697.9635298042067],[295.7275892125079,697.8674370064332],[296.59204402039296,698.6214451825181],[297.22621987416784,700.2698855649223],[297.30632265946275,702.2917701375259],[297.2821331071837,704.5431543082382],[296.86734136627894,706.6349140197981],[296.48247909275693,708.6250717523121],[296.19332364402413,709.661928773693],[295.9687135065938,710.0674402872232],[296.43070848674466,709.6661556728818],[297.14617165450073,708.5721617999639],[298.3907899502945,706.9800446569302],[300.0154056144643,705.027825143301],[301.9425628813079,702.8602329312348],[304.07903225726096,700.8345918122459],[306.07538837299836,699.2960896957225],[308.2106723128043,698.2045825756773],[310.09784657780943,697.4534789743966],[311.89374000200274,697.2655471634303],[313.15064319795266,697.8736786678724],[314.32468855052895,699.0788096540709],[315.16125243832954,700.7403544566105],[316.02807712281884,702.700337825207],[316.6688935414484,704.8533911973636],[317.0877937625526,707.1699493962483],[317.3669109899077,709.2712320131618],[317.54367468099264,711.1655915202477]],strokeWidth:2}];function Z5(e,t,n){if(e&&e.length){const[r,i]=t,o=Math.PI/180*n,s=Math.cos(o),l=Math.sin(o);for(const c of e){const[h,d]=c;c[0]=(h-r)*s-(d-i)*l+r,c[1]=(h-r)*l+(d-i)*s+i}}}function Mb(e,t,n){const r=[];e.forEach(i=>r.push(...i)),Z5(r,t,n)}function Rb(e,t){return e[0]===t[0]&&e[1]===t[1]}function bb(e,t,n,r=1){const i=n,o=Math.max(t,.1),s=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,l=[0,0];if(i)for(const h of s)Z5(h,l,i);const c=kb(s,o,r);if(i){for(const h of s)Z5(h,l,-i);Mb(c,l,-i)}return c}function kb(e,t,n){const r=[];for(const h of e){const d=[...h];Rb(d[0],d[d.length-1])||d.push([d[0][0],d[0][1]]),d.length>2&&r.push(d)}const i=[];t=Math.max(t,.1);const o=[];for(const h of r)for(let d=0;d<h.length-1;d++){const g=h[d],v=h[d+1];if(g[1]!==v[1]){const y=Math.min(g[1],v[1]);o.push({ymin:y,ymax:Math.max(g[1],v[1]),x:y===g[1]?g[0]:v[0],islope:(v[0]-g[0])/(v[1]-g[1])})}}if(o.sort((h,d)=>h.ymin<d.ymin?-1:h.ymin>d.ymin?1:h.x<d.x?-1:h.x>d.x?1:h.ymax===d.ymax?0:(h.ymax-d.ymax)/Math.abs(h.ymax-d.ymax)),!o.length)return i;let s=[],l=o[0].ymin,c=0;for(;s.length||o.length;){if(o.length){let h=-1;for(let g=0;g<o.length&&!(o[g].ymin>l);g++)h=g;o.splice(0,h+1).forEach(g=>{s.push({s:l,edge:g})})}if(s=s.filter(h=>!(h.edge.ymax<=l)),s.sort((h,d)=>h.edge.x===d.edge.x?0:(h.edge.x-d.edge.x)/Math.abs(h.edge.x-d.edge.x)),(n!==1||c%t===0)&&s.length>1)for(let h=0;h<s.length;h=h+2){const d=h+1;if(d>=s.length)break;const g=s[h].edge,v=s[d].edge;i.push([[Math.round(g.x),l],[Math.round(v.x),l]])}l+=n,s.forEach(h=>{h.edge.x=h.edge.x+n*h.edge.islope}),c++}return i}function Sp(e,t){var n;const r=t.hachureAngle+90;let i=t.hachureGap;i<0&&(i=t.strokeWidth*4),i=Math.round(Math.max(i,.1));let o=1;return t.roughness>=1&&(((n=t.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(o=i),bb(e,i,r,o||1)}class P4{constructor(t){this.helper=t}fillPolygons(t,n){return this._fillPolygons(t,n)}_fillPolygons(t,n){const r=Sp(t,n);return{type:"fillSketch",ops:this.renderLines(r,n)}}renderLines(t,n){const r=[];for(const i of t)r.push(...this.helper.doubleLineOps(i[0][0],i[0][1],i[1][0],i[1][1],n));return r}}function Z3(e){const t=e[0],n=e[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}class Ob extends P4{fillPolygons(t,n){let r=n.hachureGap;r<0&&(r=n.strokeWidth*4),r=Math.max(r,.1);const i=Object.assign({},n,{hachureGap:r}),o=Sp(t,i),s=Math.PI/180*n.hachureAngle,l=[],c=r*.5*Math.cos(s),h=r*.5*Math.sin(s);for(const[g,v]of o)Z3([g,v])&&l.push([[g[0]-c,g[1]+h],[...v]],[[g[0]+c,g[1]-h],[...v]]);return{type:"fillSketch",ops:this.renderLines(l,n)}}}class Ib extends P4{fillPolygons(t,n){const r=this._fillPolygons(t,n),i=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),o=this._fillPolygons(t,i);return r.ops=r.ops.concat(o.ops),r}}class Fb{constructor(t){this.helper=t}fillPolygons(t,n){n=Object.assign({},n,{hachureAngle:0});const r=Sp(t,n);return this.dotsOnLines(r,n)}dotsOnLines(t,n){const r=[];let i=n.hachureGap;i<0&&(i=n.strokeWidth*4),i=Math.max(i,.1);let o=n.fillWeight;o<0&&(o=n.strokeWidth/2);const s=i/4;for(const l of t){const c=Z3(l),h=c/i,d=Math.ceil(h)-1,g=c-d*i,v=(l[0][0]+l[1][0])/2-i/4,y=Math.min(l[0][1],l[1][1]);for(let x=0;x<d;x++){const E=y+g+x*i,T=v-s+Math.random()*2*s,D=E-s+Math.random()*2*s,S=this.helper.ellipse(T,D,o,o,n);r.push(...S.ops)}}return{type:"fillSketch",ops:r}}}class Lb{constructor(t){this.helper=t}fillPolygons(t,n){const r=Sp(t,n);return{type:"fillSketch",ops:this.dashedLine(r,n)}}dashedLine(t,n){const r=n.dashOffset<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashOffset,i=n.dashGap<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashGap,o=[];return t.forEach(s=>{const l=Z3(s),c=Math.floor(l/(r+i)),h=(l+i-c*(r+i))/2;let d=s[0],g=s[1];d[0]>g[0]&&(d=s[1],g=s[0]);const v=Math.atan((g[1]-d[1])/(g[0]-d[0]));for(let y=0;y<c;y++){const x=y*(r+i),E=x+r,T=[d[0]+x*Math.cos(v)+h*Math.cos(v),d[1]+x*Math.sin(v)+h*Math.sin(v)],D=[d[0]+E*Math.cos(v)+h*Math.cos(v),d[1]+E*Math.sin(v)+h*Math.sin(v)];o.push(...this.helper.doubleLineOps(T[0],T[1],D[0],D[1],n))}}),o}}class _b{constructor(t){this.helper=t}fillPolygons(t,n){const r=n.hachureGap<0?n.strokeWidth*4:n.hachureGap,i=n.zigzagOffset<0?r:n.zigzagOffset;n=Object.assign({},n,{hachureGap:r+i});const o=Sp(t,n);return{type:"fillSketch",ops:this.zigzagLines(o,i,n)}}zigzagLines(t,n,r){const i=[];return t.forEach(o=>{const s=Z3(o),l=Math.round(s/(2*n));let c=o[0],h=o[1];c[0]>h[0]&&(c=o[1],h=o[0]);const d=Math.atan((h[1]-c[1])/(h[0]-c[0]));for(let g=0;g<l;g++){const v=g*2*n,y=(g+1)*2*n,x=Math.sqrt(2*Math.pow(n,2)),E=[c[0]+v*Math.cos(d),c[1]+v*Math.sin(d)],T=[c[0]+y*Math.cos(d),c[1]+y*Math.sin(d)],D=[E[0]+x*Math.cos(d+Math.PI/4),E[1]+x*Math.sin(d+Math.PI/4)];i.push(...this.helper.doubleLineOps(E[0],E[1],D[0],D[1],r),...this.helper.doubleLineOps(D[0],D[1],T[0],T[1],r))}}),i}}const po={};function Nb(e,t){let n=e.fillStyle||"hachure";if(!po[n])switch(n){case"zigzag":po[n]||(po[n]=new Ob(t));break;case"cross-hatch":po[n]||(po[n]=new Ib(t));break;case"dots":po[n]||(po[n]=new Fb(t));break;case"dashed":po[n]||(po[n]=new Lb(t));break;case"zigzag-line":po[n]||(po[n]=new _b(t));break;case"hachure":default:n="hachure",po[n]||(po[n]=new P4(t));break}return po[n]}function Hb(){return Math.floor(Math.random()*2**31)}class Gb{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const jb=0,Q5=1,RE=2,lm={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function $b(e){const t=new Array;for(;e!=="";)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:jb,text:RegExp.$1},e=e.substr(RegExp.$1.length);else if(e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))t[t.length]={type:Q5,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length);else return[];return t[t.length]={type:RE,text:""},t}function W7(e,t){return e.type===t}function S4(e){const t=[],n=$b(e);let r="BOD",i=0,o=n[i];for(;!W7(o,RE);){let s=0;const l=[];if(r==="BOD")if(o.text==="M"||o.text==="m")i++,s=lm[o.text],r=o.text;else return S4("M0,0"+e);else W7(o,Q5)?s=lm[r]:(i++,s=lm[o.text],r=o.text);if(i+s<n.length){for(let c=i;c<i+s;c++){const h=n[c];if(W7(h,Q5))l[l.length]=+h.text;else throw new Error("Param not a number: "+r+","+h.text)}if(typeof lm[r]=="number"){const c={key:r,data:l};t.push(c),i+=s,o=n[i],r==="M"&&(r="L"),r==="m"&&(r="l")}else throw new Error("Bad segment: "+r)}else throw new Error("Path data ended short")}return t}function bE(e){let t=0,n=0,r=0,i=0;const o=[];for(const{key:s,data:l}of e)switch(s){case"M":o.push({key:"M",data:[...l]}),[t,n]=l,[r,i]=l;break;case"m":t+=l[0],n+=l[1],o.push({key:"M",data:[t,n]}),r=t,i=n;break;case"L":o.push({key:"L",data:[...l]}),[t,n]=l;break;case"l":t+=l[0],n+=l[1],o.push({key:"L",data:[t,n]});break;case"C":o.push({key:"C",data:[...l]}),t=l[4],n=l[5];break;case"c":{const c=l.map((h,d)=>d%2?h+n:h+t);o.push({key:"C",data:c}),t=c[4],n=c[5];break}case"Q":o.push({key:"Q",data:[...l]}),t=l[2],n=l[3];break;case"q":{const c=l.map((h,d)=>d%2?h+n:h+t);o.push({key:"Q",data:c}),t=c[2],n=c[3];break}case"A":o.push({key:"A",data:[...l]}),t=l[5],n=l[6];break;case"a":t+=l[5],n+=l[6],o.push({key:"A",data:[l[0],l[1],l[2],l[3],l[4],t,n]});break;case"H":o.push({key:"H",data:[...l]}),t=l[0];break;case"h":t+=l[0],o.push({key:"H",data:[t]});break;case"V":o.push({key:"V",data:[...l]}),n=l[0];break;case"v":n+=l[0],o.push({key:"V",data:[n]});break;case"S":o.push({key:"S",data:[...l]}),t=l[2],n=l[3];break;case"s":{const c=l.map((h,d)=>d%2?h+n:h+t);o.push({key:"S",data:c}),t=c[2],n=c[3];break}case"T":o.push({key:"T",data:[...l]}),t=l[0],n=l[1];break;case"t":t+=l[0],n+=l[1],o.push({key:"T",data:[t,n]});break;case"Z":case"z":o.push({key:"Z",data:[]}),t=r,n=i;break}return o}function kE(e){const t=[];let n="",r=0,i=0,o=0,s=0,l=0,c=0;for(const{key:h,data:d}of e){switch(h){case"M":t.push({key:"M",data:[...d]}),[r,i]=d,[o,s]=d;break;case"C":t.push({key:"C",data:[...d]}),r=d[4],i=d[5],l=d[2],c=d[3];break;case"L":t.push({key:"L",data:[...d]}),[r,i]=d;break;case"H":r=d[0],t.push({key:"L",data:[r,i]});break;case"V":i=d[0],t.push({key:"L",data:[r,i]});break;case"S":{let g=0,v=0;n==="C"||n==="S"?(g=r+(r-l),v=i+(i-c)):(g=r,v=i),t.push({key:"C",data:[g,v,...d]}),l=d[0],c=d[1],r=d[2],i=d[3];break}case"T":{const[g,v]=d;let y=0,x=0;n==="Q"||n==="T"?(y=r+(r-l),x=i+(i-c)):(y=r,x=i);const E=r+2*(y-r)/3,T=i+2*(x-i)/3,D=g+2*(y-g)/3,S=v+2*(x-v)/3;t.push({key:"C",data:[E,T,D,S,g,v]}),l=y,c=x,r=g,i=v;break}case"Q":{const[g,v,y,x]=d,E=r+2*(g-r)/3,T=i+2*(v-i)/3,D=y+2*(g-y)/3,S=x+2*(v-x)/3;t.push({key:"C",data:[E,T,D,S,y,x]}),l=g,c=v,r=y,i=x;break}case"A":{const g=Math.abs(d[0]),v=Math.abs(d[1]),y=d[2],x=d[3],E=d[4],T=d[5],D=d[6];g===0||v===0?(t.push({key:"C",data:[r,i,T,D,T,D]}),r=T,i=D):(r!==T||i!==D)&&(OE(r,i,T,D,g,v,y,x,E).forEach(function(R){t.push({key:"C",data:R})}),r=T,i=D);break}case"Z":t.push({key:"Z",data:[]}),r=o,i=s;break}n=h}return t}function Wb(e){return Math.PI*e/180}function vg(e,t,n){const r=e*Math.cos(n)-t*Math.sin(n),i=e*Math.sin(n)+t*Math.cos(n);return[r,i]}function OE(e,t,n,r,i,o,s,l,c,h){const d=Wb(s);let g=[],v=0,y=0,x=0,E=0;if(h)[v,y,x,E]=h;else{[e,t]=vg(e,t,-d),[n,r]=vg(n,r,-d);const ne=(e-n)/2,oe=(t-r)/2;let ve=ne*ne/(i*i)+oe*oe/(o*o);ve>1&&(ve=Math.sqrt(ve),i=ve*i,o=ve*o);const ge=l===c?-1:1,Me=i*i,Pe=o*o,he=Me*Pe-Me*oe*oe-Pe*ne*ne,le=Me*oe*oe+Pe*ne*ne,we=ge*Math.sqrt(Math.abs(he/le));x=we*i*oe/o+(e+n)/2,E=we*-o*ne/i+(t+r)/2,v=Math.asin(parseFloat(((t-E)/o).toFixed(9))),y=Math.asin(parseFloat(((r-E)/o).toFixed(9))),e<x&&(v=Math.PI-v),n<x&&(y=Math.PI-y),v<0&&(v=Math.PI*2+v),y<0&&(y=Math.PI*2+y),c&&v>y&&(v=v-Math.PI*2),!c&&y>v&&(y=y-Math.PI*2)}let T=y-v;if(Math.abs(T)>Math.PI*120/180){const ne=y,oe=n,ve=r;c&&y>v?y=v+Math.PI*120/180*1:y=v+Math.PI*120/180*-1,n=x+i*Math.cos(y),r=E+o*Math.sin(y),g=OE(n,r,oe,ve,i,o,s,0,c,[y,ne,x,E])}T=y-v;const D=Math.cos(v),S=Math.sin(v),R=Math.cos(y),k=Math.sin(y),O=Math.tan(T/4),$=4/3*i*O,z=4/3*o*O,K=[e,t],te=[e+$*S,t-z*D],se=[n+$*k,r-z*R],me=[n,r];if(te[0]=2*K[0]-te[0],te[1]=2*K[1]-te[1],h)return[te,se,me].concat(g);{g=[te,se,me].concat(g);const ne=[];for(let oe=0;oe<g.length;oe+=3){const ve=vg(g[oe][0],g[oe][1],d),ge=vg(g[oe+1][0],g[oe+1][1],d),Me=vg(g[oe+2][0],g[oe+2][1],d);ne.push([ve[0],ve[1],ge[0],ge[1],Me[0],Me[1]])}return ne}}const zb={randOffset:Yb,randOffsetWithRange:qb,ellipse:Xb,doubleLineOps:Zb};function IE(e,t,n,r,i){return{type:"path",ops:fc(e,t,n,r,i)}}function Nm(e,t,n){const r=(e||[]).length;if(r>2){const i=[];for(let o=0;o<r-1;o++)i.push(...fc(e[o][0],e[o][1],e[o+1][0],e[o+1][1],n));return t&&i.push(...fc(e[r-1][0],e[r-1][1],e[0][0],e[0][1],n)),{type:"path",ops:i}}else if(r===2)return IE(e[0][0],e[0][1],e[1][0],e[1][1],n);return{type:"path",ops:[]}}function Vb(e,t){return Nm(e,!0,t)}function Ub(e,t,n,r,i){const o=[[e,t],[e+n,t],[e+n,t+r],[e,t+r]];return Vb(o,i)}function tw(e,t){if(e.length){const r=typeof e[0][0]=="number"?[e]:e,i=um(r[0],1*(1+t.roughness*.2),t),o=t.disableMultiStroke?[]:um(r[0],1.5*(1+t.roughness*.22),iw(t));for(let s=1;s<r.length;s++){const l=r[s];if(l.length){const c=um(l,1*(1+t.roughness*.2),t),h=t.disableMultiStroke?[]:um(l,1.5*(1+t.roughness*.22),iw(t));for(const d of c)d.op!=="move"&&i.push(d);for(const d of h)d.op!=="move"&&o.push(d)}}return{type:"path",ops:i.concat(o)}}return{type:"path",ops:[]}}function Xb(e,t,n,r,i){const o=FE(n,r,i);return J5(e,t,i,o).opset}function FE(e,t,n){const r=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),i=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),o=Math.PI*2/i;let s=Math.abs(e/2),l=Math.abs(t/2);const c=1-n.curveFitting;return s+=It(s*c,n),l+=It(l*c,n),{increment:o,rx:s,ry:l}}function J5(e,t,n,r){const[i,o]=ow(r.increment,e,t,r.rx,r.ry,1,r.increment*n3(.1,n3(.4,1,n),n),n);let s=r3(i,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[l]=ow(r.increment,e,t,r.rx,r.ry,1.5,0,n),c=r3(l,null,n);s=s.concat(c)}return{estimatedPoints:o,opset:{type:"path",ops:s}}}function nw(e,t,n,r,i,o,s,l,c){const h=e,d=t;let g=Math.abs(n/2),v=Math.abs(r/2);g+=It(g*.01,c),v+=It(v*.01,c);let y=i,x=o;for(;y<0;)y+=Math.PI*2,x+=Math.PI*2;x-y>Math.PI*2&&(y=0,x=Math.PI*2);const E=Math.PI*2/c.curveStepCount,T=Math.min(E/2,(x-y)/2),D=sw(T,h,d,g,v,y,x,1,c);if(!c.disableMultiStroke){const S=sw(T,h,d,g,v,y,x,1.5,c);D.push(...S)}return s&&(l?D.push(...fc(h,d,h+g*Math.cos(y),d+v*Math.sin(y),c),...fc(h,d,h+g*Math.cos(x),d+v*Math.sin(x),c)):D.push({op:"lineTo",data:[h,d]},{op:"lineTo",data:[h+g*Math.cos(y),d+v*Math.sin(y)]})),{type:"path",ops:D}}function rw(e,t){const n=kE(bE(S4(e))),r=[];let i=[0,0],o=[0,0];for(const{key:s,data:l}of n)switch(s){case"M":{o=[l[0],l[1]],i=[l[0],l[1]];break}case"L":r.push(...fc(o[0],o[1],l[0],l[1],t)),o=[l[0],l[1]];break;case"C":{const[c,h,d,g,v,y]=l;r.push(...Qb(c,h,d,g,v,y,o,t)),o=[v,y];break}case"Z":r.push(...fc(o[0],o[1],i[0],i[1],t)),o=[i[0],i[1]];break}return{type:"path",ops:r}}function z7(e,t){const n=[];for(const r of e)if(r.length){const i=t.maxRandomnessOffset||0,o=r.length;if(o>2){n.push({op:"move",data:[r[0][0]+It(i,t),r[0][1]+It(i,t)]});for(let s=1;s<o;s++)n.push({op:"lineTo",data:[r[s][0]+It(i,t),r[s][1]+It(i,t)]})}}return{type:"fillPath",ops:n}}function Zd(e,t){return Nb(t,zb).fillPolygons(e,t)}function Kb(e,t,n,r,i,o,s){const l=e,c=t;let h=Math.abs(n/2),d=Math.abs(r/2);h+=It(h*.01,s),d+=It(d*.01,s);let g=i,v=o;for(;g<0;)g+=Math.PI*2,v+=Math.PI*2;v-g>Math.PI*2&&(g=0,v=Math.PI*2);const y=(v-g)/s.curveStepCount,x=[];for(let E=g;E<=v;E=E+y)x.push([l+h*Math.cos(E),c+d*Math.sin(E)]);return x.push([l+h*Math.cos(v),c+d*Math.sin(v)]),x.push([l,c]),Zd([x],s)}function Yb(e,t){return It(e,t)}function qb(e,t,n){return n3(e,t,n)}function Zb(e,t,n,r,i){return fc(e,t,n,r,i,!0)}function iw(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function LE(e){return e.randomizer||(e.randomizer=new Gb(e.seed||0)),e.randomizer.next()}function n3(e,t,n,r=1){return n.roughness*r*(LE(n)*(t-e)+e)}function It(e,t,n=1){return n3(-e,e,t,n)}function fc(e,t,n,r,i,o=!1){const s=o?i.disableMultiStrokeFill:i.disableMultiStroke,l=e6(e,t,n,r,i,!0,!1);if(s)return l;const c=e6(e,t,n,r,i,!0,!0);return l.concat(c)}function e6(e,t,n,r,i,o,s){const l=Math.pow(e-n,2)+Math.pow(t-r,2),c=Math.sqrt(l);let h=1;c<200?h=1:c>500?h=.4:h=-.0016668*c+1.233334;let d=i.maxRandomnessOffset||0;d*d*100>l&&(d=c/10);const g=d/2,v=.2+LE(i)*.2;let y=i.bowing*i.maxRandomnessOffset*(r-t)/200,x=i.bowing*i.maxRandomnessOffset*(e-n)/200;y=It(y,i,h),x=It(x,i,h);const E=[],T=()=>It(g,i,h),D=()=>It(d,i,h),S=i.preserveVertices;return s?E.push({op:"move",data:[e+(S?0:T()),t+(S?0:T())]}):E.push({op:"move",data:[e+(S?0:It(d,i,h)),t+(S?0:It(d,i,h))]}),s?E.push({op:"bcurveTo",data:[y+e+(n-e)*v+T(),x+t+(r-t)*v+T(),y+e+2*(n-e)*v+T(),x+t+2*(r-t)*v+T(),n+(S?0:T()),r+(S?0:T())]}):E.push({op:"bcurveTo",data:[y+e+(n-e)*v+D(),x+t+(r-t)*v+D(),y+e+2*(n-e)*v+D(),x+t+2*(r-t)*v+D(),n+(S?0:D()),r+(S?0:D())]}),E}function um(e,t,n){if(!e.length)return[];const r=[];r.push([e[0][0]+It(t,n),e[0][1]+It(t,n)]),r.push([e[0][0]+It(t,n),e[0][1]+It(t,n)]);for(let i=1;i<e.length;i++)r.push([e[i][0]+It(t,n),e[i][1]+It(t,n)]),i===e.length-1&&r.push([e[i][0]+It(t,n),e[i][1]+It(t,n)]);return r3(r,null,n)}function r3(e,t,n){const r=e.length,i=[];if(r>3){const o=[],s=1-n.curveTightness;i.push({op:"move",data:[e[1][0],e[1][1]]});for(let l=1;l+2<r;l++){const c=e[l];o[0]=[c[0],c[1]],o[1]=[c[0]+(s*e[l+1][0]-s*e[l-1][0])/6,c[1]+(s*e[l+1][1]-s*e[l-1][1])/6],o[2]=[e[l+1][0]+(s*e[l][0]-s*e[l+2][0])/6,e[l+1][1]+(s*e[l][1]-s*e[l+2][1])/6],o[3]=[e[l+1][0],e[l+1][1]],i.push({op:"bcurveTo",data:[o[1][0],o[1][1],o[2][0],o[2][1],o[3][0],o[3][1]]})}}else r===3?(i.push({op:"move",data:[e[1][0],e[1][1]]}),i.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):r===2&&i.push(...e6(e[0][0],e[0][1],e[1][0],e[1][1],n,!0,!0));return i}function ow(e,t,n,r,i,o,s,l){const c=l.roughness===0,h=[],d=[];if(c){e=e/4,d.push([t+r*Math.cos(-e),n+i*Math.sin(-e)]);for(let g=0;g<=Math.PI*2;g=g+e){const v=[t+r*Math.cos(g),n+i*Math.sin(g)];h.push(v),d.push(v)}d.push([t+r*Math.cos(0),n+i*Math.sin(0)]),d.push([t+r*Math.cos(e),n+i*Math.sin(e)])}else{const g=It(.5,l)-Math.PI/2;d.push([It(o,l)+t+.9*r*Math.cos(g-e),It(o,l)+n+.9*i*Math.sin(g-e)]);const v=Math.PI*2+g-.01;for(let y=g;y<v;y=y+e){const x=[It(o,l)+t+r*Math.cos(y),It(o,l)+n+i*Math.sin(y)];h.push(x),d.push(x)}d.push([It(o,l)+t+r*Math.cos(g+Math.PI*2+s*.5),It(o,l)+n+i*Math.sin(g+Math.PI*2+s*.5)]),d.push([It(o,l)+t+.98*r*Math.cos(g+s),It(o,l)+n+.98*i*Math.sin(g+s)]),d.push([It(o,l)+t+.9*r*Math.cos(g+s*.5),It(o,l)+n+.9*i*Math.sin(g+s*.5)])}return[d,h]}function sw(e,t,n,r,i,o,s,l,c){const h=o+It(.1,c),d=[];d.push([It(l,c)+t+.9*r*Math.cos(h-e),It(l,c)+n+.9*i*Math.sin(h-e)]);for(let g=h;g<=s;g=g+e)d.push([It(l,c)+t+r*Math.cos(g),It(l,c)+n+i*Math.sin(g)]);return d.push([t+r*Math.cos(s),n+i*Math.sin(s)]),d.push([t+r*Math.cos(s),n+i*Math.sin(s)]),r3(d,null,c)}function Qb(e,t,n,r,i,o,s,l){const c=[],h=[l.maxRandomnessOffset||1,(l.maxRandomnessOffset||1)+.3];let d=[0,0];const g=l.disableMultiStroke?1:2,v=l.preserveVertices;for(let y=0;y<g;y++)y===0?c.push({op:"move",data:[s[0],s[1]]}):c.push({op:"move",data:[s[0]+(v?0:It(h[0],l)),s[1]+(v?0:It(h[0],l))]}),d=v?[i,o]:[i+It(h[y],l),o+It(h[y],l)],c.push({op:"bcurveTo",data:[e+It(h[y],l),t+It(h[y],l),n+It(h[y],l),r+It(h[y],l),d[0],d[1]]});return c}function yg(e){return[...e]}function aw(e,t=0){const n=e.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(n===3)r.push(yg(e[0]),yg(e[1]),yg(e[2]),yg(e[2]));else{const i=[];i.push(e[0],e[0]);for(let l=1;l<e.length;l++)i.push(e[l]),l===e.length-1&&i.push(e[l]);const o=[],s=1-t;r.push(yg(i[0]));for(let l=1;l+2<i.length;l++){const c=i[l];o[0]=[c[0],c[1]],o[1]=[c[0]+(s*i[l+1][0]-s*i[l-1][0])/6,c[1]+(s*i[l+1][1]-s*i[l-1][1])/6],o[2]=[i[l+1][0]+(s*i[l][0]-s*i[l+2][0])/6,i[l+1][1]+(s*i[l][1]-s*i[l+2][1])/6],o[3]=[i[l+1][0],i[l+1][1]],r.push(o[1],o[2],o[3])}}return r}function Jb(e,t){return Math.sqrt(Hm(e,t))}function Hm(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function ek(e,t,n){const r=Hm(t,n);if(r===0)return Hm(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),Hm(e,bf(t,n,i))}function bf(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function tk(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],o=e[t+3];let s=3*r[0]-2*n[0]-o[0];s*=s;let l=3*r[1]-2*n[1]-o[1];l*=l;let c=3*i[0]-2*o[0]-n[0];c*=c;let h=3*i[1]-2*o[1]-n[1];return h*=h,s<c&&(s=c),l<h&&(l=h),s+l}function t6(e,t,n,r){const i=r||[];if(tk(e,t)<n){const o=e[t+0];i.length?Jb(i[i.length-1],o)>1&&i.push(o):i.push(o),i.push(e[t+3])}else{const s=e[t+0],l=e[t+1],c=e[t+2],h=e[t+3],d=bf(s,l,.5),g=bf(l,c,.5),v=bf(c,h,.5),y=bf(d,g,.5),x=bf(g,v,.5),E=bf(y,x,.5);t6([s,d,y,E],0,n,i),t6([E,x,v,h],0,n,i)}return i}function n6(e,t,n,r,i){const o=i||[],s=e[t],l=e[n-1];let c=0,h=1;for(let d=t+1;d<n-1;++d){const g=ek(e[d],s,l);g>c&&(c=g,h=d)}return Math.sqrt(c)>r?(n6(e,t,h+1,r,o),n6(e,h,n,r,o)):(o.length||o.push(s),o.push(l)),o}function lw(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let o=0;o<i;o++){const s=o*3;t6(e,s,t,r)}return n&&n>0?n6(r,0,r.length,n):r}function nk(e,t){return Math.sqrt(Gm(e,t))}function Gm(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function rk(e,t,n){const r=Gm(t,n);if(r===0)return Gm(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),Gm(e,kf(t,n,i))}function kf(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function ik(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],o=e[t+3];let s=3*r[0]-2*n[0]-o[0];s*=s;let l=3*r[1]-2*n[1]-o[1];l*=l;let c=3*i[0]-2*o[0]-n[0];c*=c;let h=3*i[1]-2*o[1]-n[1];return h*=h,s<c&&(s=c),l<h&&(l=h),s+l}function r6(e,t,n,r){const i=r||[];if(ik(e,t)<n){const o=e[t+0];i.length?nk(i[i.length-1],o)>1&&i.push(o):i.push(o),i.push(e[t+3])}else{const s=e[t+0],l=e[t+1],c=e[t+2],h=e[t+3],d=kf(s,l,.5),g=kf(l,c,.5),v=kf(c,h,.5),y=kf(d,g,.5),x=kf(g,v,.5),E=kf(y,x,.5);r6([s,d,y,E],0,n,i),r6([E,x,v,h],0,n,i)}return i}function ok(e,t){return i6(e,0,e.length,t)}function i6(e,t,n,r,i){const o=i||[],s=e[t],l=e[n-1];let c=0,h=1;for(let d=t+1;d<n-1;++d){const g=rk(e[d],s,l);g>c&&(c=g,h=d)}return Math.sqrt(c)>r?(i6(e,t,h+1,r,o),i6(e,h,n,r,o)):(o.length||o.push(s),o.push(l)),o}function sk(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let o=0;o<i;o++){const s=o*3;r6(e,s,t,r)}return r}function ak(e,t,n){const r=S4(e),i=kE(bE(r)),o=[];let s=[],l=[0,0],c=[];const h=()=>{c.length>=4&&s.push(...sk(c,t)),c=[]},d=()=>{h(),s.length&&(o.push(s),s=[])};for(const{key:v,data:y}of i)switch(v){case"M":d(),l=[y[0],y[1]],s.push(l);break;case"L":h(),s.push([y[0],y[1]]);break;case"C":if(!c.length){const x=s.length?s[s.length-1]:l;c.push([x[0],x[1]])}c.push([y[0],y[1]]),c.push([y[2],y[3]]),c.push([y[4],y[5]]);break;case"Z":h(),s.push([l[0],l[1]]);break}if(d(),!n)return o;const g=[];for(const v of o){const y=ok(v,n);y.length&&g.push(y)}return g}const zo="none";class i3{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Hb()}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,n,r){return{shape:t,sets:n||[],options:r||this.defaultOptions}}line(t,n,r,i,o){const s=this._o(o);return this._d("line",[IE(t,n,r,i,s)],s)}rectangle(t,n,r,i,o){const s=this._o(o),l=[],c=Ub(t,n,r,i,s);if(s.fill){const h=[[t,n],[t+r,n],[t+r,n+i],[t,n+i]];s.fillStyle==="solid"?l.push(z7([h],s)):l.push(Zd([h],s))}return s.stroke!==zo&&l.push(c),this._d("rectangle",l,s)}ellipse(t,n,r,i,o){const s=this._o(o),l=[],c=FE(r,i,s),h=J5(t,n,s,c);if(s.fill)if(s.fillStyle==="solid"){const d=J5(t,n,s,c).opset;d.type="fillPath",l.push(d)}else l.push(Zd([h.estimatedPoints],s));return s.stroke!==zo&&l.push(h.opset),this._d("ellipse",l,s)}circle(t,n,r,i){const o=this.ellipse(t,n,r,r,i);return o.shape="circle",o}linearPath(t,n){const r=this._o(n);return this._d("linearPath",[Nm(t,!1,r)],r)}arc(t,n,r,i,o,s,l=!1,c){const h=this._o(c),d=[],g=nw(t,n,r,i,o,s,l,!0,h);if(l&&h.fill)if(h.fillStyle==="solid"){const v=Object.assign({},h);v.disableMultiStroke=!0;const y=nw(t,n,r,i,o,s,!0,!1,v);y.type="fillPath",d.push(y)}else d.push(Kb(t,n,r,i,o,s,h));return h.stroke!==zo&&d.push(g),this._d("arc",d,h)}curve(t,n){const r=this._o(n),i=[],o=tw(t,r);if(r.fill&&r.fill!==zo)if(r.fillStyle==="solid"){const s=tw(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(s.ops)})}else{const s=[],l=t;if(l.length){const h=typeof l[0][0]=="number"?[l]:l;for(const d of h)d.length<3?s.push(...d):d.length===3?s.push(...lw(aw([d[0],d[0],d[1],d[2]]),10,(1+r.roughness)/2)):s.push(...lw(aw(d),10,(1+r.roughness)/2))}s.length&&i.push(Zd([s],r))}return r.stroke!==zo&&i.push(o),this._d("curve",i,r)}polygon(t,n){const r=this._o(n),i=[],o=Nm(t,!0,r);return r.fill&&(r.fillStyle==="solid"?i.push(z7([t],r)):i.push(Zd([t],r))),r.stroke!==zo&&i.push(o),this._d("polygon",i,r)}path(t,n){const r=this._o(n),i=[];if(!t)return this._d("path",i,r);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const o=r.fill&&r.fill!=="transparent"&&r.fill!==zo,s=r.stroke!==zo,l=!!(r.simplification&&r.simplification<1),c=l?4-4*(r.simplification||1):(1+r.roughness)/2,h=ak(t,1,c),d=rw(t,r);if(o)if(r.fillStyle==="solid")if(h.length===1){const g=rw(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(g.ops)})}else i.push(z7(h,r));else i.push(Zd(h,r));return s&&(l?h.forEach(g=>{i.push(Nm(g,!1,r))}):i.push(d)),this._d("path",i,r)}opsToPath(t,n){let r="";for(const i of t.ops){const o=typeof n=="number"&&n>=0?i.data.map(s=>+s.toFixed(n)):i.data;switch(i.op){case"move":r+=`M${o[0]} ${o[1]} `;break;case"bcurveTo":r+=`C${o[0]} ${o[1]}, ${o[2]} ${o[3]}, ${o[4]} ${o[5]} `;break;case"lineTo":r+=`L${o[0]} ${o[1]} `;break}}return r.trim()}toPaths(t){const n=t.sets||[],r=t.options||this.defaultOptions,i=[];for(const o of n){let s=null;switch(o.type){case"path":s={d:this.opsToPath(o),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:zo};break;case"fillPath":s={d:this.opsToPath(o),stroke:zo,strokeWidth:0,fill:r.fill||zo};break;case"fillSketch":s=this.fillSketch(o,r);break}s&&i.push(s)}return i}fillSketch(t,n){let r=n.fillWeight;return r<0&&(r=n.strokeWidth/2),{d:this.opsToPath(t),stroke:n.fill||zo,strokeWidth:r,fill:zo}}_mergedShape(t){return t.filter((n,r)=>r===0?!0:n.op!=="move")}}class lk{constructor(t,n){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new i3(n)}draw(t){const n=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.ctx,o=t.options.fixedDecimalPlaceDigits;for(const s of n)switch(s.type){case"path":i.save(),i.strokeStyle=r.stroke==="none"?"transparent":r.stroke,i.lineWidth=r.strokeWidth,r.strokeLineDash&&i.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(i.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(i,s,o),i.restore();break;case"fillPath":{i.save(),i.fillStyle=r.fill||"";const l=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(i,s,o,l),i.restore();break}case"fillSketch":this.fillSketch(i,s,r);break}}fillSketch(t,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2),t.save(),r.fillLineDash&&t.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(t.lineDashOffset=r.fillLineDashOffset),t.strokeStyle=r.fill||"",t.lineWidth=i,this._drawToContext(t,n,r.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,n,r,i="nonzero"){t.beginPath();for(const o of n.ops){const s=typeof r=="number"&&r>=0?o.data.map(l=>+l.toFixed(r)):o.data;switch(o.op){case"move":t.moveTo(s[0],s[1]);break;case"bcurveTo":t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"lineTo":t.lineTo(s[0],s[1]);break}}n.type==="fillPath"?t.fill(i):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,n,r,i,o){const s=this.gen.line(t,n,r,i,o);return this.draw(s),s}rectangle(t,n,r,i,o){const s=this.gen.rectangle(t,n,r,i,o);return this.draw(s),s}ellipse(t,n,r,i,o){const s=this.gen.ellipse(t,n,r,i,o);return this.draw(s),s}circle(t,n,r,i){const o=this.gen.circle(t,n,r,i);return this.draw(o),o}linearPath(t,n){const r=this.gen.linearPath(t,n);return this.draw(r),r}polygon(t,n){const r=this.gen.polygon(t,n);return this.draw(r),r}arc(t,n,r,i,o,s,l=!1,c){const h=this.gen.arc(t,n,r,i,o,s,l,c);return this.draw(h),h}curve(t,n){const r=this.gen.curve(t,n);return this.draw(r),r}path(t,n){const r=this.gen.path(t,n);return this.draw(r),r}}const cm="http://www.w3.org/2000/svg";class uk{constructor(t,n){this.svg=t,this.gen=new i3(n)}draw(t){const n=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,o=i.createElementNS(cm,"g"),s=t.options.fixedDecimalPlaceDigits;for(const l of n){let c=null;switch(l.type){case"path":{c=i.createElementNS(cm,"path"),c.setAttribute("d",this.opsToPath(l,s)),c.setAttribute("stroke",r.stroke),c.setAttribute("stroke-width",r.strokeWidth+""),c.setAttribute("fill","none"),r.strokeLineDash&&c.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&c.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break}case"fillPath":{c=i.createElementNS(cm,"path"),c.setAttribute("d",this.opsToPath(l,s)),c.setAttribute("stroke","none"),c.setAttribute("stroke-width","0"),c.setAttribute("fill",r.fill||""),(t.shape==="curve"||t.shape==="polygon")&&c.setAttribute("fill-rule","evenodd");break}case"fillSketch":{c=this.fillSketch(i,l,r);break}}c&&o.appendChild(c)}return o}fillSketch(t,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);const o=t.createElementNS(cm,"path");return o.setAttribute("d",this.opsToPath(n,r.fixedDecimalPlaceDigits)),o.setAttribute("stroke",r.fill||""),o.setAttribute("stroke-width",i+""),o.setAttribute("fill","none"),r.fillLineDash&&o.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&o.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),o}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,n){return this.gen.opsToPath(t,n)}line(t,n,r,i,o){const s=this.gen.line(t,n,r,i,o);return this.draw(s)}rectangle(t,n,r,i,o){const s=this.gen.rectangle(t,n,r,i,o);return this.draw(s)}ellipse(t,n,r,i,o){const s=this.gen.ellipse(t,n,r,i,o);return this.draw(s)}circle(t,n,r,i){const o=this.gen.circle(t,n,r,i);return this.draw(o)}linearPath(t,n){const r=this.gen.linearPath(t,n);return this.draw(r)}polygon(t,n){const r=this.gen.polygon(t,n);return this.draw(r)}arc(t,n,r,i,o,s,l=!1,c){const h=this.gen.arc(t,n,r,i,o,s,l,c);return this.draw(h)}curve(t,n){const r=this.gen.curve(t,n);return this.draw(r)}path(t,n){const r=this.gen.path(t,n);return this.draw(r)}}const ck={canvas(e,t){return new lk(e,t)},svg(e,t){return new uk(e,t)},generator(e){return new i3(e)},newSeed(){return i3.newSeed()}};var _E=Symbol.for("immer-nothing"),uw=Symbol.for("immer-draftable"),Zo=Symbol.for("immer-state");function ia(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var m0=Object.getPrototypeOf;function Kl(e){return!!e&&!!e[Zo]}function Kf(e){var t;return e?NE(e)||Array.isArray(e)||!!e[uw]||!!((t=e.constructor)!=null&&t[uw])||J3(e)||ev(e):!1}var fk=Object.prototype.constructor.toString();function NE(e){if(!e||typeof e!="object")return!1;const t=m0(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===fk}function o3(e,t){Q3(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Q3(e){const t=e[Zo];return t?t.type_:Array.isArray(e)?1:J3(e)?2:ev(e)?3:0}function o6(e,t){return Q3(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function HE(e,t,n){const r=Q3(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function hk(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function J3(e){return e instanceof Map}function ev(e){return e instanceof Set}function Of(e){return e.copy_||e.base_}function s6(e,t){if(J3(e))return new Map(e);if(ev(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=NE(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Zo];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],l=r[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[s]})}return Object.create(m0(e),r)}else{const r=m0(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function T4(e,t=!1){return tv(e)||Kl(e)||!Kf(e)||(Q3(e)>1&&(e.set=e.add=e.clear=e.delete=dk),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>T4(r,!0))),e}function dk(){ia(2)}function tv(e){return Object.isFrozen(e)}var gk={};function Yf(e){const t=gk[e];return t||ia(0,e),t}var Ug;function GE(){return Ug}function pk(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function cw(e,t){t&&(Yf("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function a6(e){l6(e),e.drafts_.forEach(mk),e.drafts_=null}function l6(e){e===Ug&&(Ug=e.parent_)}function fw(e){return Ug=pk(Ug,e)}function mk(e){const t=e[Zo];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function hw(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Zo].modified_&&(a6(t),ia(4)),Kf(e)&&(e=s3(t,e),t.parent_||a3(t,e)),t.patches_&&Yf("Patches").generateReplacementPatches_(n[Zo].base_,e,t.patches_,t.inversePatches_)):e=s3(t,n,[]),a6(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==_E?e:void 0}function s3(e,t,n){if(tv(t))return t;const r=t[Zo];if(!r)return o3(t,(i,o)=>dw(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return a3(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),o3(o,(l,c)=>dw(e,r,i,l,c,n,s)),a3(e,i,!1),n&&e.patches_&&Yf("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function dw(e,t,n,r,i,o,s){if(Kl(i)){const l=o&&t&&t.type_!==3&&!o6(t.assigned_,r)?o.concat(r):void 0,c=s3(e,i,l);if(HE(n,r,c),Kl(c))e.canAutoFreeze_=!1;else return}else s&&n.add(i);if(Kf(i)&&!tv(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;s3(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&a3(e,i)}}function a3(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&T4(t,n)}function vk(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:GE(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=D4;n&&(i=[r],o=Xg);const{revoke:s,proxy:l}=Proxy.revocable(i,o);return r.draft_=l,r.revoke_=s,l}var D4={get(e,t){if(t===Zo)return e;const n=Of(e);if(!o6(n,t))return yk(e,n,t);const r=n[t];return e.finalized_||!Kf(r)?r:r===V7(e.base_,t)?(U7(e),e.copy_[t]=c6(r,e)):r},has(e,t){return t in Of(e)},ownKeys(e){return Reflect.ownKeys(Of(e))},set(e,t,n){const r=jE(Of(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=V7(Of(e),t),o=i==null?void 0:i[Zo];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(hk(n,i)&&(n!==void 0||o6(e.base_,t)))return!0;U7(e),u6(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return V7(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,U7(e),u6(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Of(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){ia(11)},getPrototypeOf(e){return m0(e.base_)},setPrototypeOf(){ia(12)}},Xg={};o3(D4,(e,t)=>{Xg[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Xg.deleteProperty=function(e,t){return Xg.set.call(this,e,t,void 0)};Xg.set=function(e,t,n){return D4.set.call(this,e[0],t,n,e[0])};function V7(e,t){const n=e[Zo];return(n?Of(n):e)[t]}function yk(e,t,n){var i;const r=jE(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function jE(e,t){if(!(t in e))return;let n=m0(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=m0(n)}}function u6(e){e.modified_||(e.modified_=!0,e.parent_&&u6(e.parent_))}function U7(e){e.copy_||(e.copy_=s6(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var wk=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const s=this;return function(c=o,...h){return s.produce(c,d=>n.call(this,d,...h))}}typeof n!="function"&&ia(6),r!==void 0&&typeof r!="function"&&ia(7);let i;if(Kf(t)){const o=fw(this),s=c6(t,void 0);let l=!0;try{i=n(s),l=!1}finally{l?a6(o):l6(o)}return cw(o,r),hw(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===_E&&(i=void 0),this.autoFreeze_&&T4(i,!0),r){const o=[],s=[];Yf("Patches").generateReplacementPatches_(t,i,o,s),r(o,s)}return i}else ia(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...l)=>this.produceWithPatches(s,c=>t(c,...l));let r,i;return[this.produce(t,n,(s,l)=>{r=s,i=l}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Kf(e)||ia(8),Kl(e)&&(e=Ck(e));const t=fw(this),n=c6(e,void 0);return n[Zo].isManual_=!0,l6(t),n}finishDraft(e,t){const n=e&&e[Zo];(!n||!n.isManual_)&&ia(9);const{scope_:r}=n;return cw(r,t),hw(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Yf("Patches").applyPatches_;return Kl(e)?r(e,t):this.produce(e,i=>r(i,t))}};function c6(e,t){const n=J3(e)?Yf("MapSet").proxyMap_(e,t):ev(e)?Yf("MapSet").proxySet_(e,t):vk(e,t);return(t?t.scope_:GE()).drafts_.push(n),n}function Ck(e){return Kl(e)||ia(10,e),$E(e)}function $E(e){if(!Kf(e)||tv(e))return e;const t=e[Zo];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=s6(e,t.scope_.immer_.useStrictShallowCopy_)}else n=s6(e,!0);return o3(n,(r,i)=>{HE(n,r,$E(i))}),t&&(t.finalized_=!1),n}var Qo=new wk,xk=Qo.produce;Qo.produceWithPatches.bind(Qo);Qo.setAutoFreeze.bind(Qo);Qo.setUseStrictShallowCopy.bind(Qo);Qo.applyPatches.bind(Qo);var fm=Qo.createDraft.bind(Qo),hm=Qo.finishDraft.bind(Qo),na={},gw;function Ek(){if(gw)return na;gw=1,Object.defineProperty(na,"__esModule",{value:!0});for(var e=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),t={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},n={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:e?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},r={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=1;i<20;i++)r["f"+i]=111+i;function o(v,y,x){y&&!("byKey"in y)&&(x=y,y=null),Array.isArray(v)||(v=[v]);var E=v.map(function(S){return c(S,y)}),T=function(R){return E.some(function(k){return h(k,R)})},D=x==null?T:T(x);return D}function s(v,y){return o(v,y)}function l(v,y){return o(v,{byKey:!0},y)}function c(v,y){var x=y&&y.byKey,E={};v=v.replace("++","+add");var T=v.split("+"),D=T.length;for(var S in t)E[t[S]]=!1;var R=!0,k=!1,O=void 0;try{for(var $=T[Symbol.iterator](),z;!(R=(z=$.next()).done);R=!0){var K=z.value,te=K.endsWith("?")&&K.length>1;te&&(K=K.slice(0,-1));var se=g(K),me=t[se];if(K.length>1&&!me&&!n[K]&&!r[se])throw new TypeError('Unknown modifier: "'+K+'"');(D===1||!me)&&(x?E.key=se:E.which=d(K)),me&&(E[me]=te?null:!0)}}catch(ne){k=!0,O=ne}finally{try{!R&&$.return&&$.return()}finally{if(k)throw O}}return E}function h(v,y){for(var x in v){var E=v[x],T=void 0;if(E!=null&&(x==="key"&&y.key!=null?T=y.key.toLowerCase():x==="which"?T=E===91&&y.which===93?91:y.which:T=y[x],!(T==null&&E===!1)&&T!==E))return!1}return!0}function d(v){v=g(v);var y=r[v]||v.toUpperCase().charCodeAt(0);return y}function g(v){return v=v.toLowerCase(),v=n[v]||v,v}return na.default=o,na.isHotkey=o,na.isCodeHotkey=s,na.isKeyHotkey=l,na.parseHotkey=c,na.compareHotkey=h,na.toKeyCode=d,na.toKeyName=g,na}var Qt=Ek(),f6=function(e,t){return f6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},f6(e,t)};function xc(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");f6(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function Pk(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function l(d){try{h(r.next(d))}catch(g){s(g)}}function c(d){try{h(r.throw(d))}catch(g){s(g)}}function h(d){d.done?o(d.value):i(d.value).then(l,c)}h((r=r.apply(e,t||[])).next())})}function WE(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=l(0),s.throw=l(1),s.return=l(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(h){return function(d){return c([h,d])}}function c(h){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,h[0]&&(n=0)),n;)try{if(r=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,i=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){n.label=h[1];break}if(h[0]===6&&n.label<o[1]){n.label=o[1],o=h;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(h);break}o[2]&&n.ops.pop(),n.trys.pop();continue}h=t.call(e,n)}catch(d){h=[6,d],i=0}finally{r=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function v0(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y0(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function Kg(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function a0(e){return this instanceof a0?(this.v=e,this):new a0(e)}function Sk(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(x){return Promise.resolve(x).then(y,g)}}function l(y,x){r[y]&&(i[y]=function(E){return new Promise(function(T,D){o.push([y,E,T,D])>1||c(y,E)})},x&&(i[y]=x(i[y])))}function c(y,x){try{h(r[y](x))}catch(E){v(o[0][3],E)}}function h(y){y.value instanceof a0?Promise.resolve(y.value.v).then(d,g):v(o[0][2],y)}function d(y){c("next",y)}function g(y){c("throw",y)}function v(y,x){y(x),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Tk(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof v0=="function"?v0(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(l,c){s=e[o](s),i(l,c,s.done,s.value)})}}function i(o,s,l,c){Promise.resolve(c).then(function(h){o({value:h,done:l})},s)}}function rr(e){return typeof e=="function"}function zE(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var X7=zE(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function l3(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Tp=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var l=v0(s),c=l.next();!c.done;c=l.next()){var h=c.value;h.remove(this)}}catch(E){t={error:E}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}else s.remove(this);var d=this.initialTeardown;if(rr(d))try{d()}catch(E){o=E instanceof X7?E.errors:[E]}var g=this._finalizers;if(g){this._finalizers=null;try{for(var v=v0(g),y=v.next();!y.done;y=v.next()){var x=y.value;try{pw(x)}catch(E){o=o??[],E instanceof X7?o=Kg(Kg([],y0(o)),y0(E.errors)):o.push(E)}}}catch(E){r={error:E}}finally{try{y&&!y.done&&(i=v.return)&&i.call(v)}finally{if(r)throw r.error}}}if(o)throw new X7(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)pw(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&l3(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&l3(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),VE=Tp.EMPTY;function UE(e){return e instanceof Tp||e&&"closed"in e&&rr(e.remove)&&rr(e.add)&&rr(e.unsubscribe)}function pw(e){rr(e)?e():e.unsubscribe()}var Dk={Promise:void 0},Ak={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Kg([e,t],y0(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function XE(e){Ak.setTimeout(function(){throw e})}function mw(){}function jm(e){e()}var A4=function(e){xc(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,UE(n)&&n.add(r)):r.destination=Rk,r}return t.create=function(n,r,i){return new h6(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Tp),Bk=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){dm(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){dm(r)}else dm(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){dm(n)}},e}(),h6=function(e){xc(t,e);function t(n,r,i){var o=e.call(this)||this,s;return rr(n)||!n?s={next:n??void 0,error:r??void 0,complete:i??void 0}:s=n,o.destination=new Bk(s),o}return t}(A4);function dm(e){XE(e)}function Mk(e){throw e}var Rk={closed:!0,next:mw,error:Mk,complete:mw},B4=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function bk(e){return e}function kk(e){return e.length===0?bk:e.length===1?e[0]:function(n){return e.reduce(function(r,i){return i(r)},n)}}var qa=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,o=Ik(t)?t:new h6(t,n,r);return jm(function(){var s=i,l=s.operator,c=s.source;o.add(l?l.call(o,c):c?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=vw(n),new n(function(i,o){var s=new h6({next:function(l){try{t(l)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});r.subscribe(s)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[B4]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return kk(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=vw(t),new t(function(r,i){var o;n.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},e.create=function(t){return new e(t)},e}();function vw(e){var t;return(t=e??Dk.Promise)!==null&&t!==void 0?t:Promise}function Ok(e){return e&&rr(e.next)&&rr(e.error)&&rr(e.complete)}function Ik(e){return e&&e instanceof A4||Ok(e)&&UE(e)}function Fk(e){return rr(e==null?void 0:e.lift)}function KE(e){return function(t){if(Fk(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function d6(e,t,n,r,i){return new Lk(e,t,n,r,i)}var Lk=function(e){xc(t,e);function t(n,r,i,o,s,l){var c=e.call(this,n)||this;return c.onFinalize=s,c.shouldUnsubscribe=l,c._next=r?function(h){try{r(h)}catch(d){n.error(d)}}:e.prototype._next,c._error=o?function(h){try{o(h)}catch(d){n.error(d)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=i?function(){try{i()}catch(h){n.error(h)}finally{this.unsubscribe()}}:e.prototype._complete,c}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(A4),_k=zE(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),YE=function(e){xc(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new yw(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new _k},t.prototype.next=function(n){var r=this;jm(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=v0(r.currentObservers),l=s.next();!l.done;l=s.next()){var c=l.value;c.next(n)}}catch(h){i={error:h}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;jm(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;jm(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,o=i.hasError,s=i.isStopped,l=i.observers;return o||s?VE:(this.currentObservers=null,l.push(n),new Tp(function(){r.currentObservers=null,l3(l,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r.thrownError,s=r.isStopped;i?n.error(o):s&&n.complete()},t.prototype.asObservable=function(){var n=new qa;return n.source=this,n},t.create=function(n,r){return new yw(n,r)},t}(qa),yw=function(e){xc(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:VE},t}(YE),Nk={now:function(){return Date.now()}},Hk=function(e){xc(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t}(Tp),ww={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,Kg([e,t],y0(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},Gk=function(e){xc(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return t.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var o=this.id,s=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(s,o,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,r),this},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),ww.setInterval(n.flush.bind(n,this),i)},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&ww.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var i=!1,o;try{this.work(n)}catch(s){i=!0,o=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,l3(o,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(Hk),Cw=function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=Nk.now,e}(),jk=function(e){xc(t,e);function t(n,r){r===void 0&&(r=Cw.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},t}(Cw),$k=new jk(Gk),Wk=$k,qE=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function zk(e){return rr(e==null?void 0:e.then)}function Vk(e){return rr(e[B4])}function Uk(e){return Symbol.asyncIterator&&rr(e==null?void 0:e[Symbol.asyncIterator])}function Xk(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Kk(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Yk=Kk();function qk(e){return rr(e==null?void 0:e[Yk])}function Zk(e){return Sk(this,arguments,function(){var n,r,i,o;return WE(this,function(s){switch(s.label){case 0:n=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,a0(n.read())];case 3:return r=s.sent(),i=r.value,o=r.done,o?[4,a0(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,a0(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function Qk(e){return rr(e==null?void 0:e.getReader)}function M4(e){if(e instanceof qa)return e;if(e!=null){if(Vk(e))return Jk(e);if(qE(e))return eO(e);if(zk(e))return tO(e);if(Uk(e))return ZE(e);if(qk(e))return nO(e);if(Qk(e))return rO(e)}throw Xk(e)}function Jk(e){return new qa(function(t){var n=e[B4]();if(rr(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function eO(e){return new qa(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function tO(e){return new qa(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,XE)})}function nO(e){return new qa(function(t){var n,r;try{for(var i=v0(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(l){n={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function ZE(e){return new qa(function(t){iO(e,t).catch(function(n){return t.error(n)})})}function rO(e){return ZE(Zk(e))}function iO(e,t){var n,r,i,o;return Pk(this,void 0,void 0,function(){var s,l;return WE(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=Tk(e),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=c.sent(),i={error:l},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function oO(e){return e instanceof Date&&!isNaN(e)}function QE(e,t){return KE(function(n,r){var i=0;n.subscribe(d6(r,function(o){r.next(e.call(t,o,i++))}))})}var sO=Array.isArray;function aO(e,t){return sO(t)?e.apply(void 0,Kg([],y0(t))):e(t)}function lO(e){return QE(function(t){return aO(e,t)})}function uO(e,t,n,r,i,o,s,l){var c=[],h=0,d=0,g=!1,v=function(){g&&!c.length&&!h&&t.complete()},y=function(E){return h<r?x(E):c.push(E)},x=function(E){h++;var T=!1;M4(n(E,d++)).subscribe(d6(t,function(D){t.next(D)},function(){T=!0},void 0,function(){if(T)try{h--;for(var D=function(){var S=c.shift();s||x(S)};c.length&&h<r;)D();v()}catch(S){t.error(S)}}))};return e.subscribe(d6(t,y,function(){g=!0,v()})),function(){}}function JE(e,t,n){return n===void 0&&(n=1/0),rr(t)?JE(function(r,i){return QE(function(o,s){return t(r,o,i,s)})(M4(e(r,i)))},n):(typeof t=="number"&&(n=t),KE(function(r,i){return uO(r,i,e,n)}))}var cO=["addListener","removeListener"],fO=["addEventListener","removeEventListener"],hO=["on","off"];function u3(e,t,n,r){if(rr(n)&&(r=n,n=void 0),r)return u3(e,t,n).pipe(lO(r));var i=y0(pO(e)?fO.map(function(l){return function(c){return e[l](t,c,n)}}):dO(e)?cO.map(xw(e,t)):gO(e)?hO.map(xw(e,t)):[],2),o=i[0],s=i[1];if(!o&&qE(e))return JE(function(l){return u3(l,t,n)})(M4(e));if(!o)throw new TypeError("Invalid event target");return new qa(function(l){var c=function(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];return l.next(1<h.length?h:h[0])};return o(c),function(){return s(c)}})}function xw(e,t){return function(n){return function(r){return e[n](t,r)}}}function dO(e){return rr(e.addListener)&&rr(e.removeListener)}function gO(e){return rr(e.on)&&rr(e.off)}function pO(e){return rr(e.addEventListener)&&rr(e.removeEventListener)}function mO(e,t,n){return n===void 0&&(n=Wk),new qa(function(r){var i=oO(e)?0-n.now():e;i<0&&(i=0);var o=0;return n.schedule(function(){r.closed||(r.next(o++),r.complete())},i)})}var oa;(function(e){e.ew="ew-resize",e.ns="ns-resize",e.nesw="nesw-resize",e.nwse="nwse-resize"})(oa||(oa={}));var bg;(function(e){e.crosshair="crosshair"})(bg||(bg={}));const K7=[oa.ns,oa.nesw,oa.ew,oa.nwse],tl="plait-board-attached",gr=1,g6=2,Dp="selection-rectangle",vO="selection-rectangle-bounding",yO=.1,eP=.1,tP=4,wO="plait-board-container",nP="active-with-moving",Ew="rotate-handle",CO="resize-handle",xO=20,rP={MAIN:0,WHEEL:1},R4=3,iP=10,b4=5;function EO(e){return!!e.beforeContextChange}function PO(e){return!!e.onContextChanged}const Pw=new WeakMap,$m=new WeakMap,l0=new WeakMap,jf=new WeakMap,p6=new WeakMap,Tg=new WeakMap,Dg=new WeakMap,m6=new WeakMap,c3=new WeakMap,f3=new WeakMap,v6=new WeakMap,y6=new WeakMap,w6=new WeakMap,C6=new WeakMap,jl=new WeakMap,oP=new WeakMap,x6=new WeakMap,sP=new WeakMap,k4=new WeakMap,O4=new WeakMap,nv=new WeakMap,rv=new WeakMap,Sw=new WeakMap,Ag=new WeakMap;function Jo(e){return e==null}const Yg=(e,t)=>e+Math.floor(t*255).toString(16);function SO(e){return e.button===2}function I4(e){const t=new Map;return e.forEach(n=>{t.has(n.id)||t.set(n.id,n)}),Array.from(t.values())}const TO=(e,t,n=e.length-1)=>{n<0&&(n=e.length+n),n=Math.min(e.length-1,Math.max(n,0));let r=n+1;for(;--r>-1;)if(t(e[r],r,e))return r;return-1},DO=(e,t,n=0)=>{n<0&&(n=e.length+n),n=Math.min(e.length,Math.max(n,0));let r=n-1;for(;++r<e.length;)if(t(e[r],r,e))return r;return-1},AO=e=>{e.sort((t,n)=>t-n);for(let t=1;t<e.length;t++)if(e[t]!==e[t-1]+1)return!1;return!0},BO={isViewport:e=>!Jo(e.zoom)&&!Jo(e.viewBackgroundColor)},wt={ancestors(e,t={}){const{reverse:n=!1}=t;let r=wt.levels(e,t);return n?r=r.slice(1):r=r.slice(0,-1),r},levels(e,t={}){const{reverse:n=!1}=t,r=[];for(let i=0;i<=e.length;i++)r.push(e.slice(0,i));return n&&r.reverse(),r},parent(e){if(e.length===0)throw new Error(`Cannot get the parent path of the root path [${e}].`);return e.slice(0,-1)},next(e){if(e.length===0)throw new Error(`Cannot get the next path of a root path [${e}], because it has no next index.`);const t=e[e.length-1];return e.slice(0,-1).concat(t+1)},hasPrevious(e){return e[e.length-1]>0},previous(e){if(e.length===0)throw new Error(`Cannot get the previous path of a root path [${e}], because it has no previous index.`);const t=e[e.length-1];if(t<=0)throw new Error(`Cannot get the previous path of a first child path [${e}] because it would result in a negative index.`);return e.slice(0,-1).concat(t-1)},isAncestor(e,t){return e.length<t.length&&wt.compare(e,t)===0},compare(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0},equals(e,t){return e.length===t.length&&e.every((n,r)=>n===t[r])},endsBefore(e,t){const n=e.length-1,r=e.slice(0,n),i=t.slice(0,n),o=e[n],s=t[n];return wt.equals(r,i)&&o<s},isSibling(e,t){if(e.length!==t.length)return!1;const n=e.slice(0,-1),r=t.slice(0,-1),i=e[e.length-1],o=t[t.length-1];return i!==o&&wt.equals(n,r)},transform(e,t){if(!e)return null;const n=[...e];if(e.length===0)return n;switch(t.type){case"insert_node":{const{path:r}=t;(wt.equals(r,n)||wt.endsBefore(r,n)||wt.isAncestor(r,n))&&(n[r.length-1]+=1);break}case"remove_node":{const{path:r}=t;if(wt.equals(r,n)||wt.isAncestor(r,n))return null;wt.endsBefore(r,n)&&(n[r.length-1]-=1);break}case"move_node":{const{path:r,newPath:i}=t;if(wt.equals(r,i))return n;if(wt.isAncestor(r,n)||wt.equals(r,n)){const o=i.slice();return wt.endsBefore(r,i)&&r.length<i.length&&(o[r.length-1]-=1),o.concat(n.slice(r.length))}else wt.isSibling(r,i)&&(wt.isAncestor(i,n)||wt.equals(i,n))?wt.endsBefore(r,n)?n[r.length-1]-=1:n[r.length-1]+=1:wt.endsBefore(i,n)||wt.equals(i,n)||wt.isAncestor(i,n)?(wt.endsBefore(r,n)&&(n[r.length-1]-=1),n[i.length-1]+=1):wt.endsBefore(r,n)&&(wt.equals(i,n)&&(n[i.length-1]+=1),n[r.length-1]-=1);break}}return n}},Kt={parent:(e,t)=>{const n=wt.parent(t);return Kt.get(e,n)},*parents(e,t,n={}){for(const r of wt.ancestors(t,n))yield Kt.get(e,r)},get(e,t){let n=e;for(let r=0;r<t.length;r++){const i=t[r];if(!n||!n.children||!n.children[i])throw new Error(`Cannot find a descendant at path [${t}]`);n=n.children[i]}return n},last(e,t){let n=Kt.get(e,t);for(;n&&n.children&&n.children.length>0;){const r=n.children.length-1;n=n.children[r]}return n},first(e,t){const n=t.slice();let r=Kt.get(e,n);if(!r.children||!e.isExpanded(r))return r;for(;r&&r.children&&r.children.length>0&&e.isExpanded(r)&&r.children.length!==0;)r=r.children[0],n.push(0);return r}},MO=(e,t,n,r,i)=>{var o,s;switch(i.type){case"insert_node":{const{path:l,node:c}=i,h=Kt.parent(e,l),d=l[l.length-1];if(!h.children||d>h.children.length)throw new Error(`Cannot apply an "insert_node" operation at path [${l}] because the destination is past the end of the node.`);h.children.splice(d,0,c);break}case"remove_node":{const{path:l}=i,c=Kt.parent(e,l),h=l[l.length-1];if(!c.children||h>c.children.length)throw new Error(`Cannot apply an "insert_node" operation at path [${l}] because the destination is past the end of the node.`);c.children.splice(h,1);break}case"move_node":{const{path:l,newPath:c}=i;if(wt.isAncestor(l,c))throw new Error(`Cannot move a path [${l}] to new path [${c}] because the destination is inside itself.`);const h=Kt.get(e,l),d=Kt.parent(e,l),g=l[l.length-1];(o=d.children)==null||o.splice(g,1);const v=wt.transform(l,i),y=Kt.get(e,wt.parent(v)),x=v[v.length-1];(s=y.children)==null||s.splice(x,0,h);break}case"set_node":{const{path:l,properties:c,newProperties:h}=i;if(l.length===0)throw new Error("Cannot set properties on the root node!");const d=Kt.get(e,l);for(const g in h){const v=h[g];v==null?delete d[g]:d[g]=v}for(const g in c)h.hasOwnProperty(g)||delete d[g];break}case"set_viewport":{const{newProperties:l}=i;if(l==null)n=l;else{if(n==null){if(!BO.isViewport(l))throw new Error(`Cannot apply an incomplete "set_viewport" operation properties ${JSON.stringify(l)} when there is no current viewport.`);n={...l}}for(const c in l){const h=l[c];h==null?delete n[c]:n[c]=h}}break}case"set_selection":{const{newProperties:l}=i;l==null?t=l:t===null?t=i.newProperties:t=l;break}case"set_theme":{const{newProperties:l}=i;r=l;break}}return{selection:t,viewport:n,theme:r}},RO={transform(e,t){e.children=fm(e.children);let n=e.viewport&&fm(e.viewport),r=e.selection&&fm(e.selection),i=e.theme&&fm(e.theme);try{const o=MO(e,r,n,i,t);n=o.viewport,r=o.selection,i=o.theme}finally{e.children=hm(e.children),r?e.selection=Kl(r)?hm(r):r:e.selection=null,e.viewport=Kl(n)?hm(n):n,e.theme=Kl(i)?hm(i):i}}},b={isHit:(e,t)=>b.isHitX(e,t)&&b.isHitY(e,t),isHitX:(e,t)=>{const n=e.x<t.x?e.x:t.x,r=e.x+e.width>t.x+t.width?e.x+e.width:t.x+t.width;return Math.floor(r-n-e.width-t.width)<=0},isHitY:(e,t)=>{const n=e.y<t.y?e.y:t.y,r=e.y+e.height>t.y+t.height?e.y+e.height:t.y+t.height;return Math.floor(r-n-e.height-t.height)<=0},getPoints(e){return[[e.x,e.y],[e.x+e.width,e.y+e.height]]},getRectangleByCenterPoint(e,t,n){return b.getRectangleByPoint([e[0]-t/2,e[1]-n/2],t,n)},getRectangleByPoint(e,t,n){return{x:e[0],y:e[1],width:t,height:n}},getRectangleByPoints(e){bO(e)&&(e=[e]);let t=1/0,n=1/0,r=-1/0,i=-1/0;for(const s of e){const l=s.map(h=>h[0]),c=s.map(h=>h[1]);t=Math.min(t,...l),n=Math.min(n,...c),r=Math.max(r,...l),n=Math.min(n,...c),i=Math.max(i,...c)}return{x:t,y:n,width:r-t,height:i-n}},getCornerPointsByPoints(e){const t=e.map(l=>l[0]),n=e.map(l=>l[1]),r=Math.min(...t),i=Math.max(...t),o=Math.min(...n),s=Math.max(...n);return[[r,o],[i,o],[i,s],[r,s]]},getOutlineRectangle:(e,t)=>({x:e.x+t,y:e.y+t,width:e.width-t*2,height:e.height-t*2}),inflate:(e,t)=>{const n=t/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}},isEqual:(e,t)=>e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height,getCornerPoints:e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],getCenterPoint:e=>[e.x+e.width/2,e.y+e.height/2],getCenterPointByPoints:e=>b.getCenterPoint(b.getRectangleByPoints(e)),getEdgeCenterPoints:e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]],getConnectionPoint:(e,t)=>[e.x+e.width*t[0],e.y+e.height*t[1]],expand(e,t,n=t,r=t,i=n){return{x:e.x-t,y:e.y-n,width:e.width+t+r,height:e.height+n+i}},getGapCenter(e,t,n){const r=n?"x":"y",i=n?"width":"height",s=[e[r],e[r]+e[i],t[r],t[r]+t[i]].sort((l,c)=>l-c);return(s[1]+s[2])/2},isPointInRectangle(e,t){const n=t[0],r=t[1];return n>e.x&&n<e.x+e.width&&r>e.y&&r<e.y+e.height},getBoundingRectangle(e){if(e.length===0)throw new Error("rectangles can not be empty array");let t=Number.MAX_VALUE,n=Number.MAX_VALUE,r=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.forEach(o=>{t=Math.min(t,o.x),n=Math.min(n,o.y),r=Math.max(r,o.x+o.width),i=Math.max(i,o.y+o.height)}),{x:t,y:n,width:r-t,height:i-n}}};function bO(e){return Array.isArray(e)&&e.every(t=>Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")}function aP(e,t,n,r,i,o){const s=e-n,l=t-r,c=i-n,h=o-r,d=s*c+l*h,g=c*c+h*h;let v=-1;g!==0&&(v=d/g);let y,x;v<0?(y=n,x=r):v>1?(y=i,x=o):(y=n+v*c,x=r+v*h);const E=e-y,T=t-x;return Math.hypot(E,T)}function iv(e,t){const n=e[0],r=e[1],i=t[0][0],o=t[0][1],s=t[1][0],l=t[1][1],c=n-i,h=r-o,d=s-i,g=l-o,v=c*d+h*g,y=d*d+g*g;let x=-1;y!==0&&(x=v/y);let E,T;return x<0?(E=i,T=o):x>1?(E=s,T=l):(E=i+x*d,T=o+x*g),[E,T]}function lP(e,t){const n=t.length;let r=1/0;if(t.length===1)return Tt(...t[0],...e);for(let i=0;i<n-1;i++){const o=t[i],s=t[i+1],l=aP(e[0],e[1],o[0],o[1],s[0],s[1]);l<r&&(r=l)}return r}function _n(e,t,n=!0){const r=t.length;let i=1/0,o=e;for(let s=0;s<r;s++){const l=t[s];if(s===r-1&&!n)continue;const c=s===r-1?t[0]:t[s+1],h=aP(e[0],e[1],l[0],l[1],c[0],c[1]);h<i&&(i=h,o=iv(e,[l,c]))}return o}function F4(e,t){let n=1/0,r=e;for(const i of t){const o=iv(e,i),s=Tt(e[0],e[1],o[0],o[1]);s<n&&(n=s,r=o)}return r}function bi(e,t,n,r){const i={x:t[0]-n,y:t[1]-r,height:r*2,width:n*2},o=Math.abs(e[0]-i.x-i.width/2),s=Math.abs(e[1]-i.y-i.height/2);let l=.707,c=.707;const h=Math.abs(i.width)/2,d=Math.abs(i.height)/2;[0,1,2,3].forEach(y=>{const x=h*l,E=d*c,T=(h*h-d*d)*l**3/h,D=(d*d-h*h)*c**3/d,S=x-T,R=E-D,k=o-T,O=s-D,$=Math.hypot(R,S),z=Math.hypot(O,k);l=Math.min(1,Math.max(0,(k*$/z+T)/h)),c=Math.min(1,Math.max(0,(O*$/z+D)/d));const K=Math.hypot(c,l);l/=K,c/=K});const g=e[0]>t[0]?1:-1,v=e[1]>t[1]?1:-1;return[t[0]+h*l*g,t[1]+d*c*v]}function w0(e,t,n,r,i){return[(e-n)*Math.cos(i)-(t-r)*Math.sin(i)+n,(e-n)*Math.sin(i)+(t-r)*Math.cos(i)+r]}function Tt(e,t,n,r){const i=e-n,o=t-r;return Math.hypot(i,o)}function Ap(e,t,n){var r=Math.max(n.x-e,0,e-(n.x+n.width)),i=Math.max(n.y-t,0,t-(n.y+n.height));return Math.sqrt(r*r+i*i)}const gm=(e,t,n,r)=>{if(mt.isEquals(e,t)&&mt.isEquals(n,r)&&!mt.isEquals(e,n))return!1;const i=(g,v)=>g[0]*v[1]-g[1]*v[0],o=[t[0]-e[0],t[1]-e[1]],s=[n[0]-e[0],n[1]-e[1]],l=[r[0]-e[0],r[1]-e[1]],c=[e[0]-n[0],e[1]-n[1]],h=[t[0]-n[0],t[1]-n[1]],d=[r[0]-n[0],r[1]-n[1]];return i(o,s)*i(o,l)<=0&&i(d,c)*i(d,h)<=0},h3=(e,t)=>{if(e.length===1)return b.isPointInRectangle(t,e[0]);const n=b.getCornerPoints(t),r=e.length;for(let i=0;i<r;i++){const o=e[i],s=e[(i+1)%r];if(i===r-1&&mt.isEquals(o,s))continue;if(kO(o,s,t)||hc(o,n)||hc(s,n))return!0}return!1},kO=(e,t,n)=>{const r=b.getCornerPoints(n);return gm(e,t,r[0],r[1])||gm(e,t,r[1],r[2])||gm(e,t,r[2],r[3])||gm(e,t,r[3],r[0])},hc=(e,t)=>{const n=e[0],r=e[1];let i=!1;for(var o=0,s=t.length-1;o<t.length;s=o++){let l=t[o][0],c=t[o][1],h=t[s][0],d=t[s][1];c>r!=d>r&&n<(h-l)*(r-c)/(d-c)+l&&(i=!i)}return i},Jl=(e,t,n,r,i=0)=>{const o=Math.cos(i),s=Math.sin(i),l=(e[0]-t[0])*o+(e[1]-t[1])*s,c=(e[1]-t[1])*o-(e[0]-t[0])*s;return l*l/(n*n)+c*c/(r*r)<=1},L4=(e,t,n,r=0)=>{const{x:i,y:o,width:s,height:l}=t,c=e[0]>=i&&e[0]<=i+s&&e[1]>=o&&e[1]<=o+l,h=e[0]>=i&&e[0]<=i+n&&e[1]>=o&&e[1]<=o+n&&Math.hypot(e[0]-(i+n),e[1]-(o+n))>n,d=e[0]>=i&&e[0]<=i+n&&e[1]>=o+l&&e[1]<=o+l-n&&Math.hypot(e[0]-(i+n),e[1]-(o+l-n))>n,g=e[0]>=i+s-n&&e[0]<=i+s&&e[1]>=o&&e[1]<=o+n&&Math.hypot(e[0]-(i+s-n),e[1]-(o+n))>n,v=e[0]>=i+s-n&&e[0]<=i+s&&e[1]>=o+l-n&&e[1]<=o+l&&Math.hypot(e[0]-(i+s-n),e[1]-(o+l-n))>n;return c&&!(h||d||g||v)},Bp=function(e){let n,r,i,o,s,l,c,h,d,g,v,y,x;var E,T,D,S,R,k;const O=[];O.push([Math.round(e[0][0]),Math.round(e[0][1])]);for(var $=e.length,z=0;z<$-1;z++)n=z==0?e[0]:e[z-1],r=e[z],i=e[z+1],o=z+2<$?e[z+2]:i,c=Math.sqrt(Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2)),h=Math.sqrt(Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2)),d=Math.sqrt(Math.pow(i[0]-o[0],2)+Math.pow(i[1]-o[1],2)),E=Math.pow(d,.5),D=Math.pow(d,2*.5),T=Math.pow(h,.5),S=Math.pow(h,2*.5),k=Math.pow(c,.5),R=Math.pow(c,2*.5),g=2*R+3*k*T+S,v=2*D+3*E*T+S,y=3*k*(k+T),y>0&&(y=1/y),x=3*E*(E+T),x>0&&(x=1/x),s=[(-S*n[0]+g*r[0]+R*i[0])*y,(-S*n[1]+g*r[1]+R*i[1])*y],l=[(D*r[0]+v*i[0]-S*o[0])*x,(D*r[1]+v*i[1]-S*o[1])*x],s[0]==0&&s[1]==0&&(s=r),l[0]==0&&l[1]==0&&(l=i),O.push(s,l,i);return O};function nl(e,t,n,r){return Math.abs(t)===0?e>0?-1/0:1/0:-r*r*e/(n*n*t)}function rl(e,t,n){if(n===1/0)return[0,-1];if(n===-1/0)return[0,1];let r=[1,-n];return t<0&&(r=[-r[0],-r[1]]),r}function OO(e){return+e.toFixed(2)}function _4(e,t){const n=Math.pow(10,t);return Math.ceil(e*n)/n}function E6(e,t,n=1e-6){return Math.abs(e-t)<=n}function Tw(e,t,n,r,i,o,s=!0){if(i===0||o===0||e[0]===t[0]&&e[1]===t[1])return[];i=i<0?i:-i,o=o<0?o:-o,e[0]-=n,e[1]-=r,t[0]-=n,t[1]-=r;var l=(t[0]-e[0])*(t[0]-e[0])/i/i+(t[1]-e[1])*(t[1]-e[1])/o/o,c=2*e[0]*(t[0]-e[0])/i/i+2*e[1]*(t[1]-e[1])/o/o,h=e[0]*e[0]/i/i+e[1]*e[1]/o/o-1,d=[],g=c*c-4*l*h;return g===0?d.push(-c/2/l):g>0&&(d.push((-c+Math.sqrt(g))/2/l),d.push((-c-Math.sqrt(g))/2/l)),d.filter(v=>!s||v>=0&&v<=1).map(v=>[e[0]+(t[0]-e[0])*v+n,e[1]+(t[1]-e[1])*v+r])}function Dw(e,t,n,r,i=.5){return[e+(n-e)*i,t+(r-t)*i]}function uP(e,t){const n=(t.endX-e[0])/2,r=(t.endY-e[1])/2,i=Math.cos(t.xAxisRotation),o=Math.sin(t.xAxisRotation),s=i*n+o*r,l=-o*n+i*r,c=Math.abs(t.rx),h=Math.abs(t.ry),d=s*s/(c*c)+l*l/(h*h),g=d>1?Math.sqrt(d):1,v=c*g,y=h*g,x=t.largeArcFlag===t.sweepFlag?-1:1,E=(v*v*y*y-v*v*l*l-y*y*s*s)/(v*v*l*l+y*y*s*s),T=x*Math.sqrt(Math.max(0,E)),D=T*(v*l/y),S=T*(-(y*s)/v),R=i*D-o*S+(e[0]+t.endX)/2,k=o*D+i*S+(e[1]+t.endY)/2;return{center:[R,k],rx:v,ry:y}}function ov(e,t,n){const{center:r,rx:i,ry:o}=uP(t,n),s=bi(e,r,i,o),l=Math.atan2(t[1]-r[1],t[0]-r[0]),c=Math.atan2(n.endY-r[1],n.endX-r[0]),h=Math.atan2(s[1]-r[1],s[0]-r[0]);if(IO(h,l,c,n.sweepFlag===1))return s;const g=Tt(e[0],e[1],t[0],t[1]),v=Tt(e[0],e[1],n.endX,n.endY);return g<v?t:[n.endX,n.endY]}function IO(e,t,n,r){const i=c=>(c%(2*Math.PI)+2*Math.PI)%(2*Math.PI),o=i(e),s=i(t),l=i(n);return r?s<=l?o>=s&&o<=l:o>=s||o<=l:s>=l?o<=s&&o>=l:o<=s||o>=l}function FO(e,t,n){const i=F.getBoardContainer(e).getBoundingClientRect();return Ap(t,n,i)===0}function N4(e){const{hideScrollbar:t}=e.options;let n=0;if(!t){const r=F.getViewportContainer(e);n=r.offsetWidth-r.clientWidth}return n}const O0="http://www.w3.org/2000/svg";function Lt(){return document.createElementNS(O0,"g")}function H4(){return document.createElementNS(O0,"path")}function Y7(e,t){const n=document.createElementNS(O0,"rect");n.setAttribute("x",`${e.x}`),n.setAttribute("y",`${e.y}`),n.setAttribute("width",`${e.width}`),n.setAttribute("height",`${e.height}`);for(let r in t){const i=r;n.setAttribute(r,`${t[i]}`)}return n}const zt=(e,t)=>{e.setAttribute("stroke-linecap",t)},LO=(e,t)=>{e.querySelectorAll("path").forEach(n=>{n.setAttribute("stroke-linecap",t)})};function _O(){return document.createElementNS(O0,"mask")}function NO(e,t,n,r){var i=document.createElementNS(O0,"text");return i.setAttribute("x",`${e}`),i.setAttribute("y",`${t}`),i.setAttribute("fill",n),i.textContent=r,i}const HO=e=>GO(e)&&e.nodeType===1,GO=e=>e instanceof window.Node,jO=e=>!!(HO(e)&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA")),Za=e=>e.button===rP.MAIN,$O=e=>e.button===rP.WHEEL;function G4(e,t,n,r){var i=document.createElementNS(O0,"foreignObject");return i.setAttribute("x",`${e}`),i.setAttribute("y",`${t}`),i.setAttribute("width",`${_4(n,0)}`),i.setAttribute("height",`${r}`),i}function kg(e,t,n,r,i){const o=e instanceof SVGForeignObjectElement?e:e.querySelector("foreignObject");o&&(o.setAttribute("width",`${_4(t,0)}`),o.setAttribute("height",`${n}`),o.setAttribute("x",`${r}`),o.setAttribute("y",`${i}`))}function WO(e,t){const n=e instanceof SVGForeignObjectElement?e:e.querySelector("foreignObject");n&&n.setAttribute("width",`${_4(t,0)}`)}const zO=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),VO=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,d3=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),UO=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),XO=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),KO=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),YO=(e,t)=>e.type==="set_viewport"&&e.type===(t==null?void 0:t.type),qO=(e,t)=>!(e.type==="set_selection"||e.type==="set_viewport"),ZO=e=>e.type!=="set_selection",Ss={isSaving(e){return q7.get(e)},isMerging(e){return Or.get(e)},isSplittingOnce(e){return mm.get(e)},setSplittingOnce(e,t){mm.set(e,t)},withMerging(e,t){const n=Ss.isMerging(e);Or.set(e,!0),t(),Or.set(e,n)},withNewBatch(e,t){const n=Ss.isMerging(e);Or.set(e,!0),mm.set(e,!0),t(),Or.set(e,n),mm.delete(e)},withoutMerging(e,t){const n=Ss.isMerging(e);Or.set(e,!1),t(),Or.set(e,n)},withoutSaving(e,t){const n=Ss.isSaving(e);q7.set(e,!1),t(),q7.set(e,n)}},QO={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],arrow:["down","left","right","up"],extendArrow:["shift+down","shift+left","shift+right","shift+up"],moveBackward:"left",moveForward:"right",moveUp:"up",moveDown:"down",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",extendUp:"shift+up",extendDown:"shift+down",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z",shift:"shift"},JO={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},eI={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Rn=e=>{const t=QO[e],n=JO[e],r=eI[e],i=t&&Qt.isKeyHotkey(t),o=n&&Qt.isKeyHotkey(n),s=r&&Qt.isKeyHotkey(r);return l=>!!(i&&i(l)||d3&&o&&o(l)||!d3&&s&&s(l))},Ai={isBold:Rn("bold"),isCompose:Rn("compose"),isArrow:Rn("arrow"),isMoveBackward:Rn("moveBackward"),isMoveForward:Rn("moveForward"),isMoveUp:Rn("moveUp"),isMoveDown:Rn("moveDown"),isDeleteBackward:Rn("deleteBackward"),isDeleteForward:Rn("deleteForward"),isDeleteLineBackward:Rn("deleteLineBackward"),isDeleteLineForward:Rn("deleteLineForward"),isDeleteWordBackward:Rn("deleteWordBackward"),isDeleteWordForward:Rn("deleteWordForward"),isExtendBackward:Rn("extendBackward"),isExtendForward:Rn("extendForward"),isExtendUp:Rn("extendUp"),isExtendDown:Rn("extendDown"),isExtendArrow:Rn("extendArrow"),isExtendLineBackward:Rn("extendLineBackward"),isExtendLineForward:Rn("extendLineForward"),isItalic:Rn("italic"),isMoveLineBackward:Rn("moveLineBackward"),isMoveLineForward:Rn("moveLineForward"),isMoveWordBackward:Rn("moveWordBackward"),isMoveWordForward:Rn("moveWordForward"),isRedo:Rn("redo"),isSplitBlock:Rn("splitBlock"),isTransposeCharacter:Rn("transposeCharacter"),isUndo:Rn("undo"),isShift:Rn("shift")};function Sn(e=5){const t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz",n=t.length;let r="";for(let i=0;i<e;i++)r+=t.charAt(Math.floor(Math.random()*n));return r}function pi(e,t,n,r){if(e.children&&(!n||n(e))){let i=[...e.children];i=r?i.reverse():i,i.forEach(o=>{pi(o,t,n)})}t(e)}const oh=e=>t=>!!(F.isBoard(t)||e.isRecursion(t)),Po="#6698FF",j4="#6698FF25",C0={isCollapsed(e){return e.anchor[0]==e.focus[0]&&e.anchor[1]===e.focus[1]}},yn={isRootElement(e){const t=jf.get(e);return!!(t&&F.isBoard(t))},getElementRef(e){return Ag.get(e)},getElementG(e){const t=Tg.get(e);if(!t)throw new Error(`can not resolve element g: ${JSON.stringify(e)}`);return t},hasMounted(e){return!!yn.getContainerG(e,{suppressThrow:!0})},getContainerG(e,t){const n=Dg.get(e)||null;if(!n){if(t.suppressThrow)return null;throw new Error("can not resolve container g")}return n}},sv=(e,t,n=!0)=>[...t].sort((r,i)=>{const o=F.findPath(e,r),s=F.findPath(e,i);return n?o[0]-s[0]:s[0]-o[0]}),cP=new Map,wg=e=>cP.get(e)||[],Cg=(e,t)=>{cP.set(e,t)};class tI{constructor(t){this.debugKey=t}isDebug(){return nc(this.debugKey)}clear(){if(!this.isDebug())return;const t=wg(this.debugKey);Cg(this.debugKey,[]),t.forEach(n=>n.remove())}drawPolygon(t,n,r){if(!nc(this.debugKey))return;const i=F.getRoughSVG(t).polygon(n,r||{stroke:"red"});i.classList.add(this.debugKey),F.getElementTopHost(t).append(i);const o=wg(this.debugKey);return o.push(i),Cg(this.debugKey,o),i}drawLine(t,n,r){if(!nc(this.debugKey))return;const i=F.getRoughSVG(t).linearPath(n,r||{stroke:"red"});i.classList.add(this.debugKey),F.getElementTopHost(t).append(i);const o=wg(this.debugKey);return o.push(i),Cg(this.debugKey,o),i}drawRectangle(t,n,r){if(!nc(this.debugKey))return;let i;n instanceof Array?i=b.getRectangleByPoints(n):i=n;const o=F.getRoughSVG(t).rectangle(i.x,i.y,i.width,i.height,r||{stroke:"red"});o.classList.add(this.debugKey),F.getElementTopHost(t).append(o);const s=wg(this.debugKey);return s.push(o),Cg(this.debugKey,s),o}drawCircles(t,n,r=0,i=!1,o){if(!nc(this.debugKey))return;const s=[];return n.forEach((l,c)=>{const h=F.getRoughSVG(t).circle(l[0],l[1],i?r*(c+1):r,Object.assign({},{stroke:"red",fill:"red",fillStyle:"solid"},o||{}));h.classList.add(this.debugKey),F.getElementTopHost(t).append(h);const d=wg(this.debugKey);d.push(h),s.push(h),Cg(this.debugKey,d)}),s}}const I0=e=>new tI(e),nc=e=>localStorage.getItem(e||"debug:plait")==="true";var Xa;(function(e){e.withSelection="withSelection",e.withHand="withHand"})(Xa||(Xa={}));const fP=(e,t,n=()=>!0)=>{const r=t||e.selection,i=[];if(!r)return[];if(C0.isCollapsed(r)){const s=hP(e,r.anchor,n);return s!=null&&s.length?s:[]}return pi(e,s=>{if(!F.isBoard(s)&&n(s)){let l=!1;try{l=e.isRectangleHit(s,r)}catch(c){nc()&&console.error("isRectangleHit",c,"node",s)}l&&i.push(s)}},oh(e),!0),i},hP=(e,t,n=()=>!0,r=!0)=>{let i=[];return pi(e,o=>{if(F.isBoard(o)||!n(o)||!yn.hasMounted(o))return;let s=!1;try{s=e.isHit(o,t,r)}catch(l){nc()&&console.error("isHit",l,"node",o)}if(s){i.push(o);return}},oh(e),!0),i},il=(e,t,n=()=>!0,r=!0)=>{const i=hP(e,t,n,r);return e.getOneHitElement(i)},nI=(e,t)=>{const n=Qe(e),r=n.length>0&&on(e,n,!1);return r&&b.isPointInRectangle(r,t)?n:[]},Va=(e,t)=>{const n=sv(e,t);oP.set(e,n)},Qe=e=>oP.get(e)||[],sh=(e,t)=>{let n=[];Array.isArray(t)?n.push(...t):n.push(t);const r=Qe(e);Va(e,[...r,...n])},av=(e,t,n=!1)=>{const r=Qe(e);if(r.includes(t)){const i=[];e.isRecursion(t)&&n?pi(t,s=>{i.push(s)},s=>e.isRecursion(s)):i.push(t);const o=r.filter(s=>!i.includes(s));Va(e,o)}},rI=(e,t,n)=>{const r=Qe(e);r.splice(r.indexOf(t),1,n)},F0=e=>{Va(e,[])},$f=(e,t)=>!!Qe(e).find(r=>r===t),P6=e=>{const t=e.getPluginOptions(Xa.withSelection);e.setPluginOptions(Xa.withSelection,{isDisabledSelection:!0}),setTimeout(()=>{e.setPluginOptions(Xa.withSelection,{...t})},0)},iI=(e,t)=>nI(e,t).length>0,dP=(e,t)=>!!il(e,t)||iI(e,t);function L0(e,t,n,r,i,o,s=!1,l){let c=l||0;const h=[t+c,n],d=[r-c,n],g=[r,n+c],v=[r,i-c],y=[r-c,i],x=[t+c,i],E=[t,i-c],T=[t,n+c],D=e.path(`M${d[0]} ${d[1]} A ${c} ${c}, 0, 0, 1, ${g[0]} ${g[1]} L ${v[0]} ${v[1]} A ${c} ${c}, 0, 0, 1, ${y[0]} ${y[1]} L ${x[0]} ${x[1]} A ${c} ${c}, 0, 0, 1, ${E[0]} ${E[1]} L ${T[0]} ${T[1]} A ${c} ${c}, 0, 0, 1, ${h[0]} ${h[1]} Z`,o);return zt(D,"round"),D}const ga=(e,t,n)=>{const i=F.getRoughSVG(e).rectangle(t.x,t.y,t.width,t.height,n);return zt(i,"round"),i};function _0(e,t,n=40){const r=Math.abs(e[0]-t[0]),i=Math.abs(e[1]-t[1]);let o=Math.hypot(r,i);const s=o/2,l=s/o*r,c=s/o*i,h=[t[0]>e[0]?t[0]-l:t[0]+l,t[1]>e[1]?t[1]-c:t[1]+c],d=w0(h[0],h[1],t[0],t[1],n*Math.PI/180);return{pointLeft:w0(h[0],h[1],t[0],t[1],-n*Math.PI/180),pointRight:d}}function ah(e,t,n,r){return e.circle(t[0],t[1],n,r)}function pm(e,t,n,r){return e.linearPath([t,n],r)}function bs(e,t,n){const r=Lt(),i=H4();let o="";return e.forEach((s,l)=>{l===0?o+=`M ${s[0]} ${s[1]} `:o+=`L ${s[0]} ${s[1]} `}),n&&(o+="Z"),i.setAttribute("d",o),i.setAttribute("stroke",`${t==null?void 0:t.stroke}`),i.setAttribute("stroke-width",`${t==null?void 0:t.strokeWidth}`),i.setAttribute("fill",`${(t==null?void 0:t.fill)||"none"}`),t!=null&&t.strokeLineDash&&i.setAttribute("stroke-dasharray",`${t.strokeLineDash}`),r.appendChild(i),r}function oI(e,t){const n=Lt(),r=H4();let i="";for(let o=0;o<e.length-3;o+=3)o===0?i+=`M ${e[0][0]} ${e[0][1]} `:i+=`C ${e[o+1][0]} ${e[o+1][1]}, ${e[o+2][0]} ${e[o+2][1]}, ${e[o+3][0]} ${e[o+3][1]}`;return r.setAttribute("d",i),r.setAttribute("stroke",`${t==null?void 0:t.stroke}`),r.setAttribute("stroke-width",`${t==null?void 0:t.strokeWidth}`),r.setAttribute("fill","none"),n.appendChild(r),n}function $4(e,t){const n={type:"set_viewport",properties:e.viewport,newProperties:t};e.apply(n)}const sI={setViewport:$4};function aI(e,t){const n={type:"set_theme",properties:e.theme,newProperties:t};e.apply(n)}function lv(e,t,n){n=n??e.viewport.zoom,$4(e,{...e.viewport,zoom:n,origination:t}),PP(e)}function lI(e,t,n){t=vI(t);const i=F.getBoardContainer(e).getBoundingClientRect(),o=F.getBoardContainer(e).getBoundingClientRect();let s=[o.width/2,o.height/2];n&&Ap(n[0],n[1],i)===0&&(s=[n[0]-i.x,n[1]-i.y]);const l=e.viewport.zoom,c=N0(e),h=c[0]+s[0]/l,d=c[1]+s[1]/l,g=[h-s[0]/t,d-s[1]/t];lv(e,g,t)}function uI(e){let t=N4(e);const n=F.getBoardContainer(e).getBoundingClientRect(),r=on(e,e.children,!0),i=e.viewport.zoom,o=16,s=n.width-2*o,l=n.height-2*o;let c=i;s<r.width||l<r.height?c=Math.min(s/r.width,l/r.height):c=1;const h=wP(e),d=[h[0]-n.width/2/c+t/2/i,h[1]-n.height/2/c+t/2/i];lv(e,d,c)}function cI(e,t){let n=N4(e);const r=F.getBoardContainer(e),i=r.getBoundingClientRect();let o=0;t.maxWidth?o=t.maxWidth:o=i.width;const s=on(e,e.children,!0),l=o-2*t.autoFitPadding;let c=0;l<s.width?c=Math.min(l/s.width):c=1;let h=s.height*c+2*t.autoFitPadding;if(h>t.limitHeight){const y=r.closest(`.${t.containerClass}`);y.style.height=`${h}px`,z4(e)}else h=t.limitHeight;const d=s.x+s.width/2,g=s.y+s.height/2,v=[d-o/2/c+n/2/c,g-h/2/c+n/2/c];lv(e,v,c)}function fI(e,t){t=t??e.theme.themeColorMode,aI(e,{themeColorMode:t}),pi(e,n=>{e.applyTheme(n)})}const hI=(e,t)=>{e.pointer!==t&&(e.pointer=t)};function dI(e,t){var r;if((r=Qe(e))==null?void 0:r[0]){const i=F.getBoardContainer(e).getBoundingClientRect(),o=N4(e),s=wP(e),l=t[0]-s[0],c=t[1]-s[1],h=e.viewport.zoom,d=[l-i.width/2/h+o/2/h,c-i.height/2/h+o/2/h];$4(e,{...e.viewport,origination:d}),PP(e)}}const fn={updatePointerType:hI,updateViewport:lv,fitViewport:uI,updateZoom:lI,updateThemeColor:fI,fitViewportWidth:cI,moveToCenter:dI},W4=e=>F.getHost(e).viewBox.baseVal;function Bt(e,t,n){const i=F.getHost(e).getBoundingClientRect();return[t-i.x,n-i.y]}function Bi(e,t){const n=[t.x,t.y],r=[t.x+t.width,t.y+t.height],i=qg(e,n),o=qg(e,r);return b.getRectangleByPoints([i,o])}function qg(e,t){const n=S6(e,g3(e,t));return qf(e,n[0],n[1])}function qf(e,t,n){const i=F.getBoardContainer(e).getBoundingClientRect();return[t-i.x,n-i.y]}function gI(e,t){const r=F.getBoardContainer(e).getBoundingClientRect();return[r.x+t[0],r.y+t[1]]}function Dt(e,t){const n=W4(e),{zoom:r}=e.viewport,i=t[0]/r+n.x,o=t[1]/r+n.y;return[i,o]}function S6(e,t){const r=F.getHost(e).getBoundingClientRect();return[t[0]+r.x,t[1]+r.y]}function g3(e,t){const{zoom:n}=e.viewport,r=W4(e),i=(t[0]-r.x)*n,o=(t[1]-r.y)*n;return[i,o]}const gP=.75,pP=new WeakMap,mP=new WeakMap;function pI(e){const{hideScrollbar:t}=e.options,n=t?xO:0,r=F.getBoardContainer(e).getBoundingClientRect();return{width:r.width+n,height:r.height+n}}function mI(e,t){const n=on(e,e.children,!0);let r,i,o,s;return r=n.x,i=n.x+n.width,o=n.y,s=n.y+n.height,{left:r,right:i,top:o,bottom:s}}function vI(e,t=eP,n=tP){return e<t?t:e>n?n:e}function vP(e,t){const n=F.getBoardContainer(e).getBoundingClientRect(),r=mI(e),i=n.width,o=n.height;let s=r.right-r.left,l=r.bottom-r.top;const c=i/2,h=o/2;if(s<c/t){const d=r.left+s/2;r.left=d-c/2/t,r.right=d+c/2/t,s=c/t}if(l<h/t){const d=r.top+l/2;r.top=d-h/2/t,r.bottom=d+h/2/t,l=h/t}return{elementHostBBox:r,containerWidth:i,containerHeight:o,width:s,height:l}}function T6(e,t,n,r,i,o,s=gP){const l=t*s/o,c=n*s/o;return[e.left-l,e.top-c,r+l*2,i+c*2]}function yP(e,t){const{elementHostBBox:n,containerWidth:r,containerHeight:i,width:o,height:s}=vP(e,t);return T6(n,r,i,o,s,t)}function wP(e){const t=on(e,e.children,!0);return[t.x+t.width/2,t.y+t.height/2]}function CP(e,t){const n=e.viewport.zoom,r=F.getHost(e);r.style.display="block",r.style.width=`${t[2]*n}px`,r.style.height=`${t[3]*n}px`,t&&t[2]>0&&t[3]>0&&r.setAttribute("viewBox",t.join(" "))}function p3(e){const t=N0(e);if(!t)return;const[n,r]=g3(e,t);xP(e,n,r)}function xP(e,t,n,r=!0){const i=F.getViewportContainer(e),o=i.scrollLeft,s=i.scrollTop;if(!E6(i.scrollLeft,t,1)||!E6(i.scrollTop,n,1)){i.scrollLeft=t,i.scrollTop=n;const l=i.offsetWidth,c=i.offsetHeight;if(o===i.scrollLeft&&s===i.scrollTop)EP(e,o,s);else{const h=t>0&&n>0&&t<i.scrollWidth-l&&n<i.scrollHeight-c;r&&h&&TP(e,!0)}}}function EP(e,t,n){const r=Dt(e,[t,n]);mt.isEquals(r,N0(e))||(fn.updateViewport(e,r),SP(e,!0))}function z4(e){const{width:t,height:n}=pI(e),r=F.getViewportContainer(e);r.style.width=`${t}px`,r.style.height=`${n}px`}function V4(e){const t=e.viewport.zoom,n=yP(e,t);CP(e,n)}function yI(e){const t=e.viewport.zoom,{elementHostBBox:n,containerWidth:r,containerHeight:i,width:o,height:s}=vP(e,t),l=T6(n,r,i,o,s,t,.5),c=W4(e);if(l[0]<c.x||l[1]<c.y||l[0]+l[2]>c.x+c.width||l[1]+l[3]>c.y+c.height){const h=T6(n,r,i,o,s,t,gP);CP(e,h)}}function wI(e){var t;if(!((t=e.viewport)!=null&&t.origination)){const n=e.viewport.zoom,r=F.getBoardContainer(e).getBoundingClientRect(),i=yP(e,n),o=i[0]+i[2]/2,s=i[1]+i[3]/2,l=[o-r.width/2/n,s-r.height/2/n];CI(e,l),p3(e);return}p3(e)}const CI=(e,t)=>{k4.set(e,t)},PP=e=>{k4.delete(e)},N0=e=>{const t=k4.get(e);return t||e.viewport.origination},xI=e=>!!pP.get(e),SP=(e,t)=>{pP.set(e,t)},EI=e=>!!mP.get(e),TP=(e,t)=>{mP.set(e,t)};function PI(e,t,n){const r={type:"insert_node",node:t,path:n};e.apply(r)}function SI(e,t,n){const r={},i={},o=Kt.get(e,n);for(const l in t)o[l]!==t[l]&&(o.hasOwnProperty(l)&&(r[l]=o[l]),t[l]!=null&&(i[l]=t[l]));const s={type:"set_node",properties:r,newProperties:i,path:n};e.apply(s)}function DP(e,t){const n=Kt.get(e,t),r={type:"remove_node",path:t,node:n};e.apply(r)}function TI(e,t,n){const r={type:"move_node",path:t,newPath:n};e.apply(r)}const Wf={insertNode:PI,setNode:SI,removeNode:DP,moveNode:TI},Wm=new WeakMap,DI=(e,t)=>AP(e)[t]||null,AP=e=>Wm.get(e)||{},da=(e,t,n)=>{const r=()=>{let o=requestAnimationFrame(()=>{const l=Wm.get(e)||{};l[t]=null,Wm.set(e,l),F.isAlive(e)&&n()});const s=AP(e);s[t]=o,Wm.set(e,s)};let i=DI(e,t);i!==null&&cancelAnimationFrame(i),r()},uv=(e,t)=>(sv(e,t),t.map(n=>e.children.map(r=>r.id).indexOf(n.id)).filter(n=>n>=0)),AI=(e,t)=>{const n=uv(e,t);return n[n.length-1]},Mp=(e,t)=>{t.map(n=>{const r=F.findPath(e,n.element),i=e.pathRef(r);return()=>{i.current&&Wf.moveNode(e,i.current,n.newPath),i.unref()}}).forEach(n=>{n()})},BP=new WeakMap,dc=e=>!!BP.get(e),lu=(e,t)=>{BP.set(e,t)},BI=e=>rv.get(e)||[],gc=e=>(rv.get(e)||[]).length>0,MI=e=>{rv.delete(e),lu(e,!1)},Aw=(e,t)=>{rv.set(e,t),lu(e,!0)},D6="foreignObject[class^='foreign-object']";function Bw(e){return e.nodeType===Node.ELEMENT_NODE}function RI(e){return new Promise((t,n)=>{const r=new Image;r.crossOrigin="Anonymous",r.onload=()=>t(r),r.onerror=()=>n(new Error("Failed to load image")),r.src=e})}function bI(e,t,n="transparent"){const r=document.createElement("canvas"),i=r.getContext("2d");return r.width=e,r.height=t,r.style.width=`${e}px`,r.style.height=`${t}px`,i.strokeStyle="#ffffff",i.fillStyle=n,i.fillRect(0,0,e,t),{canvas:r,ctx:i}}async function kI(e){const n=await(await fetch(e)).blob();return new Promise((r,i)=>{const o=new FileReader;o.onloadend=()=>r(o.result),o.onerror=i,o.readAsDataURL(n)})}function OI(e,t){const n=t==null?void 0:t.style;if(!n)return;const r=window.getComputedStyle(e);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):Array.from(r).forEach(i=>{let o=r.getPropertyValue(i);n.setProperty(i,o,r.getPropertyPriority(i))})}function II(e,t,n){if(n){const r=n+`, ${D6}`,i=Array.from(e.querySelectorAll(r)),o=Array.from(t.querySelectorAll(r));i.forEach((s,l)=>{const c=Array.from(s.querySelectorAll("*")).filter(Bw),h=Array.from(o[l].querySelectorAll("*")).filter(Bw);i.push(...c),o.push(...h)}),i.map((s,l)=>{OI(s,o[l])})}}async function FI(e,t){const n=Array.from(e.querySelectorAll(`${D6}`)),r=Array.from(t.querySelectorAll(`${D6}`));await Promise.all(n.map((i,o)=>new Promise(s=>{const c=r[o].querySelector("img"),h=c==null?void 0:c.getAttribute("src");if(!h)return s(!0);kI(h).then(d=>{c==null||c.setAttribute("src",d),s(!0)})})))}async function LI(e,t,n,r){const{width:i,height:o,x:s,y:l}=n,{padding:c=4,inlineStyleClassNames:h}=r,d=F.getHost(e),g=t.map(E=>yn.getElementG(E)),v=d.cloneNode(),y=F.getElementHost(e).cloneNode();v.style.width=`${i}px`,v.style.height=`${o}px`,v.style.backgroundColor="",v.setAttribute("width",`${i}`),v.setAttribute("height",`${o}`),v.setAttribute("viewBox",[s-c,l-c,i+2*c,o+2*c].join(","));const x=new Array(g.length);return await Promise.all(g.map(async(E,T)=>{const D=E.cloneNode(!0);II(E,D,h),await FI(E,D),x[T]=D})),y.append(...x),v.appendChild(y),v}async function _I(e,t){if(!e)return;const n=t.elements||H0(e,{match:()=>!0,recursion:()=>!0,isReverse:!1}),r=on(e,n,!1),{ratio:i=2,fillStyle:o="transparent"}=t,{width:s,height:l}=r,c=s*i,h=l*i,d=await LI(e,n,r,t),{canvas:g,ctx:v}=bI(c,h,o),y=new XMLSerializer().serializeToString(d),x=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(y)}`;try{const E=await RI(x);return v.drawImage(E,0,0,c,h),g.toDataURL("image/png")}catch(E){console.error("Error converting SVG to image:",E);return}}var eu;(function(e){e.medias="medias",e.elements="elements"})(eu||(eu={}));var ua;(function(e){e.copy="copy",e.cut="cut",e.duplicate="duplicate",e.paste="paste"})(ua||(ua={}));const U4=(e,t)=>`<plait>${jI(JSON.stringify({type:e,data:t}))}</plait>`,X4=e=>{var n;let t=(n=e==null?void 0:e.match(/<plait[^>]*>(.*)<\/plait>/))==null?void 0:n[1];if(t){t=$I(t);try{const r=JSON.parse(t);if(r){if(r.type===eu.elements)return{elements:r.data};if(r.type===eu.medias)return{medias:r.data}}}catch(r){return console.error(r),null}}return null},Mw=e=>{const t=document.implementation.createHTMLDocument("");return t.documentElement.innerHTML=e.trim(),t.body.textContent||t.body.innerText||""},MP=()=>"clipboard"in navigator&&"write"in navigator.clipboard,NI=()=>"clipboard"in navigator&&"writeText"in navigator.clipboard,RP=()=>"clipboard"in navigator&&"read"in navigator.clipboard,HI=(e,t,n)=>({type:e,elements:t,text:n}),GI=(e,t)=>{const{type:n,elements:r,text:i}=e;return n===t.type?{type:n,elements:r.concat(t.elements),text:i+" "+t.text}:e},cv=(e,t)=>e?GI(e,t):t,jI=e=>e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),$I=e=>e.replace(/&lt;/g,"<").replace(/&gt;/g,">"),WI=(e,t,n)=>{e==null||e.setData("text/html",U4(t,n))},zI=(e,t)=>{e==null||e.setData("text/plain",t)},VI=e=>{const t=e==null?void 0:e.getData("text/html");if(t){const n=X4(t);if(n)return n}return{}},UI=e=>{if(!e)return{};const t=e==null?void 0:e.getData("text/plain");if(t){const n=X4(t);if(n)return n}return{text:t}},XI=async(e,t,n="")=>{let r=n;MP()&&await navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([U4(e,t)],{type:"text/html"}),"text/plain":new Blob([r??JSON.stringify(t)],{type:"text/plain"})})])},KI=async()=>{if(!RP())return{};const e=await navigator.clipboard.read();let t={};if(Array.isArray(e)&&e[0]instanceof ClipboardItem)for(const n of e){if(YI(n)){const r=n.types.filter(l=>l.match(/^image\//)),o=(await Promise.all(r.map(l=>n.getType(l)))).filter(Boolean).map(l=>URL.createObjectURL(l));return{files:await Promise.all(o.map(async l=>{const c=await(await fetch(l)).blob();return new File([c],"plait-file",{type:c.type})}))}}if(n.types.includes("text/html")){const r=await Rw(await n.getType("text/html")),i=X4(r);if(i)return i;r&&r.trim()&&(t={text:Mw(r)})}if(n.types.includes("text/plain")){const r=await Rw(await n.getType("text/plain"));t={text:Mw(r)}}}return t},YI=e=>e.types.find(t=>t.match(/^image\//)),Rw=e=>new Promise((t,n)=>{const r=new FileReader;r.addEventListener("loadend",()=>{const i=r.result;t(i)}),r.addEventListener("error",()=>{n(r.error)}),r.readAsText(e)}),qI=async e=>{let t={};return e?e.files.length?{files:Array.from(e.files)}:(t=VI(e),Object.keys(t).length===0&&(t=UI(e)),t):RP()?await KI():t},ZI=async(e,t)=>{if(!t)return;const{type:n,elements:r,text:i}=t;if(MP())return await XI(n,r,i);if(e){WI(e,n,r),zI(e,i);return}if(NI())return await navigator.clipboard.writeText(U4(n,r))};function mi(e){return!!O4.get(e)}function QI(e){F.getBoardContainer(e).classList.add("selection-moving"),O4.set(e,!0),lu(e,!0)}function JI(e){F.getBoardContainer(e).classList.remove("selection-moving"),O4.delete(e),lu(e,!1)}function bw(e){const t=zm(e);return e.pointer!==Zt.hand&&!t.isDisabledSelection&&!F.isReadonly(e)}function kw(e){return!!e.operations.find(t=>Ju.isSetSelectionOperation(t))}function eF(e){const t=nv.get(e);if(t)return t.elements}function tF(e){return nv.get(e)}function nF(e){nv.delete(e)}function rF(e){const t=Qe(e),n=on(e,t,!1),r=Bi(e,n);if(r.width>0&&r.height>0&&t.length>1){const i=ga(e,b.inflate(r,gr),{stroke:Po,strokeWidth:gr,fillStyle:"solid"});i.classList.add(Dp,vO);const o=Co(t);return o&&Rs(i,b.getCenterPoint(r),o),i}return null}function iF(e,t,n){if(!e.selection)return;const r=Qe(e);if(!C0.isCollapsed(e.selection)){let i=[...r];t.forEach(o=>{o.groupId?i.push(...Y4(e,o)):i.push(o)}),Va(e,I4(i));return}if(C0.isCollapsed(e.selection)){const i=t[0],o=Ec(e,i,!0);if(o.length>0){const s=Os(e,o[o.length-1],!0)||[],l=r.some(c=>s.map(h=>h.id).includes(c.id));n?oF(e,t,l,s):sF(e,t,l,o)}}}function oF(e,t,n,r){const i=Qe(e);let o=[...i];const s=t[0];let l=[];if(!n)l=r;else{const c=i.some(d=>d.id===s.id),h=r.filter(d=>i.includes(d));c?l=h.filter(d=>d.id!==s.id):l.push(...h,...t)}r.forEach(c=>{o.includes(c)&&o.splice(o.indexOf(c),1)}),l.length&&o.push(...l),Va(e,I4(o))}function sF(e,t,n,r){let i=[...t];const o=bP(e,r);if(o.length>0)if(o.length>1)i=m3(e,o[o.length-2],!0);else{const s=e.getOneHitElement(t);s&&(i=[s])}else{const s=m3(e,r[r.length-1],!0);if(!n)i=s;else{const l=e.getOneHitElement(t);l&&(i=[l])}}Va(e,I4(i))}const zm=e=>e.getPluginOptions(Xa.withSelection),A6=(e,t)=>{e.setPluginOptions(Xa.withSelection,t)},Os=(e,t,n,r)=>{let i=[];const o=e.children.filter(s=>s.groupId===t.id);return n?o.forEach(s=>{So.isGroup(s)?(r&&i.push(s),i.push(...Os(e,s,n,r))):i.push(s)}):i=r?o:o.filter(s=>!So.isGroup(s)),i},m3=(e,t,n,r)=>{const i=Os(e,t,n,r),o=[];return i.forEach(s=>{pi(s,l=>{o.push(l)},()=>!0)}),o},K4=(e,t,n)=>{const r=m3(e,t,n);return on(e,r,!1)},Ec=(e,t,n,r)=>{const i=(r||e.children).find(o=>o.id===(t==null?void 0:t.groupId));if(!i)return[];{const o=[i],s=Ec(e,i,n,r);return s.length&&o.push(...s),o}},B6=(e,t)=>{const n=Ec(e,t,!0);return n.length?n[n.length-1]:null},Y4=(e,t)=>{const n=B6(e,t);return n?m3(e,n,!0):[t]},M6=(e,t,n)=>{const r=n!=null&&n.length?n:Qe(e);return So.isGroup(t)?v3(e,t,n):r.map(i=>i.id).includes(t.id)},v3=(e,t,n)=>{const r=n!=null&&n.length?n:Qe(e);return Os(e,t,!0).every(o=>r.map(s=>s.id).includes(o.id))},bP=(e,t,n)=>{const r=[];return t.forEach(i=>{M6(e,i,n)&&r.push(i)}),r},aF=(e,t,n)=>{const r=Pc(e,t,n),i=[];return r.forEach(o=>{i.push(o);const s=Os(e,o,!0,!0);i.push(...s.filter(l=>So.isGroup(l)))}),i},kP=(e,t,n,r)=>{const i=Ec(e,t,!0,r),o=bP(e,i,n);return o.length?o[o.length-1]:null},Pc=(e,t,n)=>{let r=[];return(t!=null&&t.length?t:Qe(e)).forEach(o=>{if(o.groupId){const s=kP(e,o,t,n);s&&!r.includes(s)&&r.push(s)}}),r},q4=(e,t)=>{let n=[];return(t!=null&&t.length?t:Qe(e)).filter(i=>!So.isGroup(i)).forEach(i=>{i.groupId&&kP(e,i,t)||n.push(i)}),n},Z4=(e,t)=>q4(e,t).filter(r=>e.canAddToGroup(r)),lF=(e,t)=>[...Pc(e,t),...q4(e,t)],uF=(e,t)=>{const n=Qe(e).map(o=>o.id);let r=null;const i=mi(e);return t.forEach(o=>{const s=!n.includes(o.id)&&!i||i;if(o.groupId&&s){r||(r=Lt());const l=Y4(e,o),c=on(e,l,!1),h=ga(e,c,{stroke:Po,strokeWidth:gr,strokeLineDash:[5]}),d=Co(l);d&&Rs(h,b.getCenterPoint(c),d),r.append(h)}}),r},cF=e=>({id:Sn(),type:"group"}),fF=e=>e.every(t=>!t.groupId),OP=e=>e.every(t=>t.groupId&&t.groupId===e[0].groupId),hF=(e,t)=>{const r=lF(e,t).filter(i=>e.canAddToGroup(i));return r.length>1?fF(r)||OP(r):!1},dF=(e,t,n)=>{const r=Pc(e,t,n);return Qe(e).length>0&&r.length>0},IP=(e,t)=>{const n=Ec(e,t,!0);let r=null;if(n!=null&&n.length){for(let i=0;i<(n==null?void 0:n.length);i++)if(!v3(e,n[i])){r=n[i];break}}return r},gF=(e,t,n)=>{const r=[...t];sv(e,r),r.pop(),Mp(e,r.map(i=>({element:i,newPath:n})))},Q4=e=>{const t=e.getDeletedFragment([]);e.deleteFragment(t)},Ow=(e,t,n)=>{const r=Qe(e),i=on(e,r,!1),o=e.buildFragment(null,i,t);o&&ZI(n,o)},J4=(e,t,n)=>{const r=t!=null&&t.length?t:Qe(e),i=on(e,r,!1),o=e.buildFragment(null,i,ua.duplicate,r),s=o&&JSON.stringify(o),l=s&&JSON.parse(s);l&&e.insertFragment({...l,text:void 0},n||[i.x+i.width/2,i.y+i.height/2],ua.duplicate)},Yl=2,pF=24;function FP(e,t){return H0(e,{match:r=>e.isAlign(r)&&!t.some(i=>i.id===r.id),recursion:()=>!0,isReverse:!1}).map(r=>{const i=e.getRectangle(r);return Rp(i,r.angle||0)})}function mF(e,t){return t?[[e[0],e[1]-4],[e[0],e[1]+4]]:[[e[0]-4,e[1]],[e[0]+4,e[1]]]}function Og(e,t,n){let r=Yl;return e.forEach(i=>{const o=vF(t,i,n);Math.abs(o)<Math.abs(r)&&(r=o)}),r}const vF=(e,t,n)=>{const i=Zf(t,n).map(l=>l-e),o=i.map(l=>Math.abs(l)),s=o.indexOf(Math.min(...o));return i[s]},Zf=(e,t)=>{const n=t?"x":"y",r=t?"width":"height";return[e[n],e[n]+e[r]/2,e[n]+e[r]]};function Wd(e,t){let n=1/0,r=e[0];return e.forEach(i=>{const o=Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2));o<n&&(n=o,r=i)}),r}const zd=(e,t,n)=>Zf(t,n).includes(e);function LP(e,t,n,r=!0,i=!0,o=!1){let s=[];const l=Zf(t,!0),c=Zf(t,!1),h=[{axis:l[0],isHorizontal:!0,pointRectangles:[]},{axis:l[1],isHorizontal:!0,pointRectangles:[]},{axis:l[2],isHorizontal:!0,pointRectangles:[]},{axis:c[0],isHorizontal:!1,pointRectangles:[]},{axis:c[1],isHorizontal:!1,pointRectangles:[]},{axis:c[2],isHorizontal:!1,pointRectangles:[]}];for(let g=0;g<n.length;g++){const v=n[g];zd(h[0].axis,v,h[0].isHorizontal)&&h[0].pointRectangles.push(v),zd(h[1].axis,v,h[1].isHorizontal)&&h[1].pointRectangles.push(v),zd(h[2].axis,v,h[2].isHorizontal)&&h[2].pointRectangles.push(v),zd(h[3].axis,v,h[3].isHorizontal)&&h[3].pointRectangles.push(v),zd(h[4].axis,v,h[4].isHorizontal)&&h[4].pointRectangles.push(v),zd(h[5].axis,v,h[5].isHorizontal)&&h[5].pointRectangles.push(v)}const d=(g,v,y)=>{const x=b.inflate(b.getBoundingRectangle([t,v]),pF);if(y){const E=[g,x.y],T=[g,x.y+x.height];s.push([E,T])}else{const E=[x.x,g],T=[x.x+x.width,g];s.push([E,T])}};if(r&&h[0].pointRectangles.length){const g=h[0].pointRectangles.length===1?h[0].pointRectangles[0]:Wd(h[0].pointRectangles,t);d(h[0].axis,g,h[0].isHorizontal)}if(r&&o&&h[1].pointRectangles.length){const g=h[1].pointRectangles.length===1?h[1].pointRectangles[0]:Wd(h[1].pointRectangles,t);d(h[1].axis,g,h[1].isHorizontal)}if(r&&h[2].pointRectangles.length){const g=h[2].pointRectangles.length===1?h[2].pointRectangles[0]:Wd(h[2].pointRectangles,t);d(h[2].axis,g,h[2].isHorizontal)}if(i&&h[3].pointRectangles.length){const g=h[3].pointRectangles.length===1?h[3].pointRectangles[0]:Wd(h[3].pointRectangles,t);d(h[3].axis,g,h[3].isHorizontal)}if(i&&o&&h[4].pointRectangles.length){const g=h[4].pointRectangles.length===1?h[4].pointRectangles[0]:Wd(h[4].pointRectangles,t);d(h[4].axis,g,h[4].isHorizontal)}if(i&&h[5].pointRectangles.length){const g=h[5].pointRectangles.length===1?h[5].pointRectangles[0]:Wd(h[5].pointRectangles,t);d(h[5].axis,g,h[5].isHorizontal)}return yF(e,s)}function yF(e,t){const n=Lt();return t.forEach(r=>{if(!r.length)return;const i=F.getRoughSVG(e).line(r[0][0],r[0][1],r[1][0],r[1][1],{stroke:Po,strokeWidth:1,strokeLineDash:[4,4]});n.appendChild(i)}),n}function _P(e,t){const n=Lt();return t.forEach(r=>{if(!r.length)return;let i=r[0][1]===r[1][1];const o=F.getRoughSVG(e).line(r[0][0],r[0][1],r[1][0],r[1][1],{stroke:Po,strokeWidth:1});n.appendChild(o),r.forEach(s=>{const l=mF(s,i),c=F.getRoughSVG(e).line(l[0][0],l[0][1],l[1][0],l[1][1],{stroke:Po,strokeWidth:1});n.appendChild(c)})}),n}const NP=(e,t)=>{const n=uv(e,Qe(e));let r=GP(e,n);t==="up"&&(r=r.reverse());let i=[];return r.forEach((o,s)=>{const l=o[0],c=o[o.length-1],h=t==="down"?l:c,d=wF(e,h,t);d===-1||h===d||(t==="down"&&(o=o.reverse()),i.push(...o.map(g=>({element:e.children[g],newPath:[d]}))))}),i},HP=(e,t)=>{const n=uv(e,Qe(e));let r=GP(e,n),i=[];return t==="down"&&(r=r.reverse()),r.forEach(o=>{const s=o[0],l=o[o.length-1],c=t==="down"?s:l,h=e.children[c],d=IP(e,h);let g=t==="down"?0:e.children.length-1;if(d){const v=sv(e,Os(e,d,!0,!0));g=t==="down"?e.children.indexOf(v[0]):e.children.indexOf(v[v.length-1])}t==="down"&&(o=o.reverse()),i.push(...o.map(v=>({element:e.children[v],newPath:[g]})))}),i},GP=(e,t)=>{let n=0;return t.reduce((r,i,o)=>{if(o>0){const s=e.children[i],l=e.children[t[o-1]],c=i-1===t[o-1]?!0:e.children.every((d,g)=>g>t[o-1]&&g<=i-1?So.isGroup(d):!0);let h=!1;if(l!=null&&l.groupId||s!=null&&s.groupId&&(l==null?void 0:l.groupId)!==(s==null?void 0:s.groupId)){let d=!1,g=!1;if(l.groupId){const v=B6(e,l);d=!v3(e,v)}if(s.groupId){const v=B6(e,s);g=!v3(e,v)}h=d||g}(!c||h)&&(n=++n)}return(r[n]||(r[n]=[])).push(i),r},[])},wF=(e,t,n)=>{if(t===0&&n==="down"||t===e.children.length-1&&n==="up")return-1;const r=g=>!(g.isDeleted||So.isGroup(g)),i=n==="down"?TO(e.children,g=>r(g),Math.max(0,t-1)):DO(e.children,g=>r(g),t+1),o=e.children[i];if(!o)return-1;const s=[...e.children],l=s[t],c=IP(e,l),h=Ec(e,o,!0)||[];if(c&&(l==null?void 0:l.groupId)!==(o==null?void 0:o.groupId)&&!h.find(g=>g.id===c.id))return-1;if(!o.groupId)return i;let d;if(c?d=h[h.indexOf(c)-1]:d=h[h.length-1],d){let g=Os(e,d,!0,!1);if(g.length)return g.sort((v,y)=>{const x=e.children.findIndex(T=>T.id===v.id),E=e.children.findIndex(T=>T.id===y.id);return x-E}),n==="down"?s.indexOf(g[0]):s.indexOf(g[g.length-1])}return i},jP=e=>R6(e)||CF(e),R6=e=>e.pointerType==="pen",CF=e=>e.pointerType==="touch",xF=(e,t)=>{const n=Pc(e,t),r=Z4(e),i=[...n,...r],o=cF();if(hF(e)){i.forEach(d=>{const g=F.findPath(e,d);Wf.setNode(e,{groupId:o.id},g)});const s=Qe(e),l=AI(e,s),c=uv(e,i);if(AO(c)||gF(e,s,[l-1]),OP(i)){const d=r[0].groupId;Wf.insertNode(e,{...o,groupId:d},[e.children.length])}else Wf.insertNode(e,o,[e.children.length])}},EF=(e,t)=>{const n=Pc(e,t);dF(e)&&(n.forEach(r=>{H0(e,{match:o=>o.groupId===r.id,recursion:()=>!1}).forEach(o=>{const s=F.findPath(e,o);Wf.setNode(e,{groupId:r.groupId||void 0},s)})}),n.map(r=>{const i=F.findPath(e,r),o=e.pathRef(i);return()=>{o.current&&Wf.removeNode(e,o.current),o.unref()}}).forEach(r=>{r()}))},PF={addGroup:xF,removeGroup:EF};function $P(e,t){const n={type:"set_selection",properties:e.selection,newProperties:t};e.apply(n)}const SF={setSelection:$P,addSelectionWithTemporaryElements:WP};function WP(e,t){const n=setTimeout(()=>{$P(e,{anchor:[0,0],focus:[0,0]})},0);let r=tF(e);if(r){clearTimeout(r.timeoutId);const i=r.elements;r.elements.push(...t.filter(o=>!i.includes(o))),r.timeoutId=n}else nv.set(e,{timeoutId:n,elements:t})}const TF=e=>{const t=HP(e,"up");Mp(e,t)},DF=e=>{const t=HP(e,"down");Mp(e,t)},AF=e=>{const t=NP(e,"up");Mp(e,t)},BF=e=>{const t=NP(e,"down");Mp(e,t)},MF={moveUp:AF,moveDown:BF,moveToTop:TF,moveToBottom:DF},RF=(e,t)=>{t.map(n=>{const r=F.findPath(e,n),i=e.pathRef(r);return()=>{i.current&&DP(e,i.current),i.unref(),av(e,n,!0)}}).forEach(n=>{n()})},e8={removeElements:RF},Xe={...RO,...sI,...SF,...Wf,...PF,...MF},Ir=(e,t,n)=>(n||(n=0),Array.isArray(e)&&typeof e[0]=="number"?w0(e[0],e[1],t[0],t[1],n):e.map(r=>w0(r[0],r[1],t[0],t[1],n||0))),Co=e=>{var n;let t=((n=e[0])==null?void 0:n.angle)||0;return e.forEach(r=>{r.angle!==t&&!E6((r.angle||0)%(Math.PI/2)-t%(Math.PI/2),0)&&(t=0)}),t},bF=e=>{if(!e.length)return!1;const t=e[0].angle;return t===void 0?!1:!e.some(n=>n.angle!==t)},kF=(e,t)=>{let n=[];for(let l=0;l<e.length;l++){const c=e[l],h=Ir(c,[0,0],-t);n.push(b.getRectangleByPoints(h))}const r=b.getBoundingRectangle(n),i=b.getCornerPoints(r),o=Ir(i,[0,0],t),s=b.getCenterPoint(b.getRectangleByPoints(o));return b.getRectangleByPoints(Ir(o,s,-t))},OF=(e,t,n)=>{const r=b.getCenterPoint(e),[i]=Ir([r],t,n),o=i[0]-r[0],s=i[1]-r[1];return{offsetX:o,offsetY:s}},b6=(e,t,n)=>{const{offsetX:r,offsetY:i}=OF(b.getRectangleByPoints(e),t,n);return e.map(o=>[o[0]+r,o[1]+i])},Qa=e=>zP(e.angle),zP=e=>e&&e!==0,Ja=(e,t)=>{if(Qa(t)){let n=b.getRectangleByPoints(t.points);const r=b.getCenterPoint(n);return Ir(e,r,t.angle)}else return null},IF=(e,t)=>{if(zP(t)){let n=b.getRectangleByPoints(e);const r=b.getCenterPoint(n);return Ir(e,r,t)}else return null},pc=(e,t,n,r=!1)=>{if(Qa(n)){let i=b.getRectangleByPoints(n.points);const o=r?Bi(e,i):i,s=b.getCenterPoint(o);return Ir(t,s,n.angle?-n.angle:0)}else return null},Rp=(e,t)=>{if(t){const n=b.getCornerPoints(e),r=b.getCenterPoint(e);return b.getRectangleByPoints(Ir(n,r,t))}return e},FF=e=>{const t=Math.abs(e)%Math.PI;return t>=1/4*Math.PI&&t<=3/4*Math.PI};function k6(e){return e/180*Math.PI}function LF(e,t,n){const r=on(e,t,!1),i=b.getCenterPoint(r);t.forEach(o=>{const s=o.angle,l=b6(o.points,i,Zg(n)),c=F.findPath(e,o);Xe.setNode(e,{points:l,angle:Zg((s||0)+n)},c)})}const Zg=e=>e<0?e+2*Math.PI:e>=2*Math.PI?e-2*Math.PI:e,_F=(e,t,n)=>{const r=5*Math.PI/2+Math.atan2(e[1]-n[1],e[0]-n[0]),i=5*Math.PI/2+Math.atan2(t[1]-n[1],t[0]-n[0]);return Zg(i-r)},NF=e=>e==null?void 0:e.angle,Rs=(e,t,n)=>{if(n===0){e.removeAttribute("transform");return}var r=t[0],i=t[1];let o=Math.cos(n),s=Math.sin(n),c="matrix("+[o,s,-s,o,r*(1-o)+i*s,i*(1-o)-r*s].join(",")+")";e.setAttribute("transform",`${c}`)};function on(e,t,n){const r=[],i=o=>{const s=e.getRectangle(o);if(s){const l=b.getCornerPoints(s),c=Ja(l,o)||l;r.push(c)}else console.error("can not get rectangle of element:",o)};if(t.forEach(o=>{n?pi(o,s=>i(s),s=>e.isRecursion(s)):i(o)}),r.length>0)if(bF(t)){const o=Co(t);return kF(r,o)}else{const o=r.reduce((s,l)=>s.concat(l),[]);return b.getRectangleByPoints(o)}else return{x:0,y:0,width:0,height:0}}function Bs(e,t,n){const r=!n&&Vm(e).get(t);return r||(n||(n=H0(e,{match:o=>!0,recursion:o=>!0})),n.find(o=>o.id===t))}function Vm(e){const t=p6.get(e);if(!t)throw new Error("can not resolve element map");return t}function H0(e,t){let n=[];const r=t.isReverse??!0;return pi(e,i=>{!F.isBoard(i)&&t.match(i)&&n.push(i)},i=>F.isBoard(i)?!0:oh(e)(i)&&t.recursion(i),r),n}var hr;(function(e){e.default="default",e.colorful="colorful",e.soft="soft",e.retro="retro",e.dark="dark",e.starry="starry"})(hr||(hr={}));const ei="#333333",VP={mode:hr.default,boardBackground:"#ffffff",textColor:ei},UP={mode:hr.colorful,boardBackground:"#ffffff",textColor:ei},XP={mode:hr.soft,boardBackground:"#f5f5f5",textColor:ei},KP={mode:hr.retro,boardBackground:"#f9f8ed",textColor:ei},YP={mode:hr.dark,boardBackground:"#141414",textColor:"#FFFFFF"},qP={mode:hr.starry,boardBackground:"#0d2537",textColor:"#FFFFFF"},HF=[VP,UP,XP,KP,YP,qP],F={isBoard(e){const t=Pw.get(e);if(t!==void 0)return t;const n=typeof e.onChange=="function"&&typeof e.apply=="function";return Pw.set(e,n),n},isAlive(e){return!!C6.get(e)},findPath(e,t){const n=[];let r=t;for(;;){const i=jf.get(r);if(i==null){if(F.isBoard(r))return n;break}const o=l0.get(r);if(o==null)break;n.unshift(o),r=i}throw new Error(`Unable to find the path for Plait node: ${JSON.stringify(t)}`)},getHost(e){return y6.get(e)},getElementLowerHost(e){var t;return(t=jl.get(e))==null?void 0:t.lowerHost},getElementHost(e){var t;return(t=jl.get(e))==null?void 0:t.host},getElementUpperHost(e){var t;return(t=jl.get(e))==null?void 0:t.upperHost},getElementTopHost(e){var t;return(t=jl.get(e))==null?void 0:t.topHost},getActiveHost(e){var t;return(t=jl.get(e))==null?void 0:t.activeHost},getRoughSVG(e){return v6.get(e)},getBoardContainer(e){var t;return(t=jl.get(e))==null?void 0:t.container},getBoardContext(e){return w6.get(e)},getRectangle(e){return on(e,e.children,!0)},getViewportContainer(e){var t;return(t=jl.get(e))==null?void 0:t.viewportContainer},isFocus(e){return!!e.selection},isReadonly(e){return e.options.readonly},hasBeenTextEditing(e){return!!m6.get(e)},getPointer(e){return e.pointer},isPointer(e,t){return e.pointer===t},isInPointer(e,t){const n=e.pointer;return t.includes(n)},getMovingPointInBoard(e){return x6.get(e)},isMovingPointInBoard(e){const t=sP.get(e),n=F.getBoardContainer(e).getBoundingClientRect();return!!(t&&Ap(t[0],t[1],n)===0)},getThemeColors(e){return e.options.themeColors||HF}};var Zt;(function(e){e.hand="hand",e.selection="selection"})(Zt||(Zt={}));const GF=e=>e.type==="set_viewport",jF=e=>e.type==="set_selection",$F=e=>e.type==="set_theme",WF=e=>{switch(e.type){case"insert_node":return{...e,type:"remove_node"};case"remove_node":return{...e,type:"insert_node"};case"move_node":{const{newPath:t,path:n}=e;if(wt.equals(t,n))return e;const r=wt.transform(n,e),i=wt.transform(wt.next(n),e);return{...e,path:r,newPath:i}}case"set_node":{const{properties:t,newProperties:n}=e;return{...e,properties:n,newProperties:t}}case"set_selection":{const{properties:t,newProperties:n}=e;return t==null?{...e,properties:n,newProperties:null}:n==null?{...e,properties:null,newProperties:t}:{...e,properties:n,newProperties:t}}case"set_viewport":{const{properties:t,newProperties:n}=e;return t==null?{...e,properties:n,newProperties:n}:n==null?{...e,properties:t,newProperties:t}:{...e,properties:n,newProperties:t}}case"set_theme":{const{properties:t,newProperties:n}=e;return{...e,properties:n,newProperties:t}}}},Ju={isSetViewportOperation:GF,isSetSelectionOperation:jF,isSetThemeOperation:$F,inverse:WF},mt={isEquals(e,t){return e&&t&&e[0]===t[0]&&e[1]===t[1]},isHorizontal(e,t,n=0){return e&&t&&mt.isOverHorizontal([e,t],n)},isOverHorizontal(e,t=0){return e.every(n=>Math.abs(n[1]-e[0][1])<=t)},isVertical(e,t,n=0){return e&&t&&mt.isOverVertical([e,t],n)},isOverVertical(e,t=0){return e.every(n=>Math.abs(n[0]-e[0][0])<=t)},isAlign(e,t=0){return mt.isOverHorizontal(e,t)||mt.isOverVertical(e,t)},getOffsetX(e,t){return t[0]-e[0]},getOffsetY(e,t){return t[1]-e[1]}},q7=new WeakMap,Or=new WeakMap,mm=new WeakMap;var Ot;(function(e){e.left="left",e.top="top",e.right="right",e.bottom="bottom"})(Ot||(Ot={}));const zF=e=>e===Ot.left||e===Ot.right,So={isGroup:e=>e.type==="group"};/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */function VF(e){return UF(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function UF(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function XF(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let r;for(;!(r=n.next()).done;)t(r.value)}}/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */const KF=(e,t)=>t;class YF{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||KF}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<Fw(r,i,o)?n:r,l=Fw(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);const h=l-i,d=c-i;if(h!=d){for(let v=0;v<h;v++){const y=v<o.length?o[v]:o[v]=0,x=y+v;d<=x&&x<h&&(o[v]=y+1)}const g=s.previousIndex;o[g]=d-h}}l!==c&&t(s,l,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!VF(t))throw new Error("Exception: Error trying to diff. Only arrays and iterables are allowed");return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let l=0;l<this.length;l++)o=t[l],s=this._trackByFn(l,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,l),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,l)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,XF(t,l=>{s=this._trackByFn(i,l),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,l,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,l,s,i)),Object.is(n.item,l)||this._addIdentityChange(n,l)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new qF(n,r),o,i)),t}_verifyReinsertion(t,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new Iw),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Iw),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}}class qF{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ZF{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}}class Iw{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new ZF,this.map.set(n,r)),r.add(t)}get(t,n){const r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}}function Fw(e,t,n){const r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class ZP{constructor(t){this.board=t,this.children=[],this.instances=[],this.contexts=[],this.differ=null,this.initialized=!1}initialize(t,n){this.initialized=!0,this.children=t,t.forEach((r,i)=>{l0.set(r,i),jf.set(r,n.parent);const o=Z7(this.board,r,i,n.parent),s=_w(this.board,o),l=Lw(this.board,s,o,n);this.instances.push(l),this.contexts.push(o)}),this.differ=new YF(QF),this.differ.diff(t)}update(t,n){if(!this.initialized){this.initialize(t,n);return}if(!this.differ)throw new Error("Exception: Can not find differ ");const{board:r,parent:i}=n,o=this.differ.diff(t);if(o){const s=[],l=[];let c=null;o.forEachItem(h=>{var v;l0.set(h.item,h.currentIndex),jf.set(h.item,n.parent);const d=h.previousIndex===null?void 0:this.contexts[h.previousIndex],g=Z7(r,h.item,h.currentIndex,i,d);if(h.previousIndex===null){const y=_w(r,g),x=Lw(r,y,g,n);s.push(g),l.push(x)}else{const y=this.instances[h.previousIndex];y.context=g,l.push(y),s.push(g)}(h.item===this.children[0]||h.item.id===((v=this.children[0])==null?void 0:v.id))&&(c=h.currentIndex)}),o.forEachOperation(h=>{if(h.currentIndex===null){const d=this.instances[h.previousIndex];d==null||d.destroy()}h.previousIndex!==null&&h.currentIndex!==null&&JP(h.item,h.currentIndex,n,c)}),this.instances=l,this.contexts=s,this.children=t}else{const s=[];this.children.forEach((l,c)=>{l0.set(l,c),jf.set(l,n.parent);const h=this.contexts[c],d=this.instances[c],g=Z7(r,l,c,i,h);d.context=g,s.push(g)}),this.contexts=s}}destroy(){this.children.forEach((t,n)=>{this.instances[n]&&this.instances[n].destroy()}),this.instances=[],this.children=[],this.contexts=[],this.initialized=!1,this.differ=null}}const QF=(e,t)=>t.id,Lw=(e,t,n,r)=>{const i=new t;i.context=n,e.normalizeElement(n);try{i.initialize()}catch(s){nc()&&console.error("list-render-initialize",s,"context",n)}const o=i.getContainerG();return QP(n.index,o,r),i.initializeListRender(),i},_w=(e,t)=>e.drawElement(t),Z7=(e,t,n,r,i)=>{var c;let o=$f(e,t);const s=i&&i.element;return s&&s!==t&&$f(e,s)&&(o=!0,rI(e,s,t)),{element:t,parent:r,board:e,selected:o,index:n,hasThemeChanged:!!((c=e.operations)!=null&&c.find(h=>h.type==="set_theme"))}},QP=(e,t,n,r=null)=>{const{parent:i,parentG:o}=n;if(F.isBoard(i))if(e>0){const s=i.children[e-1];yn.getContainerG(s,{suppressThrow:!1}).insertAdjacentElement("afterend",t)}else if(r!==null){const s=i.children[r],l=s&&yn.getContainerG(s,{suppressThrow:!0});if(s&&l)o.insertBefore(t,l);else throw new Error("fail to mount container on moving")}else o.append(t);else if(e>0){const s=i.children[e-1];yn.getElementG(s).insertAdjacentElement("afterend",t)}else if(r){const s=i.children[r],l=s&&F.findPath(n.board,s),c=l&&Kt.first(n.board,l),h=c&&yn.getContainerG(c,{suppressThrow:!1});if(h)o.insertBefore(t,h);else throw new Error("fail to mount container on moving")}else{let s=yn.getElementG(i);o.insertBefore(t,s)}},JP=(e,t,n,r)=>{const i=yn.getContainerG(e,{suppressThrow:!1});QP(t,i,n,r),e.children&&!yn.isRootElement(e)&&n.board.isExpanded(e)&&e.children.forEach((o,s)=>{JP(o,s,{...n,parent:e},null)})};class JF{get hasChildren(){return!!this.element.children}set context(t){EO(this)&&this.beforeContextChange(t);const n=this._context;if(this._context=t,this.initialized){const r=this.getElementG(),i=this.getContainerG();Tg.set(this.element,r),Dg.set(this.element,i),Vm(this.board).set(this.element.id,this.element),Ag.set(this.element,this.ref),this.updateListRender(),PO(this)&&this.onContextChanged(t,n)}else yn.isRootElement(this.element)&&this.hasChildren?(this._g=Lt(),this._containerG=Lt(),this._containerG.append(this._g)):(this._g=Lt(),this._containerG=this._g),Tg.set(this.element,this._g),Dg.set(this.element,this._containerG),Ag.set(this.element,this.ref),Vm(this.board).set(this.element.id,this.element)}get context(){return this._context}get element(){return this.context&&this.context.element}get board(){return this.context&&this.context.board}get selected(){return this.context&&this.context.selected}getContainerG(){return this._containerG}getElementG(){return this._g}constructor(t){this.ref=t,this.initialized=!1}initialize(){if(this.element.type&&this.getContainerG().setAttribute(`plait-${this.element.type}`,"true"),this.hasChildren)if(yn.isRootElement(this.element))this._rootContainerG=this._containerG;else{const t=F.findPath(this.board,this.element),n=Kt.get(this.board,t.slice(0,1));this._rootContainerG=yn.getContainerG(n,{suppressThrow:!1})}this.getContainerG().setAttribute("plait-data-id",this.element.id),this.initialized=!0}initializeListRender(){this.hasChildren&&(this.listRender=new ZP(this.board),this.board.isExpanded(this.element)&&this.listRender.initialize(this.element.children,this.initializeChildrenContext()))}getRef(){return this.ref}updateListRender(){if(this.hasChildren){if(!this.listRender)throw new Error("incorrectly initialize list render");this.board.isExpanded(this.element)?this.listRender.update(this.element.children,this.initializeChildrenContext()):this.listRender.initialized&&this.listRender.destroy()}}initializeChildrenContext(){if(!this._rootContainerG)throw new Error("can not resolve root container g");return{board:this.board,parent:this.element,parentG:this._rootContainerG}}destroy(){var t;Tg.get(this.element)===this._g&&Tg.delete(this.element),Vm(this.board).delete(this.element.id),Dg.get(this.element)===this._containerG&&Dg.delete(this.element),Ag.get(this.element)===this.ref&&Ag.set(this.element,this.ref),av(this.board,this.element),this.getContainerG().remove(),(t=this.listRender)==null||t.destroy()}}class eL{constructor(){this._stable=new YE,this.uploadingFiles=[]}getUploadingFile(t){return this.uploadingFiles.find(n=>n.url===t)}setUploadingFile(t){return this.uploadingFiles.push(t)}removeUploadingFile(t){this.uploadingFiles=this.uploadingFiles.filter(n=>n.url!==t.url)}onStable(){return this._stable.asObservable()}nextStable(){this._stable.next("")}}const tL={transform(e,t){const{current:n}=e;if(n==null)return;const r=wt.transform(n,t);e.current=r,r==null&&e.unref()}};function nL(e,t){const n={viewport:{zoom:1},children:e,theme:{themeColorMode:hr.default},operations:[],history:{redos:[],undos:[]},selection:null,options:t||{readonly:!1,hideScrollbar:!1,disabledScrollOnNonFocus:!1},pointer:t!=null&&t.readonly?Zt.hand:Zt.selection,undo:()=>{},redo:()=>{},apply:r=>{for(const i of n.pathRefs())tL.transform(i,r);n.operations.push(r),Xe.transform(n,r),$m.get(n)||($m.set(n,!0),Promise.resolve().then(()=>{$m.set(n,!1),n.onChange(),n.afterChange(),n.operations=[]}))},pathRef:(r,i)=>{const o=(i==null?void 0:i.affinity)||"forward",s={current:r,affinity:o,unref(){const{current:c}=s;return n.pathRefs().delete(s),s.current=null,c}};return n.pathRefs().add(s),s},pathRefs:()=>{let r=Sw.get(n);return r||(r=new Set,Sw.set(n,r)),r},onChange:()=>{},afterChange:()=>{},drawSelectionRectangle:()=>rF(n),mousedown:r=>{},mousemove:r=>{},mouseleave:r=>{},globalMousemove:r=>{},mouseup:r=>{},globalMouseup:r=>{},keyDown:r=>{},globalKeyDown:r=>{},keyUp:r=>{},dblClick:r=>{},buildFragment:(r,i,o,s)=>r,insertFragment:(r,i,o)=>{},deleteFragment:r=>{e8.removeElements(n,r)},getDeletedFragment:r=>r,getRelatedFragment:(r,i)=>r,normalizeElement:r=>{},drawElement:r=>{throw new Error(`can not resolve plugin element component type: ${r.element.type}`)},isWithinSelection:r=>!1,isRectangleHit:r=>!1,isHit:r=>!1,isInsidePoint:r=>!1,getOneHitElement:r=>r[0],isRecursion:r=>!0,isMovable:r=>!1,getRectangle:r=>null,applyTheme:r=>{},isAlign:r=>!1,pointerDown:r=>{},pointerMove:r=>{},pointerUp:r=>{},pointerCancel:r=>{},pointerOut:r=>{},pointerLeave:r=>{},globalPointerMove:r=>{},globalPointerUp:r=>{},drop:r=>!1,isImageBindingAllowed:r=>!1,canAddToGroup:r=>!0,canSetZIndex:r=>!0,isExpanded:r=>!0};return n}function rL(e){const{onChange:t,afterChange:n}=e;return e.onChange=()=>{const r=c3.get(e);r&&r(),t()},e.afterChange=()=>{const r=f3.get(e);r&&r(),n()},e}const Nw=(e,t)=>F.isPointer(e,Zt.selection)&&jP(t),Hw="Space";function iL(e){const{pointerDown:t,pointerMove:n,globalPointerUp:r,keyDown:i,keyUp:o,pointerUp:s}=e;let l=!1,c=null,h=null,d=!1,g=!1;return e.pointerDown=v=>{const y=e.getPluginOptions(Xa.withHand),x=Dt(e,Bt(e,v.x,v.y)),E=dP(e,x);((y==null?void 0:y.isHandMode(e,v))||F.isPointer(e,Zt.hand)||Nw(e,v)&&!E||g)&&Za(v)?(c={x:v.x,y:v.y},F.isPointer(e,Zt.hand)||F.getBoardContainer(e).classList.add("viewport-moving")):$O(v)&&(d=!0,v.preventDefault(),c={x:v.x,y:v.y},l=!0,F.getBoardContainer(e).classList.add("viewport-moving")),h=v,t(v)},e.pointerMove=v=>{const y=e.getPluginOptions(Xa.withHand),x=iP+4;if(c&&!l&&!mi(e)&&h&&Tt(h.x,h.y,v.x,v.y)>x&&!gc(e)&&(l=!0,F.getBoardContainer(e).classList.add("viewport-moving")),((y==null?void 0:y.isHandMode(e,v))||F.isPointer(e,Zt.hand)||Nw(e,v)||d||g)&&l&&c&&!mi(e)&&!gc(e)){const T=F.getViewportContainer(e),D=T.scrollLeft-(v.x-c.x),S=T.scrollTop-(v.y-c.y);xP(e,D,S,!1),c.x=v.x,c.y=v.y}n(v)},e.pointerUp=v=>{l||s(v)},e.globalPointerUp=v=>{c&&(c=null),l=!1,F.getBoardContainer(e).classList.remove("viewport-moving"),d=!1,r(v)},e.keyDown=v=>{v.code===Hw&&(!e.options.readonly&&!F.isPointer(e,Zt.hand)&&(g=!0,A6(e,{isDisabledSelection:!0}),F.getBoardContainer(e).classList.add("viewport-moving")),v.preventDefault()),i(v)},e.keyUp=v=>{!e.options.readonly&&v.code===Hw&&(g=!1,A6(e,{isDisabledSelection:!1}),F.getBoardContainer(e).classList.remove("viewport-moving")),o(v)},e}function oL(e){const{apply:t,keyDown:n}=e;return e.history={undos:[],redos:[]},e.redo=()=>{const{history:r}=e,{redos:i}=r;if(i.length>0){const o=i[i.length-1];Ss.withoutSaving(e,()=>{for(const s of o)e.apply(s)}),r.redos.pop(),r.undos.push(o)}},e.undo=()=>{const{history:r}=e,{undos:i}=r;if(i.length>0){const o=i[i.length-1];Ss.withoutSaving(e,()=>{const s=o.map(Ju.inverse).reverse();for(const l of s)e.apply(l)}),r.redos.push(o),r.undos.pop()}},e.apply=r=>{const{operations:i,history:o}=e,{undos:s}=o,l=s[s.length-1],c=l&&l[l.length-1];let h=Ss.isSaving(e),d=Ss.isMerging(e);if(h==null&&(h=qO(r)),h){if(d||(l==null?d=!1:i.length!==0?d=!0:d=YO(r,c)),Ss.isSplittingOnce(e)&&(d=!1,Ss.setSplittingOnce(e,void 0)),l&&d)l.push(r);else{const g=[r];s.push(g)}for(;s.length>100;)s.shift();ZO(r)&&(o.redos=[])}t(r)},e.keyDown=r=>{if(Qt.isHotkey("mod+z",r)){e.undo();return}if(Qt.isHotkey("mod+shift+z",r)){e.redo();return}n(r)},e}const sL=e=>{const{keyDown:t,keyUp:n,globalKeyDown:r}=e;return e.keyDown=i=>{const o=e.getPluginOptions(Xa.withSelection);if(!F.isReadonly(e)&&o.isMultipleSelection&&Qt.isHotkey("mod+a",i)){i.preventDefault();let l=[];pi(e,c=>{F.isBoard(c)||l.push(c)},c=>!!(F.isBoard(c)||e.isRecursion(c)),!0),Xe.addSelectionWithTemporaryElements(e,l);return}if(!F.isReadonly(e)){if(Qt.isKeyHotkey("mod+]",i)){i.preventDefault(),Xe.moveUp(e);return}if(Qt.isKeyHotkey("mod+[",i)){i.preventDefault(),Xe.moveDown(e);return}if(Qt.isKeyHotkey("mod+option+",i)){i.preventDefault(),Xe.moveToTop(e);return}if(Qt.isKeyHotkey("mod+option+",i)){i.preventDefault(),Xe.moveToBottom(e);return}}const s=Qe(e);if(!F.isReadonly(e)&&s.length>0&&Qt.isKeyHotkey("mod+d",i)){i.preventDefault(),J4(e);return}!F.isReadonly(e)&&s.length>0&&(Ai.isDeleteBackward(i)||Ai.isDeleteForward(i))&&(i.preventDefault(),Q4(e)),t(i)},e.keyUp=i=>{n(i)},e.globalKeyDown=i=>{if(F.getMovingPointInBoard(e)||F.isMovingPointInBoard(e)){if(Qt.isHotkey(["mod+=","mod++"],{byKey:!0})(i)){i.preventDefault(),fn.updateZoom(e,e.viewport.zoom+.1);return}if(Qt.isHotkey(["mod+shift+=","mod+shift++"],{byKey:!0})(i)){i.preventDefault(),fn.fitViewport(e);return}if(Qt.isHotkey(["mod+-","mod+shift+-"])(i)){i.preventDefault(),fn.updateZoom(e,e.viewport.zoom-.1);return}if(Qt.isHotkey(["mod+0","mod+shift+0"],{byKey:!0})(i)){i.preventDefault(),fn.updateZoom(e,1);return}}r(i)},e};function aL(e,t,n){const r=FP(e,n),i=Lt();let o=uL(t,r);const s=fL(e,o,t,r);i.append(s);const l=hL(e,o,t,r);return o=l.snapDelta,i.append(l.snapG),{...o,snapG:i}}function lL(e,t,n){const r=Zf(e,n),i=Og(t,r[0],n),o=Og(t,r[1],n),s=Og(t,r[2],n);return[i,o,s]}function uL(e,t){let n={deltaX:0,deltaY:0};function r(i){let o=0;const s=lL(e,t,i);for(let l=0;l<s.length;l++)if(Math.abs(s[l])<Yl){o=s[l];break}return o}return n.deltaX=r(!0),n.deltaY=r(!1),n}function cL(e,t){const{deltaX:n,deltaY:r}=e,{x:i,y:o,width:s,height:l}=t;return{x:i+n,y:o+r,width:s,height:l}}function fL(e,t,n,r){const i=cL(t,n);return LP(e,i,r,!0,!0,!0)}function hL(e,t,n,r){let i=t.deltaX,o=t.deltaY;const s=Gw(n,r,!0),l=Gw(n,r,!1),c=[...s.lines,...l.lines];return s.delta&&(i=s.delta),l.delta&&(o=l.delta),{snapDelta:{deltaX:i,deltaY:o},snapG:_P(e,c)}}function Gw(e,t,n){var S,R;let r=[],i=0,o=[];const s=n?"x":"y",l=n?"width":"height",c=e[s]+e[l]/2;t.forEach(k=>{(n?dL(k,e):gL(k,e))&&!b.isHit(k,e)&&o.push(k)}),o=[...o,e].sort((k,O)=>k[s]-O[s]);const h=[];let d=0,g,v;for(let k=0;k<o.length;k++)for(let O=k+1;O<o.length;O++){const $=o[k],z=o[O],K=z[s]-($[s]+$[l]);let te=1/0;(S=h[k])!=null&&S.after?h[k].after.push({distance:K,index:O}):h[k]={...h[k],after:[{distance:K,index:O}]},(R=h[O])!=null&&R.before?h[O].before.push({distance:K,index:k}):h[O]={...h[O],before:[{distance:K,index:k}]};let se=($[s]+$[l]+z[s])/2;te=Math.abs(se-c),te<Yl&&(d=(z[s]-($[s]+$[l])-e[l])/2,i=se-c,g=k,v=O);const me=z[s]-($[s]+$[l]);se=z[s]+z[l]+me+e[l]/2,te=Math.abs(se-c),(!d||d!==me)&&te<Yl&&(d=me,g=O,i=se-c);const ne=z[s]-($[s]+$[l]);se=$[s]-ne-e[l]/2,te=Math.abs(se-c),!d&&te<Yl&&(d=ne,v=k,i=se-c)}const y=o.indexOf(e);let x=[],E=[];if(g!==void 0&&(x.push(g),T(d,h[g],"before",x)),v!==void 0&&(E.push(v),T(d,h[v],"after",E)),x.length||E.length){const k=[...x.reverse(),y,...E];e[s]+=i;for(let O=1;O<k.length;O++)r.push(D(o[k[O-1]],o[k[O]]))}function T(k,O,$,z){const K=O[$],te=h.indexOf(O);if(!(te===0&&$==="before"||te===h.length-1&&$==="after")){for(let se=0;se<K.length;se++)if(Math.abs(K[se].distance-k)<.1){z.push(K[se].index),T(k,h[K[se].index],$,z);return}}}function D(k,O){const $=s==="x"?"y":"x",z=l==="width"?"height":"width",te=[k[$],k[$]+k[z],O[$],O[$]+O[z]].sort((ne,oe)=>ne-oe),se=(te[1]+te[2])/2,me=3;return n?[[k.x+k.width+me,se],[O.x-me,se]]:[[se,k.y+k.height+me],[se,O.y-me]]}return{delta:i,lines:r}}function dL(e,t){return!(e.y+e.height<t.y||e.y>t.y+t.height)}function gL(e,t){return!(e.x+e.width<t.x||e.x>t.x+t.width)}function pL(e){const{pointerDown:t,pointerMove:n,globalPointerUp:r,globalPointerMove:i,globalKeyDown:o,keyUp:s}=e;let l=0,c=0,h=!1,d,g=[],v=null,y=null,x=null,E,T,D=null;e.globalKeyDown=R=>{F.isReadonly(e)||Qt.isKeyHotkey("option",R)&&(R.preventDefault(),d&&g.length&&!F.hasBeenTextEditing(e)&&(D=jw(e,g,l,c),D&&F.getElementTopHost(e).append(D))),o(R)},e.keyUp=R=>{if(!F.isReadonly(e)&&D&&d&&g.length&&!F.hasBeenTextEditing(e)){R.preventDefault();const k=O6(e,g,l,c);F.getBoardContainer(e).classList.add("element-moving"),Aw(e,k)}D==null||D.remove(),s(R)},e.pointerDown=R=>{if(F.isReadonly(e)||!F.isPointer(e,Zt.selection)||!Za(R)){t(R);return}const k=Dt(e,Bt(e,R.x,R.y));if(E=il(e,k,O=>e.isMovable(O)),x=eS(e),T=E&&x.includes(E),E&&T)d=k,g=x,y=on(e,g,!0);else if(E){d=k;const O=e.getRelatedFragment([],[E]);g=[...Y4(e,E),...O],y=on(e,g,!0)}else{const O=x.length>0&&on(e,x,!1);O&&b.isPointInRectangle(O,k)&&(d=k,g=x,y=O)}t(R)},e.pointerMove=R=>{if(d&&g.length&&!F.hasBeenTextEditing(e)){h||(h=!0),v==null||v.remove(),D==null||D.remove();const k=Dt(e,Bt(e,R.x,R.y));l=k[0]-d[0],c=k[1]-d[1],(Tt(...k,...d)>R4||BI(e).length>0)&&(E&&!T&&x&&x.length>0&&(WP(e,[]),E=void 0,x=null,T=void 0),da(e,"with-moving",()=>{if(!y)return;const $={...y,x:y.x+l,y:y.y+c},z=Rp($,Co(g)),K=aL(e,z,g);if(l+=K.deltaX,c+=K.deltaY,v=K.snapG,v.classList.add(nP),F.getElementTopHost(e).append(v),R.altKey)D=jw(e,g,l,c),D&&F.getElementTopHost(e).append(D);else{const te=O6(e,g,l,c);F.getBoardContainer(e).classList.add("element-moving"),Aw(e,te)}}))}h&&R.preventDefault(),n(R)},e.globalPointerMove=R=>{d&&(FO(e,R.x,R.y)||S(e)),i(R)},e.globalPointerUp=R=>{if(R.altKey&&g.length){const k=t8(e,g),O=on(e,k,!1);J4(e,k,[O.x+l,O.y+c])}h=!1,E=void 0,x=null,T=void 0,d&&S(e),r(R)};function S(R){v==null||v.remove(),D==null||D.remove(),d=null,y=null,l=0,c=0,g=[],gc(R)&&MI(R),Or.set(R,!1),F.getBoardContainer(R).classList.remove("element-moving")}return mL(e)}function mL(e){const{keyDown:t,keyUp:n}=e;return e.keyDown=r=>{const i=Qe(e);if(!F.isReadonly(e)&&i.length>0&&(Ai.isArrow(r)||Ai.isExtendArrow(r))){r.preventDefault();const o=!!r.shiftKey,s=[0,0],l=o?10:1;switch(!0){case(Ai.isMoveUp(r)||Ai.isExtendUp(r)):{s[1]=-l;break}case(Ai.isMoveDown(r)||Ai.isExtendDown(r)):{s[1]=l;break}case(Ai.isMoveBackward(r)||Ai.isExtendBackward(r)):{s[0]=-l;break}case(Ai.isMoveForward(r)||Ai.isExtendForward(r)):{s[0]=l;break}}const c=eS(e);da(e,"with-arrow-moving",()=>{O6(e,c,s[0],s[1])})}t(r)},e.keyUp=r=>{Or.set(e,!1),n(r)},e}function eS(e){const t=Qe(e),n=e.children.filter(o=>e.isMovable(o)),r=t.filter(o=>n.includes(o)),i=e.getRelatedFragment([]);return r.push(...i),r}function t8(e,t){return[...t].filter(r=>!So.isGroup(r)&&yn.isRootElement(r))}function O6(e,t,n,r){return t8(e,t).map(s=>{const c=(s.points||[]).map(d=>[d[0]+n,d[1]+r]),h=l0.get(s);return Xe.setNode(e,{points:c},[h]),Or.set(e,!0),Kt.get(e,[h])})}function jw(e,t,n,r){let i=null;const o=[];return t8(e,t).forEach(l=>{pi(l,c=>{o.push(c)},()=>!0)}),o.forEach(l=>{let c=e.getRectangle(l);if(c){c={x:c.x+n,y:c.y+r,width:c.width,height:c.height};const h=ga(e,c,{stroke:Po,strokeWidth:1,fill:j4,fillStyle:"solid"});i||(i=Lt(),i.classList.add(nP));const d=NF(l);d&&Rs(h,b.getCenterPoint(c),d),i.append(h)}}),i}const vL=e=>{const t=new Map,n=e;return n.getPluginOptions=r=>t.get(r),n.setPluginOptions=(r,i)=>{const o=n.getPluginOptions(r)||{};t.set(r,{...o,...i})},n};function yL(e){const{buildFragment:t}=e;return e.buildFragment=(n,r,i,o)=>{let s=e.getRelatedFragment(o||[]);if(s&&(o!=null&&o.length&&(s=s.filter(l=>!o.map(c=>c.id).includes(l.id))),s.length)){const l={text:"",type:eu.elements,elements:s};n=cv(n,l)}return t(n,r,i,o)},e}function wL(e){const{pointerDown:t,pointerUp:n,pointerMove:r,globalPointerUp:i,onChange:o,afterChange:s,drawSelectionRectangle:l}=e;let c=null,h=null,d,g,v=!1,y=null,x=null;return e.pointerDown=E=>{!v&&E.shiftKey&&(v=!0),v&&!E.shiftKey&&(v=!1);const T=Dt(e,Bt(e,E.x,E.y)),D=dP(e,T),S=zm(e);F.isPointer(e,Zt.selection)&&Za(E)&&!D&&S.isMultipleSelection&&!S.isDisabledSelection&&(jP(E)?y=setTimeout(()=>{c=[E.x,E.y],y=null},120):c=[E.x,E.y]),x=E,t(E)},e.pointerMove=E=>{if(y&&x&&Tt(x.x,x.y,E.x,E.y)>iP&&(clearTimeout(y),y=null),F.isPointer(e,Zt.selection)&&c){E.preventDefault(),h=[E.x,E.y];const T=b.getRectangleByPoints([qf(e,...c),qf(e,...h)]);d==null||d.remove(),da(e,"with-selection",()=>{c&&h&&Xe.setSelection(e,{anchor:Dt(e,Bt(e,c[0],c[1])),focus:Dt(e,Bt(e,h[0],h[1]))})}),QI(e),d=ga(e,T,{stroke:Po,strokeWidth:1,fill:j4,fillStyle:"solid"}),F.getActiveHost(e).append(d)}r(E)},e.pointerUp=E=>{const T=F.isPointer(e,Zt.selection)||F.isPointer(e,Zt.hand);if(!Za(E)||dc(e)||!T){n(E);return}const S=Dt(e,Bt(e,E.x,E.y)),R={anchor:S,focus:S};Xe.setSelection(e,R),n(E)},e.globalPointerUp=E=>{c&&h&&(d==null||d.remove(),JI(e),Xe.setSelection(e,{anchor:Dt(e,Bt(e,c[0],c[1])),focus:Dt(e,Bt(e,h[0],h[1]))}));const T=zm(e);if(F.isFocus(e)&&!T.isPreventClearSelection){const D=E.target instanceof Node&&F.getBoardContainer(e).contains(E.target),S=E.target instanceof Node&&document.contains(E.target),R=E.target instanceof Element&&E.target.closest(`.${tl}`);!D&&!c&&!R&&S&&Xe.setSelection(e,null)}c=null,h=null,y&&(clearTimeout(y),y=null),x=null,i(E)},e.onChange=()=>{const E=zm(e);if(E.isDisabledSelection&&F0(e),e.operations.forEach(T=>{T.type==="remove_node"&&av(e,T.node,!0)}),bw(e)&&kw(e))try{v||g==null||g.remove();const T=eF(e);if(T)Va(e,[...T]);else{let S=fP(e);!E.isMultipleSelection&&S.length>1&&(S=[S[0]]);const R=S.some(O=>O.groupId),k=Qe(e);if(R)iF(e,S,v);else{if(e.selection&&C0.isCollapsed(e.selection)){const O=e.getOneHitElement(S);O&&(S=[O])}if(v){const O=[...k];e.selection&&C0.isCollapsed(e.selection)?(S.forEach($=>{O.includes($)?O.splice(O.indexOf($),1):O.push($)}),Va(e,O)):(S.forEach($=>{O.includes($)||O.push($)}),Va(e,[...O]))}else Va(e,[...S])}}const D=Qe(e);nF(e),mi(e)||(g==null||g.remove(),D.length>1&&(g=e.drawSelectionRectangle(),F.getActiveHost(e).append(g)))}catch(T){console.error(T)}o()},e.afterChange=()=>{if(bw(e)&&!kw(e))try{const E=Qe(e);E.length&&E.length>1?(g==null||g.remove(),g=e.drawSelectionRectangle(),F.getActiveHost(e).append(g)):g==null||g.remove()}catch(E){console.error(E)}s()},A6(e,{isMultipleSelection:!0,isDisabledSelection:!1,isPreventClearSelection:!1}),e}const CL=e=>{const t=e;return t.getI18nValue=n=>(console.warn(`I18n key "${n}" is not found.`),null),t},fv=(e,t,n="")=>e.getI18nValue(t)||n;var Q7={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var $w;function xL(){return $w||($w=1,function(e){(function(){var t={}.hasOwnProperty;function n(){for(var o="",s=0;s<arguments.length;s++){var l=arguments[s];l&&(o=i(o,r(l)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var s="";for(var l in o)t.call(o,l)&&o[l]&&(s=i(s,l));return s}function i(o,s){return s?o?o+" "+s:o+s:o}e.exports?(n.default=n,e.exports=n):window.classNames=n})()}(Q7)),Q7.exports}var EL=xL();const sn=Cc(EL);var PL=function(e){return typeof e=="function"};function Ww(e,t){if(e===t)return!0;for(var n=0;n<e.length;n++)if(!Object.is(e[n],t[n]))return!1;return!0}function tS(e){var t=G.useRef(e);return t.current=e,t}var SL=function(e){var t=tS(e);G.useEffect(function(){return function(){t.current()}},[])},J7,zw;function n8(){if(zw)return J7;zw=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return J7=e,J7}var e5,Vw;function TL(){if(Vw)return e5;Vw=1;var e=typeof As=="object"&&As&&As.Object===Object&&As;return e5=e,e5}var t5,Uw;function nS(){if(Uw)return t5;Uw=1;var e=TL(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return t5=n,t5}var n5,Xw;function DL(){if(Xw)return n5;Xw=1;var e=nS(),t=function(){return e.Date.now()};return n5=t,n5}var r5,Kw;function AL(){if(Kw)return r5;Kw=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return r5=t,r5}var i5,Yw;function BL(){if(Yw)return i5;Yw=1;var e=AL(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return i5=n,i5}var o5,qw;function rS(){if(qw)return o5;qw=1;var e=nS(),t=e.Symbol;return o5=t,o5}var s5,Zw;function ML(){if(Zw)return s5;Zw=1;var e=rS(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function o(s){var l=n.call(s,i),c=s[i];try{s[i]=void 0;var h=!0}catch{}var d=r.call(s);return h&&(l?s[i]=c:delete s[i]),d}return s5=o,s5}var a5,Qw;function RL(){if(Qw)return a5;Qw=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return a5=n,a5}var l5,Jw;function bL(){if(Jw)return l5;Jw=1;var e=rS(),t=ML(),n=RL(),r="[object Null]",i="[object Undefined]",o=e?e.toStringTag:void 0;function s(l){return l==null?l===void 0?i:r:o&&o in Object(l)?t(l):n(l)}return l5=s,l5}var u5,e9;function kL(){if(e9)return u5;e9=1;function e(t){return t!=null&&typeof t=="object"}return u5=e,u5}var c5,t9;function OL(){if(t9)return c5;t9=1;var e=bL(),t=kL(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return c5=r,c5}var f5,n9;function IL(){if(n9)return f5;n9=1;var e=BL(),t=n8(),n=OL(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt;function c(h){if(typeof h=="number")return h;if(n(h))return r;if(t(h)){var d=typeof h.valueOf=="function"?h.valueOf():h;h=t(d)?d+"":d}if(typeof h!="string")return h===0?h:+h;h=e(h);var g=o.test(h);return g||s.test(h)?l(h.slice(2),g?2:8):i.test(h)?r:+h}return f5=c,f5}var h5,r9;function iS(){if(r9)return h5;r9=1;var e=n8(),t=DL(),n=IL(),r="Expected a function",i=Math.max,o=Math.min;function s(l,c,h){var d,g,v,y,x,E,T=0,D=!1,S=!1,R=!0;if(typeof l!="function")throw new TypeError(r);c=n(c)||0,e(h)&&(D=!!h.leading,S="maxWait"in h,v=S?i(n(h.maxWait)||0,c):v,R="trailing"in h?!!h.trailing:R);function k(oe){var ve=d,ge=g;return d=g=void 0,T=oe,y=l.apply(ge,ve),y}function O(oe){return T=oe,x=setTimeout(K,c),D?k(oe):y}function $(oe){var ve=oe-E,ge=oe-T,Me=c-ve;return S?o(Me,v-ge):Me}function z(oe){var ve=oe-E,ge=oe-T;return E===void 0||ve>=c||ve<0||S&&ge>=v}function K(){var oe=t();if(z(oe))return te(oe);x=setTimeout(K,$(oe))}function te(oe){return x=void 0,R&&d?k(oe):(d=g=void 0,y)}function se(){x!==void 0&&clearTimeout(x),T=0,d=E=g=x=void 0}function me(){return x===void 0?y:te(t())}function ne(){var oe=t(),ve=z(oe);if(d=arguments,g=this,E=oe,ve){if(x===void 0)return O(E);if(S)return clearTimeout(x),x=setTimeout(K,c),k(E)}return x===void 0&&(x=setTimeout(K,c)),y}return ne.cancel=se,ne.flush=me,ne}return h5=s,h5}var FL=iS();const LL=Cc(FL);var _L=!!(typeof window<"u"&&window.document&&window.document.createElement),d5,i9;function NL(){if(i9)return d5;i9=1;var e=iS(),t=n8(),n="Expected a function";function r(i,o,s){var l=!0,c=!0;if(typeof i!="function")throw new TypeError(n);return t(s)&&(l="leading"in s?!!s.leading:l,c="trailing"in s?!!s.trailing:c),e(i,o,{leading:l,maxWait:o,trailing:c})}return d5=r,d5}var HL=NL();const GL=Cc(HL);function oS(e,t){if(_L){if(!e)return t;var n;return PL(e)?n=e():"current"in e?n=e.current:n=e,n}}var jL=function(e){var t=function(n,r,i){var o=G.useRef(!1),s=G.useRef([]),l=G.useRef([]),c=G.useRef();e(function(){var h,d=Array.isArray(i)?i:[i],g=d.map(function(v){return oS(v)});if(!o.current){o.current=!0,s.current=g,l.current=r,c.current=n();return}(g.length!==s.current.length||!Ww(s.current,g)||!Ww(l.current,r))&&((h=c.current)===null||h===void 0||h.call(c),s.current=g,l.current=r,c.current=n())}),SL(function(){var h;(h=c.current)===null||h===void 0||h.call(c),o.current=!1})};return t},$L=jL(G.useEffect);function ci(e,t,n){n===void 0&&(n={});var r=n.enable,i=r===void 0?!0:r,o=tS(t);$L(function(){if(i){var s=oS(n.target,window);if(s!=null&&s.addEventListener){var l=function(h){return o.current(h)},c=Array.isArray(e)?e:[e];return c.forEach(function(h){s.addEventListener(h,l,{capture:n.capture,once:n.once,passive:n.passive})}),function(){c.forEach(function(h){s.removeEventListener(h,l,{capture:n.capture})})}}}},[e,n.capture,n.once,n.passive,i],n.target)}const WL=(e,t,n)=>{ci("pointerdown",r=>{e.pointerDown(r)},{target:n}),ci("pointermove",r=>{x6.set(e,[r.x,r.y]),e.pointerMove(r)},{target:t}),ci("pointerleave",r=>{x6.delete(e),e.pointerLeave(r)},{target:t}),ci("pointerup",r=>{e.pointerUp(r)},{target:t}),ci("dblclick",r=>{F.isFocus(e)&&!F.hasBeenTextEditing(e)&&e.dblClick(r)},{target:n}),ci("pointermove",r=>{sP.set(e,[r.x,r.y]),e.globalPointerMove(r)}),ci("pointerup",r=>{e.globalPointerUp(r)}),ci("keydown",r=>{e.globalKeyDown(r),F.isFocus(e)&&!F.hasBeenTextEditing(e)&&!jO(r.target)&&e.keyDown(r)}),ci("keyup",r=>{F.isFocus(e)&&!F.hasBeenTextEditing(e)&&(e==null||e.keyUp(r))}),ci("copy",r=>{F.isFocus(e)&&!F.hasBeenTextEditing(e)&&(r.preventDefault(),Ow(e,ua.copy,r.clipboardData))}),ci("paste",async r=>{if(F.isFocus(e)&&!F.isReadonly(e)&&!F.hasBeenTextEditing(e)){const i=F.getMovingPointInBoard(e);if(i){const o=Dt(e,Bt(e,i[0],i[1])),s=await qI(r.clipboardData);e.insertFragment(s,o,ua.paste)}}}),ci("cut",r=>{F.isFocus(e)&&!F.isReadonly(e)&&!F.hasBeenTextEditing(e)&&(r.preventDefault(),Ow(e,ua.cut,r.clipboardData),Q4(e))}),ci("drop",r=>{F.isReadonly(e)||(r.preventDefault(),e.drop(r))},{target:t}),ci("dragover",r=>{r.preventDefault()},{target:t})},zL=(e,t)=>{ci("scroll",r=>{if(EI(e))TP(e,!1);else{const{scrollLeft:i,scrollTop:o}=r.target;EP(e,i,o)}},{target:t}),ci("touchstart",r=>{r.preventDefault()},{target:t,passive:!1}),ci("wheel",r=>{if(r.metaKey||r.ctrlKey){r.preventDefault();const{deltaX:i,deltaY:o}=r,s=e.viewport.zoom,l=Math.sign(o),c=yO*100,h=Math.abs(o);let d=o;h>c&&(d=c*l);let g=s-d/100;g+=Math.log10(Math.max(1,s))*-l*Math.min(1,h/20),fn.updateZoom(e,g,F.getMovingPointInBoard(e))}},{target:t,passive:!1});const n=G.useRef(!1);G.useEffect(()=>{const r=new ResizeObserver(()=>{if(!n.current){n.current=!0;return}z4(e),V4(e),p3(e)});return r.observe(F.getBoardContainer(e)),()=>{r&&r.disconnect()}},[])},r8=G.createContext(null),Dr=()=>{const e=G.useContext(r8);if(!e)throw new Error("The `useBoard` hook must be used inside the <Plait> component's context.");const{board:t}=e;return t},sS=()=>{const e=G.useContext(r8);if(!e)throw new Error("The `useBoard` hook must be used inside the <Plait> component's context.");const{listRender:t}=e;return t},aS=({style:e,className:t,children:n,afterInit:r})=>{var x,E;const i=G.useRef(null),o=G.useRef(null),s=G.useRef(null),l=G.useRef(null),c=G.useRef(null),h=G.useRef(null),d=G.useRef(null),g=G.useRef(null),v=Dr(),y=sS();return G.useEffect(()=>{const T=ck.svg(i.current,{options:{roughness:0,strokeWidth:1}});v6.set(v,T),y6.set(v,i.current),C6.set(v,!0),jl.set(v,{lowerHost:o.current,host:s.current,upperHost:l.current,topHost:c.current,activeHost:h.current,container:g.current,viewportContainer:d.current});const D=new eL;return w6.set(v,D),p6.set(v,new Map),y.initialized||(y.initialize(v.children,{board:v,parent:v,parentG:F.getElementHost(v)}),r&&r(v)),z4(v),V4(v),wI(v),()=>{w6.delete(v),f3.delete(v),c3.delete(v),jl.delete(v),C6.delete(v),y6.delete(v),v6.delete(v),p6.delete(v)}},[]),WL(v,d,i),zL(v,d),M.jsx("div",{className:sn(t,wO,`${VL()}`,`theme-${(x=v.theme)==null?void 0:x.themeColorMode}`,`pointer-${v.pointer}`,{focused:F.isFocus(v),readonly:F.isReadonly(v),"disabled-scroll":((E=v.options)==null?void 0:E.disabledScrollOnNonFocus)&&!F.isFocus(v)}),ref:g,style:e,children:M.jsxs("div",{className:"viewport-container",ref:d,style:{width:"100%",height:"100%",overflow:"auto"},children:[M.jsxs("svg",{ref:i,width:"100%",height:"100%",style:{position:"relative"},className:"board-host-svg",children:[M.jsx("g",{className:"element-lower-host",ref:o}),M.jsx("g",{className:"element-host",ref:s}),M.jsx("g",{className:"element-upper-host",ref:l}),M.jsx("g",{className:"element-top-host",ref:c})]}),M.jsx("svg",{width:"100%",height:"100%",className:"board-active-svg",children:M.jsx("g",{className:"active-host-g",ref:h})}),n]})})},VL=()=>XO?"safari":KO?"chrome":UO?"firefox":"";var UL={transform(e,t){var{current:n,affinity:r}=e;if(n!=null){var i=Y.transform(n,t,{affinity:r});e.current=i,i==null&&e.unref()}}},XL={transform(e,t){var{current:n,affinity:r}=e;if(n!=null){var i=vn.transform(n,t,{affinity:r});e.current=i,i==null&&e.unref()}}},KL={transform(e,t){var{current:n,affinity:r}=e;if(n!=null){var i=Ee.transform(n,t,{affinity:r});e.current=i,i==null&&e.unref()}}},y3=new WeakMap,w3=new WeakMap,Ig=new WeakMap,lS=new WeakMap,o9=new WeakMap,s9=new WeakMap,a9=new WeakMap,Y={ancestors(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=t,r=Y.levels(e,t);return n?r=r.slice(1):r=r.slice(0,-1),r},common(e,t){for(var n=[],r=0;r<e.length&&r<t.length;r++){var i=e[r],o=t[r];if(i!==o)break;n.push(i)}return n},compare(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0},endsAfter(e,t){var n=e.length-1,r=e.slice(0,n),i=t.slice(0,n),o=e[n],s=t[n];return Y.equals(r,i)&&o>s},endsAt(e,t){var n=e.length,r=e.slice(0,n),i=t.slice(0,n);return Y.equals(r,i)},endsBefore(e,t){var n=e.length-1,r=e.slice(0,n),i=t.slice(0,n),o=e[n],s=t[n];return Y.equals(r,i)&&o<s},equals(e,t){return e.length===t.length&&e.every((n,r)=>n===t[r])},hasPrevious(e){return e[e.length-1]>0},isAfter(e,t){return Y.compare(e,t)===1},isAncestor(e,t){return e.length<t.length&&Y.compare(e,t)===0},isBefore(e,t){return Y.compare(e,t)===-1},isChild(e,t){return e.length===t.length+1&&Y.compare(e,t)===0},isCommon(e,t){return e.length<=t.length&&Y.compare(e,t)===0},isDescendant(e,t){return e.length>t.length&&Y.compare(e,t)===0},isParent(e,t){return e.length+1===t.length&&Y.compare(e,t)===0},isPath(e){return Array.isArray(e)&&(e.length===0||typeof e[0]=="number")},isSibling(e,t){if(e.length!==t.length)return!1;var n=e.slice(0,-1),r=t.slice(0,-1),i=e[e.length-1],o=t[t.length-1];return i!==o&&Y.equals(n,r)},levels(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=t,r=[],i=0;i<=e.length;i++)r.push(e.slice(0,i));return n&&r.reverse(),r},next(e){if(e.length===0)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var t=e[e.length-1];return e.slice(0,-1).concat(t+1)},operationCanTransformPath(e){switch(e.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(e){if(e.length===0)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(e.length===0)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var t=e[e.length-1];if(t<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(t-1)},relative(e,t){if(!Y.isAncestor(t,e)&&!Y.equals(e,t))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(t,"], because it is not above or equal to the path."));return e.slice(t.length)},transform(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return null;var r=[...e],{affinity:i="forward"}=n;if(e.length===0)return r;switch(t.type){case"insert_node":{var{path:o}=t;(Y.equals(o,r)||Y.endsBefore(o,r)||Y.isAncestor(o,r))&&(r[o.length-1]+=1);break}case"remove_node":{var{path:s}=t;if(Y.equals(s,r)||Y.isAncestor(s,r))return null;Y.endsBefore(s,r)&&(r[s.length-1]-=1);break}case"merge_node":{var{path:l,position:c}=t;Y.equals(l,r)||Y.endsBefore(l,r)?r[l.length-1]-=1:Y.isAncestor(l,r)&&(r[l.length-1]-=1,r[l.length]+=c);break}case"split_node":{var{path:h,position:d}=t;if(Y.equals(h,r)){if(i==="forward")r[r.length-1]+=1;else if(i!=="backward")return null}else Y.endsBefore(h,r)?r[h.length-1]+=1:Y.isAncestor(h,r)&&e[h.length]>=d&&(r[h.length-1]+=1,r[h.length]-=d);break}case"move_node":{var{path:g,newPath:v}=t;if(Y.equals(g,v))return r;if(Y.isAncestor(g,r)||Y.equals(g,r)){var y=v.slice();return Y.endsBefore(g,v)&&g.length<v.length&&(y[g.length-1]-=1),y.concat(r.slice(g.length))}else Y.isSibling(g,v)&&(Y.isAncestor(v,r)||Y.equals(v,r))?Y.endsBefore(g,r)?r[g.length-1]-=1:r[g.length-1]+=1:Y.endsBefore(v,r)||Y.equals(v,r)||Y.isAncestor(v,r)?(Y.endsBefore(g,r)&&(r[g.length-1]-=1),r[v.length-1]+=1):Y.endsBefore(g,r)&&(Y.equals(v,r)&&(r[v.length-1]+=1),r[g.length-1]-=1);break}}return r}};function Qg(e){"@babel/helpers - typeof";return Qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qg(e)}function YL(e,t){if(Qg(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Qg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qL(e){var t=YL(e,"string");return Qg(t)==="symbol"?t:String(t)}function Xi(e,t,n){return t=qL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Kn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l9(Object(n),!0).forEach(function(r){Xi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var u9=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return[...t.slice(0,n),...i,...t.slice(n)]},Jg=function(t,n,r){for(var i=arguments.length,o=new Array(i>3?i-3:0),s=3;s<i;s++)o[s-3]=arguments[s];return[...t.slice(0,n),...o,...t.slice(n+r)]},c9=Jg,i8=(e,t,n)=>{if(t.length===0)throw new Error("Cannot modify the editor");for(var r=Ke.get(e,t),i=t.slice(),o=n(r);i.length>1;){var s=i.pop(),l=Ke.get(e,i);o=Kn(Kn({},l),{},{children:Jg(l.children,s,1,o)})}var c=i.pop();e.children=Jg(e.children,c,1,o)},Vd=(e,t,n)=>{t.length===0?e.children=n(e.children):i8(e,t,r=>{if(ot.isText(r))throw new Error("Cannot get the element at path [".concat(t,"] because it refers to a leaf node: ").concat(Sr.stringify(r)));return Kn(Kn({},r),{},{children:n(r.children)})})},f9=(e,t,n)=>i8(e,t,r=>{if(!ot.isText(r))throw new Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat(Sr.stringify(r)));return n(r)}),ZL={transform(e,t){var n=!1;switch(t.type){case"insert_node":{var{path:r,node:i}=t;Vd(e,Y.parent(r),Se=>{var Te=r[r.length-1];if(Te>Se.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(r,"] because the destination is past the end of the node."));return u9(Se,Te,i)}),n=!0;break}case"insert_text":{var{path:o,offset:s,text:l}=t;if(l.length===0)break;f9(e,o,Se=>{var Te=Se.text.slice(0,s),ke=Se.text.slice(s);return Kn(Kn({},Se),{},{text:Te+l+ke})}),n=!0;break}case"merge_node":{var{path:c}=t,h=c[c.length-1],d=Y.previous(c),g=d[d.length-1];Vd(e,Y.parent(c),Se=>{var Te=Se[h],ke=Se[g],vt;if(ot.isText(Te)&&ot.isText(ke))vt=Kn(Kn({},ke),{},{text:ke.text+Te.text});else if(!ot.isText(Te)&&!ot.isText(ke))vt=Kn(Kn({},ke),{},{children:ke.children.concat(Te.children)});else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(c,"] to nodes of different interfaces: ").concat(Sr.stringify(Te)," ").concat(Sr.stringify(ke)));return Jg(Se,g,2,vt)}),n=!0;break}case"move_node":{var{path:v,newPath:y}=t,x=v[v.length-1];if(Y.isAncestor(v,y))throw new Error("Cannot move a path [".concat(v,"] to new path [").concat(y,"] because the destination is inside itself."));var E=Ke.get(e,v);Vd(e,Y.parent(v),Se=>c9(Se,x,1));var T=Y.transform(v,t),D=T[T.length-1];Vd(e,Y.parent(T),Se=>u9(Se,D,E)),n=!0;break}case"remove_node":{var{path:S}=t,R=S[S.length-1];if(Vd(e,Y.parent(S),Se=>c9(Se,R,1)),e.selection){var k=Kn({},e.selection);for(var[O,$]of Ee.points(k)){var z=vn.transform(O,t);if(k!=null&&z!=null)k[$]=z;else{var K=void 0,te=void 0;for(var[se,me]of Ke.texts(e))if(Y.compare(me,S)===-1)K=[se,me];else{te=[se,me];break}var ne=!1;K&&te&&(Y.equals(te[1],S)?ne=!Y.hasPrevious(te[1]):ne=Y.common(K[1],S).length<Y.common(te[1],S).length),K&&!ne?k[$]={path:K[1],offset:K[0].text.length}:te?k[$]={path:te[1],offset:0}:k=null}}e.selection=k}break}case"remove_text":{var{path:oe,offset:ve,text:ge}=t;if(ge.length===0)break;f9(e,oe,Se=>{var Te=Se.text.slice(0,ve),ke=Se.text.slice(ve+ge.length);return Kn(Kn({},Se),{},{text:Te+ke})}),n=!0;break}case"set_node":{var{path:Me,properties:Pe,newProperties:he}=t;if(Me.length===0)throw new Error("Cannot set properties on the root node!");i8(e,Me,Se=>{var Te=Kn({},Se);for(var ke in he){if(ke==="children"||ke==="text")throw new Error('Cannot set the "'.concat(ke,'" property of nodes!'));var vt=he[ke];vt==null?delete Te[ke]:Te[ke]=vt}for(var Ye in Pe)he.hasOwnProperty(Ye)||delete Te[Ye];return Te});break}case"set_selection":{var{newProperties:le}=t;if(le==null){e.selection=null;break}if(e.selection==null){if(!Ee.isRange(le))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(Sr.stringify(le)," when there is no current selection."));e.selection=Kn({},le);break}var we=Kn({},e.selection);for(var U in le){var xe=le[U];if(xe==null){if(U==="anchor"||U==="focus")throw new Error('Cannot remove the "'.concat(U,'" selection property'));delete we[U]}else we[U]=xe}e.selection=we;break}case"split_node":{var{path:Ie,position:Le,properties:$e}=t,Fe=Ie[Ie.length-1];if(Ie.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(Ie,"] because the root node cannot be split."));Vd(e,Y.parent(Ie),Se=>{var Te=Se[Fe],ke,vt;if(ot.isText(Te)){var Ye=Te.text.slice(0,Le),At=Te.text.slice(Le);ke=Kn(Kn({},Te),{},{text:Ye}),vt=Kn(Kn({},$e),{},{text:At})}else{var hn=Te.children.slice(0,Le),Mt=Te.children.slice(Le);ke=Kn(Kn({},Te),{},{children:hn}),vt=Kn(Kn({},$e),{},{children:Mt})}return Jg(Se,Fe,1,ke,vt)}),n=!0;break}}if(n&&e.selection){var Ze=Kn({},e.selection);for(var[et,Q]of Ee.points(Ze))Ze[Q]=vn.transform(et,t);e.selection=Ze}}},QL={insertNodes(e,t,n){e.insertNodes(t,n)},liftNodes(e,t){e.liftNodes(t)},mergeNodes(e,t){e.mergeNodes(t)},moveNodes(e,t){e.moveNodes(t)},removeNodes(e,t){e.removeNodes(t)},setNodes(e,t,n){e.setNodes(t,n)},splitNodes(e,t){e.splitNodes(t)},unsetNodes(e,t,n){e.unsetNodes(t,n)},unwrapNodes(e,t){e.unwrapNodes(t)},wrapNodes(e,t,n){e.wrapNodes(t,n)}},JL={collapse(e,t){e.collapse(t)},deselect(e){e.deselect()},move(e,t){e.move(t)},select(e,t){e.select(t)},setPoint(e,t,n){e.setPoint(t,n)},setSelection(e,t){e.setSelection(t)}},fi=e=>typeof e=="object"&&e!==null,uS=(e,t)=>{for(var n in e){var r=e[n],i=t[n];if(Array.isArray(r)&&Array.isArray(i)){if(r.length!==i.length)return!1;for(var o=0;o<r.length;o++)if(r[o]!==i[o])return!1}else if(fi(r)&&fi(i)){if(!uS(r,i))return!1}else if(r!==i)return!1}for(var s in t)if(e[s]===void 0&&t[s]!==void 0)return!1;return!0};function e_(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function tu(e,t){if(e==null)return{};var n=e_(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var t_=["anchor","focus"];function h9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function n_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?h9(Object(n),!0).forEach(function(r){Xi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Ee={edges(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=t,{anchor:r,focus:i}=e;return Ee.isBackward(e)===n?[r,i]:[i,r]},end(e){var[,t]=Ee.edges(e);return t},equals(e,t){return vn.equals(e.anchor,t.anchor)&&vn.equals(e.focus,t.focus)},surrounds(e,t){var n=Ee.intersection(e,t);return n?Ee.equals(n,t):!1},includes(e,t){if(Ee.isRange(t)){if(Ee.includes(e,t.anchor)||Ee.includes(e,t.focus))return!0;var[n,r]=Ee.edges(e),[i,o]=Ee.edges(t);return vn.isBefore(n,i)&&vn.isAfter(r,o)}var[s,l]=Ee.edges(e),c=!1,h=!1;return vn.isPoint(t)?(c=vn.compare(t,s)>=0,h=vn.compare(t,l)<=0):(c=Y.compare(t,s.path)>=0,h=Y.compare(t,l.path)<=0),c&&h},intersection(e,t){var n=tu(e,t_),[r,i]=Ee.edges(e),[o,s]=Ee.edges(t),l=vn.isBefore(r,o)?o:r,c=vn.isBefore(i,s)?i:s;return vn.isBefore(c,l)?null:n_({anchor:l,focus:c},n)},isBackward(e){var{anchor:t,focus:n}=e;return vn.isAfter(t,n)},isCollapsed(e){var{anchor:t,focus:n}=e;return vn.equals(t,n)},isExpanded(e){return!Ee.isCollapsed(e)},isForward(e){return!Ee.isBackward(e)},isRange(e){return fi(e)&&vn.isPoint(e.anchor)&&vn.isPoint(e.focus)},*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[t]=Ee.edges(e);return t},transform(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e===null)return null;var{affinity:r="inward"}=n,i,o;if(r==="inward"){var s=Ee.isCollapsed(e);Ee.isForward(e)?(i="forward",o=s?i:"backward"):(i="backward",o=s?i:"forward")}else r==="outward"?Ee.isForward(e)?(i="backward",o="forward"):(i="forward",o="backward"):(i=r,o=r);var l=vn.transform(e.anchor,t,{affinity:i}),c=vn.transform(e.focus,t,{affinity:o});return!l||!c?null:{anchor:l,focus:c}}},d9=function(t){var{deep:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!fi(t))return!1;var r=typeof t.apply=="function";if(r)return!1;var i=n?Ke.isNodeList(t.children):Array.isArray(t.children);return i},lt={isAncestor(e){var{deep:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return fi(e)&&Ke.isNodeList(e.children,{deep:t})},isElement:d9,isElementList(e){var{deep:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(e)&&e.every(n=>lt.isElement(n,{deep:t}))},isElementProps(e){return e.children!==void 0},isElementType:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return d9(t)&&t[r]===n},matches(e,t){for(var n in t)if(n!=="children"&&e[n]!==t[n])return!1;return!0}},r_=["children"],i_=["text"],Ke={ancestor(e,t){var n=Ke.get(e,t);if(ot.isText(n))throw new Error("Cannot get the ancestor node at path [".concat(t,"] because it refers to a text node instead: ").concat(Sr.stringify(n)));return n},ancestors(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var r of Y.ancestors(t,n)){var i=Ke.ancestor(e,r),o=[i,r];yield o}}()},child(e,t){if(ot.isText(e))throw new Error("Cannot get the child of a text node: ".concat(Sr.stringify(e)));var n=e.children[t];if(n==null)throw new Error("Cannot get child at index `".concat(t,"` in node: ").concat(Sr.stringify(e)));return n},children(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var{reverse:r=!1}=n,i=Ke.ancestor(e,t),{children:o}=i,s=r?o.length-1:0;r?s>=0:s<o.length;){var l=Ke.child(i,s),c=t.concat(s);yield[l,c],s=r?s-1:s+1}}()},common(e,t,n){var r=Y.common(t,n),i=Ke.get(e,r);return[i,r]},descendant(e,t){var n=Ke.get(e,t);if(L.isEditor(n))throw new Error("Cannot get the descendant node at path [".concat(t,"] because it refers to the root editor node instead: ").concat(Sr.stringify(n)));return n},descendants(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[n,r]of Ke.nodes(e,t))r.length!==0&&(yield[n,r])}()},elements(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[n,r]of Ke.nodes(e,t))lt.isElement(n)&&(yield[n,r])}()},extractProps(e){if(lt.isAncestor(e)){var t=tu(e,r_);return t}else{var t=tu(e,i_);return t}},first(e,t){for(var n=t.slice(),r=Ke.get(e,n);r&&!(ot.isText(r)||r.children.length===0);)r=r.children[0],n.push(0);return[r,n]},fragment(e,t){if(ot.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(Sr.stringify(e)));var n=xk({children:e.children},r=>{var[i,o]=Ee.edges(t),s=Ke.nodes(r,{reverse:!0,pass:v=>{var[,y]=v;return!Ee.includes(t,y)}});for(var[,l]of s){if(!Ee.includes(t,l)){var c=Ke.parent(r,l),h=l[l.length-1];c.children.splice(h,1)}if(Y.equals(l,o.path)){var d=Ke.leaf(r,l);d.text=d.text.slice(0,o.offset)}if(Y.equals(l,i.path)){var g=Ke.leaf(r,l);g.text=g.text.slice(i.offset)}}L.isEditor(r)&&(r.selection=null)});return n.children},get(e,t){var n=Ke.getIf(e,t);if(n===void 0)throw new Error("Cannot find a descendant at path [".concat(t,"] in node: ").concat(Sr.stringify(e)));return n},getIf(e,t){for(var n=e,r=0;r<t.length;r++){var i=t[r];if(ot.isText(n)||!n.children[i])return;n=n.children[i]}return n},has(e,t){for(var n=e,r=0;r<t.length;r++){var i=t[r];if(ot.isText(n)||!n.children[i])return!1;n=n.children[i]}return!0},isNode(e){var{deep:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ot.isText(e)||lt.isElement(e,{deep:t})||L.isEditor(e,{deep:t})},isNodeList(e){var{deep:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(e)&&e.every(n=>Ke.isNode(n,{deep:t}))},last(e,t){for(var n=t.slice(),r=Ke.get(e,n);r&&!(ot.isText(r)||r.children.length===0);){var i=r.children.length-1;r=r.children[i],n.push(i)}return[r,n]},leaf(e,t){var n=Ke.get(e,t);if(!ot.isText(n))throw new Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat(Sr.stringify(n)));return n},levels(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var r of Y.levels(t,n)){var i=Ke.get(e,r);yield[i,r]}}()},matches(e,t){return lt.isElement(e)&&lt.isElementProps(t)&&lt.matches(e,t)||ot.isText(e)&&ot.isTextProps(t)&&ot.matches(e,t)},nodes(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var{pass:n,reverse:r=!1}=t,{from:i=[],to:o}=t,s=new Set,l=[],c=e;!(o&&(r?Y.isBefore(l,o):Y.isAfter(l,o)));){if(s.has(c)||(yield[c,l]),!s.has(c)&&!ot.isText(c)&&c.children.length!==0&&(n==null||n([c,l])===!1)){s.add(c);var h=r?c.children.length-1:0;Y.isAncestor(l,i)&&(h=i[l.length]),l=l.concat(h),c=Ke.get(e,l);continue}if(l.length===0)break;if(!r){var d=Y.next(l);if(Ke.has(e,d)){l=d,c=Ke.get(e,l);continue}}if(r&&l[l.length-1]!==0){var g=Y.previous(l);l=g,c=Ke.get(e,l);continue}l=Y.parent(l),c=Ke.get(e,l),s.add(c)}}()},parent(e,t){var n=Y.parent(t),r=Ke.get(e,n);if(ot.isText(r))throw new Error("Cannot get the parent of path [".concat(t,"] because it does not exist in the root."));return r},string(e){return ot.isText(e)?e.text:e.children.map(Ke.string).join("")},texts(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[n,r]of Ke.nodes(e,t))ot.isText(n)&&(yield[n,r])}()}};function g9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Jn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?g9(Object(n),!0).forEach(function(r){Xi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Wl={isNodeOperation(e){return Wl.isOperation(e)&&e.type.endsWith("_node")},isOperation(e){if(!fi(e))return!1;switch(e.type){case"insert_node":return Y.isPath(e.path)&&Ke.isNode(e.node);case"insert_text":return typeof e.offset=="number"&&typeof e.text=="string"&&Y.isPath(e.path);case"merge_node":return typeof e.position=="number"&&Y.isPath(e.path)&&fi(e.properties);case"move_node":return Y.isPath(e.path)&&Y.isPath(e.newPath);case"remove_node":return Y.isPath(e.path)&&Ke.isNode(e.node);case"remove_text":return typeof e.offset=="number"&&typeof e.text=="string"&&Y.isPath(e.path);case"set_node":return Y.isPath(e.path)&&fi(e.properties)&&fi(e.newProperties);case"set_selection":return e.properties===null&&Ee.isRange(e.newProperties)||e.newProperties===null&&Ee.isRange(e.properties)||fi(e.properties)&&fi(e.newProperties);case"split_node":return Y.isPath(e.path)&&typeof e.position=="number"&&fi(e.properties);default:return!1}},isOperationList(e){return Array.isArray(e)&&e.every(t=>Wl.isOperation(t))},isSelectionOperation(e){return Wl.isOperation(e)&&e.type.endsWith("_selection")},isTextOperation(e){return Wl.isOperation(e)&&e.type.endsWith("_text")},inverse(e){switch(e.type){case"insert_node":return Jn(Jn({},e),{},{type:"remove_node"});case"insert_text":return Jn(Jn({},e),{},{type:"remove_text"});case"merge_node":return Jn(Jn({},e),{},{type:"split_node",path:Y.previous(e.path)});case"move_node":{var{newPath:t,path:n}=e;if(Y.equals(t,n))return e;if(Y.isSibling(n,t))return Jn(Jn({},e),{},{path:t,newPath:n});var r=Y.transform(n,e),i=Y.transform(Y.next(n),e);return Jn(Jn({},e),{},{path:r,newPath:i})}case"remove_node":return Jn(Jn({},e),{},{type:"insert_node"});case"remove_text":return Jn(Jn({},e),{},{type:"insert_text"});case"set_node":{var{properties:o,newProperties:s}=e;return Jn(Jn({},e),{},{properties:s,newProperties:o})}case"set_selection":{var{properties:l,newProperties:c}=e;return l==null?Jn(Jn({},e),{},{properties:c,newProperties:null}):c==null?Jn(Jn({},e),{},{properties:null,newProperties:l}):Jn(Jn({},e),{},{properties:c,newProperties:l})}case"split_node":return Jn(Jn({},e),{},{type:"merge_node",path:Y.next(e.path)})}}},o_=function(t){var{deep:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!fi(t))return!1;var r=typeof t.addMark=="function"&&typeof t.apply=="function"&&typeof t.deleteFragment=="function"&&typeof t.insertBreak=="function"&&typeof t.insertSoftBreak=="function"&&typeof t.insertFragment=="function"&&typeof t.insertNode=="function"&&typeof t.insertText=="function"&&typeof t.isElementReadOnly=="function"&&typeof t.isInline=="function"&&typeof t.isSelectable=="function"&&typeof t.isVoid=="function"&&typeof t.normalizeNode=="function"&&typeof t.onChange=="function"&&typeof t.removeMark=="function"&&typeof t.getDirtyPaths=="function"&&(t.marks===null||fi(t.marks))&&(t.selection===null||Ee.isRange(t.selection))&&(!n||Ke.isNodeList(t.children))&&Wl.isOperationList(t.operations);return r},L={above(e,t){return e.above(t)},addMark(e,t,n){e.addMark(t,n)},after(e,t,n){return e.after(t,n)},before(e,t,n){return e.before(t,n)},deleteBackward(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:n="character"}=t;e.deleteBackward(n)},deleteForward(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:n="character"}=t;e.deleteForward(n)},deleteFragment(e,t){e.deleteFragment(t)},edges(e,t){return e.edges(t)},elementReadOnly(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.elementReadOnly(t)},end(e,t){return e.end(t)},first(e,t){return e.first(t)},fragment(e,t){return e.fragment(t)},hasBlocks(e,t){return e.hasBlocks(t)},hasInlines(e,t){return e.hasInlines(t)},hasPath(e,t){return e.hasPath(t)},hasTexts(e,t){return e.hasTexts(t)},insertBreak(e){e.insertBreak()},insertFragment(e,t,n){e.insertFragment(t,n)},insertNode(e,t){e.insertNode(t)},insertSoftBreak(e){e.insertSoftBreak()},insertText(e,t){e.insertText(t)},isBlock(e,t){return e.isBlock(t)},isEdge(e,t,n){return e.isEdge(t,n)},isEditor(e){return o_(e)},isElementReadOnly(e,t){return e.isElementReadOnly(t)},isEmpty(e,t){return e.isEmpty(t)},isEnd(e,t,n){return e.isEnd(t,n)},isInline(e,t){return e.isInline(t)},isNormalizing(e){return e.isNormalizing()},isSelectable(e,t){return e.isSelectable(t)},isStart(e,t,n){return e.isStart(t,n)},isVoid(e,t){return e.isVoid(t)},last(e,t){return e.last(t)},leaf(e,t,n){return e.leaf(t,n)},levels(e,t){return e.levels(t)},marks(e){return e.getMarks()},next(e,t){return e.next(t)},node(e,t,n){return e.node(t,n)},nodes(e,t){return e.nodes(t)},normalize(e,t){e.normalize(t)},parent(e,t,n){return e.parent(t,n)},path(e,t,n){return e.path(t,n)},pathRef(e,t,n){return e.pathRef(t,n)},pathRefs(e){return e.pathRefs()},point(e,t,n){return e.point(t,n)},pointRef(e,t,n){return e.pointRef(t,n)},pointRefs(e){return e.pointRefs()},positions(e,t){return e.positions(t)},previous(e,t){return e.previous(t)},range(e,t,n){return e.range(t,n)},rangeRef(e,t,n){return e.rangeRef(t,n)},rangeRefs(e){return e.rangeRefs()},removeMark(e,t){e.removeMark(t)},setNormalizing(e,t){e.setNormalizing(t)},start(e,t){return e.start(t)},string(e,t,n){return e.string(t,n)},unhangRange(e,t,n){return e.unhangRange(t,n)},void(e,t){return e.void(t)},withoutNormalizing(e,t){e.withoutNormalizing(t)},shouldMergeNodesRemovePrevNode:(e,t,n)=>e.shouldMergeNodesRemovePrevNode(t,n)},s_={isSpan(e){return Array.isArray(e)&&e.length===2&&e.every(Y.isPath)}};function p9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function m9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?p9(Object(n),!0).forEach(function(r){Xi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var vn={compare(e,t){var n=Y.compare(e.path,t.path);return n===0?e.offset<t.offset?-1:e.offset>t.offset?1:0:n},isAfter(e,t){return vn.compare(e,t)===1},isBefore(e,t){return vn.compare(e,t)===-1},equals(e,t){return e.offset===t.offset&&Y.equals(e.path,t.path)},isPoint(e){return fi(e)&&typeof e.offset=="number"&&Y.isPath(e.path)},transform(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e===null)return null;var{affinity:r="forward"}=n,{path:i,offset:o}=e;switch(t.type){case"insert_node":case"move_node":{i=Y.transform(i,t,n);break}case"insert_text":{Y.equals(t.path,i)&&(t.offset<o||t.offset===o&&r==="forward")&&(o+=t.text.length);break}case"merge_node":{Y.equals(t.path,i)&&(o+=t.position),i=Y.transform(i,t,n);break}case"remove_text":{Y.equals(t.path,i)&&t.offset<=o&&(o-=Math.min(o-t.offset,t.text.length));break}case"remove_node":{if(Y.equals(t.path,i)||Y.isAncestor(t.path,i))return null;i=Y.transform(i,t,n);break}case"split_node":{if(Y.equals(t.path,i)){if(t.position===o&&r==null)return null;(t.position<o||t.position===o&&r==="forward")&&(o-=t.position,i=Y.transform(i,t,m9(m9({},n),{},{affinity:"forward"})))}else i=Y.transform(i,t,n);break}default:return e}return{path:i,offset:o}}},v9=void 0,Sr={setScrubber(e){v9=e},stringify(e){return JSON.stringify(e,v9)}},a_=["text"],l_=["anchor","focus","merge"];function y9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Gl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?y9(Object(n),!0).forEach(function(r){Xi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var ot={equals(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:r=!1}=n;function i(o){var s=tu(o,a_);return s}return uS(r?i(e):e,r?i(t):t)},isText(e){return fi(e)&&typeof e.text=="string"},isTextList(e){return Array.isArray(e)&&e.every(t=>ot.isText(t))},isTextProps(e){return e.text!==void 0},matches(e,t){for(var n in t)if(n!=="text"&&(!e.hasOwnProperty(n)||e[n]!==t[n]))return!1;return!0},decorations(e,t){var n=[{leaf:Gl({},e)}];for(var r of t){var{anchor:i,focus:o,merge:s}=r,l=tu(r,l_),[c,h]=Ee.edges(r),d=[],g=0,v=c.offset,y=h.offset,x=s??Object.assign;for(var{leaf:E}of n){var{length:T}=E.text,D=g;if(g+=T,v<=D&&g<=y){x(E,l),d.push({leaf:E});continue}if(v!==y&&(v===g||y===D)||v>g||y<D||y===D&&D!==0){d.push({leaf:E});continue}var S=E,R=void 0,k=void 0;if(y<g){var O=y-D;k={leaf:Gl(Gl({},S),{},{text:S.text.slice(O)})},S=Gl(Gl({},S),{},{text:S.text.slice(0,O)})}if(v>D){var $=v-D;R={leaf:Gl(Gl({},S),{},{text:S.text.slice(0,$)})},S=Gl(Gl({},S),{},{text:S.text.slice($)})}x(S,l),R&&d.push(R),d.push({leaf:S}),k&&d.push(k)}n=d}if(n.length>1){var z=0;for(var[K,te]of n.entries()){var se=z,me=se+te.leaf.text.length,ne={start:se,end:me};K===0&&(ne.isFirst=!0),K===n.length-1&&(ne.isLast=!0),te.position=ne,z=me}}return n}},o8=e=>e.selection?e.selection:e.children.length>0?L.end(e,[]):[0],G0=(e,t)=>{var[n]=L.node(e,t);return r=>r===n},s8=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=!n,i=n?g_(t):t,o=Ht.None,s=Ht.None,l=0,c=null,h=null;for(var d of i){var g=d.codePointAt(0);if(!g)break;var v=D_(d,g);if([o,s]=r?[s,v]:[v,o],e0(o,Ht.ZWJ)&&e0(s,Ht.ExtPict)&&(r?c=w9(t.substring(0,l)):c=w9(t.substring(0,t.length-l)),!c)||e0(o,Ht.RI)&&e0(s,Ht.RI)&&(h!==null?h=!h:r?h=!0:h=b_(t.substring(0,t.length-l)),!h)||o!==Ht.None&&s!==Ht.None&&B_(o,s))break;l+=d.length}return l||1},u_=/\s/,c_=/[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,f_=/['\u2018\u2019]/,h_=function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=0,i=!1;t.length>0;){var o=s8(t,n),[s,l]=a8(t,o,n);if(d_(s,l,n))i=!0,r+=o;else if(!i)r+=o;else break;t=l}return r},a8=(e,t,n)=>{if(n){var r=e.length-t;return[e.slice(r,e.length),e.slice(0,r)]}return[e.slice(0,t),e.slice(t)]},d_=function e(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(u_.test(t))return!1;if(f_.test(t)){var i=s8(n,r),[o,s]=a8(n,i,r);if(e(o,s,r))return!0}return!c_.test(t)},g_=function*(t){for(var n=t.length-1,r=0;r<t.length;r++){var i=t.charAt(n-r);if(m_(i.charCodeAt(0))){var o=t.charAt(n-r-1);if(p_(o.charCodeAt(0))){yield o+i,r++;continue}}yield i}},p_=e=>e>=55296&&e<=56319,m_=e=>e>=56320&&e<=57343,Ht;(function(e){e[e.None=0]="None",e[e.Extend=1]="Extend",e[e.ZWJ=2]="ZWJ",e[e.RI=4]="RI",e[e.Prepend=8]="Prepend",e[e.SpacingMark=16]="SpacingMark",e[e.L=32]="L",e[e.V=64]="V",e[e.T=128]="T",e[e.LV=256]="LV",e[e.LVT=512]="LVT",e[e.ExtPict=1024]="ExtPict",e[e.Any=2048]="Any"})(Ht||(Ht={}));var v_=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,y_=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,w_=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,C_=/^[\u1100-\u115F\uA960-\uA97C]$/,x_=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,E_=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,P_=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,S_=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,T_=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,D_=(e,t)=>{var n=Ht.Any;return e.search(v_)!==-1&&(n|=Ht.Extend),t===8205&&(n|=Ht.ZWJ),t>=127462&&t<=127487&&(n|=Ht.RI),e.search(y_)!==-1&&(n|=Ht.Prepend),e.search(w_)!==-1&&(n|=Ht.SpacingMark),e.search(C_)!==-1&&(n|=Ht.L),e.search(x_)!==-1&&(n|=Ht.V),e.search(E_)!==-1&&(n|=Ht.T),e.search(P_)!==-1&&(n|=Ht.LV),e.search(S_)!==-1&&(n|=Ht.LVT),e.search(T_)!==-1&&(n|=Ht.ExtPict),n};function e0(e,t){return(e&t)!==0}var A_=[[Ht.L,Ht.L|Ht.V|Ht.LV|Ht.LVT],[Ht.LV|Ht.V,Ht.V|Ht.T],[Ht.LVT|Ht.T,Ht.T],[Ht.Any,Ht.Extend|Ht.ZWJ],[Ht.Any,Ht.SpacingMark],[Ht.Prepend,Ht.Any],[Ht.ZWJ,Ht.ExtPict],[Ht.RI,Ht.RI]];function B_(e,t){return A_.findIndex(n=>e0(e,n[0])&&e0(t,n[1]))===-1}var M_=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,w9=e=>e.search(M_)!==-1,R_=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,b_=e=>{var t=e.match(R_);if(t===null)return!1;var n=t[0].length/2;return n%2===1},k_={delete(e,t){e.delete(t)},insertFragment(e,t,n){e.insertFragment(t,n)},insertText(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};L.withoutNormalizing(e,()=>{var{voids:r=!1}=n,{at:i=o8(e)}=n;if(Y.isPath(i)&&(i=L.range(e,i)),Ee.isRange(i))if(Ee.isCollapsed(i))i=i.anchor;else{var o=Ee.end(i);if(!r&&L.void(e,{at:o}))return;var s=Ee.start(i),l=L.pointRef(e,s),c=L.pointRef(e,o);Re.delete(e,{at:i,voids:r});var h=l.unref(),d=c.unref();i=h||d,Re.setSelection(e,{anchor:i,focus:i})}if(!(!r&&L.void(e,{at:i})||L.elementReadOnly(e,{at:i}))){var{path:g,offset:v}=i;t.length>0&&e.apply({type:"insert_text",path:g,offset:v,text:t})}})}};function C9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?C9(Object(n),!0).forEach(function(r){Xi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Re=vm(vm(vm(vm({},ZL),QL),JL),k_),Um=new WeakMap,O_=e=>Um.get(e)||!1,I_=(e,t,n)=>{var r=Um.get(e)||!1;Um.set(e,!0);try{t(),n()}finally{Um.set(e,r)}};function cS(e,t,n){var r=y3.get(e)||[],i=w3.get(e)||new Set,o,s,l=g=>{if(g){var v=g.join(",");s.has(v)||(s.add(v),o.push(g))}};if(n){o=[],s=new Set;for(var c of r){var h=n(c);l(h)}}else o=r,s=i;for(var d of t)l(d);y3.set(e,o),w3.set(e,s)}var F_=(e,t)=>{for(var n of L.pathRefs(e))UL.transform(n,t);for(var r of L.pointRefs(e))XL.transform(r,t);for(var i of L.rangeRefs(e))KL.transform(i,t);if(!O_(e)){var o=Y.operationCanTransformPath(t)?s=>Y.transform(s,t):void 0;cS(e,e.getDirtyPaths(t),o)}Re.transform(e,t),e.operations.push(t),L.normalize(e,{operation:t}),t.type==="set_selection"&&(e.marks=null),Ig.get(e)||(Ig.set(e,!0),Promise.resolve().then(()=>{Ig.set(e,!1),e.onChange({operation:t}),e.operations=[]}))},L_=(e,t)=>{switch(t.type){case"insert_text":case"remove_text":case"set_node":{var{path:n}=t;return Y.levels(n)}case"insert_node":{var{node:r,path:i}=t,o=Y.levels(i),s=ot.isText(r)?[]:Array.from(Ke.nodes(r),se=>{var[,me]=se;return i.concat(me)});return[...o,...s]}case"merge_node":{var{path:l}=t,c=Y.ancestors(l),h=Y.previous(l);return[...c,h]}case"move_node":{var{path:d,newPath:g}=t;if(Y.equals(d,g))return[];var v=[],y=[];for(var x of Y.ancestors(d)){var E=Y.transform(x,t);v.push(E)}for(var T of Y.ancestors(g)){var D=Y.transform(T,t);y.push(D)}var S=y[y.length-1],R=g[g.length-1],k=S.concat(R);return[...v,...y,k]}case"remove_node":{var{path:O}=t,$=Y.ancestors(O);return[...$]}case"split_node":{var{path:z}=t,K=Y.levels(z),te=Y.next(z);return[...K,te]}default:return[]}},__=e=>{var{selection:t}=e;return t?Ke.fragment(e,t):[]},N_=(e,t,n)=>{var[r,i]=t;if(!ot.isText(r)){if(lt.isElement(r)&&r.children.length===0){var o={text:""};Re.insertNodes(e,o,{at:i.concat(0),voids:!0});return}for(var s=L.isEditor(r)?!1:lt.isElement(r)&&(e.isInline(r)||r.children.length===0||ot.isText(r.children[0])||e.isInline(r.children[0])),l=0,c=0;c<r.children.length;c++,l++){var h=Ke.get(e,i);if(!ot.isText(h)){var d=h.children[l],g=h.children[l-1],v=c===r.children.length-1,y=ot.isText(d)||lt.isElement(d)&&e.isInline(d);if(y!==s)y?n!=null&&n.fallbackElement?Re.wrapNodes(e,n.fallbackElement(),{at:i.concat(l),voids:!0}):Re.removeNodes(e,{at:i.concat(l),voids:!0}):Re.unwrapNodes(e,{at:i.concat(l),voids:!0}),l--;else if(lt.isElement(d)){if(e.isInline(d)){if(g==null||!ot.isText(g)){var x={text:""};Re.insertNodes(e,x,{at:i.concat(l),voids:!0}),l++}else if(v){var E={text:""};Re.insertNodes(e,E,{at:i.concat(l+1),voids:!0}),l++}}}else{if(!ot.isText(d)&&!("children"in d)){var T=d;T.children=[]}g!=null&&ot.isText(g)&&(ot.equals(d,g,{loose:!0})?(Re.mergeNodes(e,{at:i.concat(l),voids:!0}),l--):g.text===""?(Re.removeNodes(e,{at:i.concat(l-1),voids:!0}),l--):d.text===""&&(Re.removeNodes(e,{at:i.concat(l),voids:!0}),l--))}}}}},H_=(e,t)=>{var{iteration:n,initialDirtyPathsLength:r}=t,i=r*42;if(n>i)throw new Error("Could not completely normalize the editor after ".concat(i," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},G_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:r=!1,mode:i="lowest",at:o=t.selection,match:s}=n;if(o){var l=L.path(t,o);if(!Ee.isRange(o)||Y.equals(o.focus.path,o.anchor.path)){if(l.length===0)return;l=Y.parent(l)}var c=i==="lowest",[h]=L.levels(t,{at:l,voids:r,match:s,reverse:c});return h}};function x9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function E9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?x9(Object(n),!0).forEach(function(r){Xi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var j_=(e,t,n)=>{var{selection:r}=e;if(r){var i=(g,v)=>{if(!ot.isText(g))return!1;var[y,x]=L.parent(e,v);return!e.isVoid(y)||e.markableVoid(y)},o=Ee.isExpanded(r),s=!1;if(!o){var[l,c]=L.node(e,r);if(l&&i(l,c)){var[h]=L.parent(e,c);s=h&&e.markableVoid(h)}}if(o||s)Re.setNodes(e,{[t]:n},{match:i,split:!0,voids:!0});else{var d=E9(E9({},L.marks(e)||{}),{},{[t]:n});e.marks=d,Ig.get(e)||e.onChange()}}};function P9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function S9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P9(Object(n),!0).forEach(function(r){Xi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var $_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=L.point(t,n,{edge:"end"}),o=L.end(t,[]),s={anchor:i,focus:o},{distance:l=1}=r,c=0,h;for(var d of L.positions(t,S9(S9({},r),{},{at:s}))){if(c>l)break;c!==0&&(h=d),c++}return h};function T9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function D9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T9(Object(n),!0).forEach(function(r){Xi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var W_=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=L.start(t,[]),o=L.point(t,n,{edge:"start"}),s={anchor:i,focus:o},{distance:l=1}=r,c=0,h;for(var d of L.positions(t,D9(D9({},r),{},{at:s,reverse:!0}))){if(c>l)break;c!==0&&(h=d),c++}return h},z_=(e,t)=>{var{selection:n}=e;n&&Ee.isCollapsed(n)&&Re.delete(e,{unit:t,reverse:!0})},V_=(e,t)=>{var{selection:n}=e;n&&Ee.isCollapsed(n)&&Re.delete(e,{unit:t})},U_=function(t){var{direction:n="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:r}=t;r&&Ee.isExpanded(r)&&Re.delete(t,{reverse:n==="backward"})},X_=(e,t)=>[L.start(e,t),L.end(e,t)];function A9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function B9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?A9(Object(n),!0).forEach(function(r){Xi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var K_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return L.above(t,B9(B9({},n),{},{match:r=>lt.isElement(r)&&L.isElementReadOnly(t,r)}))},Y_=(e,t)=>L.point(e,t,{edge:"end"}),q_=(e,t)=>{var n=L.path(e,t,{edge:"start"});return L.node(e,n)},Z_=(e,t)=>{var n=L.range(e,t);return Ke.fragment(e,n)};function M9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function R9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?M9(Object(n),!0).forEach(function(r){Xi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Q_=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return L.above(t,R9(R9({},n),{},{match:r=>lt.isElement(r)&&L.isVoid(t,r)}))},J_=(e,t)=>t.children.some(n=>lt.isElement(n)&&L.isBlock(e,n)),eN=(e,t)=>t.children.some(n=>ot.isText(n)||L.isInline(e,n)),tN=(e,t)=>Ke.has(e,t),nN=(e,t)=>t.children.every(n=>ot.isText(n)),rN=e=>{Re.splitNodes(e,{always:!0})},iN=(e,t,n)=>{Re.insertNodes(e,t,n)},oN=e=>{Re.splitNodes(e,{always:!0})};function b9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function sN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?b9(Object(n),!0).forEach(function(r){Xi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var aN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:i,marks:o}=t;if(i){if(o){var s=sN({text:n},o);Re.insertNodes(t,s,{at:r.at,voids:r.voids})}else Re.insertText(t,n,r);t.marks=null}},lN=(e,t)=>!e.isInline(t),uN=(e,t,n)=>L.isStart(e,t,n)||L.isEnd(e,t,n),cN=(e,t)=>{var{children:n}=t,[r]=n;return n.length===0||n.length===1&&ot.isText(r)&&r.text===""&&!e.isVoid(t)},fN=(e,t,n)=>{var r=L.end(e,n);return vn.equals(t,r)},hN=e=>{var t=lS.get(e);return t===void 0?!0:t},dN=(e,t,n)=>{if(t.offset!==0)return!1;var r=L.start(e,n);return vn.equals(t,r)},gN=(e,t)=>{var n=L.path(e,t,{edge:"end"});return L.node(e,n)},pN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=L.path(t,n,r),o=Ke.leaf(t,i);return[o,i]};function mN(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:n=e.selection,reverse:r=!1,voids:i=!1}=t,{match:o}=t;if(o==null&&(o=()=>!0),!!n){var s=[],l=L.path(e,n);for(var[c,h]of Ke.levels(e,l))if(o(c,h)&&(s.push([c,h]),!i&&lt.isElement(c)&&L.isVoid(e,c)))break;r&&s.reverse(),yield*s}}()}var vN=["text"],yN=["text"],wN=function(t){var{marks:n,selection:r}=t;if(!r)return null;var{anchor:i,focus:o}=r;if(n)return n;if(Ee.isExpanded(r)){var s=Ee.isBackward(r);s&&([o,i]=[i,o]);var l=L.isEnd(t,i,i.path);if(l){var c=L.after(t,i);c&&(i=c)}var[h]=L.nodes(t,{match:ot.isText,at:{anchor:i,focus:o}});if(h){var[d]=h,g=tu(d,vN);return g}else return{}}var{path:v}=i,[y]=L.leaf(t,v);if(i.offset===0){var x=L.previous(t,{at:v,match:ot.isText}),E=L.above(t,{match:O=>lt.isElement(O)&&L.isVoid(t,O)&&t.markableVoid(O)});if(!E){var T=L.above(t,{match:O=>lt.isElement(O)&&L.isBlock(t,O)});if(x&&T){var[D,S]=x,[,R]=T;Y.isAncestor(R,S)&&(y=D)}}}var k=tu(y,yN);return k},CN=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:i=!1}=n,{match:o,at:s=t.selection}=n;if(s){var l=L.after(t,s,{voids:i});if(l){var[,c]=L.last(t,[]),h=[l.path,c];if(Y.isPath(s)&&s.length===0)throw new Error("Cannot get the next node from the root node!");if(o==null)if(Y.isPath(s)){var[d]=L.parent(t,s);o=v=>d.children.includes(v)}else o=()=>!0;var[g]=L.nodes(t,{at:h,match:o,mode:r,voids:i});return g}}},xN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=L.path(t,n,r),o=Ke.get(t,i);return[o,i]};function EN(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:n=e.selection,mode:r="all",universal:i=!1,reverse:o=!1,voids:s=!1,pass:l,ignoreNonSelectable:c=!1}=t,{match:h}=t;if(h||(h=()=>!0),!!n){var d,g;if(s_.isSpan(n))d=n[0],g=n[1];else{var v=L.path(e,n,{edge:"start"}),y=L.path(e,n,{edge:"end"});d=o?y:v,g=o?v:y}var x=Ke.nodes(e,{reverse:o,from:d,to:g,pass:O=>{var[$,z]=O;return l&&l([$,z])?!0:lt.isElement($)?!!(!s&&(L.isVoid(e,$)||L.isElementReadOnly(e,$))||c&&!L.isSelectable(e,$)):!1}}),E=[],T;for(var[D,S]of x)if(!(c&&lt.isElement(D)&&!L.isSelectable(e,D))){var R=T&&Y.compare(S,T[1])===0;if(!(r==="highest"&&R)){if(!h(D,S)){if(i&&!R&&ot.isText(D))return;continue}if(r==="lowest"&&R){T=[D,S];continue}var k=r==="lowest"?T:[D,S];k&&(i?E.push(k):yield k),T=[D,S]}}r==="lowest"&&T&&(i?E.push(T):yield T),i&&(yield*E)}}()}var PN=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:r=!1,operation:i}=n,o=d=>y3.get(d)||[],s=d=>w3.get(d)||new Set,l=d=>{var g=o(d).pop(),v=g.join(",");return s(d).delete(v),g};if(L.isNormalizing(t)){if(r){var c=Array.from(Ke.nodes(t),d=>{var[,g]=d;return g}),h=new Set(c.map(d=>d.join(",")));y3.set(t,c),w3.set(t,h)}o(t).length!==0&&L.withoutNormalizing(t,()=>{for(var d of o(t))if(Ke.has(t,d)){var g=L.node(t,d),[v,y]=g;lt.isElement(v)&&v.children.length===0&&t.normalizeNode(g,{operation:i})}for(var x=o(t),E=x.length,T=0;x.length!==0;){if(!t.shouldNormalize({dirtyPaths:x,iteration:T,initialDirtyPathsLength:E,operation:i}))return;var D=l(t);if(Ke.has(t,D)){var S=L.node(t,D);t.normalizeNode(S,{operation:i})}T++,x=o(t)}})}},SN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=L.path(t,n,r),o=Y.parent(i),s=L.node(t,o);return s},TN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:i="forward"}=r,o={current:n,affinity:i,unref(){var{current:l}=o,c=L.pathRefs(t);return c.delete(o),o.current=null,l}},s=L.pathRefs(t);return s.add(o),o},DN=e=>{var t=o9.get(e);return t||(t=new Set,o9.set(e,t)),t},AN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:i,edge:o}=r;if(Y.isPath(n)){if(o==="start"){var[,s]=Ke.first(t,n);n=s}else if(o==="end"){var[,l]=Ke.last(t,n);n=l}}return Ee.isRange(n)&&(o==="start"?n=Ee.start(n):o==="end"?n=Ee.end(n):n=Y.common(n.anchor.path,n.focus.path)),vn.isPoint(n)&&(n=n.path),i!=null&&(n=n.slice(0,i)),n},BN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:i="forward"}=r,o={current:n,affinity:i,unref(){var{current:l}=o,c=L.pointRefs(t);return c.delete(o),o.current=null,l}},s=L.pointRefs(t);return s.add(o),o},MN=e=>{var t=s9.get(e);return t||(t=new Set,s9.set(e,t)),t},RN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:i="start"}=r;if(Y.isPath(n)){var o;if(i==="end"){var[,s]=Ke.last(t,n);o=s}else{var[,l]=Ke.first(t,n);o=l}var c=Ke.get(t,o);if(!ot.isText(c))throw new Error("Cannot get the ".concat(i," point in the node at path [").concat(n,"] because it has no ").concat(i," text node."));return{path:o,offset:i==="end"?c.text.length:0}}if(Ee.isRange(n)){var[h,d]=Ee.edges(n);return i==="start"?h:d}return n};function bN(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:n=e.selection,unit:r="offset",reverse:i=!1,voids:o=!1,ignoreNonSelectable:s=!1}=t;if(!n)return;var l=L.range(e,n),[c,h]=Ee.edges(l),d=i?h:c,g=!1,v="",y=0,x=0,E=0;for(var[T,D]of L.nodes(e,{at:n,reverse:i,voids:o,ignoreNonSelectable:s})){if(lt.isElement(T)){if(!o&&(e.isVoid(T)||e.isElementReadOnly(T))){yield L.start(e,D);continue}if(e.isInline(T))continue;if(L.hasInlines(e,T)){var S=Y.isAncestor(D,h.path)?h:L.end(e,D),R=Y.isAncestor(D,c.path)?c:L.start(e,D);v=L.string(e,{anchor:R,focus:S},{voids:o}),g=!0}}if(ot.isText(T)){var k=Y.equals(D,d.path);for(k?(x=i?d.offset:T.text.length-d.offset,E=d.offset):(x=T.text.length,E=i?x:0),(k||g||r==="offset")&&(yield{path:D,offset:E},g=!1);;){if(y===0){if(v==="")break;y=O(v,r,i),v=a8(v,y,i)[1]}if(E=i?E-y:E+y,x=x-y,x<0){y=-x;break}y=0,yield{path:D,offset:E}}}}function O($,z,K){return z==="character"?s8($,K):z==="word"?h_($,K):z==="line"||z==="block"?$.length:1}}()}var kN=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:i=!1}=n,{match:o,at:s=t.selection}=n;if(s){var l=L.before(t,s,{voids:i});if(l){var[,c]=L.first(t,[]),h=[l.path,c];if(Y.isPath(s)&&s.length===0)throw new Error("Cannot get the previous node from the root node!");if(o==null)if(Y.isPath(s)){var[d]=L.parent(t,s);o=v=>d.children.includes(v)}else o=()=>!0;var[g]=L.nodes(t,{reverse:!0,at:h,match:o,mode:r,voids:i});return g}}},ON=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:i="forward"}=r,o={current:n,affinity:i,unref(){var{current:l}=o,c=L.rangeRefs(t);return c.delete(o),o.current=null,l}},s=L.rangeRefs(t);return s.add(o),o},IN=e=>{var t=a9.get(e);return t||(t=new Set,a9.set(e,t)),t},FN=(e,t,n)=>{if(Ee.isRange(t)&&!n)return t;var r=L.start(e,t),i=L.end(e,n||t);return{anchor:r,focus:i}};function k9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function LN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?k9(Object(n),!0).forEach(function(r){Xi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var _N=(e,t)=>{var{selection:n}=e;if(n){var r=(d,g)=>{if(!ot.isText(d))return!1;var[v,y]=L.parent(e,g);return!e.isVoid(v)||e.markableVoid(v)},i=Ee.isExpanded(n),o=!1;if(!i){var[s,l]=L.node(e,n);if(s&&r(s,l)){var[c]=L.parent(e,l);o=c&&e.markableVoid(c)}}if(i||o)Re.unsetNodes(e,t,{match:r,split:!0,voids:!0});else{var h=LN({},L.marks(e)||{});delete h[t],e.marks=h,Ig.get(e)||e.onChange()}}},NN=(e,t)=>{lS.set(e,t)},HN=(e,t)=>L.point(e,t,{edge:"start"}),GN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:i=!1}=r,o=L.range(t,n),[s,l]=Ee.edges(o),c="";for(var[h,d]of L.nodes(t,{at:o,match:ot.isText,voids:i})){var g=h.text;Y.equals(d,l.path)&&(g=g.slice(0,l.offset)),Y.equals(d,s.path)&&(g=g.slice(s.offset)),c+=g}return c},jN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:i=!1}=r,[o,s]=Ee.edges(n);if(o.offset!==0||s.offset!==0||Ee.isCollapsed(n)||Y.hasPrevious(s.path))return n;var l=L.above(t,{at:s,match:x=>lt.isElement(x)&&L.isBlock(t,x),voids:i}),c=l?l[1]:[],h=L.start(t,o),d={anchor:h,focus:s},g=!0;for(var[v,y]of L.nodes(t,{at:d,match:ot.isText,reverse:!0,voids:i})){if(g){g=!1;continue}if(v.text!==""||Y.isBefore(y,c)){s={path:y,offset:v.text.length};break}}return{anchor:o,focus:s}},$N=(e,t)=>{var n=L.isNormalizing(e);L.setNormalizing(e,!1);try{t()}finally{L.setNormalizing(e,n)}L.normalize(e)},WN=(e,t,n)=>{var[r,i]=t;return lt.isElement(r)&&L.isEmpty(e,r)||ot.isText(r)&&r.text===""&&i[i.length-1]!==0},zN=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};L.withoutNormalizing(t,()=>{var r,i,{reverse:o=!1,unit:s="character",distance:l=1,voids:c=!1}=n,{at:h=t.selection,hanging:d=!1}=n;if(h){var g=!1;if(Ee.isRange(h)&&Ee.isCollapsed(h)&&(g=!0,h=h.anchor),vn.isPoint(h)){var v=L.void(t,{at:h,mode:"highest"});if(!c&&v){var[,y]=v;h=y}else{var x={unit:s,distance:l},E=o?L.before(t,h,x)||L.start(t,[]):L.after(t,h,x)||L.end(t,[]);h={anchor:h,focus:E},d=!0}}if(Y.isPath(h)){Re.removeNodes(t,{at:h,voids:c});return}if(!Ee.isCollapsed(h)){if(!d){var[,T]=Ee.edges(h),D=L.end(t,[]);vn.equals(T,D)||(h=L.unhangRange(t,h,{voids:c}))}var[S,R]=Ee.edges(h),k=L.above(t,{match:Ye=>lt.isElement(Ye)&&L.isBlock(t,Ye),at:S,voids:c}),O=L.above(t,{match:Ye=>lt.isElement(Ye)&&L.isBlock(t,Ye),at:R,voids:c}),$=k&&O&&!Y.equals(k[1],O[1]),z=Y.equals(S.path,R.path),K=c?null:(r=L.void(t,{at:S,mode:"highest"}))!==null&&r!==void 0?r:L.elementReadOnly(t,{at:S,mode:"highest"}),te=c?null:(i=L.void(t,{at:R,mode:"highest"}))!==null&&i!==void 0?i:L.elementReadOnly(t,{at:R,mode:"highest"});if(K){var se=L.before(t,S);se&&k&&Y.isAncestor(k[1],se.path)&&(S=se)}if(te){var me=L.after(t,R);me&&O&&Y.isAncestor(O[1],me.path)&&(R=me)}var ne=[],oe;for(var ve of L.nodes(t,{at:h,voids:c})){var[ge,Me]=ve;oe&&Y.compare(Me,oe)===0||(!c&&lt.isElement(ge)&&(L.isVoid(t,ge)||L.isElementReadOnly(t,ge))||!Y.isCommon(Me,S.path)&&!Y.isCommon(Me,R.path))&&(ne.push(ve),oe=Me)}var Pe=Array.from(ne,Ye=>{var[,At]=Ye;return L.pathRef(t,At)}),he=L.pointRef(t,S),le=L.pointRef(t,R),we="";if(!z&&!K){var U=he.current,[xe]=L.leaf(t,U),{path:Ie}=U,{offset:Le}=S,$e=xe.text.slice(Le);$e.length>0&&(t.apply({type:"remove_text",path:Ie,offset:Le,text:$e}),we=$e)}if(Pe.reverse().map(Ye=>Ye.unref()).filter(Ye=>Ye!==null).forEach(Ye=>Re.removeNodes(t,{at:Ye,voids:c})),!te){var Fe=le.current,[Ze]=L.leaf(t,Fe),{path:et}=Fe,Q=z?S.offset:0,Se=Ze.text.slice(Q,R.offset);Se.length>0&&(t.apply({type:"remove_text",path:et,offset:Q,text:Se}),we=Se)}!z&&$&&le.current&&he.current&&Re.mergeNodes(t,{at:le.current,hanging:!0,voids:c}),g&&o&&s==="character"&&we.length>1&&we.match(/[\u0980-\u09FF\u0E00-\u0E7F]+/)&&Re.insertText(t,we.slice(0,we.length-l));var Te=he.unref(),ke=le.unref(),vt=o?Te||ke:ke||Te;n.at==null&&vt&&Re.select(t,vt)}}})},VN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};L.withoutNormalizing(t,()=>{var{hanging:i=!1,voids:o=!1}=r,{at:s=o8(t),batchDirty:l=!0}=r;if(n.length){if(Ee.isRange(s))if(i||(s=L.unhangRange(t,s,{voids:o})),Ee.isCollapsed(s))s=s.anchor;else{var[,c]=Ee.edges(s);if(!o&&L.void(t,{at:c}))return;var h=L.pointRef(t,c);Re.delete(t,{at:s}),s=h.unref()}else Y.isPath(s)&&(s=L.start(t,s));if(!(!o&&L.void(t,{at:s}))){var d=L.above(t,{at:s,match:Ie=>lt.isElement(Ie)&&L.isInline(t,Ie),mode:"highest",voids:o});if(d){var[,g]=d;if(L.isEnd(t,s,g)){var v=L.after(t,g);s=v}else if(L.isStart(t,s,g)){var y=L.before(t,g);s=y}}var x=L.above(t,{match:Ie=>lt.isElement(Ie)&&L.isBlock(t,Ie),at:s,voids:o}),[,E]=x,T=L.isStart(t,s,E),D=L.isEnd(t,s,E),S=T&&D,[,R]=Ke.first({children:n},[]),[,k]=Ke.last({children:n},[]),O=Ie=>{var[Le,$e]=Ie,Fe=$e.length===0;return Fe?!1:S?!0:!(!T&&Y.isAncestor($e,R)&&lt.isElement(Le)&&!t.isVoid(Le)&&!t.isInline(Le)||!D&&Y.isAncestor($e,k)&&lt.isElement(Le)&&!t.isVoid(Le)&&!t.isInline(Le))},$=!0,z=[],K=[],te=[];for(var se of Ke.nodes({children:n},{pass:O})){var[me,ne]=se;$&&lt.isElement(me)&&!t.isInline(me)&&!Y.isAncestor(ne,R)&&($=!1),O(se)&&(lt.isElement(me)&&!t.isInline(me)?($=!1,K.push(me)):$?z.push(me):te.push(me))}var[oe]=L.nodes(t,{at:s,match:Ie=>ot.isText(Ie)||L.isInline(t,Ie),mode:"highest",voids:o}),[,ve]=oe,ge=L.isStart(t,s,ve),Me=L.isEnd(t,s,ve),Pe=L.pathRef(t,D&&!te.length?Y.next(E):E),he=L.pathRef(t,Me?Y.next(ve):ve),le=te.length>0;Re.splitNodes(t,{at:s,match:Ie=>le?lt.isElement(Ie)&&L.isBlock(t,Ie):ot.isText(Ie)||L.isInline(t,Ie),mode:le?"lowest":"highest",always:le&&(!T||z.length>0)&&(!D||te.length>0),voids:o});var we=L.pathRef(t,!ge||ge&&Me?Y.next(ve):ve);if(Re.insertNodes(t,z,{at:we.current,match:Ie=>ot.isText(Ie)||L.isInline(t,Ie),mode:"highest",voids:o,batchDirty:l}),S&&!z.length&&K.length&&!te.length&&Re.delete(t,{at:E,voids:o}),Re.insertNodes(t,K,{at:Pe.current,match:Ie=>lt.isElement(Ie)&&L.isBlock(t,Ie),mode:"lowest",voids:o,batchDirty:l}),Re.insertNodes(t,te,{at:he.current,match:Ie=>ot.isText(Ie)||L.isInline(t,Ie),mode:"highest",voids:o,batchDirty:l}),!r.at){var U;if(te.length>0&&he.current?U=Y.previous(he.current):K.length>0&&Pe.current?U=Y.previous(Pe.current):we.current&&(U=Y.previous(we.current)),U){var xe=L.end(t,U);Re.select(t,xe)}}we.unref(),Pe.unref(),he.unref()}}})},UN=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:r="anchor"}=n,{selection:i}=t;if(i){if(r==="anchor")Re.select(t,i.anchor);else if(r==="focus")Re.select(t,i.focus);else if(r==="start"){var[o]=Ee.edges(i);Re.select(t,o)}else if(r==="end"){var[,s]=Ee.edges(i);Re.select(t,s)}}else return},XN=e=>{var{selection:t}=e;t&&e.apply({type:"set_selection",properties:t,newProperties:null})},KN=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:r}=t,{distance:i=1,unit:o="character",reverse:s=!1}=n,{edge:l=null}=n;if(r){l==="start"&&(l=Ee.isBackward(r)?"focus":"anchor"),l==="end"&&(l=Ee.isBackward(r)?"anchor":"focus");var{anchor:c,focus:h}=r,d={distance:i,unit:o,ignoreNonSelectable:!0},g={};if(l==null||l==="anchor"){var v=s?L.before(t,c,d):L.after(t,c,d);v&&(g.anchor=v)}if(l==null||l==="focus"){var y=s?L.before(t,h,d):L.after(t,h,d);y&&(g.focus=y)}Re.setSelection(t,g)}},YN=(e,t)=>{var{selection:n}=e;if(t=L.range(e,t),n){Re.setSelection(e,t);return}if(!Ee.isRange(t))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(Sr.stringify(t)));e.apply({type:"set_selection",properties:n,newProperties:t})};function O9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function I9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?O9(Object(n),!0).forEach(function(r){Xi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var qN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:i}=t,{edge:o="both"}=r;if(i){o==="start"&&(o=Ee.isBackward(i)?"focus":"anchor"),o==="end"&&(o=Ee.isBackward(i)?"anchor":"focus");var{anchor:s,focus:l}=i,c=o==="anchor"?s:l;Re.setSelection(t,{[o==="anchor"?"anchor":"focus"]:I9(I9({},c),n)})}},ZN=(e,t)=>{var{selection:n}=e,r={},i={};if(n){for(var o in t)(o==="anchor"&&t.anchor!=null&&!vn.equals(t.anchor,n.anchor)||o==="focus"&&t.focus!=null&&!vn.equals(t.focus,n.focus)||o!=="anchor"&&o!=="focus"&&t[o]!==n[o])&&(r[o]=n[o],i[o]=t[o]);Object.keys(r).length>0&&e.apply({type:"set_selection",properties:r,newProperties:i})}},QN=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};L.withoutNormalizing(t,()=>{var{hanging:i=!1,voids:o=!1,mode:s="lowest",batchDirty:l=!0}=r,{at:c,match:h,select:d}=r;if(Ke.isNode(n)&&(n=[n]),n.length!==0){var[g]=n;if(c||(c=o8(t),d!==!1&&(d=!0)),d==null&&(d=!1),Ee.isRange(c))if(i||(c=L.unhangRange(t,c,{voids:o})),Ee.isCollapsed(c))c=c.anchor;else{var[,v]=Ee.edges(c),y=L.pointRef(t,v);Re.delete(t,{at:c}),c=y.unref()}if(vn.isPoint(c)){h==null&&(ot.isText(g)?h=se=>ot.isText(se):t.isInline(g)?h=se=>ot.isText(se)||L.isInline(t,se):h=se=>lt.isElement(se)&&L.isBlock(t,se));var[x]=L.nodes(t,{at:c.path,match:h,mode:s,voids:o});if(x){var[,E]=x,T=L.pathRef(t,E),D=L.isEnd(t,c,E);Re.splitNodes(t,{at:c,match:h,mode:s,voids:o});var S=T.unref();c=D?Y.next(S):S}else return}var R=Y.parent(c),k=c[c.length-1];if(!(!o&&L.void(t,{at:R}))){if(l){var O=[],$=Y.levels(R);I_(t,()=>{var se=function(){var oe=R.concat(k);k++;var ve={type:"insert_node",path:oe,node:me};t.apply(ve),c=Y.next(c),O.push(ve),ot.isText(me)?$.push(oe):$.push(...Array.from(Ke.nodes(me),ge=>{var[,Me]=ge;return oe.concat(Me)}))};for(var me of n)se()},()=>{cS(t,$,se=>{var me=se;for(var ne of O)if(Y.operationCanTransformPath(ne)&&(me=Y.transform(me,ne),!me))return null;return me})})}else for(var z of n){var K=R.concat(k);k++,t.apply({type:"insert_node",path:K,node:z}),c=Y.next(c)}if(c=Y.previous(c),d){var te=L.end(t,c);te&&Re.select(t,te)}}}})},JN=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};L.withoutNormalizing(t,()=>{var{at:r=t.selection,mode:i="lowest",voids:o=!1}=n,{match:s}=n;if(s==null&&(s=Y.isPath(r)?G0(t,r):k=>lt.isElement(k)&&L.isBlock(t,k)),!!r){var l=L.nodes(t,{at:r,match:s,mode:i,voids:o}),c=Array.from(l,k=>{var[,O]=k;return L.pathRef(t,O)});for(var h of c){var d=h.unref();if(d.length<2)throw new Error("Cannot lift node at a path [".concat(d,"] because it has a depth of less than `2`."));var g=L.node(t,Y.parent(d)),[v,y]=g,x=d[d.length-1],{length:E}=v.children;if(E===1){var T=Y.next(y);Re.moveNodes(t,{at:d,to:T,voids:o}),Re.removeNodes(t,{at:y,voids:o})}else if(x===0)Re.moveNodes(t,{at:d,to:y,voids:o});else if(x===E-1){var D=Y.next(y);Re.moveNodes(t,{at:d,to:D,voids:o})}else{var S=Y.next(d),R=Y.next(y);Re.splitNodes(t,{at:S,voids:o}),Re.moveNodes(t,{at:d,to:R,voids:o})}}}})},eH=["text"],tH=["children"],fS=(e,t)=>{if(lt.isElement(t)){var n=t;return L.isVoid(e,t)?!0:n.children.length===1?fS(e,n.children[0]):!1}else return!L.isEditor(t)},nH=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};L.withoutNormalizing(t,()=>{var{match:r,at:i=t.selection}=n,{hanging:o=!1,voids:s=!1,mode:l="lowest"}=n;if(i){if(r==null)if(Y.isPath(i)){var[c]=L.parent(t,i);r=se=>c.children.includes(se)}else r=se=>lt.isElement(se)&&L.isBlock(t,se);if(!o&&Ee.isRange(i)&&(i=L.unhangRange(t,i,{voids:s})),Ee.isRange(i))if(Ee.isCollapsed(i))i=i.anchor;else{var[,h]=Ee.edges(i),d=L.pointRef(t,h);Re.delete(t,{at:i}),i=d.unref(),n.at==null&&Re.select(t,i)}var[g]=L.nodes(t,{at:i,match:r,voids:s,mode:l}),v=L.previous(t,{at:i,match:r,voids:s,mode:l});if(!(!g||!v)){var[y,x]=g,[E,T]=v;if(!(x.length===0||T.length===0)){var D=Y.next(T),S=Y.common(x,T),R=Y.isSibling(x,T),k=Array.from(L.levels(t,{at:x}),se=>{var[me]=se;return me}).slice(S.length).slice(0,-1),O=L.above(t,{at:x,mode:"highest",match:se=>k.includes(se)&&fS(t,se)}),$=O&&L.pathRef(t,O[1]),z,K;if(ot.isText(y)&&ot.isText(E)){var te=tu(y,eH);K=E.text.length,z=te}else if(lt.isElement(y)&&lt.isElement(E)){var te=tu(y,tH);K=E.children.length,z=te}else throw new Error("Cannot merge the node at path [".concat(x,"] with the previous sibling because it is not the same kind: ").concat(Sr.stringify(y)," ").concat(Sr.stringify(E)));R||Re.moveNodes(t,{at:x,to:D,voids:s}),$&&Re.removeNodes(t,{at:$.current,voids:s}),L.shouldMergeNodesRemovePrevNode(t,v,g)?Re.removeNodes(t,{at:T,voids:s}):t.apply({type:"merge_node",path:D,position:K,properties:z}),$&&$.unref()}}}})},rH=(e,t)=>{L.withoutNormalizing(e,()=>{var{to:n,at:r=e.selection,mode:i="lowest",voids:o=!1}=t,{match:s}=t;if(r){s==null&&(s=Y.isPath(r)?G0(e,r):y=>lt.isElement(y)&&L.isBlock(e,y));var l=L.pathRef(e,n),c=L.nodes(e,{at:r,match:s,mode:i,voids:o}),h=Array.from(c,y=>{var[,x]=y;return L.pathRef(e,x)});for(var d of h){var g=d.unref(),v=l.current;g.length!==0&&e.apply({type:"move_node",path:g,newPath:v}),l.current&&Y.isSibling(v,g)&&Y.isAfter(v,g)&&(l.current=Y.next(l.current))}l.unref()}})},iH=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};L.withoutNormalizing(t,()=>{var{hanging:r=!1,voids:i=!1,mode:o="lowest"}=n,{at:s=t.selection,match:l}=n;if(s){l==null&&(l=Y.isPath(s)?G0(t,s):y=>lt.isElement(y)&&L.isBlock(t,y)),!r&&Ee.isRange(s)&&(s=L.unhangRange(t,s,{voids:i}));var c=L.nodes(t,{at:s,match:l,mode:o,voids:i}),h=Array.from(c,y=>{var[,x]=y;return L.pathRef(t,x)});for(var d of h){var g=d.unref();if(g){var[v]=L.node(t,g);t.apply({type:"remove_node",path:g,node:v})}}}})},oH=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};L.withoutNormalizing(t,()=>{var{match:i,at:o=t.selection,compare:s,merge:l}=r,{hanging:c=!1,mode:h="lowest",split:d=!1,voids:g=!1}=r;if(o){if(i==null&&(i=Y.isPath(o)?G0(t,o):K=>lt.isElement(K)&&L.isBlock(t,K)),!c&&Ee.isRange(o)&&(o=L.unhangRange(t,o,{voids:g})),d&&Ee.isRange(o)){if(Ee.isCollapsed(o)&&L.leaf(t,o.anchor)[0].text.length>0)return;var v=L.rangeRef(t,o,{affinity:"inward"}),[y,x]=Ee.edges(o),E=h==="lowest"?"lowest":"highest",T=L.isEnd(t,x,x.path);Re.splitNodes(t,{at:x,match:i,mode:E,voids:g,always:!T});var D=L.isStart(t,y,y.path);Re.splitNodes(t,{at:y,match:i,mode:E,voids:g,always:!D}),o=v.unref(),r.at==null&&Re.select(t,o)}s||(s=(K,te)=>K!==te);for(var[S,R]of L.nodes(t,{at:o,match:i,mode:h,voids:g})){var k={},O={};if(R.length!==0){var $=!1;for(var z in n)z==="children"||z==="text"||s(n[z],S[z])&&($=!0,S.hasOwnProperty(z)&&(k[z]=S[z]),l?n[z]!=null&&(O[z]=l(S[z],n[z])):n[z]!=null&&(O[z]=n[z]));$&&t.apply({type:"set_node",path:R,properties:k,newProperties:O})}}}})},sH=(e,t)=>{if(Ee.isCollapsed(t))return t.anchor;var[,n]=Ee.edges(t),r=L.pointRef(e,n);return Re.delete(e,{at:t}),r.unref()},aH=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};L.withoutNormalizing(t,()=>{var{mode:r="lowest",voids:i=!1}=n,{match:o,at:s=t.selection,height:l=0,always:c=!1}=n;if(o==null&&(o=le=>lt.isElement(le)&&L.isBlock(t,le)),Ee.isRange(s)&&(s=sH(t,s)),Y.isPath(s)){var h=s,d=L.point(t,h),[g]=L.parent(t,h);o=le=>le===g,l=d.path.length-h.length+1,s=d,c=!0}if(s){var v=L.pointRef(t,s,{affinity:"backward"}),y;try{var[x]=L.nodes(t,{at:s,match:o,mode:r,voids:i});if(!x)return;var E=L.void(t,{at:s,mode:"highest"}),T=0;if(!i&&E){var[D,S]=E;if(lt.isElement(D)&&t.isInline(D)){var R=L.after(t,S);if(!R){var k={text:""},O=Y.next(S);Re.insertNodes(t,k,{at:O,voids:i}),R=L.point(t,O)}s=R,c=!0}var $=s.path.length-S.length;l=$+1,c=!0}y=L.pointRef(t,s);var z=s.path.length-l,[,K]=x,te=s.path.slice(0,z),se=l===0?s.offset:s.path[z]+T;for(var[me,ne]of L.levels(t,{at:te,reverse:!0,voids:i})){var oe=!1;if(ne.length<K.length||ne.length===0||!i&&lt.isElement(me)&&L.isVoid(t,me))break;var ve=v.current,ge=L.isEnd(t,ve,ne);if(c||!v||!L.isEdge(t,ve,ne)){oe=!0;var Me=Ke.extractProps(me);t.apply({type:"split_node",path:ne,position:se,properties:Me})}se=ne[ne.length-1]+(oe||ge?1:0)}if(n.at==null){var Pe=y.current||L.end(t,[]);Re.select(t,Pe)}}finally{var he;v.unref(),(he=y)===null||he===void 0||he.unref()}}})},lH=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(n)||(n=[n]);var i={};for(var o of n)i[o]=null;Re.setNodes(t,i,r)},uH=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};L.withoutNormalizing(t,()=>{var{mode:r="lowest",split:i=!1,voids:o=!1}=n,{at:s=t.selection,match:l}=n;if(s){l==null&&(l=Y.isPath(s)?G0(t,s):y=>lt.isElement(y)&&L.isBlock(t,y)),Y.isPath(s)&&(s=L.range(t,s));var c=Ee.isRange(s)?L.rangeRef(t,s):null,h=L.nodes(t,{at:s,match:l,mode:r,voids:o}),d=Array.from(h,y=>{var[,x]=y;return L.pathRef(t,x)}).reverse(),g=function(){var x=v.unref(),[E]=L.node(t,x),T=L.range(t,x);i&&c&&(T=Ee.intersection(c.current,T)),Re.liftNodes(t,{at:T,match:D=>lt.isAncestor(E)&&E.children.includes(D),voids:o})};for(var v of d)g();c&&c.unref()}})};function F9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function L9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?F9(Object(n),!0).forEach(function(r){Xi(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var cH=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};L.withoutNormalizing(t,()=>{var{mode:i="lowest",split:o=!1,voids:s=!1}=r,{match:l,at:c=t.selection}=r;if(c){if(l==null&&(Y.isPath(c)?l=G0(t,c):t.isInline(n)?l=T=>lt.isElement(T)&&L.isInline(t,T)||ot.isText(T):l=T=>lt.isElement(T)&&L.isBlock(t,T)),o&&Ee.isRange(c)){var[h,d]=Ee.edges(c),g=L.rangeRef(t,c,{affinity:"inward"});Re.splitNodes(t,{at:d,match:l,voids:s}),Re.splitNodes(t,{at:h,match:l,voids:s}),c=g.unref(),r.at==null&&Re.select(t,c)}var v=Array.from(L.nodes(t,{at:c,match:t.isInline(n)?T=>lt.isElement(T)&&L.isBlock(t,T):T=>L.isEditor(T),mode:"lowest",voids:s})),y=function(){var D=Ee.isRange(c)?Ee.intersection(c,L.range(t,E)):c;if(!D)return 0;var S=Array.from(L.nodes(t,{at:D,match:l,mode:i,voids:s}));if(S.length>0){var[R]=S,k=S[S.length-1],[,O]=R,[,$]=k;if(O.length===0&&$.length===0)return 0;var z=Y.equals(O,$)?Y.parent(O):Y.common(O,$),K=L.range(t,O,$),te=L.node(t,z),[se]=te,me=z.length+1,ne=Y.next($.slice(0,me)),oe=L9(L9({},n),{},{children:[]});Re.insertNodes(t,oe,{at:ne,voids:s}),Re.moveNodes(t,{at:K,match:ve=>lt.isAncestor(se)&&se.children.includes(ve),to:ne.concat(0),voids:s})}},x;for(var[,E]of v)x=y()}})},fH=()=>{var e={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return F_(e,...r)},addMark:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return j_(e,...r)},deleteBackward:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return z_(e,...r)},deleteForward:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return V_(e,...r)},deleteFragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return U_(e,...r)},getFragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return __(e,...r)},insertBreak:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return rN(e,...r)},insertSoftBreak:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return oN(e,...r)},insertFragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return VN(e,...r)},insertNode:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return iN(e,...r)},insertText:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return aN(e,...r)},normalizeNode:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return N_(e,...r)},removeMark:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _N(e,...r)},getDirtyPaths:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return L_(e,...r)},shouldNormalize:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return H_(e,...r)},above:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return G_(e,...r)},after:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return $_(e,...r)},before:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return W_(e,...r)},collapse:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return UN(e,...r)},delete:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return zN(e,...r)},deselect:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return XN(e,...r)},edges:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return X_(e,...r)},elementReadOnly:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return K_(e,...r)},end:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Y_(e,...r)},first:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return q_(e,...r)},fragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Z_(e,...r)},getMarks:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return wN(e,...r)},hasBlocks:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return J_(e,...r)},hasInlines:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return eN(e,...r)},hasPath:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return tN(e,...r)},hasTexts:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return nN(e,...r)},insertNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return QN(e,...r)},isBlock:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return lN(e,...r)},isEdge:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return uN(e,...r)},isEmpty:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return cN(e,...r)},isEnd:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return fN(e,...r)},isNormalizing:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return hN(e,...r)},isStart:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return dN(e,...r)},last:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return gN(e,...r)},leaf:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return pN(e,...r)},levels:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return mN(e,...r)},liftNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return JN(e,...r)},mergeNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return nH(e,...r)},move:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return KN(e,...r)},moveNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return rH(e,...r)},next:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return CN(e,...r)},node:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return xN(e,...r)},nodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return EN(e,...r)},normalize:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return PN(e,...r)},parent:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return SN(e,...r)},path:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return AN(e,...r)},pathRef:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return TN(e,...r)},pathRefs:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return DN(e,...r)},point:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return RN(e,...r)},pointRef:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return BN(e,...r)},pointRefs:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return MN(e,...r)},positions:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return bN(e,...r)},previous:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return kN(e,...r)},range:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return FN(e,...r)},rangeRef:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ON(e,...r)},rangeRefs:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return IN(e,...r)},removeNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return iH(e,...r)},select:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return YN(e,...r)},setNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return oH(e,...r)},setNormalizing:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return NN(e,...r)},setPoint:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return qN(e,...r)},setSelection:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ZN(e,...r)},splitNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return aH(e,...r)},start:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return HN(e,...r)},string:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return GN(e,...r)},unhangRange:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return jN(e,...r)},unsetNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return lH(e,...r)},unwrapNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return uH(e,...r)},void:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Q_(e,...r)},withoutNormalizing:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return $N(e,...r)},wrapNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return cH(e,...r)},shouldMergeNodesRemovePrevNode:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return WN(e,...r)}};return e},g5,_9;function hH(){if(_9)return g5;_9=1,g5=i;var e="---",t="A-Za-z--------",n=new RegExp("^[^"+t+"]*["+e+"]"),r=new RegExp("^[^"+e+"]*["+t+"]");function i(o){return o=String(o||""),n.test(o)?"rtl":r.test(o)?"ltr":"neutral"}return g5}var dH=hH();const hS=Cc(dH),N9=e=>typeof e=="object"&&e!=null&&e.nodeType===1,H9=(e,t)=>(!t||e!=="hidden")&&e!=="visible"&&e!=="clip",ym=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const n=getComputedStyle(e,null);return H9(n.overflowY,t)||H9(n.overflowX,t)||(r=>{const i=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(r);return!!i&&(i.clientHeight<r.scrollHeight||i.clientWidth<r.scrollWidth)})(e)}return!1},wm=(e,t,n,r,i,o,s,l)=>o<e&&s>t||o>e&&s<t?0:o<=e&&l<=n||s>=t&&l>=n?o-e-r:s>t&&l<n||o<e&&l>n?s-t+i:0,gH=e=>{const t=e.parentElement;return t??(e.getRootNode().host||null)},G9=(e,t)=>{var n,r,i,o;if(typeof document>"u")return[];const{scrollMode:s,block:l,inline:c,boundary:h,skipOverflowHiddenElements:d}=t,g=typeof h=="function"?h:Me=>Me!==h;if(!N9(e))throw new TypeError("Invalid target");const v=document.scrollingElement||document.documentElement,y=[];let x=e;for(;N9(x)&&g(x);){if(x=gH(x),x===v){y.push(x);break}x!=null&&x===document.body&&ym(x)&&!ym(document.documentElement)||x!=null&&ym(x,d)&&y.push(x)}const E=(r=(n=window.visualViewport)==null?void 0:n.width)!=null?r:innerWidth,T=(o=(i=window.visualViewport)==null?void 0:i.height)!=null?o:innerHeight,{scrollX:D,scrollY:S}=window,{height:R,width:k,top:O,right:$,bottom:z,left:K}=e.getBoundingClientRect(),{top:te,right:se,bottom:me,left:ne}=(Me=>{const Pe=window.getComputedStyle(Me);return{top:parseFloat(Pe.scrollMarginTop)||0,right:parseFloat(Pe.scrollMarginRight)||0,bottom:parseFloat(Pe.scrollMarginBottom)||0,left:parseFloat(Pe.scrollMarginLeft)||0}})(e);let oe=l==="start"||l==="nearest"?O-te:l==="end"?z+me:O+R/2-te+me,ve=c==="center"?K+k/2-ne+se:c==="end"?$+se:K-ne;const ge=[];for(let Me=0;Me<y.length;Me++){const Pe=y[Me],{height:he,width:le,top:we,right:U,bottom:xe,left:Ie}=Pe.getBoundingClientRect();if(s==="if-needed"&&O>=0&&K>=0&&z<=T&&$<=E&&(Pe===v&&!ym(Pe)||O>=we&&z<=xe&&K>=Ie&&$<=U))return ge;const Le=getComputedStyle(Pe),$e=parseInt(Le.borderLeftWidth,10),Fe=parseInt(Le.borderTopWidth,10),Ze=parseInt(Le.borderRightWidth,10),et=parseInt(Le.borderBottomWidth,10);let Q=0,Se=0;const Te="offsetWidth"in Pe?Pe.offsetWidth-Pe.clientWidth-$e-Ze:0,ke="offsetHeight"in Pe?Pe.offsetHeight-Pe.clientHeight-Fe-et:0,vt="offsetWidth"in Pe?Pe.offsetWidth===0?0:le/Pe.offsetWidth:0,Ye="offsetHeight"in Pe?Pe.offsetHeight===0?0:he/Pe.offsetHeight:0;if(v===Pe)Q=l==="start"?oe:l==="end"?oe-T:l==="nearest"?wm(S,S+T,T,Fe,et,S+oe,S+oe+R,R):oe-T/2,Se=c==="start"?ve:c==="center"?ve-E/2:c==="end"?ve-E:wm(D,D+E,E,$e,Ze,D+ve,D+ve+k,k),Q=Math.max(0,Q+S),Se=Math.max(0,Se+D);else{Q=l==="start"?oe-we-Fe:l==="end"?oe-xe+et+ke:l==="nearest"?wm(we,xe,he,Fe,et+ke,oe,oe+R,R):oe-(we+he/2)+ke/2,Se=c==="start"?ve-Ie-$e:c==="center"?ve-(Ie+le/2)+Te/2:c==="end"?ve-U+Ze+Te:wm(Ie,U,le,$e,Ze+Te,ve,ve+k,k);const{scrollLeft:At,scrollTop:hn}=Pe;Q=Ye===0?0:Math.max(0,Math.min(hn+Q/Ye,Pe.scrollHeight-he/Ye+ke)),Se=vt===0?0:Math.max(0,Math.min(At+Se/vt,Pe.scrollWidth-le/vt+Te)),oe+=hn-Q,ve+=At-Se}ge.push({el:Pe,top:Q,left:Se})}return ge},pH=e=>e===!1?{block:"end",inline:"nearest"}:(t=>t===Object(t)&&Object.keys(t).length!==0)(e)?e:{block:"start",inline:"nearest"};function mH(e,t){if(!e.isConnected||!(i=>{let o=i;for(;o&&o.parentNode;){if(o.parentNode===document)return!0;o=o.parentNode instanceof ShadowRoot?o.parentNode.host:o.parentNode}return!1})(e))return;const n=(i=>{const o=window.getComputedStyle(i);return{top:parseFloat(o.scrollMarginTop)||0,right:parseFloat(o.scrollMarginRight)||0,bottom:parseFloat(o.scrollMarginBottom)||0,left:parseFloat(o.scrollMarginLeft)||0}})(e);if((i=>typeof i=="object"&&typeof i.behavior=="function")(t))return t.behavior(G9(e,t));const r=typeof t=="boolean"||t==null?void 0:t.behavior;for(const{el:i,top:o,left:s}of G9(e,pH(t))){const l=o-n.top+n.bottom,c=s-n.left+n.right;i.scroll({top:l,left:c,behavior:r})}}var dS=globalThis.Node,vH=globalThis.Text,l8=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,yH=e=>mc(e)&&e.nodeType===8,Ds=e=>mc(e)&&e.nodeType===1,mc=e=>{var t=l8(e);return!!t&&e instanceof t.Node},I6=e=>{var t=e&&e.anchorNode&&l8(e.anchorNode);return!!t&&e instanceof t.Selection},gS=e=>mc(e)&&e.nodeType===3,wH=e=>e.clipboardData&&e.clipboardData.getData("text/plain")!==""&&e.clipboardData.types.length===1,CH=e=>{var[t,n]=e;if(Ds(t)&&t.childNodes.length){var r=n===t.childNodes.length,i=r?n-1:n;for([t,i]=pS(t,i,r?"backward":"forward"),r=i<n;Ds(t)&&t.childNodes.length;){var o=r?t.childNodes.length-1:0;t=EH(t,o,r?"backward":"forward")}n=r&&t.textContent!=null?t.textContent.length:0}return[t,n]},xH=e=>{for(var t=e&&e.parentNode;t;){if(t.toString()==="[object ShadowRoot]")return!0;t=t.parentNode}return!1},pS=(e,t,n)=>{for(var{childNodes:r}=e,i=r[t],o=t,s=!1,l=!1;(yH(i)||Ds(i)&&i.childNodes.length===0||Ds(i)&&i.getAttribute("contenteditable")==="false")&&!(s&&l);){if(o>=r.length){s=!0,o=t-1,n="backward";continue}if(o<0){l=!0,o=t+1,n="forward";continue}i=r[o],t=o,o+=n==="forward"?1:-1}return[i,t]},EH=(e,t,n)=>{var[r]=pS(e,t,n);return r},mS=e=>{var t="";if(gS(e)&&e.nodeValue)return e.nodeValue;if(Ds(e)){for(var n of Array.from(e.childNodes))t+=mS(n);var r=getComputedStyle(e).getPropertyValue("display");(r==="block"||r==="list"||e.tagName==="BR")&&(t+=`
`)}return t},PH=/data-slate-fragment="(.+?)"/m,SH=e=>{var t=e.getData("text/html"),[,n]=t.match(PH)||[];return n},Fg=e=>e.getSelection!=null?e.getSelection():document.getSelection(),u8=(e,t,n)=>{var{target:r}=t;if(Ds(r)&&r.matches('[contentEditable="false"]'))return!1;var{document:i}=Gt.getWindow(e);if(i.contains(r))return Gt.hasDOMNode(e,r,{editable:!0});var o=n.find(s=>{var{addedNodes:l,removedNodes:c}=s;for(var h of l)if(h===r||h.contains(r))return!0;for(var d of c)if(d===r||d.contains(r))return!0});return!o||o===t?!1:u8(e,o,n)},TH=()=>{for(var e=document.activeElement;(t=e)!==null&&t!==void 0&&t.shadowRoot&&(n=e.shadowRoot)!==null&&n!==void 0&&n.activeElement;){var t,n,r;e=(r=e)===null||r===void 0||(r=r.shadowRoot)===null||r===void 0?void 0:r.activeElement}return e},j9=(e,t)=>!!(e.compareDocumentPosition(t)&dS.DOCUMENT_POSITION_PRECEDING),DH=(e,t)=>!!(e.compareDocumentPosition(t)&dS.DOCUMENT_POSITION_FOLLOWING),p5,m5,AH=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,$9=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),zi=typeof navigator<"u"&&/Android/.test(navigator.userAgent),t0=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),If=typeof navigator<"u"&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),BH=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),vS=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),MH=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),RH=zi&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),bH=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),kH=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),OH=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),Xm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Version\/(\d+)/.test(navigator.userAgent)&&((p5=navigator.userAgent.match(/Version\/(\d+)/))!==null&&p5!==void 0&&p5[1]&&parseInt((m5=navigator.userAgent.match(/Version\/(\d+)/))===null||m5===void 0?void 0:m5[1],10)<17);var Zu=(!MH||!RH)&&!BH&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function ep(e){"@babel/helpers - typeof";return ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ep(e)}function IH(e,t){if(ep(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ep(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FH(e){var t=IH(e,"string");return ep(t)==="symbol"?t:String(t)}function c8(e,t,n){return t=FH(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var LH=0;class yS{constructor(){c8(this,"id",void 0),this.id="".concat(LH++)}}var u0=new WeakMap,n0=new WeakMap,Lg=new WeakMap,wS=new WeakMap,Km=new WeakMap,F6=new WeakMap,tp=new WeakMap,zf=new WeakMap,C3=new WeakMap,hv=new WeakMap,L6=new WeakMap,ic=new WeakMap,Nf=new WeakMap,_g=new WeakMap,_6=new WeakMap,f8=new WeakMap,sa=new WeakMap,zl=new WeakMap,vo=new WeakMap,ec=new WeakMap,tc=new WeakMap,CS=new WeakMap,x0=Symbol("placeholder"),xS=Symbol("mark-placeholder"),Gt={androidPendingDiffs:e=>vo.get(e),androidScheduleFlush:e=>{var t;(t=f8.get(e))===null||t===void 0||t()},blur:e=>{var t=Gt.toDOMNode(e,e),n=Gt.findDocumentOrShadowRoot(e);ic.set(e,!1),n.activeElement===t&&t.blur()},deselect:e=>{var{selection:t}=e,n=Gt.findDocumentOrShadowRoot(e),r=Fg(n);r&&r.rangeCount>0&&r.removeAllRanges(),t&&Re.deselect(e)},findDocumentOrShadowRoot:e=>{var t=Gt.toDOMNode(e,e),n=t.getRootNode();return n instanceof Document||n instanceof ShadowRoot?n:t.ownerDocument},findEventRange:(e,t)=>{"nativeEvent"in t&&(t=t.nativeEvent);var{clientX:n,clientY:r,target:i}=t;if(n==null||r==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var o=Gt.toSlateNode(e,t.target),s=Gt.findPath(e,o);if(lt.isElement(o)&&L.isVoid(e,o)){var l=i.getBoundingClientRect(),c=e.isInline(o)?n-l.left<l.left+l.width-n:r-l.top<l.top+l.height-r,h=L.point(e,s,{edge:c?"start":"end"}),d=c?L.before(e,h):L.after(e,h);if(d){var g=L.range(e,d);return g}}var v,{document:y}=Gt.getWindow(e);if(y.caretRangeFromPoint)v=y.caretRangeFromPoint(n,r);else{var x=y.caretPositionFromPoint(n,r);x&&(v=y.createRange(),v.setStart(x.offsetNode,x.offset),v.setEnd(x.offsetNode,x.offset))}if(!v)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var E=Gt.toSlateRange(e,v,{exactMatch:!1,suppressThrow:!1});return E},findKey:(e,t)=>{var n=C3.get(t);return n||(n=new yS,C3.set(t,n)),n},findPath:(e,t)=>{for(var n=[],r=t;;){var i=Lg.get(r);if(i==null){if(L.isEditor(r))return n;break}var o=n0.get(r);if(o==null)break;n.unshift(o),r=i}throw new Error("Unable to find the path for Slate node: ".concat(Sr.stringify(t)))},focus:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{retries:5};if(!ic.get(t)){if(n.retries<=0)throw new Error("Could not set focus, editor seems stuck with pending operations");if(t.operations.length>0){setTimeout(()=>{Gt.focus(t,{retries:n.retries-1})},10);return}var r=Gt.toDOMNode(t,t),i=Gt.findDocumentOrShadowRoot(t);if(i.activeElement!==r){if(t.selection&&i instanceof Document){var o=Fg(i),s=Gt.toDOMRange(t,t.selection);o==null||o.removeAllRanges(),o==null||o.addRange(s)}t.selection||Re.select(t,L.start(t,[])),ic.set(t,!0),r.focus({preventScroll:!0})}}},getWindow:e=>{var t=wS.get(e);if(!t)throw new Error("Unable to find a host window element for this editor");return t},hasDOMNode:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:i=!1}=r,o=Gt.toDOMNode(t,t),s;try{s=Ds(n)?n:n.parentElement}catch(l){if(l instanceof Error&&!l.message.includes('Permission denied to access property "nodeType"'))throw l}return s?s.closest("[data-slate-editor]")===o&&(!i||s.isContentEditable?!0:typeof s.isContentEditable=="boolean"&&s.closest('[contenteditable="false"]')===o||!!s.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(e,t)=>mc(t)&&Gt.hasDOMNode(e,t,{editable:!0}),hasRange:(e,t)=>{var{anchor:n,focus:r}=t;return L.hasPath(e,n.path)&&L.hasPath(e,r.path)},hasSelectableTarget:(e,t)=>Gt.hasEditableTarget(e,t)||Gt.isTargetInsideNonReadonlyVoid(e,t),hasTarget:(e,t)=>mc(t)&&Gt.hasDOMNode(e,t),insertData:(e,t)=>{e.insertData(t)},insertFragmentData:(e,t)=>e.insertFragmentData(t),insertTextData:(e,t)=>e.insertTextData(t),isComposing:e=>!!Nf.get(e),isFocused:e=>!!ic.get(e),isReadOnly:e=>!!L6.get(e),isTargetInsideNonReadonlyVoid:(e,t)=>{if(L6.get(e))return!1;var n=Gt.hasTarget(e,t)&&Gt.toSlateNode(e,t);return lt.isElement(n)&&L.isVoid(e,n)},setFragmentData:(e,t,n)=>e.setFragmentData(t,n),toDOMNode:(e,t)=>{var n=hv.get(e),r=L.isEditor(t)?Km.get(e):n==null?void 0:n.get(Gt.findKey(e,t));if(!r)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(Sr.stringify(t)));return r},toDOMPoint:(e,t)=>{var[n]=L.node(e,t.path),r=Gt.toDOMNode(e,n),i;L.void(e,{at:t})&&(t={path:t.path,offset:0});for(var o="[data-slate-string], [data-slate-zero-width]",s=Array.from(r.querySelectorAll(o)),l=0,c=0;c<s.length;c++){var h=s[c],d=h.childNodes[0];if(!(d==null||d.textContent==null)){var{length:g}=d.textContent,v=h.getAttribute("data-slate-length"),y=v==null?g:parseInt(v,10),x=l+y,E=s[c+1];if(t.offset===x&&E!==null&&E!==void 0&&E.hasAttribute("data-slate-mark-placeholder")){var T,D=E.childNodes[0];i=[D instanceof vH?D:E,(T=E.textContent)!==null&&T!==void 0&&T.startsWith("\uFEFF")?1:0];break}if(t.offset<=x){var S=Math.min(g,Math.max(0,t.offset-l));i=[d,S];break}l=x}}if(!i)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(Sr.stringify(t)));return i},toDOMRange:(e,t)=>{var{anchor:n,focus:r}=t,i=Ee.isBackward(t),o=Gt.toDOMPoint(e,n),s=Ee.isCollapsed(t)?o:Gt.toDOMPoint(e,r),l=Gt.getWindow(e),c=l.document.createRange(),[h,d]=i?s:o,[g,v]=i?o:s,y=Ds(h)?h:h.parentElement,x=!!y.getAttribute("data-slate-zero-width"),E=Ds(g)?g:g.parentElement,T=!!E.getAttribute("data-slate-zero-width");return c.setStart(h,x?1:d),c.setEnd(g,T?1:v),c},toSlateNode:(e,t)=>{var n=Ds(t)?t:t.parentElement;n&&!n.hasAttribute("data-slate-node")&&(n=n.closest("[data-slate-node]"));var r=n?tp.get(n):null;if(!r)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(n));return r},toSlatePoint:(e,t,n)=>{var{exactMatch:r,suppressThrow:i,searchDirection:o="backward"}=n,[s,l]=r?t:CH(t),c=s.parentNode,h=null,d=0;if(c){var g,v,y=Gt.toDOMNode(e,e),x=c.closest('[data-slate-void="true"]'),E=x&&y.contains(x)?x:null,T=c.closest('[contenteditable="false"]'),D=T&&y.contains(T)?T:null,S=c.closest("[data-slate-leaf]"),R=null;if(S){if(h=S.closest('[data-slate-node="text"]'),h){var k=Gt.getWindow(e),O=k.document.createRange();O.setStart(h,0),O.setEnd(s,l);var $=O.cloneContents(),z=[...Array.prototype.slice.call($.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call($.querySelectorAll("[contenteditable=false]"))];z.forEach(Ie=>{if(zi&&!r&&Ie.hasAttribute("data-slate-zero-width")&&Ie.textContent.length>0&&Ie.textContext!=="\uFEFF"){Ie.textContent.startsWith("\uFEFF")&&(Ie.textContent=Ie.textContent.slice(1));return}Ie.parentNode.removeChild(Ie)}),d=$.textContent.length,R=h}}else if(E){for(var K=E.querySelectorAll("[data-slate-leaf]"),te=0;te<K.length;te++){var se=K[te];if(Gt.hasDOMNode(e,se)){S=se;break}}S?(h=S.closest('[data-slate-node="text"]'),R=S,d=R.textContent.length,R.querySelectorAll("[data-slate-zero-width]").forEach(Ie=>{d-=Ie.textContent.length})):d=1}else if(D){var me=Ie=>Ie?Ie.querySelectorAll("[data-slate-leaf]:not(:scope [data-slate-editor] [data-slate-leaf])"):[],ne=D.closest('[data-slate-node="element"]');if(o==="forward"){var oe,ve=[...me(ne),...me(ne==null?void 0:ne.nextElementSibling)];S=(oe=ve.find(Ie=>DH(D,Ie)))!==null&&oe!==void 0?oe:null}else{var ge,Me=[...me(ne==null?void 0:ne.previousElementSibling),...me(ne)];S=(ge=Me.findLast(Ie=>j9(D,Ie)))!==null&&ge!==void 0?ge:null}S&&(h=S.closest('[data-slate-node="text"]'),R=S,o==="forward"?d=0:(d=R.textContent.length,R.querySelectorAll("[data-slate-zero-width]").forEach(Ie=>{d-=Ie.textContent.length})))}R&&d===R.textContent.length&&zi&&R.getAttribute("data-slate-zero-width")==="z"&&(g=R.textContent)!==null&&g!==void 0&&g.startsWith("\uFEFF")&&(c.hasAttribute("data-slate-zero-width")||t0&&(v=R.textContent)!==null&&v!==void 0&&v.endsWith(`

`))&&d--}if(zi&&!h&&!r){var Pe=c.hasAttribute("data-slate-node")?c:c.closest("[data-slate-node]");if(Pe&&Gt.hasDOMNode(e,Pe,{editable:!0})){var he=Gt.toSlateNode(e,Pe),{path:le,offset:we}=L.start(e,Gt.findPath(e,he));return Pe.querySelector("[data-slate-leaf]")||(we=l),{path:le,offset:we}}}if(!h){if(i)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var U=Gt.toSlateNode(e,h),xe=Gt.findPath(e,U);return{path:xe,offset:d}},toSlateRange:(e,t,n)=>{var r,{exactMatch:i,suppressThrow:o}=n,s=I6(t)?t.anchorNode:t.startContainer,l,c,h,d,g;if(s)if(I6(t)){if(t0&&t.rangeCount>1){h=t.focusNode;var v=t.getRangeAt(0),y=t.getRangeAt(t.rangeCount-1);if(h instanceof HTMLTableRowElement&&v.startContainer instanceof HTMLTableRowElement&&y.startContainer instanceof HTMLTableRowElement){let $=function(z){return z.childElementCount>0?$(z.children[0]):z};var x=v.startContainer,E=y.startContainer,T=$(x.children[v.startOffset]),D=$(E.children[y.startOffset]);d=0,D.childNodes.length>0?l=D.childNodes[0]:l=D,T.childNodes.length>0?h=T.childNodes[0]:h=T,D instanceof HTMLElement?c=D.innerHTML.length:c=0}else v.startContainer===h?(l=y.endContainer,c=y.endOffset,d=v.startOffset):(l=v.startContainer,c=v.endOffset,d=y.startOffset)}else l=t.anchorNode,c=t.anchorOffset,h=t.focusNode,d=t.focusOffset;vS&&xH(l)||t0?g=t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:g=t.isCollapsed}else l=t.startContainer,c=t.startOffset,h=t.endContainer,d=t.endOffset,g=t.collapsed;if(l==null||h==null||c==null||d==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(t));t0&&(r=h.textContent)!==null&&r!==void 0&&r.endsWith(`

`)&&d===h.textContent.length&&d--;var S=Gt.toSlatePoint(e,[l,c],{exactMatch:i,suppressThrow:o});if(!S)return null;var R=j9(l,h)||l===h&&d<c,k=g?S:Gt.toSlatePoint(e,[h,d],{exactMatch:i,suppressThrow:o,searchDirection:R?"forward":"backward"});if(!k)return null;var O={anchor:S,focus:k};return Ee.isExpanded(O)&&Ee.isForward(O)&&Ds(h)&&L.void(e,{at:O.focus,mode:"highest"})&&(O=L.unhangRange(e,O,{voids:!0})),O}};function _H(e,t){var{path:n,diff:r}=t;if(!L.hasPath(e,n))return!1;var i=Ke.get(e,n);if(!ot.isText(i))return!1;if(r.start!==i.text.length||r.text.length===0)return i.text.slice(r.start,r.start+r.text.length)===r.text;var o=Y.next(n);if(!L.hasPath(e,o))return!1;var s=Ke.get(e,o);return ot.isText(s)&&s.text.startsWith(r.text)}function ES(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((i,o)=>i.slice(0,o.start)+o.text+i.slice(o.end),e)}function NH(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r))return r;return n}function HH(e,t,n){for(var r=Math.min(e.length,t.length,n),i=0;i<r;i++)if(e.charAt(e.length-i-1)!==t.charAt(t.length-i-1))return i;return r}function PS(e,t){var{start:n,end:r,text:i}=t,o=e.slice(n,r),s=NH(o,i),l=Math.min(o.length-s,i.length-s),c=HH(o,i,l),h={start:n+s,end:r-c,text:i.slice(s,i.length-c)};return h.start===h.end&&h.text.length===0?null:h}function GH(e,t,n){var r=Math.min(t.start,n.start),i=Math.max(0,Math.min(t.start+t.text.length,n.end)-n.start),o=ES(e,t,n),s=Math.max(n.start+n.text.length,t.start+t.text.length+(t.start+t.text.length>n.start?n.text.length:0)-i),l=o.slice(r,s),c=Math.max(t.end,n.end-t.text.length+(t.end-t.start));return PS(e,{start:r,end:c,text:l})}function jH(e){var{path:t,diff:n}=e;return{anchor:{path:t,offset:n.start},focus:{path:t,offset:n.end}}}function N6(e,t){var{path:n,offset:r}=t;if(!L.hasPath(e,n))return null;var i=Ke.get(e,n);if(!ot.isText(i))return null;var o=L.above(e,{match:l=>lt.isElement(l)&&L.isBlock(e,l),at:n});if(!o)return null;for(;r>i.text.length;){var s=L.next(e,{at:n,match:ot.isText});if(!s||!Y.isDescendant(s[1],o[1]))return null;r-=i.text.length,i=s[0],n=s[1]}return{path:n,offset:r}}function W9(e,t){var n=N6(e,t.anchor);if(!n)return null;if(Ee.isCollapsed(t))return{anchor:n,focus:n};var r=N6(e,t.focus);return r?{anchor:n,focus:r}:null}function H6(e,t,n){var r=vo.get(e),i=r==null?void 0:r.find(d=>{var{path:g}=d;return Y.equals(g,t.path)});if(!i||t.offset<=i.diff.start)return vn.transform(t,n,{affinity:"backward"});var{diff:o}=i;if(t.offset<=o.start+o.text.length){var s={path:t.path,offset:o.start},l=vn.transform(s,n,{affinity:"backward"});return l?{path:l.path,offset:l.offset+t.offset-o.start}:null}var c={path:t.path,offset:t.offset-o.text.length+o.end-o.start},h=vn.transform(c,n,{affinity:"backward"});return h?n.type==="split_node"&&Y.equals(n.path,t.path)&&c.offset<n.position&&o.start<n.position?h:{path:h.path,offset:h.offset+o.text.length-o.end+o.start}:null}function z9(e,t,n){var r=H6(e,t.anchor,n);if(!r)return null;if(Ee.isCollapsed(t))return{anchor:r,focus:r};var i=H6(e,t.focus,n);return i?{anchor:r,focus:i}:null}function $H(e,t){var{path:n,diff:r,id:i}=e;switch(t.type){case"insert_text":return!Y.equals(t.path,n)||t.offset>=r.end?e:t.offset<=r.start?{diff:{start:t.text.length+r.start,end:t.text.length+r.end,text:r.text},id:i,path:n}:{diff:{start:r.start,end:r.end+t.text.length,text:r.text},id:i,path:n};case"remove_text":return!Y.equals(t.path,n)||t.offset>=r.end?e:t.offset+t.text.length<=r.start?{diff:{start:r.start-t.text.length,end:r.end-t.text.length,text:r.text},id:i,path:n}:{diff:{start:r.start,end:r.end-t.text.length,text:r.text},id:i,path:n};case"split_node":return!Y.equals(t.path,n)||t.position>=r.end?{diff:r,id:i,path:Y.transform(n,t,{affinity:"backward"})}:t.position>r.start?{diff:{start:r.start,end:Math.min(t.position,r.end),text:r.text},id:i,path:n}:{diff:{start:r.start-t.position,end:r.end-t.position,text:r.text},id:i,path:Y.transform(n,t,{affinity:"forward"})};case"merge_node":return Y.equals(t.path,n)?{diff:{start:r.start+t.position,end:r.end+t.position,text:r.text},id:i,path:Y.transform(n,t)}:{diff:r,id:i,path:Y.transform(n,t)}}var o=Y.transform(n,t);return o?{diff:r,path:o,id:i}:null}var V9=(e,t)=>{var n=(t.top+t.bottom)/2;return e.top<=n&&e.bottom>=n},U9=(e,t,n)=>{var r=Gt.toDOMRange(e,t).getBoundingClientRect(),i=Gt.toDOMRange(e,n).getBoundingClientRect();return V9(r,i)&&V9(i,r)},WH=(e,t)=>{var n=L.range(e,Ee.end(t)),r=Array.from(L.positions(e,{at:t})),i=0,o=r.length,s=Math.floor(o/2);if(U9(e,L.range(e,r[i]),n))return L.range(e,r[i],n);if(r.length<2)return L.range(e,r[r.length-1],n);for(;s!==r.length&&s!==i;)U9(e,L.range(e,r[s]),n)?o=s:i=s,s=Math.floor((i+o)/2);return L.range(e,r[i],n)};function X9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function K9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?X9(Object(n),!0).forEach(function(r){c8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var zH=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",r=t,{apply:i,onChange:o,deleteBackward:s,addMark:l,removeMark:c}=r;return hv.set(r,new WeakMap),r.addMark=(h,d)=>{var g,v;(g=f8.get(r))===null||g===void 0||g(),!sa.get(r)&&(v=vo.get(r))!==null&&v!==void 0&&v.length&&sa.set(r,null),zl.delete(r),l(h,d)},r.removeMark=h=>{var d;!sa.get(r)&&(d=vo.get(r))!==null&&d!==void 0&&d.length&&sa.set(r,null),zl.delete(r),c(h)},r.deleteBackward=h=>{if(h!=="line")return s(h);if(r.selection&&Ee.isCollapsed(r.selection)){var d=L.above(r,{match:x=>lt.isElement(x)&&L.isBlock(r,x),at:r.selection});if(d){var[,g]=d,v=L.range(r,g,r.selection.anchor),y=WH(r,v);Ee.isCollapsed(y)||Re.delete(r,{at:y})}}},r.apply=h=>{var d=[],g=[],v=vo.get(r);if(v!=null&&v.length){var y=v.map(ve=>$H(ve,h)).filter(Boolean);vo.set(r,y)}var x=tc.get(r);x&&tc.set(r,z9(r,x,h));var E=ec.get(r);if(E!=null&&E.at){var T=vn.isPoint(E==null?void 0:E.at)?H6(r,E.at,h):z9(r,E.at,h);ec.set(r,T?K9(K9({},E),{},{at:T}):null)}switch(h.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{d.push(...Ud(r,h.path));break}case"set_selection":{var D;(D=_g.get(r))===null||D===void 0||D.unref(),_g.delete(r);break}case"insert_node":case"remove_node":{d.push(...Ud(r,Y.parent(h.path)));break}case"merge_node":{var S=Y.previous(h.path);d.push(...Ud(r,S));break}case"move_node":{var R=Y.common(Y.parent(h.path),Y.parent(h.newPath));d.push(...Ud(r,R));var k;Y.isBefore(h.path,h.newPath)?(d.push(...Ud(r,Y.parent(h.path))),k=h.newPath):(d.push(...Ud(r,Y.parent(h.newPath))),k=h.path);var O=Ke.get(t,Y.parent(k)),$=Gt.findKey(r,O),z=L.pathRef(r,Y.parent(k));g.push([z,$]);break}}switch(i(h),h.type){case"insert_node":case"remove_node":case"merge_node":case"move_node":case"split_node":case"insert_text":case"remove_text":case"set_selection":u0.set(r,!0)}for(var[K,te]of d){var[se]=L.node(r,K);C3.set(se,te)}for(var[me,ne]of g){if(me.current){var[oe]=L.node(r,me.current);C3.set(oe,ne)}me.unref()}},r.setFragmentData=h=>{var{selection:d}=r;if(d){var[g,v]=Ee.edges(d),y=L.void(r,{at:g.path}),x=L.void(r,{at:v.path});if(!(Ee.isCollapsed(d)&&!y)){var E=Gt.toDOMRange(r,d),T=E.cloneContents(),D=T.childNodes[0];if(T.childNodes.forEach(se=>{se.textContent&&se.textContent.trim()!==""&&(D=se)}),x){var[S]=x,R=E.cloneRange(),k=Gt.toDOMNode(r,S);R.setEndAfter(k),T=R.cloneContents()}if(y&&(D=T.querySelector("[data-slate-spacer]")),Array.from(T.querySelectorAll("[data-slate-zero-width]")).forEach(se=>{var me=se.getAttribute("data-slate-zero-width")==="n";se.textContent=me?`
`:""}),gS(D)){var O=D.ownerDocument.createElement("span");O.style.whiteSpace="pre",O.appendChild(D),T.appendChild(O),D=O}var $=r.getFragment(),z=JSON.stringify($),K=window.btoa(encodeURIComponent(z));D.setAttribute("data-slate-fragment",K),h.setData("application/".concat(n),K);var te=T.ownerDocument.createElement("div");return te.appendChild(T),te.setAttribute("hidden","true"),T.ownerDocument.body.appendChild(te),h.setData("text/html",te.innerHTML),h.setData("text/plain",mS(te)),T.ownerDocument.body.removeChild(te),h}}},r.insertData=h=>{r.insertFragmentData(h)||r.insertTextData(h)},r.insertFragmentData=h=>{var d=h.getData("application/".concat(n))||SH(h);if(d){var g=decodeURIComponent(window.atob(d)),v=JSON.parse(g);return r.insertFragment(v),!0}return!1},r.insertTextData=h=>{var d=h.getData("text/plain");if(d){var g=d.split(/\r\n|\r|\n/),v=!1;for(var y of g)v&&Re.splitNodes(r,{always:!0}),r.insertText(y),v=!0;return!0}return!1},r.onChange=h=>{var d=_6.get(r);d&&d(h),o(h)},r},Ud=(e,t)=>{var n=[];for(var[r,i]of L.levels(e,{at:t})){var o=Gt.findKey(e,r);n.push([i,o])}return n},VH=3,UH={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},XH={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},KH={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},er=e=>{var t=UH[e],n=XH[e],r=KH[e],i=t&&Qt.isHotkey(t),o=n&&Qt.isHotkey(n),s=r&&Qt.isHotkey(r);return l=>!!(i&&i(l)||$9&&o&&o(l)||!$9&&s&&s(l))},ar={isBold:er("bold"),isCompose:er("compose"),isMoveBackward:er("moveBackward"),isMoveForward:er("moveForward"),isDeleteBackward:er("deleteBackward"),isDeleteForward:er("deleteForward"),isDeleteLineBackward:er("deleteLineBackward"),isDeleteLineForward:er("deleteLineForward"),isDeleteWordBackward:er("deleteWordBackward"),isDeleteWordForward:er("deleteWordForward"),isExtendBackward:er("extendBackward"),isExtendForward:er("extendForward"),isExtendLineBackward:er("extendLineBackward"),isExtendLineForward:er("extendLineForward"),isItalic:er("italic"),isMoveLineBackward:er("moveLineBackward"),isMoveLineForward:er("moveLineForward"),isMoveWordBackward:er("moveWordBackward"),isMoveWordForward:er("moveWordForward"),isRedo:er("redo"),isSoftBreak:er("insertSoftBreak"),isSplitBlock:er("splitBlock"),isTransposeCharacter:er("transposeCharacter"),isUndo:er("undo")};function YH(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Y9(e,t){if(e==null)return{};var n=YH(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var qH=["anchor","focus"],ZH=["anchor","focus"];function q9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Z9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q9(Object(n),!0).forEach(function(r){c8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var QH=(e,t)=>Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(n=>t.hasOwnProperty(n)&&e[n]===t[n]),SS=(e,t)=>{var n=Y9(e,qH),r=Y9(t,ZH);return e[x0]===t[x0]&&QH(n,r)},h8=(e,t)=>{if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],i=t[n];if(!Ee.equals(r,i)||!SS(r,i))return!1}return!0},TS=(e,t)=>{if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],i=t[n];if(r.anchor.offset!==i.anchor.offset||r.focus.offset!==i.focus.offset||!SS(r,i))return!1}return!0},JH=(e,t,n)=>{var r=Array.from(t.children,()=>[]);if(n.length===0)return r;var i=Gt.findPath(e,t),o=i.length,s=L.range(e,i),l=new Array(t.children.length),c=R=>{var k=l[R];if(k)return k;var O=L.range(e,[...i,R]);return l[R]=O,O};for(var h of n){var d=Ee.intersection(s,h);if(d)for(var[g,v]=Ee.edges(d),y=g.path[o],x=v.path[o],E=y;E<=x;E++){var T=r[E];if(T){var D=c(E),S=Ee.intersection(D,h);S&&T.push(Z9(Z9({},h),S))}}}return r},Vf=[],eG=function(){return Vf.some(function(e){return e.activeTargets.length>0})},tG=function(){return Vf.some(function(e){return e.skippedTargets.length>0})},Q9="ResizeObserver loop completed with undelivered notifications.",nG=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:Q9}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=Q9),window.dispatchEvent(e)},np;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(np||(np={}));var Uf=function(e){return Object.freeze(e)},rG=function(){function e(t,n){this.inlineSize=t,this.blockSize=n,Uf(this)}return e}(),DS=function(){function e(t,n,r,i){return this.x=t,this.y=n,this.width=r,this.height=i,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Uf(this)}return e.prototype.toJSON=function(){var t=this,n=t.x,r=t.y,i=t.top,o=t.right,s=t.bottom,l=t.left,c=t.width,h=t.height;return{x:n,y:r,top:i,right:o,bottom:s,left:l,width:c,height:h}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),d8=function(e){return e instanceof SVGElement&&"getBBox"in e},AS=function(e){if(d8(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var i=e,o=i.offsetWidth,s=i.offsetHeight;return!(o||s||e.getClientRects().length)},J9=function(e){var t;if(e instanceof Element)return!0;var n=(t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(n&&e instanceof n.Element)},iG=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Ng=typeof window<"u"?window:{},Cm=new WeakMap,eC=/auto|scroll/,oG=/^tb|vertical/,sG=/msie|trident/i.test(Ng.navigator&&Ng.navigator.userAgent),Ga=function(e){return parseFloat(e||"0")},c0=function(e,t,n){return e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=!1),new rG((n?t:e)||0,(n?e:t)||0)},tC=Uf({devicePixelContentBoxSize:c0(),borderBoxSize:c0(),contentBoxSize:c0(),contentRect:new DS(0,0,0,0)}),BS=function(e,t){if(t===void 0&&(t=!1),Cm.has(e)&&!t)return Cm.get(e);if(AS(e))return Cm.set(e,tC),tC;var n=getComputedStyle(e),r=d8(e)&&e.ownerSVGElement&&e.getBBox(),i=!sG&&n.boxSizing==="border-box",o=oG.test(n.writingMode||""),s=!r&&eC.test(n.overflowY||""),l=!r&&eC.test(n.overflowX||""),c=r?0:Ga(n.paddingTop),h=r?0:Ga(n.paddingRight),d=r?0:Ga(n.paddingBottom),g=r?0:Ga(n.paddingLeft),v=r?0:Ga(n.borderTopWidth),y=r?0:Ga(n.borderRightWidth),x=r?0:Ga(n.borderBottomWidth),E=r?0:Ga(n.borderLeftWidth),T=g+h,D=c+d,S=E+y,R=v+x,k=l?e.offsetHeight-R-e.clientHeight:0,O=s?e.offsetWidth-S-e.clientWidth:0,$=i?T+S:0,z=i?D+R:0,K=r?r.width:Ga(n.width)-$-O,te=r?r.height:Ga(n.height)-z-k,se=K+T+O+S,me=te+D+k+R,ne=Uf({devicePixelContentBoxSize:c0(Math.round(K*devicePixelRatio),Math.round(te*devicePixelRatio),o),borderBoxSize:c0(se,me,o),contentBoxSize:c0(K,te,o),contentRect:new DS(g,c,K,te)});return Cm.set(e,ne),ne},MS=function(e,t,n){var r=BS(e,n),i=r.borderBoxSize,o=r.contentBoxSize,s=r.devicePixelContentBoxSize;switch(t){case np.DEVICE_PIXEL_CONTENT_BOX:return s;case np.BORDER_BOX:return i;default:return o}},aG=function(){function e(t){var n=BS(t);this.target=t,this.contentRect=n.contentRect,this.borderBoxSize=Uf([n.borderBoxSize]),this.contentBoxSize=Uf([n.contentBoxSize]),this.devicePixelContentBoxSize=Uf([n.devicePixelContentBoxSize])}return e}(),RS=function(e){if(AS(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},lG=function(){var e=1/0,t=[];Vf.forEach(function(s){if(s.activeTargets.length!==0){var l=[];s.activeTargets.forEach(function(h){var d=new aG(h.target),g=RS(h.target);l.push(d),h.lastReportedSize=MS(h.target,h.observedBox),g<e&&(e=g)}),t.push(function(){s.callback.call(s.observer,l,s.observer)}),s.activeTargets.splice(0,s.activeTargets.length)}});for(var n=0,r=t;n<r.length;n++){var i=r[n];i()}return e},nC=function(e){Vf.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(i){i.isActive()&&(RS(i.target)>e?n.activeTargets.push(i):n.skippedTargets.push(i))})})},uG=function(){var e=0;for(nC(e);eG();)e=lG(),nC(e);return tG()&&nG(),e>0},v5,bS=[],cG=function(){return bS.splice(0).forEach(function(e){return e()})},fG=function(e){if(!v5){var t=0,n=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return cG()}).observe(n,r),v5=function(){n.textContent="".concat(t?t--:t++)}}bS.push(e),v5()},hG=function(e){fG(function(){requestAnimationFrame(e)})},Ym=0,dG=function(){return!!Ym},gG=250,pG={attributes:!0,characterData:!0,childList:!0,subtree:!0},rC=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],iC=function(e){return e===void 0&&(e=0),Date.now()+e},y5=!1,mG=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var n=this;if(t===void 0&&(t=gG),!y5){y5=!0;var r=iC(t);hG(function(){var i=!1;try{i=uG()}finally{if(y5=!1,t=r-iC(),!dG())return;i?n.run(1e3):t>0?n.run(t):n.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,n=function(){return t.observer&&t.observer.observe(document.body,pG)};document.body?n():Ng.addEventListener("DOMContentLoaded",n)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),rC.forEach(function(n){return Ng.addEventListener(n,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),rC.forEach(function(n){return Ng.removeEventListener(n,t.listener,!0)}),this.stopped=!0)},e}(),G6=new mG,oC=function(e){!Ym&&e>0&&G6.start(),Ym+=e,!Ym&&G6.stop()},vG=function(e){return!d8(e)&&!iG(e)&&getComputedStyle(e).display==="inline"},yG=function(){function e(t,n){this.target=t,this.observedBox=n||np.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=MS(this.target,this.observedBox,!0);return vG(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),wG=function(){function e(t,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=n}return e}(),xm=new WeakMap,sC=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},Em=function(){function e(){}return e.connect=function(t,n){var r=new wG(t,n);xm.set(t,r)},e.observe=function(t,n,r){var i=xm.get(t),o=i.observationTargets.length===0;sC(i.observationTargets,n)<0&&(o&&Vf.push(i),i.observationTargets.push(new yG(n,r&&r.box)),oC(1),G6.schedule())},e.unobserve=function(t,n){var r=xm.get(t),i=sC(r.observationTargets,n),o=r.observationTargets.length===1;i>=0&&(o&&Vf.splice(Vf.indexOf(r),1),r.observationTargets.splice(i,1),oC(-1))},e.disconnect=function(t){var n=this,r=xm.get(t);r.observationTargets.slice().forEach(function(i){return n.unobserve(t,i.target)}),r.activeTargets.splice(0,r.activeTargets.length)},e}(),CG=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Em.connect(this,t)}return e.prototype.observe=function(t,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!J9(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Em.observe(this,t,n)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!J9(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Em.unobserve(this,t)},e.prototype.disconnect=function(){Em.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}(),g8=ME();const xG=Cc(g8);function EG(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function x3(e,t){if(e==null)return{};var n=EG(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function rp(e){"@babel/helpers - typeof";return rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rp(e)}function PG(e,t){if(rp(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(rp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SG(e){var t=PG(e,"string");return rp(t)==="symbol"?t:String(t)}function tr(e,t,n){return t=SG(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p8=G.createContext(null),ol=()=>{var e=G.useContext(p8);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},ze=Gt;function aC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Pm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aC(Object(n),!0).forEach(function(r){tr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var TG=25,DG=200,AG=function(){},BG=e=>(e==null?void 0:e.constructor.name)==="DataTransfer";function MG(e){var{editor:t,scheduleOnDOMSelectionChange:n,onDOMSelectionChange:r}=e,i=!1,o=null,s=null,l=null,c=0,h=!1,d=()=>{var ne=tc.get(t);if(tc.delete(t),ne){var{selection:oe}=t,ve=W9(t,ne);ve&&(!oe||!Ee.equals(ve,oe))&&Re.select(t,ve)}},g=()=>{var ne=ec.get(t);if(ec.delete(t),!!ne){if(ne.at){var oe=vn.isPoint(ne.at)?N6(t,ne.at):W9(t,ne.at);if(!oe)return;var ve=L.range(t,oe);(!t.selection||!Ee.equals(t.selection,ve))&&Re.select(t,oe)}ne.run()}},v=()=>{if(s&&(clearTimeout(s),s=null),l&&(clearTimeout(l),l=null),!k()&&!R()){d();return}i||(i=!0,setTimeout(()=>i=!1)),R()&&(i="action");var ne=t.selection&&L.rangeRef(t,t.selection,{affinity:"forward"});zl.set(t,t.marks),AG("flush",ec.get(t),vo.get(t));for(var oe=k(),ve;ve=(ge=vo.get(t))===null||ge===void 0?void 0:ge[0];){var ge,Me,Pe=sa.get(t);Pe!==void 0&&(sa.delete(t),t.marks=Pe),Pe&&h===!1&&(h=null);var he=jH(ve);(!t.selection||!Ee.equals(t.selection,he))&&Re.select(t,he),ve.diff.text?L.insertText(t,ve.diff.text):L.deleteFragment(t),vo.set(t,(Me=vo.get(t))===null||Me===void 0?void 0:Me.filter(U=>{var{id:xe}=U;return xe!==ve.id})),_H(t,ve)||(oe=!1,ec.delete(t),zl.delete(t),i="action",tc.delete(t),n.cancel(),r.cancel(),ne==null||ne.unref())}var le=ne==null?void 0:ne.unref();if(le&&!tc.get(t)&&(!t.selection||!Ee.equals(le,t.selection))&&Re.select(t,le),R()){g();return}oe&&n(),n.flush(),r.flush(),d();var we=zl.get(t);zl.delete(t),we!==void 0&&(t.marks=we,t.onChange())},y=ne=>{o&&clearTimeout(o),o=setTimeout(()=>{Nf.set(t,!1),v()},TG)},x=ne=>{Nf.set(t,!0),o&&(clearTimeout(o),o=null)},E=function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ve=F6.get(t);if(ve){if(k()||oe){ve.style.display="none";return}ve.style.removeProperty("display")}},T=(ne,oe)=>{var ve,ge=(ve=vo.get(t))!==null&&ve!==void 0?ve:[];vo.set(t,ge);var Me=Ke.leaf(t,ne),Pe=ge.findIndex(we=>Y.equals(we.path,ne));if(Pe<0){var he=PS(Me.text,oe);he&&ge.push({path:ne,diff:oe,id:c++}),E();return}var le=GH(Me.text,ge[Pe].diff,oe);if(!le){ge.splice(Pe,1),E();return}ge[Pe]=Pm(Pm({},ge[Pe]),{},{diff:le})},D=function(oe){var{at:ve}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};h=!1,tc.delete(t),n.cancel(),r.cancel(),R()&&v(),ec.set(t,{at:ve,run:oe}),l=setTimeout(v)},S=ne=>{var oe;if(s&&(clearTimeout(s),s=null),!u0.get(t)){var{inputType:ve}=ne,ge=null,Me=ne.dataTransfer||ne.data||void 0;h!==!1&&ve!=="insertText"&&ve!=="insertCompositionText"&&(h=!1);var[Pe]=ne.getTargetRanges();Pe&&(ge=ze.toSlateRange(t,Pe,{exactMatch:!1,suppressThrow:!0}));var he=ze.getWindow(t),le=he.getSelection();if(!ge&&le&&(Pe=le,ge=ze.toSlateRange(t,le,{exactMatch:!1,suppressThrow:!0})),ge=(oe=ge)!==null&&oe!==void 0?oe:t.selection,!!ge){var we=!0;if(ve.startsWith("delete")){if(Ee.isExpanded(ge)){var[U,xe]=Ee.edges(ge),Ie=Ke.leaf(t,U.path);if(Ie.text.length===U.offset&&xe.offset===0){var Le=L.next(t,{at:U.path,match:ot.isText});Le&&Y.equals(Le[1],xe.path)&&(ge={anchor:xe,focus:xe})}}var $e=ve.endsWith("Backward")?"backward":"forward",[Fe,Ze]=Ee.edges(ge),[et,Q]=L.leaf(t,Fe.path),Se={text:"",start:Fe.offset,end:Ze.offset},Te=vo.get(t),ke=Te==null?void 0:Te.find(wn=>Y.equals(wn.path,Q)),vt=ke?[ke.diff,Se]:[Se],Ye=ES(et.text,...vt);if(Ye.length===0&&(we=!1),Ee.isExpanded(ge)){if(we&&Y.equals(ge.anchor.path,ge.focus.path)){var At={path:ge.anchor.path,offset:Fe.offset},hn=L.range(t,At,At);return z(hn),T(ge.anchor.path,{text:"",end:Ze.offset,start:Fe.offset})}return D(()=>L.deleteFragment(t,{direction:$e}),{at:ge})}}switch(ve){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return D(()=>L.deleteFragment(t),{at:ge});case"deleteContent":case"deleteContentForward":{var{anchor:Mt}=ge;if(we&&Ee.isCollapsed(ge)){var kn=Ke.leaf(t,Mt.path);if(Mt.offset<kn.text.length)return T(Mt.path,{text:"",start:Mt.offset,end:Mt.offset+1})}return D(()=>L.deleteForward(t),{at:ge})}case"deleteContentBackward":{var Cn,{anchor:dn}=ge,_t=I6(Pe)?Pe.isCollapsed:!!((Cn=Pe)!==null&&Cn!==void 0&&Cn.collapsed);return we&&_t&&Ee.isCollapsed(ge)&&dn.offset>0?T(dn.path,{text:"",start:dn.offset-1,end:dn.offset}):D(()=>L.deleteBackward(t),{at:ge})}case"deleteEntireSoftLine":return D(()=>{L.deleteBackward(t,{unit:"line"}),L.deleteForward(t,{unit:"line"})},{at:ge});case"deleteHardLineBackward":return D(()=>L.deleteBackward(t,{unit:"block"}),{at:ge});case"deleteSoftLineBackward":return D(()=>L.deleteBackward(t,{unit:"line"}),{at:ge});case"deleteHardLineForward":return D(()=>L.deleteForward(t,{unit:"block"}),{at:ge});case"deleteSoftLineForward":return D(()=>L.deleteForward(t,{unit:"line"}),{at:ge});case"deleteWordBackward":return D(()=>L.deleteBackward(t,{unit:"word"}),{at:ge});case"deleteWordForward":return D(()=>L.deleteForward(t,{unit:"word"}),{at:ge});case"insertLineBreak":return D(()=>L.insertSoftBreak(t),{at:ge});case"insertParagraph":return D(()=>L.insertBreak(t),{at:ge});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(BG(Me))return D(()=>ze.insertData(t,Me),{at:ge});var an=Me??"";if(sa.get(t)&&(an=an.replace("\uFEFF","")),ve==="insertText"&&/.*\n.*\n$/.test(an)&&(an=an.slice(0,-1)),an.includes(`
`))return D(()=>{var wn=an.split(`
`);wn.forEach((On,Lr)=>{On&&L.insertText(t,On),Lr!==wn.length-1&&L.insertSoftBreak(t)})},{at:ge});if(Y.equals(ge.anchor.path,ge.focus.path)){var[pr,Ki]=Ee.edges(ge),$n={start:pr.offset,end:Ki.offset,text:an};if(an&&h&&ve==="insertCompositionText"){var Yi=h.start+h.text.search(/\S|$/),mr=$n.start+$n.text.search(/\S|$/);mr===Yi+1&&$n.end===h.start+h.text.length?($n.start-=1,h=null,se()):h=!1}else ve==="insertText"?h===null?h=$n:h&&Ee.isCollapsed(ge)&&h.end+h.text.length===pr.offset?h=Pm(Pm({},h),{},{text:h.text+an}):h=!1:h=!1;if(we){T(pr.path,$n);return}}return D(()=>L.insertText(t,an),{at:ge})}}}}},R=()=>!!ec.get(t),k=()=>{var ne;return!!((ne=vo.get(t))!==null&&ne!==void 0&&ne.length)},O=()=>R()||k(),$=()=>i,z=ne=>{tc.set(t,ne),s&&(clearTimeout(s),s=null);var{selection:oe}=t;if(ne){var ve=!oe||!Y.equals(oe.anchor.path,ne.anchor.path),ge=!oe||!Y.equals(oe.anchor.path.slice(0,-1),ne.anchor.path.slice(0,-1));(ve&&h||ge)&&(h=!1),(ve||k())&&(s=setTimeout(v,DG))}},K=()=>{(R()||!k())&&v()},te=ne=>{k()||(E(!0),setTimeout(E))},se=()=>{R()||(l=setTimeout(v))},me=ne=>{if(!(k()||R())&&ne.some(ve=>u8(t,ve,ne))){var oe;(oe=CS.get(t))===null||oe===void 0||oe()}};return{flush:v,scheduleFlush:se,hasPendingDiffs:k,hasPendingAction:R,hasPendingChanges:O,isFlushing:$,handleUserSelect:z,handleCompositionEnd:y,handleCompositionStart:x,handleDOMBeforeInput:S,handleKeyDown:te,handleDomMutations:me,handleInput:K}}function RG(){var e=G.useRef(!1);return G.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),e.current}var nu=Xm?G.useLayoutEffect:G.useEffect;function bG(e,t,n){var[r]=G.useState(()=>new MutationObserver(t));nu(()=>{r.takeRecords()}),G.useEffect(()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return r.observe(e.current,n),()=>r.disconnect()},[r,e,n])}var kG=["node"];function lC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function OG(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lC(Object(n),!0).forEach(function(r){tr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var IG={subtree:!0,childList:!0,characterData:!0},FG=zi?e=>{var{node:t}=e,n=x3(e,kG);if(!zi)return null;var r=ol(),i=RG(),[o]=G.useState(()=>MG(OG({editor:r},n)));return bG(t,o.handleDomMutations,IG),f8.set(r,o.scheduleFlush),i&&o.flush(),o}:()=>null;function uC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function LG(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uC(Object(n),!0).forEach(function(r){tr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var _G=e=>{var{isLast:t,leaf:n,parent:r,text:i}=e,o=ol(),s=ze.findPath(o,i),l=Y.parent(s),c=!!n[xS];return o.isVoid(r)?xt.createElement(w5,{length:Ke.string(r).length}):n.text===""&&r.children[r.children.length-1]===i&&!o.isInline(r)&&L.string(o,l)===""?xt.createElement(w5,{isLineBreak:!0,isMarkPlaceholder:c}):n.text===""?xt.createElement(w5,{isMarkPlaceholder:c}):t&&n.text.slice(-1)===`
`?xt.createElement(cC,{isTrailing:!0,text:n.text}):xt.createElement(cC,{text:n.text})},cC=e=>{var{text:t,isTrailing:n=!1}=e,r=G.useRef(null),i=()=>"".concat(t??"").concat(n?`
`:""),[o]=G.useState(i);return nu(()=>{var s=i();r.current&&r.current.textContent!==s&&(r.current.textContent=s)}),xt.createElement(NG,{ref:r},o)},NG=G.memo(G.forwardRef((e,t)=>xt.createElement("span",{"data-slate-string":!0,ref:t},e.children))),w5=e=>{var{length:t=0,isLineBreak:n=!1,isMarkPlaceholder:r=!1}=e,i={"data-slate-zero-width":n?"n":"z","data-slate-length":t};return r&&(i["data-slate-mark-placeholder"]=!0),xt.createElement("span",LG({},i),!zi||!n?"\uFEFF":null,n?xt.createElement("br",null):null)};function fC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fC(Object(n),!0).forEach(function(r){tr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var HG=zi?300:0;function GG(e,t){e.current&&(e.current.disconnect(),t&&(e.current=null))}function hC(e){e.current&&(clearTimeout(e.current),e.current=null)}var jG=e=>xt.createElement(zG,kS({},e)),$G=e=>{var{leaf:t,isLast:n,text:r,parent:i,renderPlaceholder:o,renderLeaf:s=jG,leafPosition:l}=e,c=ol(),h=G.useRef(null),d=G.useRef(null),[g,v]=G.useState(!1),y=G.useRef(null),x=G.useCallback(R=>{if(GG(h,R==null),R==null){var k;F6.delete(c),(k=t.onPlaceholderResize)===null||k===void 0||k.call(t,null)}else{if(F6.set(c,R),!h.current){var O=window.ResizeObserver||CG;h.current=new O(()=>{var $;($=t.onPlaceholderResize)===null||$===void 0||$.call(t,R)})}h.current.observe(R),d.current=R}},[d,t,c]),E=xt.createElement(_G,{isLast:n,leaf:t,parent:i,text:r}),T=!!t[x0];if(G.useEffect(()=>(T?y.current||(y.current=setTimeout(()=>{v(!0),y.current=null},HG)):(hC(y),v(!1)),()=>hC(y)),[T,v]),T&&g){var D={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:If?"inherit":void 0},contentEditable:!1,ref:x}};E=xt.createElement(xt.Fragment,null,E,o(D))}var S={"data-slate-leaf":!0};return s({attributes:S,children:E,leaf:t,text:r,leafPosition:l})},WG=xt.memo($G,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&ot.equals(t.leaf,e.leaf)&&t.leaf[x0]===e.leaf[x0]),zG=e=>{var{attributes:t,children:n}=e;return xt.createElement("span",kS({},t),n)};function VG(e,t){var[,n]=G.useReducer(h=>h+1,0),r=G.useRef(),i=G.useRef(()=>null),o=G.useRef(null),s;try{if(e!==i.current||r.current){var l=e();t(o.current,l)?s=o.current:s=l}else s=o.current}catch(h){throw r.current&&UG(h)&&(h.message+=`
The error may be correlated with this previous error:
`.concat(r.current.stack,`

`)),h}i.current=e,o.current=s,r.current=void 0;var c=G.useCallback(()=>{try{var h=i.current();if(t(o.current,h))return;o.current=h}catch(d){d instanceof Error?r.current=d:r.current=new Error(String(d))}n()},[]);return[s,c]}function UG(e){return e instanceof Error}var OS=G.createContext({}),IS=(e,t)=>{var n=ol(),{decorate:r,addEventListener:i}=G.useContext(OS),o=()=>{var h=ze.findPath(n,e);return r([e,h])},s=ot.isText(e)?TS:h8,[l,c]=VG(o,s);return nu(()=>{var h=i(c);return c(),h},[i,c]),G.useMemo(()=>[...l,...t],[l,t])},XG=e=>{var t=G.useRef(new Set),n=G.useRef(e);nu(()=>{n.current=e,t.current.forEach(o=>o())},[e]);var r=G.useCallback(o=>n.current(o),[]),i=G.useCallback(o=>(t.current.add(o),()=>{t.current.delete(o)}),[]);return G.useMemo(()=>({decorate:r,addEventListener:i}),[r,i])};function dC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function FS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dC(Object(n),!0).forEach(function(r){tr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var KG=e=>xt.createElement(qG,FS({},e)),YG=e=>{for(var{decorations:t,isLast:n,parent:r,renderPlaceholder:i,renderLeaf:o,renderText:s=KG,text:l}=e,c=ol(),h=G.useRef(null),d=IS(l,t),g=ot.decorations(l,d),v=ze.findKey(c,l),y=[],x=0;x<g.length;x++){var{leaf:E,position:T}=g[x];y.push(xt.createElement(WG,{isLast:n&&x===g.length-1,key:"".concat(v.id,"-").concat(x),renderPlaceholder:i,leaf:E,leafPosition:T,text:l,parent:r,renderLeaf:o}))}var D=G.useCallback(R=>{var k=hv.get(c);R?(k==null||k.set(v,R),zf.set(l,R),tp.set(R,l)):(k==null||k.delete(v),zf.delete(l),h.current&&tp.delete(h.current)),h.current=R},[h,c,v,l]),S={"data-slate-node":"text",ref:D};return s({text:l,children:y,attributes:S})},LS=xt.memo(YG,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderText===e.renderText&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&TS(t.decorations,e.decorations)),qG=e=>{var{attributes:t,children:n}=e;return xt.createElement("span",FS({},t),n)};function gC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function j6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gC(Object(n),!0).forEach(function(r){tr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var ZG=e=>xt.createElement(ej,j6({},e)),QG=e=>{var{decorations:t,element:n,renderElement:r=ZG,renderChunk:i,renderPlaceholder:o,renderLeaf:s,renderText:l}=e,c=ol(),h=cj(),d=c.isInline(n),g=IS(n,t),v=ze.findKey(c,n),y=G.useCallback(k=>{var O=hv.get(c);k?(O==null||O.set(v,k),zf.set(n,k),tp.set(k,n)):(O==null||O.delete(v),zf.delete(n))},[c,v,n]),x=HS({decorations:g,node:n,renderElement:r,renderChunk:i,renderPlaceholder:o,renderLeaf:s,renderText:l}),E={"data-slate-node":"element",ref:y};if(d&&(E["data-slate-inline"]=!0),!d&&L.hasInlines(c,n)){var T=Ke.string(n),D=hS(T);D==="rtl"&&(E.dir=D)}if(L.isVoid(c,n)){E["data-slate-void"]=!0,!h&&d&&(E.contentEditable=!1);var S=d?"span":"div",[[R]]=Ke.texts(n);x=xt.createElement(S,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},xt.createElement(LS,{renderPlaceholder:o,decorations:[],isLast:!1,parent:n,text:R})),n0.set(R,0),Lg.set(R,n)}return r({attributes:E,children:x,element:n})},JG=xt.memo(QG,(e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderChunk===t.renderChunk&&e.renderText===t.renderText&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&h8(e.decorations,t.decorations)),ej=e=>{var{attributes:t,children:n,element:r}=e,i=ol(),o=i.isInline(r)?"span":"div";return xt.createElement(o,j6(j6({},t),{},{style:{position:"relative"}}),n)};class tj{constructor(t,n){var{chunkSize:r,debug:i}=n;tr(this,"root",void 0),tr(this,"chunkSize",void 0),tr(this,"debug",void 0),tr(this,"reachedEnd",void 0),tr(this,"pointerChunk",void 0),tr(this,"pointerIndex",void 0),tr(this,"pointerIndexStack",void 0),tr(this,"cachedPointerNode",void 0),this.root=t,this.chunkSize=r,this.debug=i??!1,this.pointerChunk=t,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.validateState()}readLeaf(){if(this.reachedEnd)return null;for(;;)if(this.pointerIndex+1<this.pointerSiblings.length){this.pointerIndex++,this.cachedPointerNode=void 0;break}else{if(this.pointerChunk.type==="root")return this.reachedEnd=!0,null;this.exitChunk()}return this.validateState(),this.enterChunkUntilLeaf(!1),this.pointerNode}returnToPreviousLeaf(){if(this.reachedEnd){this.reachedEnd=!1,this.enterChunkUntilLeaf(!0);return}for(;;)if(this.pointerIndex>=1){this.pointerIndex--,this.cachedPointerNode=void 0;break}else if(this.pointerChunk.type==="root"){this.pointerIndex=-1;return}else this.exitChunk();this.validateState(),this.enterChunkUntilLeaf(!0)}insertBefore(t){this.returnToPreviousLeaf(),this.insertAfter(t),this.readLeaf()}insertAfter(t){if(t.length!==0){for(var n=0,r=0;this.pointerChunk.type==="chunk"&&this.pointerIndex===this.pointerSiblings.length-1;){var i=this.chunkSize-this.pointerSiblings.length,o=Math.min(i,t.length);if(o>0){var s=t.splice(0,o);this.rawInsertAfter(s,n)}this.exitChunk(),n++}if(t.length!==0){var l=this.savePointer(),c=null;if(this.readLeaf())for(;this.pointerChunk.type==="chunk"&&this.pointerIndex===0;){var h=this.chunkSize-this.pointerSiblings.length,d=Math.min(h,t.length);if(d>0){var g=t.splice(-d,d);this.pointerIndex=-1,this.cachedPointerNode=void 0,this.rawInsertAfter(g,r),c||(c=this.savePointer())}this.exitChunk(),r++}this.restorePointer(l);var v=Math.max(n,r);this.rawInsertAfter(t,v),c&&this.restorePointer(c),this.validateState()}}}remove(){this.pointerSiblings.splice(this.pointerIndex--,1),this.cachedPointerNode=void 0,this.pointerSiblings.length===0&&this.pointerChunk.type==="chunk"?(this.exitChunk(),this.remove()):this.invalidateChunk(),this.validateState()}invalidateChunk(){for(var t=this.pointerChunk;t.type==="chunk";t=t.parent)this.root.modifiedChunks.add(t)}get atStart(){return this.pointerChunk.type==="root"&&this.pointerIndex===-1}get pointerSiblings(){return this.pointerChunk.children}getPointerNode(){return this.reachedEnd||this.pointerIndex===-1?null:this.pointerSiblings[this.pointerIndex]}get pointerNode(){if(this.cachedPointerNode!==void 0)return this.cachedPointerNode;var t=this.getPointerNode();return this.cachedPointerNode=t,t}getChunkPath(t){for(var n=[],r=t;r.type==="chunk";r=r.parent){var i=r.parent.children.indexOf(r);if(i===-1)return null;n.unshift(i)}return n}savePointer(){if(this.atStart)return"start";if(!this.pointerNode)throw new Error("Cannot save pointer when pointerNode is null");return{chunk:this.pointerChunk,node:this.pointerNode}}restorePointer(t){if(t==="start"){this.pointerChunk=this.root,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.cachedPointerNode=void 0;return}var{chunk:n,node:r}=t,i=n.children.indexOf(r);if(i===-1)throw new Error("Cannot restore point because saved node is no longer in saved chunk");var o=this.getChunkPath(n);if(!o)throw new Error("Cannot restore point because saved chunk is no longer connected to root");this.pointerChunk=n,this.pointerIndex=i,this.pointerIndexStack=o,this.reachedEnd=!1,this.cachedPointerNode=r,this.validateState()}enterChunk(t){var n;if(((n=this.pointerNode)===null||n===void 0?void 0:n.type)!=="chunk")throw new Error("Cannot enter non-chunk");if(this.pointerIndexStack.push(this.pointerIndex),this.pointerChunk=this.pointerNode,this.pointerIndex=t?this.pointerSiblings.length-1:0,this.cachedPointerNode=void 0,this.validateState(),this.pointerChunk.children.length===0)throw new Error("Cannot enter empty chunk")}enterChunkUntilLeaf(t){for(;((n=this.pointerNode)===null||n===void 0?void 0:n.type)==="chunk";){var n;this.enterChunk(t)}}exitChunk(){if(this.pointerChunk.type==="root")throw new Error("Cannot exit root");var t=this.pointerChunk;this.pointerChunk=t.parent,this.pointerIndex=this.pointerIndexStack.pop(),this.cachedPointerNode=void 0,this.validateState()}rawInsertAfter(t,n){if(t.length!==0){for(var r=(d,g,v)=>{if(v===1)return d;for(var y=[],x=0;x<this.chunkSize;x++){var E=d.slice(x*v,(x+1)*v);if(E.length===0)break;var T={type:"chunk",key:new yS,parent:g,children:[]};T.children=r(E,T,v/this.chunkSize),y.push(T)}return y},i=this.pointerSiblings.length+t.length,o=0,s=this.chunkSize;s<i;s*=this.chunkSize)o++;var l=Math.max(o,n),c=Math.pow(this.chunkSize,l),h=r(t,this.pointerChunk,c);this.pointerSiblings.splice(this.pointerIndex+1,0,...h),this.pointerIndex+=h.length,this.cachedPointerNode=void 0,this.invalidateChunk(),this.validateState()}}validateState(){if(this.debug){var t=r=>{if(r.type==="chunk"){var{parent:i,children:o}=r;if(!i.children.includes(r))throw new Error("Debug: Chunk ".concat(r.key.id," has an incorrect parent property"));o.forEach(t)}};if(this.root.children.forEach(t),this.cachedPointerNode!==void 0&&this.cachedPointerNode!==this.getPointerNode())throw new Error("Debug: The cached pointer is incorrect and has not been invalidated");var n=this.getChunkPath(this.pointerChunk);if(!n)throw new Error("Debug: The pointer chunk is not connected to the root");if(!Y.equals(this.pointerIndexStack,n))throw new Error("Debug: The cached index stack [".concat(this.pointerIndexStack.join(", "),"] does not match the path of the pointer chunk [").concat(n.join(", "),"]"))}}}class nj{constructor(t,n){tr(this,"editor",void 0),tr(this,"children",void 0),tr(this,"cachedKeys",void 0),tr(this,"pointerIndex",void 0),this.editor=t,this.children=n,this.cachedKeys=new Array(n.length),this.pointerIndex=0}read(t){if(t===1)return[this.children[this.pointerIndex++]];var n=this.remaining(t);return this.pointerIndex+=t,n}remaining(t){return t===void 0?this.children.slice(this.pointerIndex):this.children.slice(this.pointerIndex,this.pointerIndex+t)}get reachedEnd(){return this.pointerIndex>=this.children.length}lookAhead(t,n){var r=this.children.indexOf(t,this.pointerIndex);if(r>-1)return r-this.pointerIndex;for(var i=this.pointerIndex;i<this.children.length;i++){var o=this.children[i],s=this.findKey(o,i);if(s===n)return i-this.pointerIndex}return-1}toChunkLeaves(t,n){return t.map((r,i)=>({type:"leaf",node:r,key:this.findKey(r,n+i),index:n+i}))}findKey(t,n){var r=this.cachedKeys[n];if(r)return r;var i=ze.findKey(this.editor,t);return this.cachedKeys[n]=i,i}}var rj=(e,t)=>{var{chunkTree:n,children:r,chunkSize:i,rerenderChildren:o=[],onInsert:s,onUpdate:l,onIndexChange:c,debug:h}=t;n.modifiedChunks.clear();for(var d=new tj(n,{chunkSize:i,debug:h}),g=new nj(e,r),v,y=function(){var D=g.lookAhead(v.node,v.key),S=D>0&&n.movedNodeKeys.has(v.key);if(D===-1||S)return d.remove(),1;var R=g.pointerIndex,k=g.read(D+1),O=k.pop();if(k.length){var $=g.toChunkLeaves(k,R);d.insertBefore($),k.forEach((K,te)=>{s==null||s(K,R+te)})}var z=g.pointerIndex-1;v.node!==O&&(v.node=O,d.invalidateChunk(),l==null||l(O,z)),v.index!==z&&(v.index=z,c==null||c(O,z)),o.includes(z)&&d.invalidateChunk()};v=d.readLeaf();)y();if(!g.reachedEnd){var x=g.remaining(),E=g.toChunkLeaves(x,g.pointerIndex);d.returnToPreviousLeaf(),d.insertAfter(E),x.forEach((T,D)=>{s==null||s(T,g.pointerIndex+D)})}n.movedNodeKeys.clear()};function pC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ij(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pC(Object(n),!0).forEach(function(r){tr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var mC=new WeakMap,_S=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=ze.findKey(t,n),o=mC.get(i);return o||(o={type:"root",movedNodeKeys:new Set,modifiedChunks:new Set,children:[]},mC.set(i,o)),r.reconcile&&rj(t,ij({chunkTree:o,children:n.children},r.reconcile)),o},oj=e=>{var{children:t}=e;return t},NS=e=>{var{root:t,ancestor:n,renderElement:r,renderChunk:i=oj}=e;return n.children.map(o=>{if(o.type==="chunk"){var s=o.key.id,l=i({highest:n===t,lowest:o.children.some(h=>h.type==="leaf"),attributes:{"data-slate-chunk":!0},children:xt.createElement(aj,{root:t,ancestor:o,renderElement:r,renderChunk:i})});return xt.createElement(G.Fragment,{key:s},l)}var c=o.node;return r(c,o.index,o.key)})},sj=NS,aj=xt.memo(NS,(e,t)=>e.root===t.root&&e.renderElement===t.renderElement&&e.renderChunk===t.renderChunk&&!t.root.modifiedChunks.has(t.ancestor)),lj=G.createContext(null),HS=e=>{var{decorations:t,node:n,renderElement:r,renderChunk:i,renderPlaceholder:o,renderText:s,renderLeaf:l}=e,c=ol();u0.set(c,!1);var h=L.isEditor(n),d=!h&&lt.isElement(n)&&!c.isInline(n),g=d&&L.hasInlines(c,n),v=g?null:c.getChunkSize(n),y=!!v,{decorationsByChild:x,childrenToRedecorate:E}=uj(c,n,t);y||n.children.forEach((R,k)=>{n0.set(R,k),Lg.set(R,n)});var T=G.useCallback((R,k,O)=>{var $=O??ze.findKey(c,R);return xt.createElement(lj.Provider,{key:"provider-".concat($.id),value:R},xt.createElement(JG,{decorations:x[k],element:R,key:$.id,renderElement:r,renderChunk:i,renderPlaceholder:o,renderLeaf:l,renderText:s}))},[c,x,r,i,o,l,s]),D=(R,k)=>{var O=ze.findKey(c,R);return xt.createElement(LS,{decorations:x[k],key:O.id,isLast:k===n.children.length-1,parent:n,renderPlaceholder:o,renderLeaf:l,renderText:s,text:R})};if(!y)return n.children.map((R,k)=>ot.isText(R)?D(R,k):T(R,k));var S=_S(c,n,{reconcile:{chunkSize:v,rerenderChildren:E,onInsert:(R,k)=>{n0.set(R,k),Lg.set(R,n)},onUpdate:(R,k)=>{n0.set(R,k),Lg.set(R,n)},onIndexChange:(R,k)=>{n0.set(R,k)}}});return xt.createElement(sj,{root:S,ancestor:S,renderElement:T,renderChunk:i})},uj=(e,t,n)=>{var r=JH(e,t,n),i=G.useRef(r).current,o=[];i.length=r.length;for(var s=0;s<r.length;s++){var l,c=r[s],h=(l=i[s])!==null&&l!==void 0?l:null;h8(h,c)||(i[s]=c,o.push(s))}return{decorationsByChild:i,childrenToRedecorate:o}},GS=G.createContext(!1),cj=()=>G.useContext(GS),m8=G.createContext({});function fj(){var e=G.useRef(new Set),t=G.useRef(new Set),n=G.useCallback(()=>{e.current.forEach(s=>s())},[]),r=G.useCallback(()=>{t.current.forEach(s=>s()),t.current.clear()},[]),i=G.useCallback(function(s){var{deferred:l=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=l?()=>t.current.add(s):s;return e.current.add(c),()=>{e.current.delete(c)}},[]),o=G.useMemo(()=>({addEventListener:i,flushDeferred:r}),[i,r]);return{selectorContext:o,onChange:n}}function hj(){var{flushDeferred:e}=G.useContext(m8);nu(e)}var dj=()=>{var{addEventListener:e}=G.useContext(m8),[,t]=G.useReducer(n=>n+1,0);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");return nu(()=>e(t),[e]),ol()};function gj(){var e=ol(),t=G.useRef(!1),n=G.useRef(0),r=G.useCallback(()=>{if(!t.current){t.current=!0;var i=ze.getWindow(e);i.cancelAnimationFrame(n.current),n.current=i.requestAnimationFrame(()=>{t.current=!1})}},[e]);return G.useEffect(()=>()=>cancelAnimationFrame(n.current),[]),{receivedUserInput:t,onUserInput:r}}var pj=(e,t)=>{var n=[],r=()=>{n=[]},i=s=>{if(t.current){var l=s.filter(c=>u8(e,c,s));n.push(...l)}};function o(){n.length>0&&(n.reverse().forEach(s=>{s.type!=="characterData"&&(s.removedNodes.forEach(l=>{s.target.insertBefore(l,s.nextSibling)}),s.addedNodes.forEach(l=>{s.target.removeChild(l)}))}),r())}return{registerMutations:i,restoreDOM:o,clear:r}},mj={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class jS extends G.Component{constructor(){super(...arguments),tr(this,"context",null),tr(this,"manager",null),tr(this,"mutationObserver",null)}observe(){var t,{node:n}=this.props;if(!n.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(t=this.mutationObserver)===null||t===void 0||t.observe(n.current,mj)}componentDidMount(){var{receivedUserInput:t}=this.props,n=this.context;this.manager=pj(n,t),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var t,n,r,i=(t=this.mutationObserver)===null||t===void 0?void 0:t.takeRecords();if(i!=null&&i.length){var o;(o=this.manager)===null||o===void 0||o.registerMutations(i)}return(n=this.mutationObserver)===null||n===void 0||n.disconnect(),(r=this.manager)===null||r===void 0||r.restoreDOM(),null}componentDidUpdate(){var t;(t=this.manager)===null||t===void 0||t.clear(),this.observe()}componentWillUnmount(){var t;(t=this.mutationObserver)===null||t===void 0||t.disconnect()}render(){return this.props.children}}tr(jS,"contextType",p8);var vj=zi?jS:e=>{var{children:t}=e;return xt.createElement(xt.Fragment,null,t)},yj=G.createContext(!1),wj=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderChunk","renderLeaf","renderText","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],Cj=["text"];function vC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Wa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vC(Object(n),!0).forEach(function(r){tr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var xj=e=>xt.createElement(xt.Fragment,null,HS(e)),Ej=G.forwardRef((e,t)=>{var n=G.useCallback(Q=>xt.createElement(Pj,Wa({},Q)),[]),{autoFocus:r,decorate:i=Sj,onDOMBeforeInput:o,placeholder:s,readOnly:l=!1,renderElement:c,renderChunk:h,renderLeaf:d,renderText:g,renderPlaceholder:v=n,scrollSelectionIntoView:y=Tj,style:x={},as:E="div",disableDefaultStyles:T=!1}=e,D=x3(e,wj),S=dj(),[R,k]=G.useState(!1),O=G.useRef(null),$=G.useRef([]),[z,K]=G.useState(),te=G.useRef(!1),{onUserInput:se,receivedUserInput:me}=gj(),[,ne]=G.useReducer(Q=>Q+1,0);CS.set(S,ne),L6.set(S,l);var oe=G.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);G.useEffect(()=>{O.current&&r&&O.current.focus()},[r]);var ve=G.useRef(),ge=G.useMemo(()=>GL(()=>{if(u0.get(S)){ge();return}var Q=ze.toDOMNode(S,S),Se=Q.getRootNode();if(!te.current&&If&&Se instanceof ShadowRoot){te.current=!0;var Te=TH();Te?document.execCommand("indent"):Re.deselect(S),te.current=!1;return}var ke=ve.current;if((zi||!ze.isComposing(S))&&(!oe.isUpdatingSelection||ke!=null&&ke.isFlushing())&&!oe.isDraggingInternally){var vt=ze.findDocumentOrShadowRoot(S),{activeElement:Ye}=vt,At=ze.toDOMNode(S,S),hn=Fg(vt);if(Ye===At?(oe.latestElement=Ye,ic.set(S,!0)):ic.delete(S),!hn)return Re.deselect(S);var{anchorNode:Mt,focusNode:kn}=hn,Cn=ze.hasEditableTarget(S,Mt)||ze.isTargetInsideNonReadonlyVoid(S,Mt),dn=ze.hasTarget(S,kn);if(Cn&&dn){var _t=ze.toSlateRange(S,hn,{exactMatch:!1,suppressThrow:!0});_t&&(!ze.isComposing(S)&&!(ke!=null&&ke.hasPendingChanges())&&!(ke!=null&&ke.isFlushing())?Re.select(S,_t):ke==null||ke.handleUserSelect(_t))}l&&(!Cn||!dn)&&Re.deselect(S)}},100),[S,l,oe]),Me=G.useMemo(()=>LL(ge,0),[ge]);ve.current=FG({node:O,onDOMSelectionChange:ge,scheduleOnDOMSelectionChange:Me}),nu(()=>{var Q,Se,Te;O.current&&(Te=l8(O.current))?(wS.set(S,Te),Km.set(S,O.current),zf.set(S,O.current),tp.set(O.current,S)):zf.delete(S);var{selection:ke}=S,vt=ze.findDocumentOrShadowRoot(S),Ye=Fg(vt);if(!(!Ye||!ze.isFocused(S)||(Q=ve.current)!==null&&Q!==void 0&&Q.hasPendingAction())){var At=Cn=>{var dn=Ye.type!=="None";if(!(!ke&&!dn)){var _t=Ye.focusNode,an;if(t0&&Ye.rangeCount>1){var pr=Ye.getRangeAt(0),Ki=Ye.getRangeAt(Ye.rangeCount-1);pr.startContainer===_t?an=Ki.endContainer:an=pr.startContainer}else an=Ye.anchorNode;var $n=Km.get(S),Yi=!1;if($n.contains(an)&&$n.contains(_t)&&(Yi=!0),dn&&Yi&&ke&&!Cn){var mr=ze.toSlateRange(S,Ye,{exactMatch:!0,suppressThrow:!0});if(mr&&Ee.equals(mr,ke)){var wn;if(!oe.hasMarkPlaceholder||(wn=an)!==null&&wn!==void 0&&(wn=wn.parentElement)!==null&&wn!==void 0&&wn.hasAttribute("data-slate-mark-placeholder"))return}}if(ke&&!ze.hasRange(S,ke)){S.selection=ze.toSlateRange(S,Ye,{exactMatch:!1,suppressThrow:!0});return}oe.isUpdatingSelection=!0;var On=null;try{On=ke&&ze.toDOMRange(S,ke)}catch{}return On?(ze.isComposing(S)&&!zi?Ye.collapseToEnd():Ee.isBackward(ke)?Ye.setBaseAndExtent(On.endContainer,On.endOffset,On.startContainer,On.startOffset):Ye.setBaseAndExtent(On.startContainer,On.startOffset,On.endContainer,On.endOffset),y(S,On)):Ye.removeAllRanges(),On}};Ye.rangeCount<=1&&At();var hn=((Se=ve.current)===null||Se===void 0?void 0:Se.isFlushing())==="action";if(!zi||!hn){setTimeout(()=>{oe.isUpdatingSelection=!1});return}var Mt=null,kn=requestAnimationFrame(()=>{if(hn){var Cn=dn=>{try{var _t=ze.toDOMNode(S,S);_t.focus(),At(dn)}catch{}};Cn(),Mt=setTimeout(()=>{Cn(!0),oe.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(kn),Mt&&clearTimeout(Mt)}}});var Pe=G.useCallback(Q=>{wC(S,Q);var Se=ze.toDOMNode(S,S),Te=Se.getRootNode();if(te!=null&&te.current&&If&&Te instanceof ShadowRoot){var ke=Q.getTargetRanges(),vt=ke[0],Ye=new window.Range;Ye.setStart(vt.startContainer,vt.startOffset),Ye.setEnd(vt.endContainer,vt.endOffset);var At=ze.toSlateRange(S,Ye,{exactMatch:!1,suppressThrow:!1});Re.select(S,At),Q.preventDefault(),Q.stopImmediatePropagation();return}if(se(),!l&&ze.hasEditableTarget(S,Q.target)&&!Dj(Q,o)){var hn;if(ve.current)return ve.current.handleDOMBeforeInput(Q);Me.flush(),ge.flush();var{selection:Mt}=S,{inputType:kn}=Q,Cn=Q.dataTransfer||Q.data||void 0,dn=kn==="insertCompositionText"||kn==="deleteCompositionText";if(dn&&ze.isComposing(S))return;var _t=!1;if(kn==="insertText"&&Mt&&Ee.isCollapsed(Mt)&&Q.data&&Q.data.length===1&&/[a-z ]/i.test(Q.data)&&Mt.anchor.offset!==0&&(_t=!0,S.marks&&(_t=!1),!u0.get(S))){var an,pr,{anchor:Ki}=Mt,[$n,Yi]=ze.toDOMPoint(S,Ki),mr=(an=$n.parentElement)===null||an===void 0?void 0:an.closest("a"),wn=ze.getWindow(S);if(_t&&mr&&ze.hasDOMNode(S,mr)){var On,Lr=wn==null?void 0:wn.document.createTreeWalker(mr,NodeFilter.SHOW_TEXT).lastChild();Lr===$n&&((On=Lr.textContent)===null||On===void 0?void 0:On.length)===Yi&&(_t=!1)}if(_t&&$n.parentElement&&(wn==null||(pr=wn.getComputedStyle($n.parentElement))===null||pr===void 0?void 0:pr.whiteSpace)==="pre"){var ki=L.above(S,{at:Ki.path,match:qi=>lt.isElement(qi)&&L.isBlock(S,qi)});ki&&Ke.string(ki[0]).includes("	")&&(_t=!1)}}if((!kn.startsWith("delete")||kn.startsWith("deleteBy"))&&!u0.get(S)){var[Fs]=Q.getTargetRanges();if(Fs){var ns=ze.toSlateRange(S,Fs,{exactMatch:!1,suppressThrow:!1});if(!Mt||!Ee.equals(Mt,ns)){_t=!1;var Mo=!dn&&S.selection&&L.rangeRef(S,S.selection);Re.select(S,ns),Mo&&_g.set(S,Mo)}}}if(dn)return;if(_t||Q.preventDefault(),Mt&&Ee.isExpanded(Mt)&&kn.startsWith("delete")){var ll=kn.endsWith("Backward")?"backward":"forward";L.deleteFragment(S,{direction:ll});return}switch(kn){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{L.deleteFragment(S);break}case"deleteContent":case"deleteContentForward":{L.deleteForward(S);break}case"deleteContentBackward":{L.deleteBackward(S);break}case"deleteEntireSoftLine":{L.deleteBackward(S,{unit:"line"}),L.deleteForward(S,{unit:"line"});break}case"deleteHardLineBackward":{L.deleteBackward(S,{unit:"block"});break}case"deleteSoftLineBackward":{L.deleteBackward(S,{unit:"line"});break}case"deleteHardLineForward":{L.deleteForward(S,{unit:"block"});break}case"deleteSoftLineForward":{L.deleteForward(S,{unit:"line"});break}case"deleteWordBackward":{L.deleteBackward(S,{unit:"word"});break}case"deleteWordForward":{L.deleteForward(S,{unit:"word"});break}case"insertLineBreak":L.insertSoftBreak(S);break;case"insertParagraph":{L.insertBreak(S);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{kn==="insertFromComposition"&&ze.isComposing(S)&&(k(!1),Nf.set(S,!1)),(Cn==null?void 0:Cn.constructor.name)==="DataTransfer"?ze.insertData(S,Cn):typeof Cn=="string"&&(_t?$.current.push(()=>L.insertText(S,Cn)):L.insertText(S,Cn));break}}var Ro=(hn=_g.get(S))===null||hn===void 0?void 0:hn.unref();_g.delete(S),Ro&&(!S.selection||!Ee.equals(S.selection,Ro))&&Re.select(S,Ro)}},[S,ge,se,o,l,Me]),he=G.useCallback(Q=>{Q==null?(ge.cancel(),Me.cancel(),Km.delete(S),zf.delete(S),O.current&&Zu&&O.current.removeEventListener("beforeinput",Pe)):Zu&&Q.addEventListener("beforeinput",Pe),O.current=Q,typeof t=="function"?t(Q):t&&(t.current=Q)},[ge,Me,S,Pe,t]);nu(()=>{var Q=ze.getWindow(S),Se=ke=>{var{target:vt}=ke,Ye=vt instanceof HTMLElement?vt:null,At=Ye==null?void 0:Ye.tagName;At==="INPUT"||At==="TEXTAREA"||Me()};Q.document.addEventListener("selectionchange",Se);var Te=()=>{oe.isDraggingInternally=!1};return Q.document.addEventListener("dragend",Te),Q.document.addEventListener("drop",Te),()=>{Q.document.removeEventListener("selectionchange",Se),Q.document.removeEventListener("dragend",Te),Q.document.removeEventListener("drop",Te)}},[Me,oe]);var le=i([S,[]]),we=XG(i),U=s&&S.children.length===1&&Array.from(Ke.texts(S)).length===1&&Ke.string(S)===""&&!R,xe=G.useCallback(Q=>{if(Q&&U){var Se;K((Se=Q.getBoundingClientRect())===null||Se===void 0?void 0:Se.height)}else K(void 0)},[U]);if(U){var Ie=L.start(S,[]);le.push({[x0]:!0,placeholder:s,onPlaceholderResize:xe,anchor:Ie,focus:Ie})}var{marks:Le}=S;if(oe.hasMarkPlaceholder=!1,S.selection&&Ee.isCollapsed(S.selection)&&Le){var{anchor:$e}=S.selection,Fe=Ke.leaf(S,$e.path),Ze=x3(Fe,Cj);if(!ot.equals(Fe,Le,{loose:!0})){oe.hasMarkPlaceholder=!0;var et=Object.fromEntries(Object.keys(Ze).map(Q=>[Q,null]));le.push(Wa(Wa(Wa({[xS]:!0},et),Le),{},{anchor:$e,focus:$e}))}}return G.useEffect(()=>{setTimeout(()=>{var{selection:Q}=S;if(Q){var{anchor:Se}=Q,Te=Ke.leaf(S,Se.path);if(Le&&!ot.equals(Te,Le,{loose:!0})){sa.set(S,Le);return}}sa.delete(S)})}),hj(),xt.createElement(GS.Provider,{value:l},xt.createElement(yj.Provider,{value:R},xt.createElement(OS.Provider,{value:we},xt.createElement(vj,{node:O,receivedUserInput:me},xt.createElement(E,Wa(Wa({role:l?void 0:"textbox","aria-multiline":l?void 0:!0},D),{},{spellCheck:Zu||!Xm?D.spellCheck:!1,autoCorrect:Zu||!Xm?D.autoCorrect:"false",autoCapitalize:Zu||!Xm?D.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!l,zindex:-1,suppressContentEditableWarning:!0,ref:he,style:Wa(Wa({},T?{}:Wa({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},z?{minHeight:z}:{})),x),onBeforeInput:G.useCallback(Q=>{if(!Zu&&!l&&!$i(Q,D.onBeforeInput)&&ze.hasSelectableTarget(S,Q.target)&&(Q.preventDefault(),!ze.isComposing(S))){var Se=Q.data;L.insertText(S,Se)}},[D.onBeforeInput,S,l]),onInput:G.useCallback(Q=>{if(!$i(Q,D.onInput)){if(ve.current){ve.current.handleInput();return}for(var Se of $.current)Se();$.current=[],ze.isFocused(S)||wC(S,Q.nativeEvent)}},[D.onInput,S]),onBlur:G.useCallback(Q=>{if(!(l||oe.isUpdatingSelection||!ze.hasSelectableTarget(S,Q.target)||$i(Q,D.onBlur))){var Se=ze.findDocumentOrShadowRoot(S);if(oe.latestElement!==Se.activeElement){var{relatedTarget:Te}=Q,ke=ze.toDOMNode(S,S);if(Te!==ke&&!(Ds(Te)&&Te.hasAttribute("data-slate-spacer"))){if(Te!=null&&mc(Te)&&ze.hasDOMNode(S,Te)){var vt=ze.toSlateNode(S,Te);if(lt.isElement(vt)&&!S.isVoid(vt))return}if(If){var Ye=Fg(Se);Ye==null||Ye.removeAllRanges()}ic.delete(S)}}}},[l,oe.isUpdatingSelection,oe.latestElement,S,D.onBlur]),onClick:G.useCallback(Q=>{if(ze.hasTarget(S,Q.target)&&!$i(Q,D.onClick)&&mc(Q.target)){var Se=ze.toSlateNode(S,Q.target),Te=ze.findPath(S,Se);if(!L.hasPath(S,Te)||Ke.get(S,Te)!==Se)return;if(Q.detail===VH&&Te.length>=1){var ke=Te;if(!(lt.isElement(Se)&&L.isBlock(S,Se))){var vt,Ye=L.above(S,{match:_t=>lt.isElement(_t)&&L.isBlock(S,_t),at:Te});ke=(vt=Ye==null?void 0:Ye[1])!==null&&vt!==void 0?vt:Te.slice(0,1)}var At=L.range(S,ke);Re.select(S,At);return}if(l)return;var hn=L.start(S,Te),Mt=L.end(S,Te),kn=L.void(S,{at:hn}),Cn=L.void(S,{at:Mt});if(kn&&Cn&&Y.equals(kn[1],Cn[1])){var dn=L.range(S,hn);Re.select(S,dn)}}},[S,D.onClick,l]),onCompositionEnd:G.useCallback(Q=>{if(ze.hasSelectableTarget(S,Q.target)){var Se;if(ze.isComposing(S)&&Promise.resolve().then(()=>{k(!1),Nf.set(S,!1)}),(Se=ve.current)===null||Se===void 0||Se.handleCompositionEnd(Q),$i(Q,D.onCompositionEnd)||zi)return;if(!If&&!bH&&!AH&&!OH&&!kH&&Q.data){var Te=sa.get(S);sa.delete(S),Te!==void 0&&(zl.set(S,S.marks),S.marks=Te),L.insertText(S,Q.data);var ke=zl.get(S);zl.delete(S),ke!==void 0&&(S.marks=ke)}}},[D.onCompositionEnd,S]),onCompositionUpdate:G.useCallback(Q=>{ze.hasSelectableTarget(S,Q.target)&&!$i(Q,D.onCompositionUpdate)&&(ze.isComposing(S)||(k(!0),Nf.set(S,!0)))},[D.onCompositionUpdate,S]),onCompositionStart:G.useCallback(Q=>{if(ze.hasSelectableTarget(S,Q.target)){var Se;if((Se=ve.current)===null||Se===void 0||Se.handleCompositionStart(Q),$i(Q,D.onCompositionStart)||zi)return;k(!0);var{selection:Te}=S;if(Te&&Ee.isExpanded(Te)){L.deleteFragment(S);return}}},[D.onCompositionStart,S]),onCopy:G.useCallback(Q=>{ze.hasSelectableTarget(S,Q.target)&&!$i(Q,D.onCopy)&&!yC(Q)&&(Q.preventDefault(),ze.setFragmentData(S,Q.clipboardData,"copy"))},[D.onCopy,S]),onCut:G.useCallback(Q=>{if(!l&&ze.hasSelectableTarget(S,Q.target)&&!$i(Q,D.onCut)&&!yC(Q)){Q.preventDefault(),ze.setFragmentData(S,Q.clipboardData,"cut");var{selection:Se}=S;if(Se)if(Ee.isExpanded(Se))L.deleteFragment(S);else{var Te=Ke.parent(S,Se.anchor.path);L.isVoid(S,Te)&&Re.delete(S)}}},[l,S,D.onCut]),onDragOver:G.useCallback(Q=>{if(ze.hasTarget(S,Q.target)&&!$i(Q,D.onDragOver)){var Se=ze.toSlateNode(S,Q.target);lt.isElement(Se)&&L.isVoid(S,Se)&&Q.preventDefault()}},[D.onDragOver,S]),onDragStart:G.useCallback(Q=>{if(!l&&ze.hasTarget(S,Q.target)&&!$i(Q,D.onDragStart)){var Se=ze.toSlateNode(S,Q.target),Te=ze.findPath(S,Se),ke=lt.isElement(Se)&&L.isVoid(S,Se)||L.void(S,{at:Te,voids:!0});if(ke){var vt=L.range(S,Te);Re.select(S,vt)}oe.isDraggingInternally=!0,ze.setFragmentData(S,Q.dataTransfer,"drag")}},[l,S,D.onDragStart,oe]),onDrop:G.useCallback(Q=>{if(!l&&ze.hasTarget(S,Q.target)&&!$i(Q,D.onDrop)){Q.preventDefault();var Se=S.selection,Te=ze.findEventRange(S,Q),ke=Q.dataTransfer;Re.select(S,Te),oe.isDraggingInternally&&Se&&!Ee.equals(Se,Te)&&!L.void(S,{at:Te,voids:!0})&&Re.delete(S,{at:Se}),ze.insertData(S,ke),ze.isFocused(S)||ze.focus(S)}},[l,S,D.onDrop,oe]),onDragEnd:G.useCallback(Q=>{!l&&oe.isDraggingInternally&&D.onDragEnd&&ze.hasTarget(S,Q.target)&&D.onDragEnd(Q)},[l,oe,D,S]),onFocus:G.useCallback(Q=>{if(!l&&!oe.isUpdatingSelection&&ze.hasEditableTarget(S,Q.target)&&!$i(Q,D.onFocus)){var Se=ze.toDOMNode(S,S),Te=ze.findDocumentOrShadowRoot(S);if(oe.latestElement=Te.activeElement,t0&&Q.target!==Se){Se.focus();return}ic.set(S,!0)}},[l,oe,S,D.onFocus]),onKeyDown:G.useCallback(Q=>{if(!l&&ze.hasEditableTarget(S,Q.target)){var Se;(Se=ve.current)===null||Se===void 0||Se.handleKeyDown(Q);var{nativeEvent:Te}=Q;if(ze.isComposing(S)&&Te.isComposing===!1&&(Nf.set(S,!1),k(!1)),$i(Q,D.onKeyDown)||ze.isComposing(S))return;var{selection:ke}=S,vt=S.children[ke!==null?ke.focus.path[0]:0],Ye=hS(Ke.string(vt))==="rtl";if(ar.isRedo(Te)){Q.preventDefault();var At=S;typeof At.redo=="function"&&At.redo();return}if(ar.isUndo(Te)){Q.preventDefault();var hn=S;typeof hn.undo=="function"&&hn.undo();return}if(ar.isMoveLineBackward(Te)){Q.preventDefault(),Re.move(S,{unit:"line",reverse:!0});return}if(ar.isMoveLineForward(Te)){Q.preventDefault(),Re.move(S,{unit:"line"});return}if(ar.isExtendLineBackward(Te)){Q.preventDefault(),Re.move(S,{unit:"line",edge:"focus",reverse:!0});return}if(ar.isExtendLineForward(Te)){Q.preventDefault(),Re.move(S,{unit:"line",edge:"focus"});return}if(ar.isMoveBackward(Te)){Q.preventDefault(),ke&&Ee.isCollapsed(ke)?Re.move(S,{reverse:!Ye}):Re.collapse(S,{edge:Ye?"end":"start"});return}if(ar.isMoveForward(Te)){Q.preventDefault(),ke&&Ee.isCollapsed(ke)?Re.move(S,{reverse:Ye}):Re.collapse(S,{edge:Ye?"start":"end"});return}if(ar.isMoveWordBackward(Te)){Q.preventDefault(),ke&&Ee.isExpanded(ke)&&Re.collapse(S,{edge:"focus"}),Re.move(S,{unit:"word",reverse:!Ye});return}if(ar.isMoveWordForward(Te)){Q.preventDefault(),ke&&Ee.isExpanded(ke)&&Re.collapse(S,{edge:"focus"}),Re.move(S,{unit:"word",reverse:Ye});return}if(Zu){if((vS||If)&&ke&&(ar.isDeleteBackward(Te)||ar.isDeleteForward(Te))&&Ee.isCollapsed(ke)){var Mt=Ke.parent(S,ke.anchor.path);if(lt.isElement(Mt)&&L.isVoid(S,Mt)&&(L.isInline(S,Mt)||L.isBlock(S,Mt))){Q.preventDefault(),L.deleteBackward(S,{unit:"block"});return}}}else{if(ar.isBold(Te)||ar.isItalic(Te)||ar.isTransposeCharacter(Te)){Q.preventDefault();return}if(ar.isSoftBreak(Te)){Q.preventDefault(),L.insertSoftBreak(S);return}if(ar.isSplitBlock(Te)){Q.preventDefault(),L.insertBreak(S);return}if(ar.isDeleteBackward(Te)){Q.preventDefault(),ke&&Ee.isExpanded(ke)?L.deleteFragment(S,{direction:"backward"}):L.deleteBackward(S);return}if(ar.isDeleteForward(Te)){Q.preventDefault(),ke&&Ee.isExpanded(ke)?L.deleteFragment(S,{direction:"forward"}):L.deleteForward(S);return}if(ar.isDeleteLineBackward(Te)){Q.preventDefault(),ke&&Ee.isExpanded(ke)?L.deleteFragment(S,{direction:"backward"}):L.deleteBackward(S,{unit:"line"});return}if(ar.isDeleteLineForward(Te)){Q.preventDefault(),ke&&Ee.isExpanded(ke)?L.deleteFragment(S,{direction:"forward"}):L.deleteForward(S,{unit:"line"});return}if(ar.isDeleteWordBackward(Te)){Q.preventDefault(),ke&&Ee.isExpanded(ke)?L.deleteFragment(S,{direction:"backward"}):L.deleteBackward(S,{unit:"word"});return}if(ar.isDeleteWordForward(Te)){Q.preventDefault(),ke&&Ee.isExpanded(ke)?L.deleteFragment(S,{direction:"forward"}):L.deleteForward(S,{unit:"word"});return}}}},[l,S,D.onKeyDown]),onPaste:G.useCallback(Q=>{!l&&ze.hasEditableTarget(S,Q.target)&&!$i(Q,D.onPaste)&&(!Zu||wH(Q.nativeEvent)||If)&&(Q.preventDefault(),ze.insertData(S,Q.clipboardData))},[l,S,D.onPaste])}),xt.createElement(xj,{decorations:le,node:S,renderElement:c,renderChunk:h,renderPlaceholder:v,renderLeaf:d,renderText:g}))))))}),Pj=e=>{var{attributes:t,children:n}=e;return xt.createElement("span",Wa({},t),n,zi&&xt.createElement("br",null))},Sj=()=>[],Tj=(e,t)=>{if(t.getBoundingClientRect&&(!e.selection||e.selection&&Ee.isCollapsed(e.selection))){var n=t.startContainer.parentElement;n.getBoundingClientRect=t.getBoundingClientRect.bind(t),mH(n,{scrollMode:"if-needed"}),delete n.getBoundingClientRect}},$i=(e,t)=>{if(!t)return!1;var n=t(e);return n??(e.isDefaultPrevented()||e.isPropagationStopped())},yC=e=>mc(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement),Dj=(e,t)=>{if(!t)return!1;var n=t(e);return n??e.defaultPrevented},wC=(e,t)=>{var n=e;if(t.inputType==="historyUndo"&&typeof n.undo=="function"){n.undo();return}if(t.inputType==="historyRedo"&&typeof n.redo=="function"){n.redo();return}},Aj=G.createContext(!1),$S=parseInt(xt.version.split(".")[0],10),Bj=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],Mj=e=>{var{editor:t,children:n,onChange:r,onSelectionChange:i,onValueChange:o,initialValue:s}=e,l=x3(e,Bj);xt.useState(()=>{if(!Ke.isNodeList(s))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(Sr.stringify(s)));if(!L.isEditor(t))throw new Error("[Slate] editor is invalid! You passed: ".concat(Sr.stringify(t)));t.children=s,Object.assign(t,l)});var{selectorContext:c,onChange:h}=fj(),d=G.useCallback(y=>{var x;switch(r&&r(t.children),y==null||(x=y.operation)===null||x===void 0?void 0:x.type){case"set_selection":i==null||i(t.selection);break;default:o==null||o(t.children)}h()},[t,h,r,i,o]);G.useEffect(()=>(_6.set(t,d),()=>{_6.set(t,()=>{})}),[t,d]);var[g,v]=G.useState(ze.isFocused(t));return G.useEffect(()=>{v(ze.isFocused(t))},[t]),nu(()=>{var y=()=>v(ze.isFocused(t));return $S>=17?(document.addEventListener("focusin",y),document.addEventListener("focusout",y),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",y)}):(document.addEventListener("focus",y,!0),document.addEventListener("blur",y,!0),()=>{document.removeEventListener("focus",y,!0),document.removeEventListener("blur",y,!0)})},[]),xt.createElement(m8.Provider,{value:c},xt.createElement(p8.Provider,{value:t},xt.createElement(Aj.Provider,{value:g},n)))},Rj=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",r=t;r=zH(r,n);var{onChange:i,apply:o}=r;return r.getChunkSize=()=>null,r.onChange=s=>{var l=$S<18?xG.unstable_batchedUpdates:c=>c();l(()=>{i(s)})},r.apply=s=>{if(s.type==="move_node"){var l=Ke.parent(r,s.path),c=!!r.getChunkSize(l);if(c){var h=Ke.get(r,s.path),d=_S(r,l),g=ze.findKey(r,h);d.movedNodeKeys.add(g)}}o(s)},r},bj={isHistory(e){return fi(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(e.redos.length===0||Wl.isOperationList(e.redos[0].operations))&&(e.undos.length===0||Wl.isOperationList(e.undos[0].operations))}},C5=new WeakMap,Bf=new WeakMap,Sm=new WeakMap,za={isHistoryEditor(e){return bj.isHistory(e.history)&&L.isEditor(e)},isMerging(e){return Bf.get(e)},isSplittingOnce(e){return Sm.get(e)},setSplittingOnce(e,t){Sm.set(e,t)},isSaving(e){return C5.get(e)},redo(e){e.redo()},undo(e){e.undo()},withMerging(e,t){var n=za.isMerging(e);Bf.set(e,!0),t(),Bf.set(e,n)},withNewBatch(e,t){var n=za.isMerging(e);Bf.set(e,!0),Sm.set(e,!0),t(),Bf.set(e,n),Sm.delete(e)},withoutMerging(e,t){var n=za.isMerging(e);Bf.set(e,!1),t(),Bf.set(e,n)},withoutSaving(e,t){var n=za.isSaving(e);C5.set(e,!1);try{t()}finally{C5.set(e,n)}}},kj=e=>{var t=e,{apply:n}=t;return t.history={undos:[],redos:[]},t.redo=()=>{var{history:r}=t,{redos:i}=r;if(i.length>0){var o=i[i.length-1];o.selectionBefore&&Re.setSelection(t,o.selectionBefore),za.withoutSaving(t,()=>{L.withoutNormalizing(t,()=>{for(var s of o.operations)t.apply(s)})}),r.redos.pop(),t.writeHistory("undos",o)}},t.undo=()=>{var{history:r}=t,{undos:i}=r;if(i.length>0){var o=i[i.length-1];za.withoutSaving(t,()=>{L.withoutNormalizing(t,()=>{var s=o.operations.map(Wl.inverse).reverse();for(var l of s)t.apply(l);o.selectionBefore&&Re.setSelection(t,o.selectionBefore)})}),t.writeHistory("redos",o),r.undos.pop()}},t.apply=r=>{var{operations:i,history:o}=t,{undos:s}=o,l=s[s.length-1],c=l&&l.operations[l.operations.length-1],h=za.isSaving(t),d=za.isMerging(t);if(h==null&&(h=Ij(r)),h){if(d==null&&(l==null?d=!1:i.includes(c)?d=!0:d=Oj(r,c)),za.isSplittingOnce(t)&&(d=!1,za.setSplittingOnce(t,void 0)),l&&d)l.operations.push(r);else{var g={operations:[r],selectionBefore:t.selection};t.writeHistory("undos",g)}for(;s.length>100;)s.shift();o.redos=[]}n(r)},t.writeHistory=(r,i)=>{t.history[r].push(i)},t},Oj=(e,t)=>!!(t&&e.type==="insert_text"&&t.type==="insert_text"&&e.offset===t.offset+t.text.length&&Y.equals(e.path,t.path)||t&&e.type==="remove_text"&&t.type==="remove_text"&&e.offset+e.text.length===t.offset&&Y.equals(e.path,t.path)),Ij=(e,t)=>e.type!=="set_selection";const Fj=e=>{const t=e,{insertData:n}=t;return t.insertBreak=()=>{e.insertText(`
`)},t.insertSoftBreak=()=>{e.insertText(`
`)},t.insertData=r=>{let i=r.getData("text/plain");if(!r.getData("application/x-slate-fragment")&&i){i.endsWith(`
`)&&(i=i.substring(0,i.length-1)),i=i.trim().replace(/\t+/g," "),t.insertText(i);return}n(r)},t},j0="#6698FF",aa=9,$6="plait-text-plugin-key",WS=30,W6="transparent",E3=20,Hg=18,ql="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'PingFang SC', 'Noto Sans', 'Noto Sans CJK SC', 'Microsoft Yahei', 'Hiragino Sans GB', Arial, sans-serif",zS="none";var CC;(function(e){e.image="image"})(CC||(CC={}));const VS=["png","jpeg","gif","bmp"];var z6;(function(e){e.nw="0",e.n="4",e.ne="1",e.e="5",e.se="2",e.s="6",e.sw="3",e.w="7"})(z6||(z6={}));var Wi;(function(e){e.solid="solid",e.dashed="dashed",e.dotted="dotted"})(Wi||(Wi={}));class ts{constructor(t,n){this.board=t,this.options=n}processDrawing(t,n,r){var i,o;if(this.canDraw&&this.canDraw(t,r)){const s=this.draw(t,r);if(s){this.g&&n.contains(this.g)?this.g.replaceWith(s):(this.g&&this.g.remove(),(i=this.options)!=null&&i.prepend?n.prepend(s):n.appendChild(s)),this.g=s;const l=this.board.getRectangle(t);if(!l)return;let c=b.getCenterPoint(l);if((o=this.options)!=null&&o.active){const d=Bi(this.board,l);c=b.getCenterPoint(d)}let h;So.isGroup(t)?h=Co(Os(this.board,t,!0)):h=t.angle,h&&Rs(s,c,h)}else this.destroy();Lj(this)&&this.afterDraw(t)}else this.destroy()}destroy(){this.g&&(this.g.remove(),this.g=void 0)}}function Lj(e){return!!e.afterDraw}const US=(e,t)=>{const n={stroke:"#99999995",strokeWidth:2,fill:"#FFF",fillStyle:"solid"},r=ah(F.getRoughSVG(e),t,aa,n);return r.classList.add(CO),r};function _j(e,t){return ah(F.getRoughSVG(e),t,aa,{stroke:"#FFFFFF",strokeWidth:1,fill:`${j0}`,fillStyle:"solid"})}function xC(e,t){return ah(F.getRoughSVG(e),t,aa,{stroke:`${j0}`,strokeWidth:2,fill:"#FFFFFF",fillStyle:"solid"})}const Mf=6,EC=(e,t)=>{const n={stroke:ei,strokeWidth:1,fillStyle:"solid"},r=[t.x-E3-Hg/2,t.y+t.height+E3+Hg/2],i=F.getRoughSVG(e),o=Lt(),s=i.path(`M ${r[0]+Mf} ${r[1]} A ${Mf} ${Mf}, 0, 1, 0, ${r[0]} ${r[1]+Mf}`,n),l=i.polygon([[r[0],r[1]+Mf-2],[r[0],r[1]+Mf+2],[r[0]+4.5,r[1]+Mf]],{...n,fill:ei});return zt(l,"round"),o.append(s,l),o},bp=(e,t)=>new P3(e,{...t,active:!0}),Ey=class Ey extends ts{constructor(t,n){super(t,{...n,active:!0}),this.board=t,this.options=n,this.hasResizeHandle=!1}canDraw(t,n){return!!n.selected}draw(t,n){const r=Lt(),i=Bi(this.board,this.options.getRectangle(t)),o=this.options.getStrokeWidth()*this.board.viewport.zoom,s=b.inflate(i,o),l=ga(this.board,s,{stroke:j0,strokeWidth:gr});return r.append(l),l.classList.add(Dp),l.style.opacity=`${this.options.getStrokeOpacity()}`,this.options.hasResizeHandle()?(this.hasResizeHandle=!0,b.getCornerPoints(s).forEach(c=>{const h=US(this.board,c);r.append(h)})):this.hasResizeHandle=!1,r}};Ey.key="active-generator";let P3=Ey;const S3=e=>`${e}`,T3=e=>Number(e),Nj=(e,t)=>{let r=(V6(e,S3(t))?t-4:t)+2;return r>=4&&(r=r-4),V6(e,S3(t))?r+4:r},PC=e=>{switch(e){case 0:case 2:return oa.nwse;case 1:case 3:return oa.nesw;case 4:case 6:return oa.ns;case 5:case 7:return oa.ew;default:return null}},Hj=(e,t)=>{const n=K7.indexOf(e);if(n>=0){const r=Math.round(t/(Math.PI/4));e=K7[(n+r)%K7.length]}return e},XS=(e,t)=>{const n=b.getCornerPoints(e),r=n.map((o,s)=>({rectangle:{x:o[0]-t/2,y:o[1]-t/2,width:t,height:t},handle:S3(s),cursorClass:PC(s)})),i=Gj(n,t/2);return r.push(...i.map((o,s)=>({rectangle:o,handle:S3(s+4),cursorClass:PC(s+4)}))),r},SC=(e,t)=>t<=3?b.getCornerPoints(e)[t]:b.getEdgeCenterPoints(e)[t-4],Gj=(e,t)=>{const n=[];for(let r=0;r<e.length;r++){let i=b.getRectangleByPoints([e[r],e[(r+1)%4]]);const o=new Array(2).fill(0);o[(r+1)%2]=t/2,i=b.expand(i,o[0],o[1]),n.push(i)}return n},dv=new WeakMap,Vl=e=>!!dv.get(e),jj=(e,t)=>Vl(e)&&t(dv.get(e)),$j=(e,t,n)=>{F.getBoardContainer(e).classList.add(`${n}-resizing`),dv.set(e,t),lu(e,!0)},Wj=(e,t)=>{F.getBoardContainer(e).classList.remove(`${t}-resizing`),dv.delete(e),lu(e,!1)},V6=(e,t)=>T3(t)>=4,qm=(e,t)=>!V6(e,t),v8=(e,t,n,r,i)=>{const o=Ir([r],n,i)[0],s=Ir([b.getCenterPoint(t)],n,i)[0],l=b.getPoints(t),c=b.getCenterPoint(e),h=Ir([s],o,-i)[0],d=Ir(l,c,i);return Ir(d,h,-i)},zj=e=>{const t=e.points;return t&&t.length>1},gv=(e,t)=>{if(F.hasBeenTextEditing(e)||mi(e))return!1;const n=Qe(e);return n.length===1&&n[0]===t&&zj(t)};function Yn(e,t){const n=t[0]-e[0],r=t[1]-e[1],i=Math.sqrt(n*n+r*r);if(i===0)throw new Error("Points must not be the same for a unit vector calculation.");const o=n/i,s=r/i;return[o,s]}function r0(e,t,n){const r=Math.hypot(t[0],t[1]);return[e[0]+t[0]/r*n,e[1]+t[1]/r*n]}function TC(e,t,n,r){return r?[e[0]+n,e[1]+n/t[0]*t[1]]:[e[0]+n/t[1]*t[0],e[1]+n]}function DC(e){const t=e[0],r=e[1],i=-t;return[r,i]}function ip(e,t){if(!t)return e;const n=e[0],r=e[1],i=n*Math.cos(t)-r*Math.sin(t),o=n*Math.sin(t)+r*Math.cos(t);return[i,o]}function KS(e,t,n){const r=Tt(e[0],e[1],t[0],t[1]),i=Tt(e[0],e[1],n[0],n[1]),o=Tt(t[0],t[1],n[0],n[1]);return Math.abs(r+i-o)<.1}const Vj=(e,t,n)=>{const r=[],i=[Math.min(t[0],n[0]),Math.max(t[0],n[0])],o=[Math.min(t[1],n[1]),Math.max(t[1],n[1])],s=Yn(t,n);if(e[0]>=i[0]&&e[0]<=i[1]){const l=TC(t,s,e[0]-t[0],!0);r.push(l)}else if(e[1]>=o[0]&&e[1]<=o[1]){const l=TC(t,s,e[1]-t[1],!1);r.push(l)}return r};function YS(e,t){const r=qS(e)*t;let i=0;for(let o=0;o<e.length-1;o++){const[s,l]=e[o],[c,h]=e[o+1],d=Tt(s,l,c,h);if(i+d>=r){const v=(r-i)/d,y=s+(c-s)*v,x=l+(h-l)*v;return[y,x]}i+=d}return e[e.length-1]}function qS(e){let t=0;for(let n=0;n<e.length-1;n++){const[r,i]=e[n],[o,s]=e[n+1];t+=Tt(r,i,o,s)}return t}function ZS(e,t){const n=qS(e);let r=0;for(let i=0;i<e.length-1;i++){if(KS(t,e[i],e[i+1]))return r+=Tt(t[0],t[1],e[i][0],e[i][1]),r/n;r+=Tt(e[i][0],e[i][1],e[i+1][0],e[i+1][1])}throw new Error("Cannot get ratio by point")}const E0=e=>{const t=[];return e.forEach(n=>{t.findIndex(i=>mt.isEquals(n,i))===-1&&t.push(n)}),t};function $l(e){if(e.length<=2)return e;let t=[e[0]];for(let n=1;n<e.length-1;n++){const r=e[n-1],i=e[n],o=e[n+1];!(mt.isOverHorizontal([r,i,o])||mt.isOverVertical([r,i,o]))&&t.push(i)}return t.push(e[e.length-1]),t}const op=(e,t,n)=>{const r=Tt(...e,...t),i=mt.isEquals(e,t),o=i?1:(t[1]-e[1])/r,s=i?1:(t[0]-e[0])/r;return[e[0]+n*s,e[1]+n*o]},Uj={[Ot.left]:{x:-1,y:0},[Ot.right]:{x:1,y:0},[Ot.top]:{x:0,y:-1},[Ot.bottom]:{x:0,y:1}};function Xj(e){switch(e){case Ot.left:return Ot.right;case Ot.right:return Ot.left;case Ot.top:return Ot.bottom;case Ot.bottom:return Ot.top}}function QS(e){if(e[0]===0)return Ot.left;if(e[0]===1)return Ot.right;if(e[1]===0)return Ot.top;if(e[1]===1)return Ot.bottom}function Qd(e){const t=e[0],n=e[1];if(t===0&&n===0)return null;if(t===0)return n>0?Ot.bottom:Ot.top;if(n===0)return t>0?Ot.right:Ot.left;const r=Math.atan2(n,t);return r>-Math.PI/4&&r<=Math.PI/4?Ot.right:r>Math.PI/4&&r<=3*Math.PI/4?Ot.bottom:r>-3*Math.PI/4&&r<=-Math.PI/4?Ot.top:Ot.left}function Qf(e){return Uj[e]}function P0(e){return e===0?e:e/Math.abs(e)}const Kj=(e,t,n,r,i)=>{const o=Qf(t),s=Qf(r),l=[e[0]+o.x*i,e[1]+o.y*i],c=[n[0]+s.x*i,n[1]+s.y*i],h=Yj(l,t,c),d=h.x!==0?"x":"y",g=h[d];let v=[],y,x;const[E,T]=qj({sourceX:e[0],sourceY:e[1],targetX:n[0],targetY:n[1]});if(o[d]*s[d]===-1){y=E,x=T;const D=[[y,l[1]],[y,c[1]]],S=[[l[0],x],[c[0],x]];o[d]===g?v=d==="x"?D:S:v=d==="x"?S:D}else{const D=[[l[0],c[1]]],S=[[c[0],l[1]]];d==="x"?v=o.x===g?S:D:v=o.y===g?D:S;let R;if(t!==r){const k=d==="x"?1:0,O=o[d]===s[d==="x"?"y":"x"],$=l[k]>c[k],z=l[k]<c[k];R=o[d]===1&&(!O&&$||O&&z)||o[d]!==1&&(!O&&z||O&&$),R&&(v=d==="x"?D:S)}}return[e,l,...v,c,n]},Yj=(e,t=Ot.bottom,n)=>t===Ot.left||t===Ot.right?e[0]<n[0]?{x:1,y:0}:{x:-1,y:0}:e[1]<n[1]?{x:0,y:1}:{x:0,y:-1};function qj({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,l=r<t?r+s:r-s;return[o,l,i,s]}function y8(e){const t=e.ctrlKey||e.metaKey,n=Qt.isKeyHotkey("alt",e),r=Qt.isKeyHotkey("shift",e),i=e.key.includes("CapsLock"),o=e.key.includes("Tab"),s=e.key.includes("Escape"),l=e.key.startsWith("F"),c=!!e.key.includes("Arrow");return i||t||n||c||r||o||s||l}const Zj=e=>Qt.isKeyHotkey("mod+/",e),Qj=e=>e.key==="Tab",Jj=e=>e.key==="Enter",w8=e=>e.code==="Space",C8=e=>Ai.isDeleteBackward(e)||Ai.isDeleteForward(e);var qr;(function(e){e.dnd="dnd",e.drawing="drawing"})(qr||(qr={}));const JS=new WeakMap,eT=e=>JS.get(e),yo=(e,t)=>{JS.set(e,t)},pv=e=>eT(e)===qr.dnd,lh=e=>eT(e)===qr.drawing,$0=e=>{const t=yn.getElementRef(e);return(t==null?void 0:t.getTextManages())||[]},uh=e=>{const t=$0(e)[0];return t||console.warn("can not find textManage"),t},ch=e=>$0(e).map(t=>t.editor),x8=e=>{const t=ch(e)[0];return t||console.warn("can not find textManage"),t},e$=e=>{const t=Qe(e);let n=null;return t.forEach(r=>{const i=ch(r);!n&&i&&i.length>0&&(n=i[0])}),n},tT=e=>e.map(t=>{try{const n=ch(t);return n.length?n.map(r=>{const i=Ke.texts(r);return Array.from(i).reduce((o,s)=>o+=s[0].text,"")}).join(" "):""}catch{return""}}).filter(t=>t).join(" "),nT=(e,t)=>{const n=t||Qe(e);if(n.length){const r=[];n.forEach(o=>{r.push(...$0(o))});const i=r.find(o=>o.isEditing);return i?[i.editor]:r.map(o=>o.editor)}},sl=(e,t,n)=>{n=n||{};const r=typeof e=="string"?{children:[{text:e,...n}],type:"paragraph"}:e;return t&&(r.align=t),r},AC=e=>e===14?20:e===18?25:e*1.5,rT=async(e,t,n,r)=>{let i=0,o=0;await t$(t,n).then(h=>{i=h.width,o=h.height});let s=null;const l=URL.createObjectURL(t);F.getBoardContext(e).setUploadingFile({url:l,file:t}),s={url:l,width:i,height:o},r(s)};function t$(e,t){return new Promise((n,r)=>{const i=new Image;i.src=URL.createObjectURL(e),i.onload=function(){const o=t,s=t*i.naturalHeight/i.naturalWidth;n(i.naturalWidth>t?{width:o,height:s}:{width:i.naturalWidth,height:i.naturalHeight})}})}const E8=new WeakMap,mo=e=>E8.get(e),iT=(e,t)=>{E8.set(e,t)},n$=e=>{E8.delete(e)};class r${constructor(){this.list=[]}enqueue(t){this.list.push(t),this.list=this.list.sort((n,r)=>n.priority-r.priority)}dequeue(){return this.list.shift()}}class i${constructor(t){this.graph=t,this.cameFrom=new Map}heuristic(t,n){return Math.abs(t[0]-n[0])+Math.abs(t[1]-n[1])}search(t,n,r){const i=new r$,o=this.graph.get(t);this.cameFrom=new Map;const s=new Map;for(s.set(o,0),i.enqueue({node:o,priority:0});i.list.length>0;){var l=i.dequeue();if(!l)throw new Error("can't find current");const c=l.node.data;if(c[0]===n[0]&&c[1]===n[1])break;l.node.adjacentNodes.forEach(h=>{let d=s.get(l.node)+this.heuristic(h.data,l.node.data);const g=this.cameFrom.get(l.node),v=g?g.data:r,y=v[0]===(l==null?void 0:l.node.data[0])&&v[0]===h.data[0],x=v[1]===(l==null?void 0:l.node.data[1])&&v[1]===h.data[1];if(!y&&!x&&(d=d+1),!s.has(h)||s.get(h)&&d<s.get(h)){s.set(h,d);const E=d+this.heuristic(h.data,n);i.enqueue({node:h,priority:E}),this.cameFrom.set(h,l.node)}})}}getRoute(t,n){const r=[];let i=n;for(;i[0]!==t[0]||i[1]!==t[1];){const o=this.graph.get(i),s=this.cameFrom.get(o);r.unshift(s.data),i=s.data}return r}}class o${constructor(t){this.data=t,this.distance=Number.MAX_SAFE_INTEGER,this.adjacentNodes=[]}}class s${constructor(){this.index={}}add(t){const n=t[0],r=t[1],i=n.toString(),o=r.toString();i in this.index||(this.index[i]={}),o in this.index[i]||(this.index[i][o]=new o$(t))}connect(t,n){const r=this.get(t),i=this.get(n);if(!r||!i)throw new Error("A point was not found");r.adjacentNodes.push(i)}has(t){const n=t[0],r=t[1],i=n.toString(),o=r.toString();return i in this.index&&o in this.index[i]}get(t){const n=t[0],r=t[1],i=n.toString(),o=r.toString();return i in this.index&&o in this.index[i]?this.index[i][o]:null}}const oT=I0("debug:plait:elbow-line-routing"),sT=(e,t)=>{const{nextSourcePoint:n,nextTargetPoint:r}=e,i=l$(e),o=u$(i),s=new i$(o);s.search(n,r,e.sourcePoint);let l=s.getRoute(n,r);l=[e.sourcePoint,...l,r,e.targetPoint];const c=b.isHitX(e.sourceOuterRectangle,e.targetOuterRectangle),h=b.isHitY(e.sourceOuterRectangle,e.targetOuterRectangle),d=c?void 0:b.getGapCenter(e.sourceOuterRectangle,e.targetOuterRectangle,!0),g=h?void 0:b.getGapCenter(e.sourceOuterRectangle,e.targetOuterRectangle,!1);return l=a$(l,{centerX:d,centerY:g,sourceRectangle:e.sourceRectangle,targetRectangle:e.targetRectangle},t),l},a$=(e,t,n)=>{const{sourceRectangle:r,targetRectangle:i,centerX:o,centerY:s}=t;if(n&&oT.clear(),o!==void 0){const l=MC(e,o,!0),c=l.pointOfHit&&BC(e,{parallelPaths:l.parallelPaths,pointOfHit:l.pointOfHit,sourceRectangle:r,targetRectangle:i},n);c&&(e=c)}if(s!==void 0){const l=MC(e,s,!1),c=l.pointOfHit&&BC(e,{parallelPaths:l.parallelPaths,pointOfHit:l.pointOfHit,sourceRectangle:r,targetRectangle:i},n);c&&(e=c)}return e},BC=(e,t,n)=>{const{parallelPaths:r,pointOfHit:i,sourceRectangle:o,targetRectangle:s}=t;let l=null;return r.forEach(c=>{const h=[i,c[0],c[1]],d=b.getRectangleByPoints(h);if(!b.isHit(d,o)&&!b.isHit(d,s)){const g=b.getCornerPointsByPoints(h);n&&oT.drawRectangle(n,d);const v=[],y=[];e.forEach((k,O)=>{const $=g.findIndex(z=>mt.isEquals(k,z));$!==-1&&(v.push(O),y.push($))});const x=[...e],E=g.find((k,O)=>!y.includes(O)),T=Math.abs(v[0]-v[v.length-1])+1;x.splice(v[0]+1,T-2,E);const D=$l([...e]).length-1;$l([...x]).length-1<=D&&(l=x)}return null}),l},MC=(e,t,n)=>{const r=[];let i=null,o=null;const s=n?0:1;for(let l=0;l<e.length;l++){const c=e[l-1],h=e[l];i===null&&c&&c[s]===h[s]&&(i=c),i!==null&&c[s]!==h[s]&&(r.push([i,c]),i=null),h[s]===t&&(o=h)}return i&&r.push([i,e[e.length-1]]),{pointOfHit:o,parallelPaths:r}},l$=e=>{const{nextSourcePoint:t,nextTargetPoint:n,sourceOuterRectangle:r,targetOuterRectangle:i}=e,o=[],s=[];let l=[];[r,i].forEach(d=>{o.push(d.x,d.x+d.width/2,d.x+d.width),s.push(d.y,d.y+d.height/2,d.y+d.height)});const c=[r.x,r.x+r.width,i.x,i.x+i.width].sort((d,g)=>d-g);o.push((c[1]+c[2])/2,t[0],n[0]);const h=[r.y,r.y+r.height,i.y,i.y+i.height].sort((d,g)=>d-g);s.push((h[1]+h[2])/2,t[1],n[1]);for(let d=0;d<o.length;d++)for(let g=0;g<s.length;g++){const v=[o[d],s[g]],y=b.isPointInRectangle(r,v),x=b.isPointInRectangle(i,v);!y&&!x&&l.push(v)}return l=E0(l).filter(d=>{const g=b.isPointInRectangle(r,d),v=b.isPointInRectangle(i,d);return!g&&!v}),l},u$=e=>{const t=new s$,n=[],r=[];e.forEach(o=>{const s=o[0],l=o[1];n.indexOf(s)<0&&n.push(s),r.indexOf(l)<0&&r.push(l),t.add(o)}),n.sort((o,s)=>o-s),r.sort((o,s)=>o-s);const i=o=>t.has(o);for(let o=0;o<n.length;o++)for(let s=0;s<r.length;s++){const l=[n[o],r[s]];if(i(l)){if(o>0){const c=[n[o-1],r[s]];i(c)&&(t.connect(c,l),t.connect(l,c))}if(s>0){const c=[n[o],r[s-1]];i(c)&&(t.connect(c,l),t.connect(l,c))}}}return t},c$=(e,t)=>{const n=WS;let r=new Array(4).fill(n),i=new Array(4).fill(n);const o=e.x-(t.x+t.width),s=t.x-(e.x+e.width);if(o>0&&o<n*2){const h=o/2;r[3]=h,i[1]=h}if(s>0&&s<n*2){const h=s/2;i[3]=h,r[1]=h}const l=e.y-(t.y+t.height),c=t.y-(e.y+e.height);if(l>0&&l<n*2){const h=l/2;r[0]=h,i[2]=h}if(c>0&&c<n*2){const h=c/2;r[2]=h,i[0]=h}return{sourceOffset:r,targetOffset:i}},RC=(e,t,n)=>{switch(n){case Ot.top:return[e[0],t.y];case Ot.bottom:return[e[0],t.y+t.height];case Ot.right:return[t.x+t.width,e[1]];default:return[t.x,e[1]]}},f$=(e,t)=>{const{sourceOffset:n,targetOffset:r}=c$(e,t),i=b.expand(e,n[3],n[0],n[1],n[2]),o=b.expand(t,r[3],r[0],r[1],r[2]);return{sourceOuterRectangle:i,targetOuterRectangle:o}},h$=e=>{const{sourcePoint:t,nextSourcePoint:n,sourceRectangle:r,sourceOuterRectangle:i,targetPoint:o,nextTargetPoint:s,targetRectangle:l,targetOuterRectangle:c}=e;return b.isPointInRectangle(l,t)||b.isPointInRectangle(c,n)||b.isPointInRectangle(i,s)||b.isPointInRectangle(r,o)},Zm=new Map,P8=(e,t,n)=>{let r=Zm.has(e)?Zm.get(e):{};r[t]=n,Zm.set(e,r)},mv=e=>Zm.get(e),aT=new WeakMap,d$=(e,t)=>{F.getBoardContainer(e).classList.add("draw-elements-rotating"),aT.set(e,t),lu(e,!0)},g$=e=>{F.getBoardContainer(e).classList.remove("draw-elements-rotating"),aT.delete(e),lu(e,!1)},bC=(e,t)=>{const n=e.getRectangle(t);return n?n.width*n.height:0},p$=(e,t,n="asc")=>t.sort((r,i)=>{const o=bC(e,r),s=bC(e,i);return n==="asc"?o-s:s-o}),m$=e=>e&&e!==zS&&e!==W6,Sc=(e,t)=>{switch(e){case Wi.dashed:return[8,8+t];case Wi.dotted:return[2,4+t];default:return}},lT=(e,t,n,r)=>t.map(i=>{const o=r&&r(i);if(o)return o;if(i.points){const s=i.points.map(l=>[l[0]-n[0],l[1]-n[1]]);return{...i,points:s}}return i}),uT=(e,t,n,r)=>{const i={};t.forEach(o=>{i[o.id]=Sn()}),t.forEach(o=>{o.id=i[o.id],r&&r(o,i),o.points&&(o.points=o.points.map(s=>[n[0]+s[0],n[1]+s[1]])),Xe.insertNode(e,o,[e.children.length])}),Xe.addSelectionWithTemporaryElements(e,t)},qn=(e,t,n=Ot.right)=>n===Ot.left?[e[0]-t,e[1]]:n===Ot.bottom?[e[0],e[1]+t]:n===Ot.top?[e[0],e[1]-t]:[e[0]+t,e[1]],Tm=(e,t,n=Ot.right)=>n===Ot.bottom?[e[0]+t,e[1]]:n===Ot.top?[e[0]+t,e[1]]:[e[0],e[1]+t],v$=e=>e===0?Ot.top:e===1?Ot.right:e===2?Ot.bottom:e===3?Ot.left:Ot.right,cT=(e,t,n)=>Math.abs(n?e[0]-t[0]:e[1]-t[1]),y$="foreign-object-image",Py=class Py extends ts{constructor(t,n){super(t,n),this.board=t,this.options=n,this.isFocus=!1}canDraw(t){return!!this.options.getImageItem(t)}draw(t){this.element=t;const n=Lt(),r=this.options.getRectangle(t);this.foreignObject=G4(r.x,r.y,r.width,r.height),this.foreignObject.classList.add(y$),n.append(this.foreignObject);const i={board:this.board,imageItem:this.options.getImageItem(t),element:t,getRectangle:()=>this.options.getRectangle(t)};return this.imageComponentRef=this.board.renderImage(this.foreignObject,i),this.activeGenerator=bp(this.board,{getStrokeWidth:()=>(Qe(this.board).length===1&&!mi(this.board),gr),getStrokeOpacity:()=>{const o=Qe(this.board);return o.length===1&&!mi(this.board)||!o.length?1:.5},getRectangle:()=>this.options.getRectangle(this.element),hasResizeHandle:()=>{const o=gv(this.board,this.element);return!!mo(this.board)||o}}),n}updateImage(t,n,r){if(this.element=r,n!==r&&this.imageComponentRef){const s={imageItem:this.options.getImageItem(r),element:r,getRectangle:()=>this.options.getRectangle(r)};this.imageComponentRef.update(s)}const i=this.options.getRectangle(r);kg(this.g,i.width,i.height,i.x,i.y),i&&r.angle!==void 0&&Rs(this.g,b.getCenterPoint(i),r.angle);const o=F.getActiveHost(this.board);this.activeGenerator.processDrawing(r,o,{selected:this.isFocus})}setFocus(t,n){this.isFocus=n;const r=F.getActiveHost(this.board);this.activeGenerator.processDrawing(t,r,{selected:n});const i={isFocus:n};this.imageComponentRef.update(i)}destroy(){var t,n;super.destroy(),(t=this.imageComponentRef)==null||t.destroy(),(n=this.activeGenerator)==null||n.destroy()}};Py.key="image-generator";let ru=Py;const kp=(e,t,n)=>{Qe(e).forEach(i=>{if(n!=null&&n.match&&!(n!=null&&n.match(i)))return;const o=F.findPath(e,i),s=n!=null&&n.getMemorizeKey?n==null?void 0:n.getMemorizeKey(i):"";for(let l in t)s&&P8(s,l,t[l]);n!=null&&n.callback?n.callback(i,o):Xe.setNode(e,t,o)})},w$=(e,t,n)=>{kp(e,{strokeStyle:t},n)},C$=(e,t,n)=>{kp(e,{fill:t},n)},x$=(e,t,n)=>{kp(e,{strokeColor:t},n)},E$=(e,t,n)=>{kp(e,{strokeWidth:t},n)},pa={setFillColor:C$,setStrokeStyle:w$,setProperty:kp,setStrokeWidth:E$,setStrokeColor:x$},Jf=(e,t=!1)=>{let n=e[0],r=e[1];if(t){const s=Math.abs(n[0]-r[0]),l=Math.abs(n[1]-r[1]),c=Math.max(l,s);r=[n[0]+(r[0]>n[0]?c:-c),n[1]+(r[1]>n[1]?c:-c)]}const i=[Math.min(n[0],r[0]),Math.min(n[1],r[1])];let o=[Math.max(n[0],r[0]),Math.max(n[1],r[1])];return[i,o]},kC=(e,t)=>!F.isReadonly(e)&&!F.hasBeenTextEditing(e)&&F.isPointer(e,Zt.selection),fh=(e,t)=>{const{pointerDown:n,pointerMove:r,globalPointerUp:i}=e;let o=null,s=null,l=null,c=null;e.pointerDown=d=>{if(!t.canResize()||!kC(e)||!Za(d)){n(d);return}const g=Dt(e,Bt(e,d.x,d.y));if(o=t.hitTest(g),o){o.cursorClass&&F.getBoardContainer(e).classList.add(`${o.cursorClass}`),l=[d.x,d.y],s={path:Array.isArray(o.element)?o.element.map(y=>F.findPath(e,y)):F.findPath(e,o.element),element:o.element,handle:o.handle,handleIndex:o.handleIndex,rectangle:o.rectangle,options:o.options};return}n(d)},e.pointerMove=d=>{if(!t.canResize()||!kC(e)){h(),r(d);return}if(l&&o&&!Vl(e)){const g=[d.x,d.y];Tt(l[0],l[1],g[0],g[1])>R4&&($j(e,s,t.key),Or.set(e,!0),t.beforeResize&&t.beforeResize(s))}if(!Vl(e)&&!dc(e)){const g=Dt(e,Bt(e,d.x,d.y));da(e,t.key+"-common-resize-hit-test",()=>{const v=t.hitTest(g);v?(c&&v.cursorClass!==c.cursorClass&&F.getBoardContainer(e).classList.remove(`${c.cursorClass}`),c=v,c.cursorClass&&F.getBoardContainer(e).classList.add(`${c.cursorClass}`)):h()})}else if(l&&Vl(e)){d.preventDefault();const g=Dt(e,Bt(e,d.x,d.y));da(e,"with-common-resize",()=>{l&&s&&t.onResize(s,{startPoint:Dt(e,Bt(e,l[0],l[1])),endPoint:g,isShift:!!d.shiftKey})});return}r(d)},e.globalPointerUp=d=>{i(d),(Vl(e)||o)&&(t.afterResize&&t.afterResize(s),Wj(e,t.key),l=null,o=null,s=null,Or.set(e,!1))};const h=()=>{c&&(c.cursorClass&&F.getBoardContainer(e).classList.remove(`${c.cursorClass}`),c=null)};return e};class P$ extends ts{canDraw(t){return!0}draw(t,n){const r={stroke:"",strokeWidth:gr,strokeLineDash:[5]};let i={x:0,y:0,width:0,height:0};return n&&(r.stroke="#999",i=K4(this.board,t,!0)),ga(this.board,i,r)}}class S${constructor(){this.textManages=[],this.generatorMap=new Map,this.updateActiveSection=()=>{}}addGenerator(t,n){this.generatorMap.set(t,n)}getGenerator(t){return this.generatorMap.get(t)}initializeTextManage(t){this.textManages=[],Array.isArray(t)?this.textManages.push(...t):this.textManages.push(t)}getTextManages(){return this.textManages}destroyTextManage(){this.textManages.forEach(t=>{t.destroy()}),this.textManages=[]}}class Tc extends JF{constructor(t=new S$){super(t)}}class T$ extends Tc{constructor(){super()}initializeGenerator(){this.activeGenerator=bp(this.board,{getRectangle:t=>K4(this.board,t),getStrokeWidth:()=>0,getStrokeOpacity:()=>0,hasResizeHandle:()=>!mi(this.board)}),this.groupGenerator=new P$(this.board)}initialize(){super.initialize(),this.initializeGenerator();const t=F.getBoardContext(this.board);this.onStableSubscription=t.onStable().subscribe(()=>{const n=Os(this.board,this.element,!1,!0),r=n.some(i=>M6(this.board,i))&&!n.every(i=>M6(this.board,i));this.groupGenerator.processDrawing(this.element,this.getElementG(),r)})}onContextChanged(t,n){}destroy(){var t;super.destroy(),(t=this.onStableSubscription)==null||t.unsubscribe()}}function fT(e){let t,n;const{drawElement:r,pointerMove:i,globalPointerUp:o,insertFragment:s,getDeletedFragment:l,deleteFragment:c,getRelatedFragment:h,getRectangle:d,keyDown:g}=e;return e.drawElement=v=>So.isGroup(v.element)?T$:r(v),e.pointerMove=v=>{da(e,"with-group",()=>{t==null||t.remove();const y=Dt(e,Bt(e,v.x,v.y));let x={anchor:y,focus:y};e.selection&&!C0.isCollapsed(e.selection)&&(x=e.selection);const E=F.getPointer(e);if(!Vl(e)&&!gc(e)&&E===Zt.selection){const T=fP(e,x);T.length&&(t=uF(e,T),t&&F.getElementTopHost(e).append(t))}}),i(v)},e.globalPointerUp=v=>{t==null||t.remove(),t=null,o(v)},e.getRelatedFragment=(v,y)=>{const x=aF(e,v,y);return h([...v,...x],y)},e.insertFragment=(v,y,x)=>{var D,S;let E=[];if((D=v==null?void 0:v.elements)!=null&&D.length){E=new Array((S=v==null?void 0:v.elements)==null?void 0:S.length);const R=Pc(e,v==null?void 0:v.elements);q4(e,v==null?void 0:v.elements).forEach(O=>{const $=v.elements.map(z=>z.id).indexOf(O.id);E.splice($,1,O.groupId?D3(O,void 0):O)}),R.length&&R.forEach(O=>{const $=v.elements.map(K=>K.id).indexOf(O.id),z={...D3(O,void 0),id:Sn()};E.splice($,1,z),hT(O,v.elements,z.id,E)}),v.elements=E}s(v,y,x),(E==null?void 0:E.filter(R=>So.isGroup(R))).forEach(R=>{Xe.insertNode(e,R,[e.children.length])})},e.getDeletedFragment=v=>(n=D$(e),n&&n.length&&v.push(...n),l(v)),e.deleteFragment=v=>{n!=null&&n.length&&B$(e,n),c(v),n=null},e.getRectangle=v=>So.isGroup(v)?K4(e,v,!0):d(v),e.keyDown=v=>{if(!F.isReadonly(e)){if(Qt.isKeyHotkey("mod+g",v)){v.preventDefault(),Xe.addGroup(e);return}if(Qt.isKeyHotkey("mod+shift+g",v)){v.preventDefault(),Xe.removeGroup(e);return}}g(v)},e}const D3=(e,t)=>({...e,groupId:t}),hT=(e,t,n,r)=>{const i=t.filter(o=>o.groupId===e.id);return i.length&&i.forEach(o=>{const s=t.map(l=>l.id).indexOf(o.id);if(So.isGroup(o)){const l={...D3(o,n),id:Sn()};r.splice(s,1,l),hT(o,t,l.id,r)}else r.splice(s,1,D3(o,n))}),r},D$=e=>{const n=[...e.getRelatedFragment([])],r=Pc(e),i=Z4(e),o=[...r,...i];return o.forEach(s=>{const l=Ec(e,s,!0);if(l.length){const h=Os(e,l[0],!1,!0).filter(d=>![...o,...n].map(g=>g.id).includes(d.id));if((h.length===1||h.length===0)&&(n.includes(l[0])||n.push(l[0]),h.length===1&&l.length>1)){const d=A$(e,l.slice(1,l.length),[...o,...n]);let g=l.length;d&&(g=l.findIndex(v=>v.id===d.id)),[...l.slice(1,g)].forEach(v=>{n.includes(v)||n.push(v)})}}}),n},A$=(e,t,n)=>{let r=null;for(let i=0;i<t.length;i++)if(Os(e,t[i],!1,!0).filter(l=>!n.map(c=>c.id).includes(l.id)).length>0){r=t[i];break}return r},B$=(e,t)=>{const n=Z4(e),r=Pc(e),i=n.filter(o=>o.groupId);[...r,...i].forEach(o=>{const s=Ec(e,o,!0);if(s.length){const c=Os(e,s[0],!1,!0).filter(h=>h.id!==o.id);if(c.length===1){const h=t.map(d=>d.id);if(s.some(d=>h.includes(d.id))){const d=s.find(v=>!h.includes(v.id)),g=F.findPath(e,c[0]);Xe.setNode(e,{groupId:(d==null?void 0:d.id)||void 0},g)}}}})},x5=new WeakMap,A3=new WeakMap,M$=e=>{if(e){if(!x5.get(e)){const t=document.createElement("canvas");return x5.set(e,t),t}return x5.get(e)}return document.createElement("canvas")},E5=(e,t,n,r=1e4)=>{let i=A3.get(t);return i||(i=W0(e,t,n,r),A3.set(t,i),i)},R$=(e,t,n)=>{A3.set(t,n)},b$=(e,t)=>{A3.delete(t)};function W0(e,t,n,r=1e4){const o=M$(e).getContext("2d"),s=Ke.texts(t),l=[[]];for(const d of s){const[g]=d;Ke.string(g).split(`
`).forEach((x,E)=>{const T={...g,text:x};if(E===0)l[l.length-1].push(T);else{const D=[];D.push(T),l.push(D)}})}let c=0,h=0;return l.forEach((d,g)=>{let v=0,y=AC(n.fontSize);if(d.forEach((x,E)=>{const T=k$(x,{fontFamily:n.fontFamily,fontSize:n.fontSize});o.font=T,v+=o.measureText(x.text).width;const D=E===d.length-1;if(x["font-size"]&&(D||x.text!=="")){const S=AC(parseFloat(x["font-size"]));S>y&&(y=S)}}),v<=r)v>c&&(c=v),h+=y;else{c=r;const x=Math.ceil(v/r);h+=y*x}}),{width:c,height:h}}const k$=(e,t)=>`${e.italic?"italic ":""} ${e.bold?"bold ":""} ${e["font-size"]||t.fontSize}px ${t.fontFamily} `;class Op{constructor(t,n){this.board=t,this.options=n,this.isEditing=!1,this.getSize=(r,i)=>{const o=window.getComputedStyle(this.foreignObject.children[0]),s=o.fontFamily,l=parseFloat(o.fontSize),c=r||this.editor.children[0];return W0(this.board,c,{fontSize:l,fontFamily:s},i||this.options.getMaxWidth())},this.getText=()=>this.editor.children[0],this.options.getMaxWidth||(this.options.getMaxWidth=()=>999)}draw(t){const n=this.options.getRectangle();this.g=Lt(),this.foreignObject=G4(n.x,n.y,n.width,n.height),this.g.append(this.foreignObject),this.g.classList.add("text");const r={board:this.board,text:t,textPlugins:this.options.textPlugins,onChange:i=>{if(i.operations.some(o=>!Wl.isSelectionOperation(o))){const{width:o,height:s}=this.getSize();this.options.onChange&&this.options.onChange({...i,width:o,height:s}),Or.set(this.board,!0)}},afterInit:i=>{this.editor=i},onComposition:i=>{if(i.type==="compositionend"){b$(this.board,this.editor.children[0]);return}const o=O$(this.editor,i.data);if(o){const s=this.getSize(o.children[0]);R$(this.board,this.editor.children[0],s),this.options.onChange&&this.options.onChange({...s}),Or.set(this.board,!0)}}};this.textComponentRef=this.board.renderText(this.foreignObject,r)}updateRectangleWidth(t){WO(this.g,t)}updateAngle(t,n=0){Rs(this.g,t,n)}updateRectangle(t){const{x:n,y:r,width:i,height:o}=t||this.options.getRectangle();kg(this.g,i,o,n,r)}updateText(t){const n={text:t};this.textComponentRef.update(n)}edit(t,n){this.isEditing=!0,m6.set(this.board,!0);const r={readonly:!1};this.textComponentRef.update(r),Re.select(this.editor,[0]);const i=u3(document,"mousedown").subscribe(l=>{const c=Dt(this.board,Bt(this.board,l.x,l.y)),h=this.options.getRenderRectangle?this.options.getRenderRectangle():this.options.getRectangle(),d=b.isHit(b.getRectangleByPoints([c,c]),h),g=l.target.closest(".plait-board-attached");!d&&!g&&mO(0).subscribe(()=>{s()})}),o=u3(document,"keydown").subscribe(l=>{if(!l.isComposing&&(l.key==="Escape"||l.key==="Tab"||n&&n(l))){l.preventDefault(),l.stopPropagation(),s();return}}),s=()=>{if(this.isEditing){this.updateRectangle(),i.unsubscribe(),o.unsubscribe(),m6.set(this.board,!1),Or.set(this.board,!1),t&&t();const l={readonly:!0};this.textComponentRef.update(l),this.isEditing=!1,this.exitCallback=void 0}};return this.exitCallback=s,s}destroy(){var t,n;(t=this.g)==null||t.remove(),(n=this.textComponentRef)==null||n.destroy(),this.exitCallback&&this.exitCallback()}}const O$=(e,t)=>{if(e.selection&&Ee.isCollapsed(e.selection)){const[n,r]=L.node(e,e.selection),i=e.selection.anchor.offset,s={children:[JSON.parse(JSON.stringify(e.children[0]))]},l=n.text.slice(0,i+1)+t+n.text.slice(i+1),c=Ke.get(s,r);return c.text=l,s}return null},I$=e=>{const t=e;return t.renderText=(n,r)=>{throw new Error("No implementation for renderText method.")},t};var gi;(function(e){e.left="left",e.center="center",e.right="right"})(gi||(gi={}));const F$=e=>{const t=e;return t.renderImage=(n,r)=>{throw new Error("No implementation for renderImage method.")},t},U6={isActive(e,t){const n=Ke.get(e,OC);if(n){const{align:r}=n;return r===t}return!1},setAlign(e,t){const n={align:t};Re.setNodes(e,n,{at:OC})}},OC=[0];var Zr;(function(e){e.bold="bold",e.italic="italic",e.underline="underlined",e.strike="strike",e.color="color",e.fontSize="font-size"})(Zr||(Zr={}));const IC=[Zr.bold,Zr.color,Zr.italic,Zr.strike,Zr.underline,Zr.fontSize];var B3;(function(e){e.fontSize12="12",e.fontSize13="13",e.fontSize14="14",e.fontSize15="15",e.fontSize16="16",e.fontSize18="18",e.fontSize20="20",e.fontSize24="24",e.fontSize28="28",e.fontSize32="32",e.fontSize40="40",e.fontSize48="48"})(B3||(B3={}));Zr.bold,Zr.italic,Zr.underline,Zr.strike;const S0=14,Zl={getMarks(e){const t={};let n=[];e.selection?n=e.selection:e.children&&e.children.length>0&&(n={anchor:L.start(e,[0]),focus:L.end(e,[0])});const r=L.nodes(e,{match:ot.isText,at:n});for(const i of r){const[o]=i,{text:s,...l}=o;Object.assign(t,l)}for(const i in t)IC.includes(i)||delete t[i];return t},getMarksByElement(e){const t={},n=Ke.texts(e);for(const r of n){const[i]=r,{text:o,...s}=i;Object.assign(t,s)}for(const r in t)IC.includes(r)||delete t[r];return t},isMarkActive(e,t){var i,o;if(!(e!=null&&e.selection))return;const n=Ke.get(e,(o=(i=e==null?void 0:e.selection)==null?void 0:i.anchor)==null?void 0:o.path);if(!ot.isText(n))return!1;const r=Zl.getMarks(e);return!!(r&&r[t])},toggleMark(e,t){P5(e),Zl.isMarkActive(e,t)?L.removeMark(e,t):L.addMark(e,t,!0)},setFontSizeMark(e,t,n=S0){P5(e),Number(t)===n?L.removeMark(e,Zr.fontSize):L.addMark(e,Zr.fontSize,Number(t))},setColorMark(e,t,n=ei){P5(e),t===n||t===null||t===void 0?L.removeMark(e,"color"):L.addMark(e,"color",t)}};function P5(e){e.selection||Re.select(e,[0])}const Ka={wrapLink(e,t,n){Ka.isLinkActive(e)&&Ka.unwrapLink(e);const{selection:r}=e,i=r&&Ee.isCollapsed(r),o={type:"link",url:n,children:[{text:t}]};if(i||Ke.string(e)==="")Re.insertNodes(e,o);else if(r)Re.wrapNodes(e,o,{split:!0}),Re.collapse(e,{edge:"end"});else{const s={anchor:L.start(e,[0]),focus:L.end(e,[0])};Re.wrapNodes(e,o,{split:!0,at:s})}},unwrapLink(e,t){t||(t=e.selection,!t&&e.children&&e.children.length>0&&(t={anchor:L.start(e,[0]),focus:L.end(e,[0])})),Re.unwrapNodes(e,{at:t,match:n=>lt.isElement(n)&&n.type==="link"})},isLinkActive(e){let t=e.selection;!t&&e.children&&e.children.length>0&&(t={anchor:L.start(e,[0]),focus:L.end(e,[0])});const[n]=L.nodes(e,{match:r=>lt.isElement(r)&&r.type==="link",at:t});return!!n},getLinkElement(e){let t=e.selection;!t&&e.children&&e.children.length>0&&(t={anchor:L.start(e,[0]),focus:L.end(e,[0])});const[n]=L.nodes(e,{match:r=>lt.isElement(r)&&r.type==="link",at:t});return n}},dT=20;function FC(e){const t=/^(?:\w+:)?\/\/(\S+)$/,n=/^mailto:([^\s@]+@[^\s@]+\.[^\s@]+)$/,r=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,i=/^[^\s\.]+\.\S{2,}$/;if(typeof e!="string")return!1;const o=e.match(n);if(o)return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o[1]);const s=e.match(t);if(!s)return!1;const l=s[1];return l?!!(r.test(l)||i.test(l)):!1}const gT=e=>{const n=ch(e)[0];return!n||n.children.length===0?{}:Zl.getMarks(n)},L$=e=>Ke.first({children:[e]},[0])[0],_$=(e,t,n)=>{let r;if(n!=null&&n.length)r=n;else{const i=Qe(e);if(i.length){const o=e$(e);if(!o)return;const s=Zl.getMarks(o),l=i.filter(c=>ch(c).some(d=>Zl.getMarks(d)[t]===s[t]));r=nT(e,l)}}r&&r.length&&r.forEach(i=>{Zl.toggleMark(i,t)})},N$=(e,t,n,r)=>{const i=S8(e,r);if(i&&i.length){const o=Qe(e);i.forEach(s=>{let l;if(typeof n=="function"){const c=o.find(h=>ch(h).includes(s));l=n(c)}else l=n;Zl.setFontSizeMark(s,t,l)})}},H$=(e,t,n,r)=>{const i=S8(e,r);i&&i.length&&i.forEach(o=>{n&&Re.select(o,n),t==="transparent"?L.removeMark(o,Zr.color):Zl.setColorMark(o,t)})},G$=(e,t,n)=>{const r=S8(e,n);r&&r.length&&r.forEach(i=>U6.setAlign(i,t))},S8=(e,t)=>{let n;return t!=null&&t.length?n=t:n=nT(e),n},X6={setTextAlign:G$,setTextColor:H$,setFontSize:N$,setTextMarks:_$},LC=()=>M.jsx("span",{contentEditable:!1,style:{fontSize:0},children:String.fromCodePoint(160)}),j$=({attributes:e,children:t,element:n})=>M.jsxs("a",{...e,style:{textDecoration:"none",cursor:"inherit"},"data-url":n.url,className:"plait-board-link",children:[M.jsx(LC,{}),t,M.jsx(LC,{})]}),$$=e=>{const{insertData:t,insertText:n,isInline:r}=e;return e.isInline=i=>i.type&&["link"].includes(i.type)||r(i),e.insertText=i=>{i&&FC(i)?Ka.wrapLink(e,i,i):n(i)},e.insertData=i=>{const o=i.getData("text/plain");o&&FC(o)?Ka.wrapLink(e,o,o):t(i)},e},_C=e=>{const{text:t,readonly:n,onChange:r,onComposition:i,afterInit:o}=e,s=G.useCallback(d=>M.jsx(V$,{...d}),[]),l=[t],c=G.useMemo(()=>{const d=$$(Fj(kj(Rj(fH()))));return o&&o(d),d},[]);G.useEffect(()=>{t!==c.children[0]&&(c.children=[t],c.onChange())},[t,c]);const h=d=>{const{selection:g}=c;if(g&&Ee.isCollapsed(g)){const{nativeEvent:v}=d;if(Qt.isKeyHotkey("left",v)){d.preventDefault(),Re.move(c,{unit:"offset",reverse:!0});return}if(Qt.isKeyHotkey("right",v)){d.preventDefault(),Re.move(c,{unit:"offset"});return}}};return M.jsx(Mj,{editor:c,initialValue:l,onChange:d=>{r&&r({newText:c.children[0],operations:c.operations})},children:M.jsx(Ej,{className:"slate-editable-container plait-text-container",renderElement:d=>M.jsx(W$,{...d}),renderLeaf:s,readOnly:n===void 0?!0:n,onCompositionStart:d=>{i&&i(d)},onCompositionUpdate:d=>{i&&i(d)},onCompositionEnd:d=>{i&&i(d)},onKeyDown:h})})},W$=e=>{const{attributes:t,children:n,element:r}=e;switch(r.type){case"link":return M.jsx(j$,{...e});default:return M.jsx(z$,{...e})}},z$=({attributes:e,children:t,element:n})=>{const r={textAlign:n.align};return M.jsx("div",{style:r,...e,children:t})},V$=({children:e,leaf:t,attributes:n})=>(t.bold&&(e=M.jsx("strong",{children:e})),t.code&&(e=M.jsx("code",{children:e})),t.italic&&(e=M.jsx("em",{children:e})),t.underlined&&(e=M.jsx("u",{children:e})),M.jsx("span",{style:{color:t.color},...n,children:e})),U$=e=>{const t=e;return t.renderText=(n,r)=>{const i=q3.createRoot(n);let o;const s=M.jsx(_C,{...r,afterInit:h=>{o=h,r.afterInit&&r.afterInit(h)}});i.render(s);let l={...r};return{destroy:()=>{setTimeout(()=>{i.unmount()},0)},update:h=>{if(!(h&&l&&!Object.keys(h).every(v=>h[v]===l[v])))return;const g=ze.isReadOnly(o);l={...l,...h},i.render(M.jsx(_C,{...l})),g===!0&&l.readonly===!1?setTimeout(()=>{ze.focus(o)},0):g===!1&&l.readonly===!0&&(ze.blur(o),ze.deselect(o))}}},t},X$=e=>{const{pointerDown:t,pointerMove:n,pointerUp:r,globalPointerUp:i}=e,o=[];let s=!1;return e.pointerDown=l=>{const c=[l.clientX,l.clientY];o.length<2&&(e.viewport.zoom,o.push({pointerId:l.pointerId,lastPoint:c,currentPoint:c,hasMoved:!1})),t(l)},e.pointerMove=l=>{const c=[l.clientX,l.clientY];if(o.length>=2){const h=o.find(d=>d.pointerId===l.pointerId);if(h&&(h.currentPoint=c,h.hasMoved=!0,o.length===2&&o.every(d=>d.hasMoved))){const[d,g]=o,v=Dw(...d.lastPoint,...g.lastPoint),y=Dw(...d.currentPoint,...g.currentPoint),x=y[0]-v[0],E=y[1]-v[1],T=F.getBoardContainer(e).getBoundingClientRect(),D=T.width/2,S=T.height/2,R=e.viewport.zoom,k=N0(e);let O=k[0]+D/R-x/R,$=k[1]+S/R-E/R,z=[O-T.width/2/R,$-T.height/2/R],K=R;const te=Tt(...d.lastPoint,...g.lastPoint),me=Tt(...d.currentPoint,...g.currentPoint)/te,ne=[d.currentPoint[0]-d.lastPoint[0],d.currentPoint[1]-d.lastPoint[1]],oe=[g.currentPoint[0]-g.lastPoint[0],g.currentPoint[1]-g.lastPoint[1]],ve=ne[0]*oe[0]+ne[1]*oe[1],ge=Math.sqrt(ne[0]*ne[0]+ne[1]*ne[1]),Me=Math.sqrt(oe[0]*oe[0]+oe[1]*oe[1]),Pe=ve/(ge*Me||1);if(Pe<-.7||Pe<=.8&&s&&me>=.01?s=!0:s=!1,s){K=Math.min(Math.max(e.viewport.zoom*me,eP),tP);const le=F.getBoardContainer(e).getBoundingClientRect(),we=y[0]-le.x,U=y[1]-le.y;O=z[0]+we/R,$=z[1]+U/R,z=[O-we/K,$-U/K]}fn.updateViewport(e,z,K),o.forEach(he=>{he.lastPoint=he.currentPoint,he.hasMoved=!1})}return}n(l)},e.pointerUp=l=>{const c=o.findIndex(h=>h.pointerId===l.pointerId);c!==-1&&o.splice(c,1),r(l)},e.globalPointerUp=l=>{const c=o.findIndex(h=>h.pointerId===l.pointerId);c!==-1&&o.splice(c,1),i(l)},e},pT=({value:e,children:t,options:n,plugins:r,viewport:i,theme:o,onChange:s,onSelectionChange:l,onValueChange:c,onViewportChange:h,onThemeChange:d})=>{const[g,v]=G.useState(()=>{const D=K$(e,n,r,i,o),S=Y$(D);return{v:0,board:D,listRender:S}}),{board:y,listRender:x}=g,E=G.useCallback(()=>{if(s){const O={children:y.children,operations:y.operations,viewport:y.viewport,selection:y.selection,theme:y.theme};s(O)}const D=y.operations.some(O=>Ju.isSetSelectionOperation(O)),S=y.operations.some(O=>Ju.isSetViewportOperation(O)),R=y.operations.some(O=>Ju.isSetThemeOperation(O)),k=y.operations.length>0&&!y.operations.every(O=>Ju.isSetSelectionOperation(O)||Ju.isSetViewportOperation(O)||Ju.isSetThemeOperation(O));c&&k&&c(y.children),l&&D&&l(y.selection),h&&S&&h(y.viewport),d&&R&&d(y.theme.themeColorMode),v(O=>({v:O.v+1,board:y,listRender:x}))},[y,s,l,c]);G.useEffect(()=>(c3.set(y,()=>{if(y.operations.length&&y.operations.every(k=>k.type==="set_selection")){x.update(y.children,{board:y,parent:y,parentG:F.getElementHost(y)});return}const S=y.operations.length&&y.operations.some(k=>k.type==="set_viewport");if(S&&xI(y)){SP(y,!1),x.update(y.children,{board:y,parent:y,parentG:F.getElementHost(y)});return}x.update(y.children,{board:y,parent:y,parentG:F.getElementHost(y)}),S?V4(y):yI(y),p3(y),Qe(y).forEach(k=>{yn.getElementRef(k).updateActiveSection()})}),f3.set(y,()=>{E()}),()=>{c3.delete(y),f3.delete(y)}),[y]);const T=G.useRef(!0);return G.useEffect(()=>{if(T.current){T.current=!1;return}e!==g.board.children&&!$m.get(y)&&(y.children=e,x.update(y.children,{board:y,parent:y,parentG:F.getElementHost(y)}),fn.fitViewport(y))},[e]),M.jsx(r8.Provider,{value:g,children:t})},K$=(e,t,n,r,i)=>{let o=yL(sL(iL(oL(wL(pL(rL(CL(vL(U$(F$(I$(nL(e,t)))))))))))));return n.forEach(s=>{o=s(o)}),X$(o),r&&(o.viewport=r),i&&(o.theme=i),o},Y$=e=>new ZP(e);function q$(e,t){return Math.sqrt(Z$(e,t))}function Z$(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function Xd(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function Q$(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],o=e[t+3];let s=3*r[0]-2*n[0]-o[0];s*=s;let l=3*r[1]-2*n[1]-o[1];l*=l;let c=3*i[0]-2*o[0]-n[0];c*=c;let h=3*i[1]-2*o[1]-n[1];return h*=h,s<c&&(s=c),l<h&&(l=h),s+l}function K6(e,t,n,r){const i=r||[];if(Q$(e,t)<n){const o=e[t+0];i.length?q$(i[i.length-1],o)>1&&i.push(o):i.push(o),i.push(e[t+3])}else{const s=e[t+0],l=e[t+1],c=e[t+2],h=e[t+3],d=Xd(s,l,.5),g=Xd(l,c,.5),v=Xd(c,h,.5),y=Xd(d,g,.5),x=Xd(g,v,.5),E=Xd(y,x,.5);K6([s,d,y,E],0,n,i),K6([E,x,v,h],0,n,i)}return i}function To(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let o=0;o<i;o++){const s=o*3;K6(e,s,t,r)}return r}var pt;(function(e){e.rectangle="rectangle",e.ellipse="ellipse",e.diamond="diamond",e.roundRectangle="roundRectangle",e.parallelogram="parallelogram",e.text="text",e.triangle="triangle",e.leftArrow="leftArrow",e.trapezoid="trapezoid",e.rightArrow="rightArrow",e.cross="cross",e.star="star",e.pentagon="pentagon",e.hexagon="hexagon",e.octagon="octagon",e.pentagonArrow="pentagonArrow",e.processArrow="processArrow",e.twoWayArrow="twoWayArrow",e.comment="comment",e.roundComment="roundComment",e.cloud="cloud"})(pt||(pt={}));var gt;(function(e){e.process="process",e.decision="decision",e.data="data",e.connector="connector",e.terminal="terminal",e.manualInput="manualInput",e.preparation="preparation",e.manualLoop="manualLoop",e.merge="merge",e.delay="delay",e.storedData="storedData",e.or="or",e.summingJunction="summingJunction",e.predefinedProcess="predefinedProcess",e.offPage="offPage",e.document="document",e.multiDocument="multiDocument",e.database="database",e.hardDisk="hardDisk",e.internalStorage="internalStorage",e.noteCurlyRight="noteCurlyRight",e.noteCurlyLeft="noteCurlyLeft",e.noteSquare="noteSquare",e.display="display"})(gt||(gt={}));var ft;(function(e){e.actor="actor",e.useCase="useCase",e.container="container",e.note="note",e.simpleClass="simpleClass",e.activityClass="activityClass",e.branchMerge="branchMerge",e.port="port",e.package="package",e.combinedFragment="combinedFragment",e.class="class",e.interface="interface",e.object="object",e.component="component",e.componentBox="componentBox",e.template="template",e.activation="activation",e.deletion="deletion",e.assembly="assembly",e.providedInterface="providedInterface",e.requiredInterface="requiredInterface"})(ft||(ft={}));var es;(function(e){e.name="name",e.content="content"})(es||(es={}));var xo;(function(e){e.swimlaneVertical="swimlaneVertical",e.swimlaneHorizontal="swimlaneHorizontal"})(xo||(xo={}));var la;(function(e){e.swimlaneVertical="swimlaneVertical",e.swimlaneHorizontal="swimlaneHorizontal",e.swimlaneVerticalWithHeader="swimlaneVerticalWithHeader",e.swimlaneHorizontalWithHeader="swimlaneHorizontalWithHeader"})(la||(la={}));var T0;(function(e){e.table="table"})(T0||(T0={}));const sp={isTable:e=>e.type==="table",isVerticalText:e=>{var t;return((t=e.text)==null?void 0:t.direction)==="vertical"}},mT="plait-draw-plugin-key";var D0;(function(e){e.lineText="line-text",e.geometryText="geometry-text"})(D0||(D0={}));const ut={rectangleAndText:4},vv={strokeWidth:2,fill:zS},J$={selectionStrokeWidth:gr},ap={width:100,height:100,strokeColor:ei,strokeWidth:2},NC={width:120,height:50},eW={width:138,height:80},HC={width:100,height:80},tW={width:120,height:100},yv={height:20,text:""},vT={defaultTextMaxWidth:34*14},S5={width:44,height:44},ja={width:120,height:60},nW={width:70,height:80},rW={width:80,height:80},iW={width:140,height:70},oW={width:124,height:60},yT={width:120,height:70},T5={width:160,height:100},Y6={width:120,height:80},sW={width:117,height:59},aW={width:47,height:33},lW={width:68,height:100},uW={width:300,height:240},cW={width:210,height:150,texts:[{id:es.name,text:"",align:gi.left},{id:es.content,text:"",align:gi.left}]},fW={width:18,height:80},Dm={width:120,height:60},hW={width:200,height:150},GC={width:40,height:40},dW={width:20,height:20},gW={width:70,height:56},pW={width:120,height:56},mW={width:70,height:34},vW={width:400,height:280,texts:[{id:es.name,text:"Opt | Alt | Loop",align:gi.left},{id:es.content,text:"[Condition]",align:gi.left}]},yW={width:230,height:180,texts:[{text:"Class",align:gi.center},{text:`+ attribute1:type  defaultValue
+ attribute2:type
- attribute3:type`,align:gi.left},{text:`+ operation1(params):returnType
- operation2(params)
- operation3()`,align:gi.left}]},wW={width:230,height:140,texts:[{text:`<<interface>>
Interface`,align:gi.center},{text:`+ operation1(params):returnType
- operation2(params)
- operation3()`,align:gi.left}]},wT={[pt.pentagonArrow]:NC,[pt.processArrow]:NC,[pt.cloud]:tW,[pt.twoWayArrow]:eW,[pt.leftArrow]:HC,[pt.rightArrow]:HC},CT={[gt.connector]:S5,[gt.process]:ja,[gt.decision]:iW,[gt.data]:oW,[gt.terminal]:ja,[gt.manualInput]:sW,[gt.preparation]:ja,[gt.manualLoop]:ja,[gt.merge]:aW,[gt.delay]:ja,[gt.storedData]:ja,[gt.or]:S5,[gt.summingJunction]:S5,[gt.predefinedProcess]:ja,[gt.offPage]:ja,[gt.document]:yT,[gt.multiDocument]:Y6,[gt.database]:nW,[gt.hardDisk]:ja,[gt.internalStorage]:rW,[gt.noteCurlyLeft]:T5,[gt.noteCurlyRight]:T5,[gt.noteSquare]:T5,[gt.display]:ja},xT={[ft.actor]:lW,[ft.useCase]:yT,[ft.container]:uW,[ft.note]:Dm,[ft.package]:cW,[ft.combinedFragment]:vW,[ft.class]:yW,[ft.interface]:wW,[ft.activation]:fW,[ft.object]:Dm,[ft.deletion]:GC,[ft.activityClass]:Dm,[ft.simpleClass]:Dm,[ft.component]:Y6,[ft.template]:Y6,[ft.componentBox]:hW,[ft.port]:dW,[ft.branchMerge]:GC,[ft.assembly]:pW,[ft.providedInterface]:mW,[ft.requiredInterface]:gW},CW={[ft.package]:Object.keys(es),[ft.combinedFragment]:Object.keys(es)},M3=10,xW=6,EW=8,ET=[gt.or,gt.summingJunction,ft.activation,ft.deletion,ft.port,ft.branchMerge,ft.assembly,ft.providedInterface,ft.requiredInterface],PW=[ft.package,ft.combinedFragment],SW=[gt.noteCurlyLeft,gt.noteCurlyRight,gt.noteSquare,ft.requiredInterface,ft.deletion],T8=()=>[...Object.keys(pt),...Object.keys(gt),...Object.keys(ft)],PT=()=>Object.keys(la),TW=()=>Object.keys(gt),DW=()=>Object.keys(ft),AW=()=>Object.keys(Ln),BW=()=>Object.keys(I3),MW=1e3,ST={[hr.default]:{strokeColor:ei,fill:"#FFFFFF"},[hr.colorful]:{strokeColor:"#06ADBF",fill:"#CDEFF2"},[hr.soft]:{strokeColor:"#6D89C1",fill:"#DADFEB"},[hr.retro]:{strokeColor:"#E9C358",fill:"#F6EDCF"},[hr.dark]:{strokeColor:"#FFFFFF",fill:"#434343"},[hr.starry]:{strokeColor:"#42ABE5",fill:"#163F5A"}},xg=42,RW={width:580,height:524},bW={width:524,height:580},kW={width:580,height:524},OW={width:524,height:580},TT={[la.swimlaneHorizontal]:OW,[la.swimlaneVertical]:kW,[la.swimlaneHorizontalWithHeader]:bW,[la.swimlaneVerticalWithHeader]:RW},R3=5,DT={strokeWidth:2},IW=4,FW=6,LW=1,_W=1,NW=12,i0=3,HW="",lp=new WeakMap,jC=(e,t,n,r)=>{const i=lp.get(e);return lp.set(e,{...i,[qT(t,n)]:r})},Gg=(e,t,n)=>lp.get(e)[qT(t,n)],$C=(e,t)=>{const n=lp.get(e);delete n[t],lp.set(e,n)};class D8{get shape(){return this.element.shape||this.element.type}constructor(t,n,r,i){this.board=t,this.texts=r,this.element=n,this.options=i}initialize(){const t=(this.board.getPluginOptions($6)||{}).textPlugins;this.textManages=this.texts.map(r=>{const i=this.createTextManage(r,t);return jC(this.board,this.element,r,i),i}),yn.getElementRef(this.element).initializeTextManage(this.textManages)}draw(t){const n=b.getCenterPoint(this.board.getRectangle(this.element));this.texts.forEach(r=>{const i=Gg(this.board,this.element,r);r.text&&i&&(i.draw(r.text),t.append(i.g),(this.element.angle||this.element.angle===0)&&i.updateAngle(n,this.element.angle))})}update(t,n,r,i){this.element=t;const o=b.getCenterPoint(this.board.getRectangle(this.element)),s=(this.board.getPluginOptions($6)||{}).textPlugins,l=n.filter(c=>!r.find(h=>h.id===c.id));l.length&&l.forEach(c=>{const h=Gg(this.board,t,c),d=this.textManages.findIndex(g=>g===h);d>-1&&c.text&&c.textHeight&&this.textManages.splice(d,1),h==null||h.destroy(),$C(this.board,c.id)}),r.forEach(c=>{if(c.text){let h=Gg(this.board,this.element,c);h?(h.updateText(c.text),h.updateRectangle()):(h=this.createTextManage(c,s),jC(this.board,t,c,h),h.draw(c.text),i.append(h.g),this.textManages.push(h)),(this.element.angle||this.element.angle===0)&&h.updateAngle(o,this.element.angle)}})}createTextManage(t,n){return new Op(this.board,{getRectangle:()=>this.getRectangle(t),onChange:i=>this.options.onChange(this.element,i,t),getMaxWidth:()=>this.getMaxWidth(t),getRenderRectangle:()=>this.options.getRenderRectangle?this.options.getRenderRectangle(this.element,t):this.getRectangle(t),textPlugins:n})}getRectangle(t){const n=vi(this.shape).getTextRectangle;return n?n(this.element,t):Ar(this.element)}getMaxWidth(t){return this.options.getMaxWidth?this.options.getMaxWidth():this.getRectangle(t).width}destroy(){yn.getElementRef(this.element).destroyTextManage(),this.textManages=[],this.texts.forEach(n=>{$C(this.board,n.id)})}}const q6=e=>{const t=Qe(e);return t&&t.length===1&&fe.isElementByTable(t[0])},GW=(e,t)=>(t!=null&&t.length?t:Qe(e)).filter(r=>fe.isElementByTable(r)),A8=new WeakMap;function o0(e){return A8.get(e)}function AT(e,t){return A8.set(e,t)}function WC(e){return A8.delete(e)}function Ip(e,t){const n=e==null?void 0:e.buildTable(t);if(!n||!n.points||!n.columns||!n.rows)throw new Error("can not get table cells points");const r=b.getRectangleByPoints(n.points),i=n.columns.length,o=n.rows.length,s=zC(n.columns,r.width,i,!0),l=zC(n.rows,r.height,o,!1);return n.cells.map(h=>{const d=n.rows.findIndex(S=>S.id===h.rowId),g=n.columns.findIndex(S=>S.id===h.columnId);let v=r.x;for(let S=0;S<g;S++)v+=s[S];let y=r.y;for(let S=0;S<d;S++)y+=l[S];const x=VC(h,s,g,!0),E=v+x,T=VC(h,l,d,!1),D=y+T;return{...h,points:[[v,y],[E,D]]}})}function hh(e,t,n){try{const r=Ip(e,t),i=r&&t.cells.findIndex(o=>o.id===n);return r[i]}catch{throw new Error("can not get table cell points")}}function zC(e,t,n,r){const i=[],o=r?"width":"height";let s=t;e.forEach((h,d)=>{h[o]&&(i[d]=h[o],s-=h[o])});const l=n-i.filter(h=>!!h).length,c=l>0?s/l:0;for(let h=0;h<n;h++)i[h]||(i[h]=c);return i}function VC(e,t,n,r){const i=r?e.colspan||1:e.rowspan||1;let o=0;for(let s=0;s<i;s++){const l=n+s;o+=t[l]}return o}function UC(e,t,n){const r=e.buildTable(t),i=Ip(e,r),o=b.getRectangleByPoints([n,n]),s=i.find(l=>{const c=b.getRectangleByPoints(l.points);return b.isHit(o,c)});return s?r.cells.find(l=>l.id===s.id):null}function XC(e,t){const n=BT(e,t);n&&n.edit()}function BT(e,t){return Gg(e,void 0,t)}const MT=(e,t,n,r)=>{const i=e.columns.map(s=>s.id===t?{...s,width:n}:s),o=[e.points[0],[e.points[1][0]+r,e.points[1][1]]];return{columns:i,points:o}},RT=(e,t,n,r)=>{const i=e.rows.map(s=>s.id===t?{...s,height:n}:s),o=[e.points[0],[e.points[1][0],e.points[1][1]+r]];return{rows:i,points:o}};function jW(e,t,n,r){const i=`${r}Id`;e.forEach(o=>{o[i]===t&&(o[i]=n)})}function KC(e,t){e[`${t}s`].forEach(n=>{const r=Sn();jW(e.cells,n.id,r,t),n.id=r})}function $W(e){e.forEach(t=>{const n=Sn();t.id=n})}function bT(e){return e.text&&e.textHeight}function WW(e,t,n){const r=Ip(e,t),i=n.map(o=>r.find(l=>l.id===o.id).points);return b.getRectangleByPoints(i)}const D5=(e,t,n=null)=>{const r={id:Sn(),rowId:e,columnId:t};return n!==null&&(r.textHeight=dT,r.text={children:[{text:n}],align:gi.center}),r},zW=6,A5=new WeakMap,z0=e=>{let t="";switch(!0){case fe.isText(e):{t=Uo.text;break}case fe.isBasicShape(e):{t=Uo.basicShape;break}case fe.isFlowchart(e):{t=Uo.flowchart;break}case fe.isArrowLine(e):{t=Uo.arrowLine;break}case fe.isUML(e):t=Uo.UML}return t},kT=()=>({...mv(Uo.arrowLine)}),Dc=e=>{let t="";fe.isBasicShape({shape:e})?t=e===pt.text?Uo.text:Uo.basicShape:fe.isUML({shape:e})?t=Uo.UML:t=Uo.flowchart;const n={...mv(t)},r={...n.text};return delete n.text,{textProperties:r,geometryProperties:n}},B8=(e,t)=>{var o;const n=z0(e);let r=((o=mv(n))==null?void 0:o.text)||{};const i=t.find(s=>s.type==="set_node");if(i){const{properties:s,newProperties:l}=i;for(const c in l){const h=l[c];h==null?delete r[c]:r[c]=h}for(const c in s)l.hasOwnProperty(c)||delete r[c];P8(n,"text",r)}},VW=(e,t)=>{const n=A5.has(e)?A5.get(e):[],r=n.indexOf(t);t===pt.text||r===0||(r!==-1?n.splice(r,1):n.length===zW&&n.pop(),n.unshift(t),A5.set(e,n))},UW="debug:plait:line-mirror",Am=I0(UW),M8=(e,t)=>{const n=[...t];return mt.isVertical(n,e,i0)&&(n[0]=e[0]),mt.isHorizontal(n,e,i0)&&(n[1]=e[1]),n};function XW(e,t,n,r){const i={previous:null,next:null},o=e[r],s=e[r+1],l=mt.isHorizontal(o,s),c=mt.isVertical(o,s),h=e[r-1]??e[0],d=e[r-2]??t;(l&&mt.isHorizontal(d,h)||c&&mt.isVertical(d,h))&&(i.previous=h);const g=e[r+2]??e[e.length-1],v=e[r+3]??n;return(l&&mt.isHorizontal(g,v)||c&&mt.isVertical(g,v))&&(i.next=g),i}function KW(e,t,n,r){let i=e,o=t;if(mt.isHorizontal(e,t)){const s=mt.getOffsetY(n.startPoint,n.endPoint);let l=e[1]+s;r.previous&&Math.abs(r.previous[1]-l)<i0?l=r.previous[1]:r.next&&Math.abs(r.next[1]-l)<i0&&(l=r.next[1]),i=[e[0],l],o=[t[0],l]}if(mt.isVertical(e,t)){const s=mt.getOffsetX(n.startPoint,n.endPoint);let l=e[0]+s;r.previous&&Math.abs(r.previous[0]-l)<i0?l=r.previous[0]:r.next&&Math.abs(r.next[0]-l)<i0&&(l=r.next[0]),i=[l,e[1]],o=[l,t[1]]}return[i,o]}function OT(e,t,n,r,i){let o=null,s=null;const l=r[i],c=r[i+1];if(!l||!c)return{index:o,deleteCount:s};const h=n.slice(1,-1),d=h.findIndex(v=>mt.isEquals(v,l)),g=h.findIndex(v=>mt.isEquals(v,c));if(Math.max(d,g)>-1){if(d>-1&&g>-1)return{index:d,deleteCount:2};if(d>-1&&g===-1)return d<h.length-1&&mt.isAlign([h[d],h[d+1],l,c])?{index:d,deleteCount:2}:{index:d,deleteCount:1};if(d===-1&&g>-1)return g>0&&mt.isAlign([h[g],h[g-1],l,c])?{index:g-1,deleteCount:2}:{index:g,deleteCount:1}}else for(let v=0;v<h.length-1;v++){const y=h[v],x=h[v+1];if(mt.isAlign([y,x,l,c])){o=v,s=2;break}if(mt.isAlign([y,x,l])){o=Math.min(v+1,h.length-1),s=1;break}if(mt.isAlign([y,x,c])){o=Math.max(v-1,0),s=1;break}}if(o===null)if(s=0,h.length>0){const v=Np(e,t),y=Hp(e,t,v),x=E0(sT(y,e)),E=$l(x.slice(1,x.length-1)),T=[r[0],...h,r[r.length-1]],D=IT(e,T,E,y);for(let S=i-1;S>=0;S--){const R=D.slice(1,-1).findIndex(k=>mt.isEquals(k,r[S]));if(R>-1){o=R+1;break}}o===null&&(o=0,mt.isAlign(r)&&(s=h.length))}else o=0;return{index:o,deleteCount:s}}function IT(e,t,n,r){for(let i=1;i<t.length-2;i++)YW(e,i,t,n,r);return t}const YW=(e,t,n,r,i)=>{const o=n[t-1],s=n[t],l=n[t+1],c=n[t+2],h=[o,s],d=[l,c],g=mt.isAlign(h),v=mt.isAlign(d);let y=!1,x=!1;if(!g||!v){const E=Z6(r,h[0],h[1]),T=Z6(r,d[0],d[1]),D=E.length>0&&T.length>0;y=!g&&!D,x=!v&&!D}if(y||x){const E=[s,l],T=ZW(E,r),D=QW(e,E,T,i.sourceRectangle,i.targetRectangle);if(D.length===1){const S=D[0];y&&n.splice(t,1,S[0]),x&&n.splice(t+1,1,S[1])}else{const R=mt.isHorizontal(s,l)?0:1;if(y){const k=[s[0],s[1]];k[R]=o[R],n.splice(t,1,k)}if(x){const k=[l[0],l[1]];k[R]=c[R],n.splice(t+1,1,k)}}}};function qW(e,t,n,r,i){const{deleteCount:o}=OT(e,t,n,r,i);return o!==null&&o>1}function Z6(e,t,n){let r=[],i=-1,o=-1;for(let s=0;s<e.length;s++)if(mt.isAlign([e[s],t])&&(i=s),i>-1&&mt.isAlign([e[s],n])){o=s;break}return i>-1&&o>-1&&(r=e.slice(i,o+1)),r}function ZW(e,t){const n=mt.isHorizontal(e[0],e[1]),r=[];for(let i=0;i<t.length-1;i++){const o=t[i],s=t[i+1],l=mt.isHorizontal(o,s,.1);n&&l&&r.push([o,s]),!n&&!l&&r.push([o,s])}return r}function QW(e,t,n,r,i){Am.isDebug()&&Am.clear();const o=[];for(let s=0;s<n.length;s++){const l=n[s],c=[t[0][0],t[0][1]],h=[t[1][0],t[1][1]],g=mt.isHorizontal(c,h)?0:1;c[g]=l[0][g],h[g]=l[1][g];const v=b.getRectangleByPoints([c,h,...l]);!b.isHit(v,r)&&!b.isHit(v,i)&&(o.push([c,h]),Am.isDebug()&&Am.drawPolygon(e,b.getCornerPoints(v)))}return o}const FT=e=>e.length===1?!0:e.some((t,n)=>{const r=e[n-1],i=e[n+1],o=r&&[r,t],s=i&&[t,i],l=o&&mt.isAlign(o),c=s&&mt.isAlign(s);return n===0?!c:n===e.length-1?!l:!l&&!c}),YC=20,JW=(e,t,n)=>{const r=Lt();if(Jr.isSourceMark(e,Xr.none)&&Jr.isTargetMark(e,Xr.none))return null;const i=Vt(e),o=i*i/3;if(t.length===1&&(t=[t[0],[t[0][0]+.1,t[0][1]]]),!Jr.isSourceMark(e,Xr.none)){const s=op(t[0],t[1],YC+o),l=qC(e,{marker:e.source.marker,source:s,target:t[0],isSource:!0},n);l&&r.appendChild(l)}if(!Jr.isTargetMark(e,Xr.none)){const s=op(t[t.length-1],t[t.length-2],YC+o),l=qC(e,{marker:e.target.marker,source:s,target:t[t.length-1],isSource:!1},n);l&&r.appendChild(l)}return r},qC=(e,t,n)=>{const{marker:r,target:i,source:o,isSource:s}=t;let l;switch(r){case Xr.openTriangle:{l=rz(e,o,i,n);break}case Xr.solidTriangle:{l=nz(o,i,n);break}case Xr.arrow:{l=tz(e,o,i,n);break}case Xr.sharpArrow:{l=ez(o,i,n);break}case Xr.oneSideUp:{l=ZC(o,i,s?"down":"up",n);break}case Xr.oneSideDown:{l=ZC(o,i,s?"up":"down",n);break}case Xr.hollowTriangle:{l=oz(o,i,n);break}case Xr.singleSlash:{l=iz(o,i,s,n);break}}return l},ez=(e,t,n)=>{const r=t,{pointLeft:i,pointRight:o}=_0(e,t,20),s=Lt(),l=H4();let c=`M${o[0]},${o[1]}A25,25,20,0,1,${i[0]},${i[1]}L${r[0]},${r[1]}Z`;return l.setAttribute("d",c),l.setAttribute("stroke",`${n==null?void 0:n.stroke}`),l.setAttribute("stroke-width",`${n==null?void 0:n.strokeWidth}`),l.setAttribute("fill",`${n==null?void 0:n.stroke}`),s.appendChild(l),s},tz=(e,t,n,r)=>{const i=Yn(t,n),o=Vt(e),s=[n[0]+o*i[0]/2,n[1]+o*i[1]/2],l=Tt(...t,...s),c=[s[0]-(l*3/5+o)/2*i[0],s[1]-(l*3/5+o)/2*i[1]],{pointLeft:h,pointRight:d}=_0(t,s,30),g=bs([h,s,d,c],{...r,fill:r.stroke},!0);return g.querySelector("path").setAttribute("stroke-linejoin","round"),g},nz=(e,t,n)=>{const r=t,{pointLeft:i,pointRight:o}=_0(e,r,30);return bs([i,r,o],{...n,fill:n.stroke},!0)},rz=(e,t,n,r)=>{const i=Yn(t,n),o=Vt(e),s=[n[0]+o*i[0]/2,n[1]+o*i[1]/2],{pointLeft:l,pointRight:c}=_0(t,s,40);return bs([l,s,c],r)},ZC=(e,t,n,r)=>{const{pointLeft:i,pointRight:o}=_0(e,t,40);return bs([n==="up"?o:i,t],r)},iz=(e,t,n,r)=>{const i=Tt(...e,...t),o=op(t,e,i/2),s=n?120:60,l=w0(...e,...o,s*Math.PI/180),c=w0(...t,...o,s*Math.PI/180);return bs([l,c],r)},oz=(e,t,n)=>{const{pointLeft:r,pointRight:i}=_0(e,t,30);return bs([r,i,t],{...n,fill:"white"},!0)};class LT extends ts{canDraw(t){return!0}draw(t){let n;return n=az(this.board,t),n}}const sz=(e,t,n,r,i,o)=>({id:Sn(),type:"arrow-line",shape:e,source:n,texts:i||[],target:r,opacity:1,points:t,...o}),Vi=(e,t)=>{switch(t.shape){case Ln.elbow:return Ev(e,t);case Ln.curve:return _T(e,t);default:{const n=Jr.getPoints(e,t),r=Np(e,t);return n[0]=r.source.point,n[n.length-1]=r.target.point,n}}},_T=(e,t)=>{if(t.points.length===2){const n=Np(e,t),{source:r,target:i}=n,o=n.source.boundElement,s=n.target.boundElement;let l=[r.point];const h=12+Tt(...r.point,...i.point)/3;if(o&&l.push(r0(r.point,r.vector,h)),s&&l.push(r0(i.point,i.vector,h)),o&&!s||!o&&s){l.push(i.point);const g=fz(l);return To(g)}return!o&&!s&&(l.push(r0(r.point,r.vector,h)),l.push(r0(i.point,i.vector,h))),l.push(i.point),To(l)}else{let n=Jr.getPoints(e,t);n=E0(n);const r=Bp(n);return To(r)}},az=(e,t)=>{const n=Vt(t),r=U0(e,t),i=X0(e,t),o=Sc(i,n),s={stroke:r,strokeWidth:n,strokeLineDash:o},l=Lt();let c=Vi(e,t),h;t.shape===Ln.curve?h=F.getRoughSVG(e).curve(c,s):h=bs(c,s);const d=Sn();h.setAttribute("mask",`url(#${d})`),t.strokeStyle===Wi.dotted&&zt(h,"round"),l.appendChild(h);const{mask:g,maskTargetFillRect:v}=hz(e,t,d);l.appendChild(g),h.appendChild(v);const y=JW(t,c,{stroke:r,strokeWidth:n});return y&&l.appendChild(y),l},A0=(e,t,n)=>{const r=L8(e,n,t),i=r.connectorPoint||r.edgePoint;return lz(i,n)},lz=(e,t)=>{let n=b.getRectangleByPoints(t.points);return[(e[0]-n.x)/n.width,(e[1]-n.y)/n.height]},uz=(e,t)=>{const n=b.getRectangleByPoints(t.points),r=Ac(t);return vi(r).getConnectorPoints(n).find(o=>Tt(...o,...e)<=EW)},R8=(e,t,n)=>{const r=t.texts[n],i=Vi(e,t),o=YS(i,r.position);return{x:o[0]-r.width/2,y:o[1]-r.height/2,width:r.width,height:r.height}},cz=e=>H0(e,{match:t=>fe.isArrowLine(t),recursion:t=>fe.isDrawElement(t)}),fz=e=>{const t=[],n=e.length/3;for(let r=0;r<n;r++){const i=e[r],o=e[r+1],s=e[r+2],l=Tt(...i,...o),c=Tt(...s,...o),h=op(i,o,l*2/3),d=op(s,o,c*2/3);t.push(i,h,d,s)}return t},b8=(e,t,n,r,i,o,s)=>{const l=F8(e,r),c=l?A0(e,r,l):void 0,h=i?A0(e,n,i):void 0,d=l?l.id:void 0,g=new LT(e),v=kT();let y,x;y=v.source,x=v.target,y&&delete v.source,x&&delete v.target;const E=sz(t,[n,r],{marker:y||Xr.none,connection:h,boundId:i==null?void 0:i.id},{marker:x||Xr.arrow,connection:c,boundId:d},[],{strokeWidth:DT.strokeWidth,...v,...s}),D=Vi(e,E)[0];return E.points[1]=M8(D,r),g.processDrawing(E,o),F.getElementTopHost(e).append(o),E};function hz(e,t,n){const r=_O();r.setAttribute("id",n);const i=Vi(e,t);let o=b.getRectangleByPoints(i);o=b.getOutlineRectangle(o,-30);const s=Y7(o,{fill:"white"});r.appendChild(s),t.texts.forEach((h,d)=>{let g=R8(e,t,d);g=b.inflate(g,IW*2);const v=Y7(g,{fill:"black"});r.appendChild(v)});const c=Y7(o);return c.setAttribute("opacity","0"),c.setAttribute("fill","none"),{mask:r,maskTargetFillRect:c}}const k8=(e,t,n)=>{const r=t.texts;if(!r.length)return-1;const i=Vi(e,t);return r.findIndex(o=>{const s=YS(i,o.position),l={x:s[0]-o.width/2,y:s[1]-o.height/2,width:o.width,height:o.height};return b.isHit(l,b.getRectangleByPoints([n,n]))})},O8=e=>PW.includes(e),Ql=e=>fe.isGeometry(e)&&O8(e.shape),dz=e=>CW[e],gz=(e,t,n={})=>{const r=Sn(),i=pz(e);return{id:r,type:"geometry",shape:e,angle:0,opacity:1,texts:i,points:t,...n}},pz=e=>{var l;const n={...Dc(e).textProperties},r=n==null?void 0:n.align,i=(n==null?void 0:n.textHeight)||yv.height;n==null||delete n.align,n==null||delete n.textHeight;const o=((l=G8(e))==null?void 0:l.texts)||[];return(dz(e)||[]).map(c=>{const h=o==null?void 0:o.find(d=>(d==null?void 0:d.key)===c);return{id:c,text:sl((h==null?void 0:h.text)||"",r||(h==null?void 0:h.align)||gi.center,n),textHeight:i}})},mz=(e,t)=>{const n=vi(e.shape),r=b.getRectangleByPoints([t,t]);let i;return n.getTextRectangle&&(i=e.texts.find(o=>{const s=n.getTextRectangle(e,{id:o.id});return b.isHit(r,s)})),i};class NT extends ts{canDraw(t){return!0}draw(t){let n;return n=wz(this.board,t),n}}const lc=(e,t)=>{switch(t.shape){case hp.straight:return t.points;case hp.curve:{if(t.points.length===2)return To(t.points);{let n=t.points;const r=Bp(n);return To(r)}}default:return null}},vz=(e,t,n)=>({id:Sn(),type:"vector-line",shape:e,opacity:1,points:t,...n}),yz=(e,t,n,r,i)=>{const o=new NT(e),s=kT(),l=vz(t,[...n,r],{strokeWidth:DT.strokeWidth,...s}),c=n[n.length-1];return l.points[l.points.length-1]=M8(c,r),o.processDrawing(l,i),F.getElementTopHost(e).append(i),l},wz=(e,t)=>{const n=Vt(t),r=U0(e,t),i=X0(e,t),o=Sc(i,n),s=Cv(e,t),l={stroke:r,strokeWidth:n,strokeLineDash:o,fill:s},c=Lt();let h=lc(e,t);const d=bs(h,l),g=Sn();return d.setAttribute("mask",`url(#${g})`),t.strokeStyle===Wi.dotted&&zt(d,"round"),c.appendChild(d),c},V0=e=>{const t=[];for(let n=0;n<e.length;n++){let r=n==e.length-1?0:n+1;t.push([(e[n][0]+e[r][0])/2,(e[n][1]+e[r][1])/2])}return t},HT=(e,t)=>{const n=[];for(let r=1;r<=e.length;r++){let i=e[r-1],o=r===e.length?e[0]:e[r];const s=Vj(t,i,o);n.push(...s)}return n},ti=(e,t)=>{for(let n=1;n<=e.length;n++){let r=e[n-1],i=n===e.length?e[0]:e[n];if(KS(t,r,i))return[r,i]}return null};function Q6(e){const t=e.width/7,n=e.height/3.2,r=t/8.5,i=n/20,o=[e.x+t,e.y+n],s=[{rx:r,ry:i*1.2,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t*2,endY:e.y+n/2},{rx:r,ry:i,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t*4.2,endY:e.y+n/2.2},{rx:r,ry:i,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t*5.8,endY:e.y+n},{rx:r,ry:i*1.3,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t*6,endY:e.y+n*2.2},{rx:r,ry:i*1.2,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t*5,endY:e.y+n*2.8},{rx:r,ry:i/1.2,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t*2.8,endY:e.y+n*2.8},{rx:r,ry:i,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t,endY:e.y+n*2.2},{rx:r,ry:i*1.42,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+t,endY:e.y+n}];return{startPoint:o,arcCommands:s}}const GT={draw(e,t,n){const r=F.getRoughSVG(e),{startPoint:i,arcCommands:o}=Q6(t),s=`M ${i[0]} ${i[1]} `+o.map(c=>`A ${c.rx} ${c.ry} ${c.xAxisRotation} ${c.largeArcFlag} ${c.sweepFlag} ${c.endX} ${c.endY}`).join(`
`)+" Z",l=r.path(s,{...n,fillStyle:"solid"});return LO(l,"round"),l},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]);return b.isHit(e,n)},getCornerPoints(e){return b.getCornerPoints(e)},getNearestPoint(e,t){const{startPoint:n,arcCommands:r}=Q6(e);let i=1/0,o=t,s=n;for(const l of r){const c=ov(t,s,l),h=Tt(t[0],t[1],c[0],c[1]);h<i&&(i=h,o=c),s=[l.endX,l.endY]}return o},getEdgeByConnectionPoint(e,t){const n=GT.getCornerPoints(e),r=b.getConnectionPoint(e,t);return ti(n,r)},getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getTextRectangle(e){const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=t.width-ut.rectangleAndText*2-n*2,o=i/1.5;return{height:r,width:o>0?o:0,x:t.x+ut.rectangleAndText+n+i/6,y:t.y+t.height/6+(t.height*4/6-r)/2}}},jT=(e,t,n)=>k8(e,t,n)!==-1,up=(e,t)=>lP(t,e)<=b4,$T=(e,t,n)=>{const r=Vi(e,t);return jT(e,t,n)||up(r,n)},WT=(e,t,n)=>{const r=lc(e,t);return Lp(t.points)&&hc(n,r)||up(r,n)},Cz=(e,t)=>{const n=vi(e.shape);if(Ql(e))return e.texts.some(i=>{const o=n.getTextRectangle(e,{id:i.id});return b3(t,b.getCornerPoints(o),e.angle)});{const r=n.getTextRectangle?n.getTextRectangle(e):Ar(e);return b3(t,b.getCornerPoints(r),e.angle)}},zT=(e,t)=>{const n=vi(e.shape);if(Ql(e))return e.texts.some(i=>{const o=n.getTextRectangle(e,{id:i.id});return b.isPointInRectangle(o,t)});{const r=n.getTextRectangle?n.getTextRectangle(e):Ar(e);return b.isPointInRectangle(r,t)}},VT=e=>{if(!I8(e))return!0;const t=x8(e);return L.isEmpty(t,t.children[0])},xz=(e,t,n)=>{const r=b.getRectangleByPoints([n.anchor,n.focus]);if(fe.isGeometry(t)){const i=QC(e,r,t);return i||!VT(t)&&Cz(t,r)}if(fe.isImage(t))return QC(e,r,t);if(fe.isArrowLine(t)){const i=Vi(e,t);return h3(i,r)}if(fe.isVectorLine(t)){const i=lc(e,t);return h3(i,r)}return null},QC=(e,t,n)=>{const r=b.getRectangleByPoints(n.points);return b3(t,b.getCornerPoints(r),n.angle)},b3=(e,t,n)=>{let r=IF(t,n)||t;return h3(r,e)},UT=(e,t)=>{let n=XT(e,t),r=t.length;n&&(r=t.indexOf(n)+1);const i=t.slice(0,r),o=Pz(i);return o?o[0]:p$(e,i,"asc")[0]},XT=(e,t)=>{let n=null;for(let r=0;r<t.length;r++){const i=t[r];if(wv(e,i)||Fp(i)){const o=Cv(e,i);if(m$(o)){n=i;break}}}return n},Ez=(e,t)=>XT(e,[t])!==null,Pz=e=>{const t=e.filter(n=>fe.isText(n)||fe.isLine(n)||fe.isImage(n));return t.length?t:null},Sz="debug:plait:hit:shape:edge:sample-points",Kd=I0(Sz),Tz=[pt.cloud],Dz=(e,t,n,r=!0)=>{const i=e.getRectangle(t);if(n=pc(e,n,t)||n,fe.isGeometry(t)&&i){if(Kd.isDebug()&&Tz.includes(t.shape)){Kd.clear();const{startPoint:l,arcCommands:c}=Q6(i),h=[l,...c.map(y=>[y.endX,y.endY])];Kd.drawCircles(e,h,5,!1);let d=1/0,g=n,v=l;for(const y of c){const x=ov(n,v,y),E=Tt(n[0],n[1],x[0],x[1]),{center:T}=uP(v,y);Kd.drawCircles(e,[T],8,!1,{fill:"yellow"}),E<d&&(d=E,g=x),v=[y.endX,y.endY]}Kd.drawCircles(e,[n],12,!1,{fill:"black",stroke:"black"}),Kd.drawCircles(e,[g],12,!1,{fill:"green",stroke:"green"})}if(KT(e,t,n,b4))return!0;const o=vi(Ac(t));if(fe.isText(t)){const l=Ar(t);return b.isPointInRectangle(l,n)}return r&&VT(t)&&!Ez(e,t)?!1:zT(t,n)||o.isInsidePoint(i,n)}if(fe.isImage(t)){const o=b.getRectangleByPoints(t.points);return b.isPointInRectangle(o,n)}return fe.isArrowLine(t)?$T(e,t,n):fe.isVectorLine(t)?WT(e,t,n):null},KT=(e,t,n,r)=>{const i=tD(t,n);return Tt(i[0],i[1],n[0],n[1])<=r},Az=(e,t,n,r)=>{const i=b.inflate(b.getRectangleByPoints(t.points),r);return vi(Ac(t)).isInsidePoint(i,n)},Bz=(e,t,n)=>{const r=e.getRectangle(t);if(n=pc(e,n,t)||n,fe.isGeometry(t)&&!fe.isGeometryByTable(t)){const i=vi(Ac(t)),o=i.isInsidePoint(r,n);if(o)return o;if(i.getTextRectangle){const s=zT(t,n);if(s)return s}}if(fe.isImage(t)){const i=b.getRectangleByPoints(t.points);return b.isPointInRectangle(i,n)}return fe.isArrowLine(t)?$T(e,t,n):fe.isVectorLine(t)?WT(e,t,n):null},Ar=e=>{const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=t.width-ut.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+ut.rectangleAndText+n,y:t.y+(t.height-r)/2}},Vt=e=>fe.isText(e)?0:e.strokeWidth||vv.strokeWidth,iu=(e,t)=>{VW(e,t.shape),Xe.insertNode(e,t,[e.children.length]),F0(e),sh(e,t),fn.updatePointerType(e,Zt.selection)},I8=e=>fe.isText(e)?!0:fe.isImage(e)?!1:fe.isGeometry(e)?$8(e):fe.isArrowLine(e)?ch(e).length>0:fe.isElementByTable(e)?e.cells.some(t=>bT(t)):!0,Mz=e=>e.some(t=>I8(t)),Fp=e=>fe.isDrawElement(e)?fe.isText(e)||fe.isArrowLine(e)||fe.isImage(e)?!1:fe.isVectorLine(e)?Lp(e.points):fe.isGeometry(e)?Vz(e):!0:!1,wv=(e,t)=>fe.isCustomGeometryElement(e,t)&&Lp(t.points),F8=(e,t)=>{let n=YT(e,t);if(n){const r=L8(e,n,t);if(r.isHitConnector||r.isHitEdge)return n}return null},L8=(e,t,n)=>{const r=pc(e,n,t)||n,i=uz(r,t),o=tD(t,r);return{isHitEdge:KT(e,t,r,xW),isHitConnector:!!i,connectorPoint:i,edgePoint:o}},YT=(e,t,n=M3)=>{let r=null;return Rz(e,i=>{r===null&&Az(e,i,pc(e,t,i)||t,n*2)&&(r=i)}),r},Rz=(e,t)=>{pi(e,n=>{!F.isBoard(n)&&fe.isShapeElement(n)&&t(n)},oh(e),!0)},JC=(e,t,n,r,i)=>vi(n).draw(e,t,r,i),bz=(e,t,n={hasMask:!0,hasConnector:!0})=>{const r=Lt(),i=b.getRectangleByPoints(t.points),o=b.inflate(i,g6),s=Ac(t);let l;fe.isElementByTable(t)&&(l={element:t});const c=JC(e,o,s,{stroke:Po,strokeWidth:g6},l);if(r.appendChild(c),n.hasMask){const h=JC(e,o,s,{stroke:Po,strokeWidth:0,fill:Fp(t)?j4:vv.fill,fillStyle:"solid"},l);r.appendChild(h)}return n.hasConnector&&vi(s).getConnectorPoints(i).forEach(d=>{const g=ah(F.getRoughSVG(e),d,8,{stroke:Po,strokeWidth:gr,fill:"#FFF",fillStyle:"solid"});r.appendChild(g)}),r},qT=(e,t)=>e&&Ql(e)?`${e.id}-${t.id}`:t.id,Lp=e=>{const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]},cp=e=>fv(e,D0.geometryText,yv.text),U0=(e,t)=>{const n=jz(e.theme.themeColorMode);return t.strokeColor||n},Cv=(e,t)=>{const n=fe.isFlowchart(t)&&Fp(t)?$z(e.theme.themeColorMode):vv.fill;return t.fill||n},X0=(e,t)=>t.strokeStyle||Wi.solid;class ZT extends ts{canDraw(t,n){return!0}draw(t,n){const r=b.getRectangleByPoints(t.points),i=t.shape;if(i===pt.text)return;const o=Cv(this.board,t),s=Vt(t),l=U0(this.board,t),c=X0(this.board,t),h=Sc(c,s);return _z(this.board,b.inflate(r,-s),i,{stroke:l,strokeWidth:s,fill:o,strokeLineDash:h})}}function QT(e,t){const n=[],r=t.shape,i=10;if(r===Ln.straight){const o=fe.isArrowLine(t)?Jr.getPoints(e,t):t.points;for(let s=0;s<o.length-1;s++)Tt(...o[s],...o[s+1])<i||n.push([(o[s][0]+o[s+1][0])/2,(o[s][1]+o[s+1][1])/2])}if(r===Ln.curve){const o=fe.isArrowLine(t)?Jr.getPoints(e,t):t.points,s=fe.isArrowLine(t)?_T(e,t):lc(e,t);if(o.length===2){const c=s.length-1,h=Math.round((0+c)/2);n.push(s[h])}else for(let l=0;l<o.length-1;l++){const c=s.findIndex(v=>v[0]===o[l][0]&&v[1]===o[l][1]),h=s.findIndex(v=>v[0]===o[l+1][0]&&v[1]===o[l+1][1]),d=Math.round((c+h)/2);Tt(...o[l],...o[l+1])<i||n.push(s[d])}}if(r===Ln.elbow){const o=Ev(e,t),s=Hp(e,t);if(!W8(t,s)){const[l,c]=iD(e,t);for(let h=0;h<o.length-1;h++){if(h==0&&mt.isEquals(o[h+1],l)||h===o.length-2&&mt.isEquals(o[o.length-2],c))continue;const[d,g]=o[h],[v,y]=o[h+1],x=[(d+v)/2,(g+y)/2];n.push(x)}}}return n}var Yr;(function(e){e.source="source",e.target="target",e.addHandle="addHandle"})(Yr||(Yr={}));const JT=(e,t,n)=>{let r=fe.isArrowLine(t)?Jr.getPoints(e,t):t.points;const i=J6(r,n);if(i!==-1){const l=i;if(i===0)return{handle:Yr.source,handleIndex:l};if(i===r.length-1)return{handle:Yr.target,handleIndex:l};if(t.shape!==Ln.elbow)return{handleIndex:l}}const o=QT(e,t),s=J6(o,n);if(s!==-1)return{handle:Yr.addHandle,handleIndex:s}};function J6(e,t){const n=e.map(i=>({x:i[0]-aa/2,y:i[1]-aa/2,width:aa,height:aa})),r=n.find(i=>b.isHit(b.getRectangleByPoints([t,t]),i));return r?n.indexOf(r):-1}class eD extends ts{constructor(t,n={active:!0}){super(t,n),this.board=t,this.onlySelectedCurrentLine=!1}canDraw(t,n){return!!n.selected}draw(t,n){const r=Lt(),i=Qe(this.board);if(this.onlySelectedCurrentLine=i.length===1,this.onlySelectedCurrentLine){r.classList.add(Dp);const o=fe.isArrowLine(t)?Jr.getPoints(this.board,t):t.points;let s=[...o],l=[];t.shape===Ln.elbow&&(s=o.slice(0,1).concat(o.slice(-1)),l=oD(this.board,t,n.linePoints)),s.map(g=>qg(this.board,g)).forEach(g=>{const v=xC(this.board,g);r.appendChild(v)});const d=QT(this.board,t).map(g=>qg(this.board,g));if(!F.hasBeenTextEditing(this.board))for(let g=0;g<d.length;g++){const v=d[g];if(t.shape===Ln.elbow&&l.length){const x=J6(d,v);if(qW(this.board,t,[...o],l,x)){const T=xC(this.board,v);r.appendChild(T);continue}}const y=_j(this.board,v);r.appendChild(y)}}else{const o=this.board.getRectangle(t);if(o){const s=Bi(this.board,o);let l="0.5";(s.height===0||s.width===0)&&(l="0.8");const c=ga(this.board,s,{stroke:j0,strokeWidth:J$.selectionStrokeWidth});c.style.opacity=l,r.appendChild(c)}}return r}needUpdate(){return Qe(this.board).length===1!==this.onlySelectedCurrentLine}}const Sy=class Sy extends ts{constructor(t){super(t,{active:!0}),this.board=t,this.hoverElement=null}canDraw(t,n){const r=Qe(this.board);return!!(n.selected&&r.length===1&&!mi(this.board))}draw(t,n){return this.autoCompleteG=Lt(),H8(this.board,t,!0).forEach((i,o)=>{const s=ah(F.getRoughSVG(this.board),i,FW,{stroke:"none",fill:Yg(j0,LW),fillStyle:"solid"});s.classList.add(`line-auto-complete-${o}`),this.autoCompleteG.appendChild(s)}),this.autoCompleteG}removeAutoCompleteG(t){this.hoverElement=this.autoCompleteG.querySelector(`.line-auto-complete-${t}`),this.hoverElement.style.visibility="hidden"}recoverAutoCompleteG(){this.hoverElement&&(this.hoverElement.style.visibility="visible",this.hoverElement=null)}};Sy.key="line-auto-complete-generator";let ou=Sy;class kz extends D8{get textManage(){return this.textManages[0]}constructor(t,n,r,i){super(t,n,[{id:n.id,text:r,textHeight:n.textHeight}],i)}update(t,n,r,i){Ql(t)||super.update(t,[{text:n,id:t.id,textHeight:t.textHeight}],[{text:r,id:t.id,textHeight:t.textHeight}],i)}}class xv extends ts{canDraw(t,n){return!0}draw(t,n){const r=b.getRectangleByPoints(t.points),i=Vt(t),o=U0(this.board,t),s=X0(this.board,t),l=Sc(s,i);return vi(T0.table).draw(this.board,r,{strokeWidth:i,stroke:o,strokeLineDash:l},{element:t})}}const Ac=e=>fe.isImage(e)?pt.rectangle:fe.isTable(e)?T0.table:e.shape,_8=(e,t)=>fe.isUMLClassOrInterface({shape:t})?new xv(e):new ZT(e),Oz=(e,t,n)=>{const r=Dc(t),i={id:Sn(),type:"geometry",angle:0,opacity:1,points:n,strokeWidth:ap.strokeWidth,...r.geometryProperties};let o,s;return t===ft.class?(o=[{id:Sn(),height:30},{id:Sn()},{id:Sn()}],s=[{id:Sn()}]):(o=[{id:Sn(),height:50},{id:Sn()}],s=[{id:Sn()}]),{...i,shape:t,rows:o,columns:s,cells:Iz(e,o,s,t)}},Iz=(e,t,n,r)=>{var c;const i=Dc(r),o=t.length*n.length,s=((c=G8(r))==null?void 0:c.texts)||[],l=s.map(h=>_p(e,h.text||cp(e),i.textProperties["font-size"]).height);return new Array(o).fill("").map((h,d)=>{const g=Math.floor(d/n.length),v=d%n.length;return{id:Sn(),rowId:t[g].id,columnId:n[v].id,textHeight:l[d],text:{children:[{text:s[d].text}],align:s[d].align}}})},N8=(e,t,n,r={},i={})=>ET.includes(e)?Lz(e,t,r):Fz(e,t,n,r,i),Fz=(e,t,n,r={},i={})=>{let o={},s=gi.center,l=yv.height;return e===pt.text&&(o={autoSize:!0},s=void 0),i={...i},i!=null&&i.align&&(s=i==null?void 0:i.align),i!=null&&i.textHeight&&(l=i==null?void 0:i.textHeight),i==null||delete i.align,i==null||delete i.textHeight,{id:Sn(),type:"geometry",shape:e,angle:0,opacity:1,textHeight:l,text:sl(n,s,i),points:t,...o,...r}},Lz=(e,t,n={})=>({id:Sn(),type:"geometry",shape:e,angle:0,opacity:1,points:t,...n}),_z=(e,t,n,r)=>vi(n).draw(e,t,r),tD=(e,t)=>{const n=b.getRectangleByPoints(e.points),r=Ac(e);return vi(r).getNearestPoint(n,t)},Nz=e=>CT[e],Hz=e=>wT[e]||ap,Gz=e=>xT[e],H8=(e,t,n=!1)=>{const r=(12+aa/2)*2,i=b.getRectangleByPoints(t.points),o=Bi(e,i),s=n?o:i;return b.getEdgeCenterPoints(b.inflate(s,r))},nD=(e,t)=>t.findIndex(n=>{const r=b.getRectangleByPoints([e]);let i=b.getRectangleByPoints([n]);return i=b.inflate(i,aa),b.isHit(r,i)}),jz=e=>ST[e].strokeColor,$z=e=>ST[e].fill,_p=(e,t,n)=>{n=n?Number(n):S0;const r=W0(e,sl(t),{fontSize:n,fontFamily:ql});return{width:r.width+ut.rectangleAndText*2,height:r.height}},rD=(e,t)=>{const n=G8(e);return b.getPoints(b.getRectangleByCenterPoint(t,n.width,n.height))},G8=e=>{const t=TW().includes(e),n=DW().includes(e);return t?Nz(e):n?Gz(e):Hz(e)},j8=(e,t,n,r)=>{const i=Dc(pt.text);return r=r||b.getRectangleByPoints(t).height,N8(pt.text,t,n,i.geometryProperties,{...i.textProperties,textHeight:r})},fp=(e,t,n)=>{const r=Dc(n),i=_p(e,yv.text,r.textProperties["font-size"]).height;return fe.isUMLClassOrInterface({shape:n})?Oz(e,n,t):O8(n)?gz(n,t,{strokeWidth:ap.strokeWidth,...r.geometryProperties}):N8(n,t,"",{strokeWidth:ap.strokeWidth,...r.geometryProperties},{...r.textProperties,textHeight:i})},B5=(e,t,n)=>{const r=n?Gg(e,t,n):uh(t);r&&r.edit(()=>{})},$8=e=>zz(e)||Ql(e),Wz=e=>!ET.includes(e)&&!O8(e),zz=e=>fe.isGeometry(e)&&Wz(e.shape),Vz=e=>!SW.includes(e.shape),Uz=e=>e.source.boundId&&e.source.boundId===e.target.boundId,W8=(e,t)=>h$(t)&&!Uz(e),Ev=(e,t)=>{const n=Np(e,t),r=Hp(e,t,n);if(W8(t,r))return $l(Kj(n.source.point,n.source.direction,n.target.point,n.target.direction,WS));const i=E0(sT(r,e)),o=i.slice(1,i.length-1);if(t.points.length===2)return $l(i);{const s=$l(o),c=E0(Jr.getPoints(e,t)).slice(1,-1);if(FT(c))return $l(i);const h=[s[0],...c,s[s.length-1]],d=IT(e,h,s,r),g=[i[0]];for(let y=0;y<d.length-1;y++){let x=d[y],E=d[y+1];if(mt.isAlign([x,E]))g.push(x);else{const D=Z6(s,x,E);D.length?(g.push(x),g.push(...D)):(g.push(x),console.log("unknown data points"))}}return g.push(i[i.length-2],i[i.length-1]),$l(g)}},iD=(e,t)=>{const n=Hp(e,t);return[n.nextSourcePoint,n.nextTargetPoint]},Xz=(e,t,n)=>{let r=t.source.boundId?Bs(e,t.source.boundId):void 0,i=t.target.boundId?Bs(e,t.target.boundId):void 0;if(!r){const h=n.source;r=ex(h.point,h.vector)}if(!i){const h=n.target;i=ex(h.point,h.vector)}let o=b.getRectangleByPoints(r.points);const s=Ja(b.getCornerPoints(o),r)||b.getCornerPoints(o);o=b.getRectangleByPoints(s),o=b.inflate(o,Vt(r)*2);let l=b.getRectangleByPoints(i.points);const c=Ja(b.getCornerPoints(l),i)||b.getCornerPoints(l);return l=b.getRectangleByPoints(c),l=b.inflate(l,Vt(i)*2),{sourceRectangle:o,targetRectangle:l}},ex=(e,t)=>{const n=r0(e,t,-25),r=b.getPoints(b.getRectangleByCenterPoint(n,50,50));return N8(pt.rectangle,r,"")};function oD(e,t,n){let r=n??Ev(e,t);const[i,o]=iD(e,t);return r.splice(0,1,i),r.splice(-1,1,o),E0(r)}const k3=(e,t)=>(t!=null&&t.length?t:Qe(e)).filter(r=>fe.isDrawElement(r)),z8=e=>Qe(e).filter(n=>fe.isArrowLine(n)),sD=e=>Qe(e).filter(n=>fe.isVectorLine(n)),Kz=e=>{const t=Qe(e);return t&&t.length===1&&fe.isSwimlane(t[0])},Yz=e=>{const t=Qe(e);return t&&t.length===1&&fe.isLine(t[0])},aD=(e,t,n)=>{const r=fp(e,t,n);return iu(e,r),r},qz=(e,t,n)=>{const r=Dc(pt.text),i=_p(e,n,r.textProperties["font-size"]),o=[t,[t[0]+i.width,t[1]+i.height]],s=j8(e,o,n);iu(e,s)},Zz=(e,t,n,r)=>{const i=Jf(t),o=Kt.get(e,r),s={points:i,textHeight:n};fe.isText(o)&&o.autoSize&&(s.autoSize=!1),Xe.setNode(e,s,r)},Qz=(e,t)=>{const n=Qe(e),r=[];n.forEach(i=>{if(fe.isGeometry(i)&&!fe.isText(i)){const o=F.findPath(e,i);Xe.setNode(e,{shape:t},o),HU(e,{...i,shape:t},r)}}),r.length&&r.forEach(i=>{Ui.resizeArrowLine(e,i.property,i.path)})},lD=(e,t,n,r)=>{let i=t.points,o=t.autoSize;const s=ut.rectangleAndText;if(o){const l=n<R3?R3:n,c=x8(t);if(U6.isActive(c,gi.right))i=[[i[1][0]-(l+s*2),i[0][1]],[i[1][0],i[0][1]+r]];else if(U6.isActive(c,gi.center)){const h=Math.abs(i[0][0]-i[1][0]),d=(l-h)/2;i=[[i[0][0]-d-s,i[0][1]],[i[1][0]+d+s,i[0][1]+r]]}else i=[i[0],[i[0][0]+l+s*2,i[0][1]+r]];Qa(t)&&(i=v8(b.getRectangleByPoints(t.points),b.getRectangleByPoints(i),b.getCenterPoint(b.getRectangleByPoints(t.points)),b.getCenterPoint(b.getRectangleByPoints(i)),t.angle))}return{points:i}},Jz=(e,t,n,r,i)=>{const o={text:n,textHeight:i,...lD(e,t,r,i)},s=e.children.findIndex(l=>l===t);Xe.setNode(e,o,[s])},eV=(e,t,n,r)=>{if(t.autoSize){const i={textHeight:r,...lD(e,t,n,r)},o=mt.isEquals(t.points[0],i.points[0])&&mt.isEquals(t.points[1],i.points[1]),s=Math.round(r)===Math.round(t.textHeight);if(!o||!s){const l=e.children.findIndex(c=>c===t);Xe.setNode(e,i,[l])}}},tV=(e,t,n)=>{const{width:r,height:i,url:o}=t,s=F.getBoardContainer(e).clientWidth,l=F.getBoardContainer(e).clientHeight,c=Dt(e,Bt(e,s/2,l/2)),h=n?[n,[n[0]+r,n[1]+i]]:[[c[0]-r/2,c[1]-i/2],[c[0]+r/2,c[1]+i/2]],d={id:Sn(),type:"image",points:h,url:o};Xe.insertNode(e,d,[e.children.length]),Xe.addSelectionWithTemporaryElements(e,[d])},uD=(e,t,n)=>{Xe.setNode(e,t,n)},nV=(e,t,n)=>{const r=F.findPath(e,t);Xe.setNode(e,{texts:n},r)},rV=(e,t,n)=>{var s;const r=F.findPath(e,t),o=[...(s=t.texts)!=null&&s.length?[...t.texts]:[]];o.splice(n,1),Xe.setNode(e,{texts:o},r)},iV=(e,t,n)=>{P8(Uo.arrowLine,t,n),z8(e).forEach(i=>{const o=F.findPath(e,i);let s=t===Ms.source?i.source:i.target;s={...s,marker:n},Xe.setNode(e,{[t]:s},o)})},oV=(e,t)=>{z8(e).map(r=>{const i={...t};if(r.shape===t.shape)return;const o=F.findPath(e,r);Xe.setNode(e,i,o)})},sV=(e,t,n,r)=>{const i=Jr.getPoints(e,t),o=n===Ms.source?i[0]:i[i.length-1],s=A0(e,o,r);if(s){let l=t.source,c=t.target;n===Ms.source?l={...l,boundId:r.id,connection:s}:c={...c,boundId:r.id,connection:s};const h=F.findPath(e,t);uD(e,{source:l,target:c},h)}};function aV(e){const t={...e};return fe.isHorizontalSwimlane(e)?(t.cells=e.cells.map((n,r)=>(r===0&&e.header&&(n={...e.cells[0],rowspan:e.rows.length}),n.text&&n.textHeight&&!n.text.direction&&(n={...n,text:{...n.text,direction:"vertical"}}),n)),t):(e.header&&(t.cells=[{...e.cells[0],colspan:e.columns.length},...e.cells.slice(1,e.cells.length)]),t)}const cD=(e,t)=>{const n=TT[e];return b.getPoints(b.getRectangleByCenterPoint(t,n.width,n.height))},O3=(e,t)=>{const n=cV(e),r=fV(e),i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=tx(r,"row",n,o),l=tx(r,"column",n,i);return{id:Sn(),type:"swimlane",shape:r,points:t,rows:s,columns:l,header:n,cells:lV(r,s,l,n)}},tx=(e,t,n,r)=>{const i=s=>new Array(s).fill("").map(()=>({id:Sn()}));let o=i(3);if(t==="row"&&e===xo.swimlaneVertical||t==="column"&&e===xo.swimlaneHorizontal){o=n?o:i(2);const s=t==="row"?"height":"width";let l=xg;r<xg*o.length&&(l=Math.min(r/o.length/xg*xg,xg)),o=o.map((c,h)=>h===0||h===1&&n?{...c,[s]:l}:c)}return o},lV=(e,t,n,r)=>{let i=[],o=0;r&&(i=[D5(t[0].id,n[0].id,"New Swimlane")],o=1);const s=new Array(6).fill("").map((l,c)=>{if(c<3){const g=e===xo.swimlaneVertical?t[o].id:t[c].id,v=e===xo.swimlaneVertical?n[c].id:n[o].id;return D5(g,v,r?"Lane":"New Swimlane")}const h=e===xo.swimlaneVertical?t[o+1].id:t[c-3].id,d=e===xo.swimlaneVertical?n[c-3].id:n[o+1].id;return D5(h,d)});return[...i,...s]},uV=e=>fe.isHorizontalSwimlane(e)?e.rows.length:fe.isVerticalSwimlane(e)?e.columns.length:0,cV=e=>[la.swimlaneHorizontalWithHeader,la.swimlaneVerticalWithHeader].includes(e),fV=e=>[la.swimlaneHorizontalWithHeader,la.swimlaneHorizontal].includes(e)?xo.swimlaneHorizontal:xo.swimlaneVertical,fD=(e,t=e.pointer)=>PT().includes(t),hV=(e,t,n)=>{if(n>0&&fe.isSwimlane(t)){const r=uV(t);if(fe.isHorizontalSwimlane(t))if(n>r)hD(e,t,t.rows.length,n-r);else{const i=t.rows.length-(r-n);gD(e,t,i,r-n)}if(fe.isVerticalSwimlane(t))if(n>r)dD(e,t,t.columns.length,n-r);else{const i=t.columns.length-(r-n);pD(e,t,i,r-n)}}},hD=(e,t,n,r=1)=>{if(fe.isHorizontalSwimlane(t)){const i=[...t.rows],o=[];for(let d=0;d<r;d++)o.push({id:Sn()});i.splice(n,0,...o);const s=[...t.cells];o.forEach(d=>{s.push(...mD(t,d.id,"column"))});const l=hh(e,t,t.cells[t.cells.length-1].id).points,c=b.getRectangleByPoints(l).height,h=[t.points[0],[t.points[1][0],t.points[1][1]+c*r]];Pv(e,t,t.columns,i,s,h)}},dD=(e,t,n,r=1)=>{if(fe.isVerticalSwimlane(t)){const i=[...t.columns],o=[];for(let d=0;d<r;d++)o.push({id:Sn()});i.splice(n,0,...o);const s=[...t.cells];o.forEach(d=>{s.push(...mD(t,d.id,"row"))});const l=hh(e,t,t.cells[t.cells.length-1].id).points,c=b.getRectangleByPoints(l).width,h=[t.points[0],[t.points[1][0]+c*r,t.points[1][1]]];Pv(e,t,i,t.rows,s,h)}},gD=(e,t,n,r=1)=>{if(fe.isHorizontalSwimlane(t)){if(r>t.rows.length)return;const i=[...t.rows];if(i.splice(n,r),i.length===0){const o=F.findPath(e,t);Xe.removeNode(e,o)}else{let o=[...t.cells];const s=[];for(let h=n;h<r+n;h++){const d=t.rows[h];s.push(d),o=o.filter(g=>g.rowId!==d.id)}let l=0;s.forEach(h=>{if(h.height)l+=h.height;else{const d=t.cells.find(v=>v.rowId===h.id),g=hh(e,t,d.id).points;l+=b.getRectangleByPoints(g).height}});const c=[t.points[0],[t.points[1][0],t.points[1][1]-l]];Pv(e,t,t.columns,i,o,c)}}},pD=(e,t,n,r=1)=>{if(fe.isVerticalSwimlane(t)){if(r>t.columns.length)return;const i=[...t.columns];if(i.splice(n,r),i.length===0){const o=F.findPath(e,t);Xe.removeNode(e,o)}else{let o=[...t.cells];const s=[];for(let h=n;h<r+n;h++){const d=t.columns[h];s.push(d),o=o.filter(g=>g.columnId!==d.id)}let l=0;s.forEach(h=>{if(h.width)l+=h.width;else{const d=t.cells.find(v=>v.columnId===h.id),g=hh(e,t,d.id).points;l+=b.getRectangleByPoints(g).width}});const c=[t.points[0],[t.points[1][0]-l,t.points[1][1]]];Pv(e,t,i,t.rows,o,c)}}},mD=(e,t,n)=>{const r=e[`${n}s`].map(i=>({id:Sn(),rowId:n==="row"?i.id:t,columnId:n==="row"?t:i.id}));return e.header&&r.shift(),r[0]={...r[0],text:{children:[{text:e.header?"Lane":"New Swimlane"}],align:gi.center,direction:n==="row"?void 0:"vertical"},textHeight:20},r},Pv=(e,t,n,r,i,o)=>{const s=F.findPath(e,t);Xe.setNode(e,{columns:n,rows:r,cells:i,points:o},s)},dV=(e,t,n)=>{var s;const i={texts:(s=t.texts)==null?void 0:s.map(l=>l.id===n.id?{...l,...n}:l)},o=e.children.findIndex(l=>l===t);Xe.setNode(e,i,[o])},gV=(e,t,n,r,i)=>{const o=Kt.get(e,t),s=hh(e,o,n),l=o.cells.findIndex(E=>E.id===s.id);let c=[...o.rows],h=[...o.columns],d=[...o.cells],g=[...o.points];const{width:v,height:y}=b.getRectangleByPoints(s.points),x=ut.rectangleAndText;if(sp.isVerticalText(s)){const E=o.columns.findIndex(T=>T.id===s.columnId);if(i>v){const T=i+x*2,D=T-v,S=MT(o,o.columns[E].id,T,D);g=S.points,h=S.columns}}else{const E=o.rows.findIndex(S=>S.id===s.rowId),D=o.rows[E].height??Math.max(y,s.textHeight||0);if(i>D){const S=i+x*2,R=S-D,k=RT(o,o.rows[E].id,S,R);g=k.points,c=k.rows}}d[l]={...d[l],textHeight:i,text:r},Xe.setNode(e,{rows:c,columns:h,cells:d,points:g},t)},pV=(e,t,n,r)=>{const i=o0(t);let o=t.cells;i!=null&&i.length?o=t.cells.map(s=>i.map(l=>l.id).includes(s.id)?nx(s,n):s):o=t.cells.map(s=>s.text&&s.textHeight?nx(s,n):s),Xe.setNode(e,{cells:o},r)},nx=(e,t)=>{const n={...e};return t?n.fill=t:delete n.fill,n},mV=(e,t)=>{sD(e).map(r=>{if(r.shape===t.shape)return;const i=F.findPath(e,r);Xe.setNode(e,{...t},i)})},vV=(e,t,n,r)=>{const o=PT().includes(n);let s=CT[n]||wT[n]||xT[n]||ap;o&&(s=TT[n]);const l=Qd(r);if(l){let c=0;[Ot.left,Ot.right].includes(l)?c=-s.width/2:c=-s.height/2;const h=r0(t,r,c),d=b.getPoints(b.getRectangleByCenterPoint(h,s.width,s.height));if(o){const g=O3(n,d);return iu(e,g),g}return aD(e,d,n)}return null},Ui={setText:Jz,setDrawTexts:dV,insertGeometry:aD,resizeGeometry:Zz,insertText:qz,setTextSize:eV,resizeArrowLine:uD,setArrowLineTexts:nV,removeArrowLineText:rV,setArrowLineMark:iV,setArrowLineShape:oV,setVectorLineShape:mV,insertImage:tV,connectArrowLineToDraw:sV,switchGeometryShape:Qz,setTableText:gV,addSwimlaneRow:hD,addSwimlaneColumn:dD,removeSwimlaneRow:gD,removeSwimlaneColumn:pD,updateSwimlaneCount:hV,setTableFill:pV,insertDrawByVector:vV},e4=(e,t,n,r=0)=>{const i=b.getCenterPoint(t),o=XS(t,aa);if(r){const s=Ir([n],i,-r)[0];let l=o.find(c=>b.isHit(b.getRectangleByPoints([s,s]),c.rectangle));return l&&(l.cursorClass=Hj(l.cursorClass,r)),l}else return o.find(s=>b.isHit(b.getRectangleByPoints([n,n]),s.rectangle))},yV=e=>({x:e.x-E3-Hg,y:e.y+e.height+E3,width:Hg,height:Hg}),wV="debug:plait:resize-for-rotation",Ts=I0(wV);function CV(e){const{afterChange:t,drawSelectionRectangle:n}=e;let r,i,o=!1,s=null;const l=()=>{const h=Qe(e);return h.length>=1&&h.every(d=>(fe.isDrawElement(d)||fe.isCustomGeometryElement(e,d)&&d.points.length>1)&&!Yz(e)&&!Kz(e))};return fh(e,{key:"draw-elements",canResize:l,hitTest:h=>{const d=Qe(e),g=on(e,d,!1),v=Co(d),y=e4(e,g,h,v);return y?{element:[...d],rectangle:g,handle:y.handle,cursorClass:y.cursorClass}:null},onResize:(h,d)=>{r==null||r.remove(),Ts.isDebug()&&Ts.clear();const g=qm(e,h.handle),v=d.isShift||h.element.length===1&&fe.isImage(h.element[0]),y=b.getCenterPoint(h.rectangle),x=T3(h.handle),{originPoint:E,handlePoint:T}=t4(e,x,h.rectangle),D=Co(h.element);let S;if(D){S={angle:D,offsetX:0,offsetY:0,newCenterPoint:[0,0]};const[O,$]=Ir([d.startPoint,d.endPoint],y,-S.angle);d.startPoint=O,d.endPoint=$}const R=vD(e,h,d,{originPoint:E,handlePoint:T},v,g),k=Sv(e,h.element,R);if(s=k.activePoints,r=k.snapG,F.getElementTopHost(e).append(r),S){const O=b.getPoints(h.rectangle),$=O.map(me=>Ul(me,E,k.xZoom,k.yZoom)),z=b.getRectangleByPoints($);Ts.isDebug()&&Ts.drawRectangle(e,z,{stroke:"blue"});const K=b.getCenterPoint(z),te=v8(b.getRectangleByPoints(O),b.getRectangleByPoints($),y,K,S.angle),se=b.getCenterPoint(b.getRectangleByPoints(te));S=Object.assign(S,{offsetX:se[0]-K[0],offsetY:se[1]-K[1],newCenterPoint:se}),Ts.isDebug()&&Ts.drawRectangle(e,te)}h.element.forEach(O=>{const $=F.findPath(e,O);let z;if(S){z=b6(O.points,y,-S.angle).map(se=>Ul(se,E,k.xZoom,k.yZoom));const te=z.map(se=>[se[0]+S.offsetX,se[1]+S.offsetY]);z=b6(te,S.newCenterPoint,S.angle)}else Qa(O)&&(o=!0),Qa(O)&&FF(O.angle)?z=xV(e,O.points,E,k.xZoom,k.yZoom):z=O.points.map(K=>Ul(K,E,k.xZoom,k.yZoom));if(fe.isGeometry(O))if(fe.isGeometry(O)&&$8(O)){const{height:K}=uh(O).getSize();Ui.resizeGeometry(e,z,K,$)}else z=Jf(z),Xe.setNode(e,{points:z},$);else if(fe.isLine(O)||fe.isCustomGeometryElement(e,O)||fe.isVectorLine(O))Xe.setNode(e,{points:z},$);else if(fe.isImage(O))if(v)Xe.setNode(e,{points:z},$);else{const K=b.getRectangleByPoints(O.points),te=b.getCenterPoint(K),se=Ul(te,E,k.xZoom,k.yZoom),me=b.getRectangleByCenterPoint(se,K.width,K.height);Xe.setNode(e,{points:b.getPoints(me)},$)}})},afterResize:h=>{if(r==null||r.remove(),r=null,o){o=!1,s=null;const d=Qe(e);Xe.addSelectionWithTemporaryElements(e,d)}}}),e.afterChange=()=>{t(),i&&(i.remove(),i=null);const h=Qe(e);l()&&!mi(e)&&h.length>1&&(i=EV(e,s,o),F.getActiveHost(e).append(i))},e.drawSelectionRectangle=()=>{if(o){const h=b.getRectangleByPoints(s),d=Bi(e,h);return ga(e,b.inflate(d,gr),{stroke:Po,strokeWidth:gr})}return n()},e}const t4=(e,t,n)=>{const r=Nj(e,t),i=SC(n,r),o=SC(n,t);return{originPoint:i,handlePoint:o}},V8=(e,t,n,r,i)=>{const[o,s]=e;let l=0,c=0;if(r)if(i)l=mt.getOffsetX(o,s)/(n[0]-t[0]),c=l;else{let h=mt.getOffsetX(o,s),d=mt.getOffsetY(o,s);l=h/(n[0]-t[0]),c=d/(n[1]-t[1])}else{const h=mt.isHorizontal(t,n,.1)||!1;let d=h?mt.getOffsetX(o,s):mt.getOffsetY(o,s),g=h?n[0]-t[0]:n[1]-t[1];const v=d/g;i?(l=v,c=v):h?l=v:c=v}return{xZoom:l,yZoom:c}},Ul=(e,t,n,r)=>{const i=(e[0]-t[0])*n,o=(e[1]-t[1])*r;return[e[0]+i,e[1]+o]},xV=(e,t,n,r,i)=>{const o=b.getRectangleByPoints(t);Ts.isDebug()&&Ts.drawRectangle(e,o,{stroke:"black"});let s=t;s=Ir(s,b.getCenterPoint(o),1/2*Math.PI),Ts.isDebug()&&Ts.drawRectangle(e,s,{stroke:"blue"}),s=s.map(c=>Ul(c,n,r,i)),Ts.isDebug()&&Ts.drawRectangle(e,s);const l=b.getRectangleByPoints(s);return Ir(s,b.getCenterPoint(l),-.5*Math.PI)},EV=(e,t,n)=>{const r=Lt(),i=Qe(e),o=n?b.getRectangleByPoints(t):on(e,i,!1),s=Bi(e,o);let l=b.getCornerPoints(s);const c=Co(i);if(c){const h=b.getCenterPoint(s);l=Ir(l,h,c)}return l.forEach(h=>{const d=US(e,h);r.append(d)}),r},PV="debug:plait:point-for-geometry",rx=I0(PV),Bm=10;function vD(e,t,n,r,i,o){const{originPoint:s,handlePoint:l}=r,c=[n.startPoint,n.endPoint],{xZoom:h,yZoom:d}=V8(c,s,l,o,i);let g,v=[];if(Array.isArray(t.element)){g=t.element;const R=on(e,t.element,!1);v=b.getPoints(R)}else g=[t.element],v=t.element.points;const y=v.map(R=>Ul(R,s,h,d)),x=b.getRectangleByPoints(y),E=Rp(x,Co(g)),T=Ul(l,s,h,d),[D,S]=Yn(s,T);return{resizePoints:c,resizeOriginPoint:v,activeRectangle:E,originPoint:s,handlePoint:l,directionFactors:[P0(D),P0(S)],isAspectRatio:i,isFromCorner:o}}function Sv(e,t,n){const r=Lt(),i=FP(e,t);let o=DV(i,n);o.deltaX===0&&o.deltaY===0&&(o=SV(i,n));const s=Co(t),l=TV(o,n,s),c=BV(e,l.activePoints,i,n,s),h=AV(e,l.activePoints,i,n,s);return r.append(c,h),{...l,...o,snapG:r}}function SV(e,t){let n={deltaX:0,deltaY:0};const{isAspectRatio:r,activeRectangle:i,directionFactors:o}=t,s=o[0]!==0||r,l=o[1]!==0||r;if(s){const c=Zf(i,!0),h=o[0]===-1?c[0]:c[2],d=Og(e,h,!0);if(Math.abs(d)<Yl&&(n.deltaX=d,n.deltaX!==0&&r))return n.deltaY=n.deltaX/(i.width/i.height),n}if(l){const c=Zf(i,!1),h=o[1]===-1?c[0]:c[2],d=Og(e,h,!1);if(Math.abs(d)<Yl&&(n.deltaY=d,n.deltaY!==0&&r))return n.deltaX=n.deltaY*(i.width/i.height),n}return n}function TV(e,t,n){const{deltaX:r,deltaY:i}=e,{resizePoints:o,isCreate:s}=t,l=[o[0],[o[1][0]+r,o[1][1]+i]];let c=l,h=0,d=0;if(!s){const{originPoint:g,handlePoint:v,isFromCorner:y,isAspectRatio:x,resizeOriginPoint:E}=t,T=V8(l,g,v,y,x);h=T.xZoom,d=T.yZoom,c=E.map(D=>Ul(D,g,h,d)),n&&(c=v8(b.getRectangleByPoints(E),b.getRectangleByPoints(c),b.getCenterPoint(b.getRectangleByPoints(E)),b.getCenterPoint(b.getRectangleByPoints(c)),n))}return{xZoom:h,yZoom:d,activePoints:c}}function DV(e,t){let n={deltaX:0,deltaY:0};const{isAspectRatio:r,activeRectangle:i}=t,o=e.find(l=>Math.abs(l.width-i.width)<Yl);if(o){const l=o.width-i.width;if(n.deltaX=l*t.directionFactors[0],r){const c=l/(i.width/i.height);return n.deltaY=c*t.directionFactors[1],n}}const s=e.find(l=>Math.abs(l.height-i.height)<Yl);if(s){const l=s.height-i.height;if(n.deltaY=l*t.directionFactors[1],r){const c=l*(i.width/i.height);return n.deltaX=c*t.directionFactors[0],n}}return n}function Mm(e,t){return t?[[e.x,e.y-Bm],[e.x+e.width,e.y-Bm]]:[[e.x-Bm,e.y],[e.x-Bm,e.y+e.height]]}function AV(e,t,n,r,i){rx.isDebug()&&rx.clear();const o=b.getRectangleByPoints(t),s=Rp(o,i),{isAspectRatio:l,directionFactors:c}=r,h=c[0]!==0||l,d=c[1]!==0||l;return LP(e,s,n,h,d)}function BV(e,t,n,r,i){let o=[],s=[];const l=r.directionFactors[0]!==0||r.isAspectRatio,c=r.directionFactors[1]!==0||r.isAspectRatio,h=b.getRectangleByPoints(t),d=Rp(h,i);for(let v of n)d.width===v.width&&l&&o.push(Mm(v,!0)),d.height===v.height&&c&&s.push(Mm(v,!1));o.length&&l&&o.push(Mm(d,!0)),s.length&&c&&s.push(Mm(d,!1));const g=[...o,...s];return _P(e,g)}const MV=(e,t,n)=>lT(e,t,n,r=>{if(fe.isArrowLine(r)){let i={...r.source},o={...r.target},s=[...r.points];return r.source.boundId&&(s[0]=oc(Bs(e,r.source.boundId),r.source.connection),Bs(e,r.source.boundId,t)||(delete i.boundId,delete i.connection)),r.target.boundId&&(s[s.length-1]=oc(Bs(e,r.target.boundId),r.target.connection),Bs(e,r.target.boundId,t)||(delete o.boundId,delete o.connection)),s=s.map(l=>[l[0]-n[0],l[1]-n[1]]),{...r,points:s,source:i,target:o}}}),RV=(e,t,n)=>{uT(e,t,n,(r,i)=>{fe.isArrowLine(r)&&(r.source.boundId&&t.find(s=>[r.source.boundId,i[r.source.boundId]].includes(s.id))&&(r.source.boundId=i[r.source.boundId]),r.target.boundId&&t.find(s=>[r.target.boundId,i[r.target.boundId]].includes(s.id))&&(r.target.boundId=i[r.target.boundId])),fe.isElementByTable(r)&&(KC(r,"row"),KC(r,"column"),$W(r.cells))})},Bg=3/4,bV={draw(e,t,n){const r=Eg(t),o=F.getRoughSVG(e).polygon(r,{...n,fillStyle:"solid"});return zt(o,"round"),o},isInsidePoint(e,t){const n=Eg(e);return hc(t,n)},getCornerPoints(e){return Eg(e)},getNearestPoint(e,t){return _n(t,Eg(e))},getEdgeByConnectionPoint(e,t){const n=Eg(e),r=b.getConnectionPoint(e,t);return ti(n,r)},getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getTextRectangle(e){const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=t.width-ut.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+ut.rectangleAndText+n,y:t.y+(t.height*Bg-r)/2}}},Eg=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height*Bg],[e.x+e.width*3/5,e.y+e.height*Bg],[e.x+e.width/2,e.y+e.height],[e.x+e.width*2/5,e.y+e.height*Bg],[e.x,e.y+e.height*Bg]];function Fr(e){const t=e.getPolygonPoints,n={draw(r,i,o){const s=t(i),c=F.getRoughSVG(r).polygon(s,{...o,fillStyle:"solid"});return zt(c,"round"),c},isInsidePoint(r,i){const o=t(r);return hc(i,o)},getCornerPoints(r){return t(r)},getNearestPoint(r,i){return _n(i,t(r))},getNearestCrossingPoint(r,i){const o=t(r),s=HT(o,i);let l=s[0],c=Tt(i[0],i[1],l[0],l[1]);return s.filter((h,d)=>d>0).forEach(h=>{let d=Tt(i[0],i[1],h[0],h[1]);d<c&&(c=d,l=h)}),l},getEdgeByConnectionPoint(r,i){const o=t(r),s=b.getConnectionPoint(r,i);return ti(o,s)},getConnectorPoints(r){return e.getConnectorPoints?e.getConnectorPoints(r):t(r)}};return e.getTextRectangle&&(n.getTextRectangle=e.getTextRectangle),n}const kV=e=>[[e.x+e.width/4,e.y],[e.x+e.width*3/4,e.y],[e.x+e.width*3/4,e.y+e.height/4],[e.x+e.width,e.y+e.height/4],[e.x+e.width,e.y+e.height*3/4],[e.x+e.width*3/4,e.y+e.height*3/4],[e.x+e.width*3/4,e.y+e.height],[e.x+e.width/4,e.y+e.height],[e.x+e.width/4,e.y+e.height*3/4],[e.x,e.y+e.height*3/4],[e.x,e.y+e.height/4],[e.x+e.width/4,e.y+e.height/4]],OV=Fr({getPolygonPoints:kV,getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getTextRectangle(e){const t=Ar(e),n=t.width;return t.width=t.width/2,t.x+=n/4,t}}),M5=Fr({getPolygonPoints:b.getEdgeCenterPoints,getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getTextRectangle(e){const t=Ar(e);return t.width=t.width/2,t.x+=t.width/2,t}});function U8(e){const t={draw(n,r,i){const o=[r.x+r.width/2,r.y+r.height/2],l=F.getRoughSVG(n).ellipse(o[0],o[1],r.width,r.height,{...i,fillStyle:"solid"});return zt(l,"round"),l},isInsidePoint(n,r){const i=[n.x+n.width/2,n.y+n.height/2];return Jl(r,i,n.width/2,n.height/2)},getCornerPoints(n){return b.getEdgeCenterPoints(n)},getNearestPoint(n,r){const i=[n.x+n.width/2,n.y+n.height/2];return bi(r,i,n.width/2,n.height/2)},getTangentVectorByConnectionPoint(n,r){const i=b.getConnectionPoint(n,r),o=[n.x+n.width/2,n.y+n.height/2],s=[i[0]-o[0],-(i[1]-o[1])],l=n.width/2,c=n.height/2,h=nl(s[0],s[1],l,c);return rl(s[0],s[1],h)},getConnectorPoints(n){return b.getEdgeCenterPoints(n)},getTextRectangle(n){const r=Ar(n),i=r.width;return r.width=r.width*3/4,r.x+=i/8,r}};return e!=null&&e.draw&&(t.draw=e.draw),e!=null&&e.getTextRectangle&&(t.getTextRectangle=e.getTextRectangle),t}const R5=U8(),IV=e=>[[e.x+e.width/4,e.y],[e.x+e.width*3/4,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*3/4,e.y+e.height],[e.x+e.width/4,e.y+e.height],[e.x,e.y+e.height/2]],FV=Fr({getPolygonPoints:IV,getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getTextRectangle(e){const t=Ar(e),n=t.width;return t.width=t.width*3/4,t.x+=n/8,t}}),LV=e=>[[e.x,e.y+e.height/2],[e.x+e.width*.32,e.y],[e.x+e.width*.32,e.y+e.height*.2],[e.x+e.width,e.y+e.height*.2],[e.x+e.width,e.y+e.height*.8],[e.x+e.width*.32,e.y+e.height*.8],[e.x+e.width*.32,e.y+e.height]],_V=Fr({getPolygonPoints:LV,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],getTextRectangle(e){const t=Ar(e),n=t.width;return t.width=t.width*(1-.32),t.x+=n*.32,t}}),NV=e=>[[e.x+e.width*3/10,e.y],[e.x+e.width*7/10,e.y],[e.x+e.width,e.y+e.height*3/10],[e.x+e.width,e.y+e.height*7/10],[e.x+e.width*7/10,e.y+e.height],[e.x+e.width*3/10,e.y+e.height],[e.x,e.y+e.height*7/10],[e.x,e.y+e.height*3/10]],HV=Fr({getPolygonPoints:NV,getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getTextRectangle(e){const t=Ar(e),n=t.width;return t.width=t.width*3/4,t.x+=n/8,t}}),ix=e=>[[e.x+e.width/4,e.y],[e.x+e.width,e.y],[e.x+e.width*3/4,e.y+e.height],[e.x,e.y+e.height]],ox=Fr({getPolygonPoints:ix,getConnectorPoints:e=>{const t=ix(e);return V0(t)},getTextRectangle(e){const t=Ar(e),n=t.width;return t.width=t.width/2,t.x+=n/4,t}}),GV=e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height*2/5],[e.x+e.width*4/5,e.y+e.height],[e.x+e.width/5,e.y+e.height],[e.x,e.y+e.height*2/5]],jV=Fr({getPolygonPoints:GV,getTextRectangle(e){const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=t.width-ut.rectangleAndText*2-n*2,o=i*3/5;return{height:r,width:o>0?o:0,x:t.x+ut.rectangleAndText+n+i/5,y:t.y+t.height/5+(t.height*4/5-r)/2}}}),$V=e=>{const t=e.width>e.height/2;return[[e.x,e.y],[e.x+(t?e.width-e.height/2:0),e.y],[e.x+e.width,e.y+e.height/2],[e.x+(t?e.width-e.height/2:0),e.y+e.height],[e.x,e.y+e.height]]},WV=Fr({getPolygonPoints:$V,getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getTextRectangle(e){const t=b.getRectangleByPoints(e.points),n=Ar(e),r=t.width>t.height/2+20;return n.width=r?t.width-t.height/2:n.width,n}}),zV=e=>{const t=e.width>e.height/2;return[[e.x,e.y],[e.x+(t?e.width-e.height/2:0),e.y],[e.x+e.width,e.y+e.height/2],[e.x+(t?e.width-e.height/2:0),e.y+e.height],[e.x,e.y+e.height],[e.x+(t?e.height/2:e.width),e.y+e.height/2]]},VV=Fr({getPolygonPoints:zV,getTextRectangle(e){const t=b.getRectangleByPoints(e.points),n=Ar(e),r=t.width>t.height+20;return n.width=r?t.width-t.height:n.width,n.x=r?t.x+t.height/2:n.x,n}}),UV=e=>[[e.x,e.y+e.height*.2],[e.x+e.width*.68,e.y+e.height*.2],[e.x+e.width*.68,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*.68,e.y+e.height],[e.x+e.width*.68,e.y+e.height*.8],[e.x,e.y+e.height*.8]],XV=Fr({getPolygonPoints:UV,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],getTextRectangle(e){const t=Ar(e);return t.width=t.width*.68,t}}),rn={draw(e,t,n){return ga(e,t,{...n,fillStyle:"solid"})},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]);return b.isHit(e,n)},getCornerPoints(e){return b.getCornerPoints(e)},getNearestPoint(e,t){return _n(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=b.getConnectionPoint(e,t);return ti(n,r)},getConnectorPoints(e){return b.getEdgeCenterPoints(e)}},KV={draw(e,t,n){return L0(F.getRoughSVG(e),t.x,t.y,t.x+t.width,t.y+t.height,{...n,fillStyle:"solid"},!1,f0(t))},isInsidePoint(e,t){return L4(t,e,f0(e))},getCornerPoints(e){return b.getCornerPoints(e)},getNearestPoint(e,t){return yD(t,e,f0(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=b.getConnectionPoint(e,t);return ti(n,r)},getConnectorPoints(e){return b.getEdgeCenterPoints(e)}},f0=e=>Math.min(e.width*.1,e.height*.1);function yD(e,t,n){const{x:r,y:i,width:o,height:s}=t,l=b.getCornerPoints(t);let c=_n(e,l),h=null;return e[0]>=r&&e[0]<=r+n&&e[1]>=i&&e[1]<=i+n&&(h=[r+n,i+n]),e[0]>=r&&e[0]<=r+n&&e[1]>=i+s&&e[1]<=i+s-n&&(h=[r+n,i+s-n]),e[0]>=r+o-n&&e[0]<=r+o&&e[1]>=i&&e[1]<=i+n&&(h=[r+o-n,i+n]),e[0]>=r+o-n&&e[0]<=r+o&&e[1]>=i+s-n&&e[1]<=i+s&&(h=[r+o-n,i+s-n]),h&&(c=bi(e,h,n,n)),c}const Hf=3/4,YV={draw(e,t,n){const r=F.getRoughSVG(e),i=t.x,o=t.y,s=t.x+t.width,l=t.y+t.height*Hf,c=f0(t),h=[i+c,o],d=[s-c,o],g=[s,o+c],v=[s,l-c],y=[s-c,l],x=[i+c,l],E=[i,l-c],T=[i,o+c],D=[i+t.width/4,l],S=[i+t.width/4,t.y+t.height],R=[i+t.width/2,l],k=r.path(`M${d[0]} ${d[1]} A ${c} ${c}, 0, 0, 1, ${g[0]} ${g[1]} L ${v[0]} ${v[1]} A ${c} ${c}, 0, 0, 1, ${y[0]} ${y[1]} L    ${R[0]} ${R[1]}  ${S[0]} ${S[1]}   ${D[0]} ${D[1]}   ${x[0]} ${x[1]} A ${c} ${c}, 0, 0, 1, ${E[0]} ${E[1]} L ${T[0]} ${T[1]} A ${c} ${c}, 0, 0, 1, ${h[0]} ${h[1]} Z`,{...n,fillStyle:"solid"});return zt(k,"round"),k},isInsidePoint(e,t){const n=[[e.x+e.width/4,e.y+e.height*3/4],[e.x+e.width/4,e.y+e.height],[e.x+e.width/2,e.y+e.height*3/4]];return e.height=e.height*3/4,hc(t,n)||L4(t,e,f0(e))},getCornerPoints(e){return b5(e)},getNearestPoint(e,t){return _n(t,b5(e))},getEdgeByConnectionPoint(e,t){const n=b5(e),r=b.getConnectionPoint(e,t);return ti(n,r)},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height*Hf],[e.x,e.y+e.height/2]]},getTextRectangle(e){const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=t.width-ut.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+ut.rectangleAndText+n,y:t.y+(t.height*Hf-r)/2}}},b5=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height*Hf],[e.x+e.width/2,e.y+e.height*Hf],[e.x+e.width/4,e.y+e.height],[e.x+e.width/4,e.y+e.height*Hf],[e.x,e.y+e.height*Hf]],sx=e=>[[e.x+e.width*.15,e.y],[e.x+e.width*.85,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],qV=Fr({getPolygonPoints:sx,getConnectorPoints(e){const t=sx(e);return V0(t)},getTextRectangle(e){const t=Ar(e),n=t.width;return t.width=t.width*3/4,t.x+=n/8,t}}),ax=e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],ZV=Fr({getPolygonPoints:ax,getConnectorPoints(e){const t=ax(e);return[...V0(t),...t]},getTextRectangle(e){const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=t.width-ut.rectangleAndText*2-n*2,o=i*2/3;return{height:r,width:o>0?o:0,x:t.x+ut.rectangleAndText+n+i/6,y:t.y+t.height*3/5+(t.height*2/5-r)/2}}}),QV=e=>[[e.x,e.y+e.height/2],[e.x+e.width*8/25,e.y],[e.x+e.width*8/25,e.y+e.height/5],[e.x+e.width*17/25,e.y+e.height/5],[e.x+e.width*17/25,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*17/25,e.y+e.height],[e.x+e.width*17/25,e.y+e.height*4/5],[e.x+e.width*8/25,e.y+e.height*4/5],[e.x+e.width*8/25,e.y+e.height]],JV=Fr({getPolygonPoints:QV,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]]}),lx=e=>[[e.x+e.width/2,e.y+e.height*75/91],[e.x+e.width*18.61/96,e.y+e.height],[e.x+e.width*24.2235871/96,e.y+e.height*57.7254249/91],[e.x,e.y+e.height*34.5491503/91],[e.x+e.width*33.3053687/96,e.y+e.height*29.7745751/91],[e.x+e.width/2,e.y],[e.x+e.width*62.6946313/96,e.y+e.height*29.7745751/91],[e.x+e.width,e.y+e.height*34.5491503/91],[e.x+e.width*71.7764129/96,e.y+e.height*57.7254249/91],[e.x+e.width*77.3892626/96,e.y+e.height]],eU=Fr({getPolygonPoints:lx,getConnectorPoints:e=>{const t=lx(e);return[t[1],t[3],t[5],t[7],t[9]]},getTextRectangle(e){const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=t.width-ut.rectangleAndText*2-n*2,o=i/2;return{height:r,width:o>0?o:0,x:t.x+ut.rectangleAndText+n+i/4,y:t.y+t.height*1/6+(t.height*4/5-r)/2}}}),tU={draw(e,t,n){return L0(F.getRoughSVG(e),t.x,t.y,t.x+t.width,t.y+t.height,{...n,fillStyle:"solid"},!1,Rm(t))},isInsidePoint(e,t){return L4(t,e,Rm(e))},getCornerPoints(e){return b.getCornerPoints(e)},getNearestPoint(e,t){return nU(t,e,Rm(e))},getTangentVectorByConnectionPoint(e,t){const n=b.getConnectionPoint(e,t),r=Rm(e),i=wD(e,r,n);if(i){const o=[n[0]-i[0],-(n[1]-i[1])],s=r,l=r,c=nl(o[0],o[1],s,l);return rl(o[0],o[1],c)}return null},getConnectorPoints(e){return b.getEdgeCenterPoints(e)}},Rm=e=>Math.min(e.width/2,e.height/2);function nU(e,t,n){let r=null,i=wD(t,n,e);if(i)r=bi(e,i,n,n);else{const o=b.getCornerPoints(t);r=_n(e,o)}return r}function wD(e,t,n){const{x:r,y:i,width:o,height:s}=e;let l=null;return n[0]>=r&&n[0]<=r+t&&n[1]>=i&&n[1]<=i+t&&(l=[r+t,i+t]),n[0]>=r&&n[0]<=r+t&&n[1]>=i+s-t&&n[1]<=i+s&&(l=[r+t,i+s-t]),n[0]>=r+o-t&&n[0]<=r+o&&n[1]>=i&&n[1]<=i+t&&(l=[r+o-t,i+t]),n[0]>=r+o-t&&n[0]<=r+o&&n[1]>=i+s-t&&n[1]<=i+s&&(l=[r+o-t,i+s-t]),l}const ux=e=>[[e.x,e.y+e.height/4],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],rU=Fr({getPolygonPoints:ux,getConnectorPoints:e=>{const t=ux(e);return V0(t)},getTextRectangle:e=>{const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=t.width-ut.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+ut.rectangleAndText+n,y:t.y+t.height/4+(t.height*3/4-r)/2}}}),iU=e=>[[e.x,e.y+e.height/2],[e.x+e.width/6,e.y],[e.x+e.width*5/6,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*5/6,e.y+e.height],[e.x+e.width/6,e.y+e.height]],oU=Fr({getPolygonPoints:iU,getConnectorPoints:e=>b.getEdgeCenterPoints(e),getTextRectangle(e){const t=Ar(e),n=t.width;return t.width=t.width*2/3,t.x+=n/6,t}}),cx=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width*7/8,e.y+e.height],[e.x+e.width/8,e.y+e.height]],sU=Fr({getPolygonPoints:cx,getConnectorPoints:e=>{const t=cx(e);return V0(t)},getTextRectangle(e){const t=Ar(e),n=t.width;return t.width=t.width*3/4,t.x+=n/8,t}}),fx=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width/2,e.y+e.height]],aU=Fr({getPolygonPoints:fx,getConnectorPoints:e=>{const t=fx(e);return[...V0(t),...t]},getTextRectangle(e){const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=t.width-ut.rectangleAndText*2-n*2,o=i*2/3;return{height:r,width:o>0?o:0,x:t.x+ut.rectangleAndText+n+i/6,y:t.y+(t.height*2/3-r)/2}}}),lU={draw(e,t,n){const i=F.getRoughSVG(e).path(`M${t.x} ${t.y} L${t.x+t.width*3/4} ${t.y} A  ${t.width/4} ${t.height/2}, 0, 0, 1,${t.x+t.width*3/4} ${t.y+t.height} L${t.x} ${t.y+t.height} Z`,{...n,fillStyle:"solid"});return zt(i,"round"),i},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]),r=b.isHit({...e,width:e.width*3/4},n),i=Jl(t,[e.x+e.width*3/4,e.y+e.height/2],e.width/4,e.height/2);return r||i},getCornerPoints(e){return b.getCornerPoints(e)},getNearestPoint(e,t){const n=_n(t,rn.getCornerPoints(e));return n[0]>e.x+e.width*3/4?bi(t,[e.x+e.width*3/4,e.y+e.height/2],e.width/4,e.height/2):n},getTangentVectorByConnectionPoint(e,t){const n=b.getConnectionPoint(e,t),r=[e.x+e.width*3/4,e.y+e.height/2],i=[n[0]-r[0],-(n[1]-r[1])],o=e.width/4,s=e.height/2,l=nl(i[0],i[1],o,s);return rl(i[0],i[1],l)},getConnectorPoints(e){return b.getEdgeCenterPoints(e)}},uU={draw(e,t,n){const i=F.getRoughSVG(e).path(`M${t.x+t.width/10} ${t.y} L${t.x+t.width} ${t.y} A  ${t.width/10} ${t.height/2}, 0, 0, 0,${t.x+t.width} ${t.y+t.height} L${t.x+t.width/10} ${t.y+t.height}A  ${t.width/10} ${t.height/2}, 0, 0, 1,${t.x+t.width/10} ${t.y}`,{...n,fillStyle:"solid"});return zt(i,"round"),i},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]),r=b.isHit({...e,x:e.x+e.width/10,width:e.width*9/10},n),i=Jl(t,[e.x+e.width/10,e.y+e.height/2],e.width/10,e.height/2),o=!Jl(t,[e.x+e.width,e.y+e.height/2],e.width/10,e.height/2);return r&&o||i},getCornerPoints(e){return b.getCornerPoints(e)},getNearestPoint(e,t){const n=_n(t,rn.getCornerPoints(e));if(n[0]<e.x+e.width/10){const r=[e.x+e.width/10,e.y+e.height/2],i=bi(t,r,e.width/10,e.height/2);return i[0]>r[0]&&(i[0]=r[0]*2-i[0]),i}if(n[0]>e.x+e.width*9/10){const r=[e.x+e.width,e.y+e.height/2],i=bi(t,r,e.width/10,e.height/2);return i[0]>r[0]&&(i[0]=r[0]*2-i[0]),i}return n},getTangentVectorByConnectionPoint(e,t){const n=b.getConnectionPoint(e,t);let r=[e.x+e.width/10,e.y+e.height/2],i=e.width/10,o=e.height/2;const s=n[0]>e.x+e.width*9/10&&n[1]>e.y;s&&(r=[e.x+e.width,e.y+e.height/2]);const l=[n[0]-r[0],-(n[1]-r[1])],c=nl(l[0],l[1],i,o),h=rl(l[0],l[1],c);return s?h.map(d=>-d):h},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width*9/10,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]]},getTextRectangle(e){const t=Ar(e),n=t.width;return t.width=t.width*3/4,t.x+=n/8,t}},cU={draw(e,t,n){const i=F.getRoughSVG(e).path(`M${t.x} ${t.y} H${t.x+t.width} V${t.y+t.height} H${t.x} Z M${t.x+t.width*.06} ${t.y} L${t.x+t.width*.06} ${t.y+t.height} M${t.x+t.width-t.width*.06} ${t.y} L${t.x+t.width-t.width*.06} ${t.y+t.height}`,{...n,fillStyle:"solid"});return zt(i,"round"),i},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]);return b.isHit(e,n)},getCornerPoints(e){return b.getCornerPoints(e)},getNearestPoint(e,t){return _n(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=b.getConnectionPoint(e,t);return ti(n,r)},getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=t.width-ut.rectangleAndText*2-n*2-t.width*.06*2;return{height:r,width:i>0?i:0,x:t.x+ut.rectangleAndText+n+t.width*.06,y:t.y+(t.height-r)/2}}},fU=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]],hU=Fr({getPolygonPoints:fU,getConnectorPoints:e=>b.getEdgeCenterPoints(e),getTextRectangle:e=>{const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=t.width-ut.rectangleAndText*2-n*2;return{width:i>0?i:0,height:r,x:t.x+ut.rectangleAndText+n,y:t.y+(t.height-t.height/2-r)/2}}}),dU=U8({draw(e,t,n){const r=F.getRoughSVG(e),i=t.width/2,o=t.height/2,s=[t.x+t.width,t.y+t.height/2],l=r.path(`M${s[0]} ${s[1]}
        A${i},${o} 0 1,1 ${s[0]} ${s[1]-.01}
        M${t.x} ${t.y+t.height/2}
        L${t.x+t.width} ${t.y+t.height/2}
        M${t.x+t.width/2} ${t.y}
        L${t.x+t.width/2} ${t.y+t.height}
        `,{...n,fillStyle:"solid"});return zt(l,"round"),l}}),gU=U8({draw(e,t,n){const r=F.getRoughSVG(e),i=t.width/2,o=t.height/2,s=[t.x+t.width,t.y+t.height/2],l=[t.x+t.width/2,t.y+t.height/2],c=Tw([t.x,t.y],[t.x+t.width,t.y+t.height],l[0],l[1],i,o),h=Tw([t.x+t.width,t.y],[t.x,t.y+t.height],l[0],l[1],i,o),d=r.path(`M${s[0]} ${s[1]}
        A${i},${o} 0 1,1 ${s[0]} ${s[1]-.01}
        M${c[0][0]} ${c[0][1]}
        L${c[1][0]} ${c[1][1]}
        M${h[0][0]} ${h[0][1]}
        L${h[1][0]} ${h[1][1]}
        `,{...n,fillStyle:"solid"});return zt(d,"round"),d}}),pU={draw(e,t,n){const i=F.getRoughSVG(e).path(`M${t.x} ${t.y+t.height-t.height/9} V${t.y} H${t.x+t.width} V${t.y+t.height-t.height/9}
            Q${t.x+t.width-t.width/4} ${t.y+t.height-t.height/9*3}, ${t.x+t.width/2} ${t.y+t.height-t.height/9} T${t.x} ${t.y+t.height-t.height/9}           
            `,{...n,fillStyle:"solid"});return zt(i,"round"),i},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]);return b.isHit(e,n)},getCornerPoints(e){return b.getCornerPoints(e)},getNearestPoint(e,t){let n=_n(t,rn.getCornerPoints(e)),r=Bp([[e.x,e.y+e.height-e.height/9],[e.x+e.width/4,e.y+e.height],[e.x+e.width/2,e.y+e.height-e.height/9],[e.x+e.width/4*3,e.y+e.height-e.height/9*2],[e.x+e.width,e.y+e.height-e.height/9]]);if(r=To(r),n[1]>e.y+e.height-e.height/9){if(n[0]===e.x+e.width/2)return n[1]=e.y+e.height-e.height/9,n;n=_n(t,r,!1)}return n},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height-e.height/9],[e.x,e.y+e.height/2]]},getTangentVectorByConnectionPoint(e,t){const n=b.getConnectionPoint(e,t);return n[0]>e.x&&n[0]<e.x+e.width/4?Yn([e.x+e.width/4,e.y+e.height],n):n[0]>e.x+e.width/4&&n[0]<e.x+e.width/4*3?Yn([e.x+e.width/4*3,e.y+e.height-e.height/9],[e.x+e.width/4,e.y+e.height]):n[0]>e.x+e.width/4*3?Yn([e.x+e.width,e.y+e.height-e.height/9],n):Yn(n,[e.x+e.width/4,e.y+e.height])},getTextRectangle:e=>{const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=t.width-ut.rectangleAndText*2-n*2-t.width*.06*2;return{height:r,width:i>0?i:0,x:t.x+ut.rectangleAndText+n+t.width*.06,y:t.y+(t.height-r)/2}}},hx=e=>{const t=[[e.x,e.y+10],[e.x+5,e.y+10],[e.x+5,e.y+5],[e.x+10,e.y+5],[e.x+10,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height-e.height/9-10-3],[e.x+e.width-5,e.y+e.height-e.height/9-10-3-4],[e.x+e.width-5,e.y+e.height-e.height/9-5-3],[e.x+e.width-10,e.y+e.height-e.height/9-5-3-4],[e.x+e.width-10,e.y+e.height-e.height/9]];let n=Bp([[e.x+e.width-10,e.y+e.height-e.height/9],[e.x+e.width-10-(e.width-10)/4,e.y+e.height-e.height/9*2],[e.x+(e.width-10)/2,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height],[e.x,e.y+e.height-e.height/9]]);return n=To(n),[...t,...n]},mU={draw(e,t,n){const i=F.getRoughSVG(e).path(`M${t.x} ${t.y+t.height-t.height/9} V${t.y+10} H${t.x+5} V${t.y+5} H${t.x+10} V${t.y} H${t.x+t.width} V${t.y+t.height-t.height/9-10-3} L${t.x+t.width-5} ${t.y+t.height-t.height/9-10-3-4} V${t.y+t.height-t.height/9-5-3}
                 L${t.x+t.width-10} ${t.y+t.height-t.height/9-5-3-4} V${t.y+t.height-t.height/9}
                
             Q${t.x+t.width-10-(t.width-10)/4} ${t.y+t.height-t.height/9*3}, ${t.x+(t.width-10)/2} ${t.y+t.height-t.height/9} T${t.x} ${t.y+t.height-t.height/9}
              
                M${t.x+5} ${t.y+10} H${t.x+t.width-10} V${t.y+t.height-t.height/9} 
                    
                M${t.x+10} ${t.y+5} H${t.x+t.width-5} V${t.y+t.height-t.height/9-10-3}
            `,{...n,fillStyle:"solid"});return zt(i,"round"),i},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]);return b.isHit(e,n)},getCornerPoints(e){return b.getCornerPoints(e)},getNearestPoint(e,t){return _n(t,hx(e),!1)},getConnectorPoints(e){let t=Bp([[e.x,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height],[e.x+(e.width-10)/2,e.y+e.height-e.height/9],[e.x+(e.width-10)/4*3,e.y+e.height-e.height/9*2],[e.x+e.width-10,e.y+e.height-e.height/9]]);t=To(t);const n=_n([e.x+e.width/2,e.y+e.height],t);return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[n[0],n[1]],[e.x,e.y+e.height/2]]},getNearestCrossingPoint(e,t){const n=HT(hx(e),t);let r=n[0],i=Tt(t[0],t[1],r[0],r[1]);return n.filter((o,s)=>s>0).forEach(o=>{let s=Tt(t[0],t[1],o[0],o[1]);s<i&&(i=s,r=o)}),r},getTangentVectorByConnectionPoint(e,t){const n=b.getConnectionPoint(e,t);if(n[0]>e.x&&n[0]<e.x+(e.width-10)/4)return Yn([e.x+(e.width-10)/4,e.y+e.height],n);if(n[0]>e.x+(e.width-10)/4&&n[0]<e.x+(e.width-10)/4*3)return Yn([e.x+(e.width-10)/4*3,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height]);if(n[0]>e.x+(e.width-10)/4*3&&n[0]<e.x+e.width-10)return Yn([e.x+(e.width-10),e.y+e.height-e.height/9],n);const r=QS(t)||Ot.bottom,i=Qf(r);return[i.x,i.y]},getTextRectangle:e=>{const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=t.width-ut.rectangleAndText*2-n*2-t.width*.06*2;return{height:r,width:i>0?i-10:0,x:t.x+ut.rectangleAndText+n+t.width*.06,y:t.y+(t.height-r)/2}}},vU={draw(e,t,n){const i=F.getRoughSVG(e).path(`M${t.x} ${t.y+t.height*.15}  
            A${t.width/2} ${t.height*.15}, 0, 0, 0,${t.x+t.width} ${t.y+t.height*.15} 
            A${t.width/2} ${t.height*.15}, 0, 0, 0,${t.x} ${t.y+t.height*.15} 
            V${t.y+t.height-t.height*.15}
            A${t.width/2} ${t.height*.15}, 0, 0, 0, ${t.x+t.width} ${t.y+t.height-t.height*.15}
            V${t.y+t.height*.15}`,{...n,fillStyle:"solid"});return zt(i,"round"),i},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]),r=b.isHit({...e,y:e.y+e.height*.15,height:e.height-e.height*.3},n),i=Jl(t,[e.x+e.width/2,e.y+e.height*.15],e.width/2,e.height*.15),o=Jl(t,[e.x+e.width/2,e.y+e.height-e.height*.15],e.width/2,e.height*.15);return r||i||o},getCornerPoints(e){return b.getCornerPoints(e)},getNearestPoint(e,t){const n=_n(t,rn.getCornerPoints(e));if(n[1]<e.y+e.height*.15){const r=[e.x+e.width/2,e.y+e.height*.15],i=bi(t,r,e.width/2,e.height*.15);return i[1]>r[1]&&(i[1]=r[1]*2-i[1]),i}if(n[1]>e.y+e.height-e.height*.15){const r=[e.x+e.width/2,e.y+e.height-e.height*.15],i=bi(t,r,e.width/2,e.height*.15);return i[1]<r[1]&&(i[1]=r[0]*2-i[1]),i}return n},getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,t){const n=b.getConnectionPoint(e,t);let r=[e.x+e.width/2,e.y+e.height-e.height*.15],i=e.width/2,o=e.height*.15;n[1]<e.y+e.height*.15&&n[0]>e.x&&(r=[e.x+e.width/2,e.y+e.height*.15]);const l=[n[0]-r[0],-(n[1]-r[1])],c=nl(l[0],l[1],i,o);return rl(l[0],l[1],c)},getTextRectangle:e=>{const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=t.width-ut.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+ut.rectangleAndText+n,y:t.y+t.height*.3+(t.height-t.height*.45-r)/2}}},yU={draw(e,t,n){const i=F.getRoughSVG(e).path(`M${t.x+t.width-t.width*.15} ${t.y}  
            A${t.width*.15} ${t.height/2}, 0, 0, 0,${t.x+t.width-t.width*.15} ${t.y+t.height} 
            A${t.width*.15} ${t.height/2}, 0, 0, 0,${t.x+t.width-t.width*.15} ${t.y} 
            H${t.x+t.width*.15}
            A${t.width*.15} ${t.height/2}, 0, 0, 0, ${t.x+t.width*.15} ${t.y+t.height}
            H${t.x+t.width-t.width*.15}`,{...n,fillStyle:"solid"});return zt(i,"round"),i},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]),r=b.isHit({...e,x:e.x+e.width*.15,width:e.width-e.width*.3},n),i=Jl(t,[e.x+e.width*.15,e.y+e.height/2],e.width*.15,e.height/2),o=Jl(t,[e.x+e.width-e.width*.15,e.y+e.height/2],e.width*.15,e.height/2);return r||i||o},getCornerPoints(e){return b.getCornerPoints(e)},getNearestPoint(e,t){const n=_n(t,rn.getCornerPoints(e));if(n[0]<e.x+e.width*.15){const r=[e.x+e.width*.15,e.y+e.height/2],i=bi(t,r,e.width*.15,e.height/2);return i[0]>r[0]&&(i[0]=r[0]*2-i[0]),i}if(n[0]>e.x+e.width-e.width*.15){const r=[e.x+e.width-e.width*.15,e.y+e.height/2],i=bi(t,r,e.width*.15,e.height/2);return i[0]<r[0]&&(i[0]=r[0]*2-i[0]),i}return n},getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,t){const n=b.getConnectionPoint(e,t);let r=[e.x+e.width*.15,e.y+e.height/2],i=e.width*.15,o=e.height/2;n[0]>e.x+e.width-e.width*.15&&n[1]>e.y&&(r=[e.x+e.width-e.width*.15,e.y+e.height/2]);const l=[n[0]-r[0],-(n[1]-r[1])],c=nl(l[0],l[1],i,o);return rl(l[0],l[1],c)},getTextRectangle:e=>{const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=t.width-t.width*.45-ut.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+t.width*.15+ut.rectangleAndText+n,y:t.y+(t.height-r)/2}}},wU={draw(e,t,n){const i=F.getRoughSVG(e).path(`M${t.x} ${t.y} h${t.width} v${t.height} h${-t.width} v${-t.height}
            M${t.x} ${t.y+t.height/10} h${t.width}
            M${t.x+t.width/10} ${t.y} v${t.height}
            `,{...n,fillStyle:"solid"});return zt(i,"round"),i},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]);return b.isHit(e,n)},getCornerPoints(e){return b.getCornerPoints(e)},getNearestPoint(e,t){return _n(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=b.getConnectionPoint(e,t);return ti(n,r)},getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=t.width-t.width*.1-ut.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+t.width*.1+ut.rectangleAndText+n,y:t.y+t.height*.1+(t.height-t.height*.1-r)/2}}};function dx(e){const t=e.width*.09,n=e.x+e.width,r=e.y+e.height/2;return{startPoint:[n,e.y],upperCurve:{controlPoint1:[n-t,e.y],controlPoint2:[n,r],endPoint:[n-t,r]},lowerCurve:{controlPoint1:[n,r],controlPoint2:[n-t,e.y+e.height],endPoint:[n,e.y+e.height]}}}const CU={draw(e,t,n){const r=F.getRoughSVG(e),{startPoint:i,upperCurve:o,lowerCurve:s}=dx(t),l=[`M${i[0]} ${i[1]}`,`C${o.controlPoint1[0]} ${o.controlPoint1[1]},
            ${o.controlPoint2[0]} ${o.controlPoint2[1]},
            ${o.endPoint[0]} ${o.endPoint[1]}`,`C${s.controlPoint1[0]} ${s.controlPoint1[1]},
            ${s.controlPoint2[0]} ${s.controlPoint2[1]},
            ${s.endPoint[0]} ${s.endPoint[1]}`].join(" "),c=r.path(l,{...n,fillStyle:"solid",fill:"transparent"});return zt(c,"round"),c},getNearestPoint(e,t){const{startPoint:n,upperCurve:r,lowerCurve:i}=dx(e),o=To([n,r.controlPoint1,r.controlPoint2,r.endPoint],.001),s=To([r.endPoint,i.controlPoint1,i.controlPoint2,i.endPoint],.001),l=[...o,...s];let c=1/0,h=t;for(const d of l){const g=Tt(t[0],t[1],d[0],d[1]);g<c&&(c=g,h=[...d])}return h},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]);return b.isHit(e,n)},getCornerPoints(e){return b.getCornerPoints(e)},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=b.getConnectionPoint(e,t);return ti(n,r)},getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=t.width-t.width*.09-ut.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+ut.rectangleAndText+n,y:t.y+(t.height-r)/2}}};function gx(e){const t=e.width*.09,n=e.y+e.height/2;return{startPoint:[e.x,e.y],upperCurve:{controlPoint1:[e.x+t,e.y],controlPoint2:[e.x,n],endPoint:[e.x+t,n]},lowerCurve:{controlPoint1:[e.x,n],controlPoint2:[e.x+t,e.y+e.height],endPoint:[e.x,e.y+e.height]}}}const xU={draw(e,t,n){const r=F.getRoughSVG(e),{startPoint:i,upperCurve:o,lowerCurve:s}=gx(t),l=[`M${i[0]} ${i[1]}`,`C${o.controlPoint1[0]} ${o.controlPoint1[1]},
            ${o.controlPoint2[0]} ${o.controlPoint2[1]},
            ${o.endPoint[0]} ${o.endPoint[1]}`,`C${s.controlPoint1[0]} ${s.controlPoint1[1]},
            ${s.controlPoint2[0]} ${s.controlPoint2[1]},
            ${s.endPoint[0]} ${s.endPoint[1]}`].join(" "),c=r.path(l,{...n,fillStyle:"solid",fill:"transparent"});return zt(c,"round"),c},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]);return b.isHit(e,n)},getCornerPoints(e){return b.getCornerPoints(e)},getNearestPoint(e,t){const{startPoint:n,upperCurve:r,lowerCurve:i}=gx(e),o=To([n,r.controlPoint1,r.controlPoint2,r.endPoint],.001),s=To([r.endPoint,i.controlPoint1,i.controlPoint2,i.endPoint],.001),l=[...o,...s];let c=1/0,h=[...t];for(const d of l){const g=Tt(t[0],t[1],d[0],d[1]);g<c&&(c=g,h=[...d])}return h},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=b.getConnectionPoint(e,t);return ti(n,r)},getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=t.width-t.width*.09-ut.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+t.width*.09+ut.rectangleAndText+n,y:t.y+(t.height-r)/2}}},EU={draw(e,t,n){const i=F.getRoughSVG(e).path(`M${t.x+t.width*.075} ${t.y+t.height} H${t.x} V${t.y} H${t.x+t.width*.075}
           `,{...n,fillStyle:"solid",fill:"transparent"});return zt(i,"round"),i},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]);return b.isHit(e,n)},getCornerPoints(e){return b.getCornerPoints(e)},getNearestPoint(e,t){return _n(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=b.getConnectionPoint(e,t);return ti(n,r)},getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=t.width-ut.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+ut.rectangleAndText+n,y:t.y+(t.height-r)/2}}},PU=e=>[[e.x,e.y+e.height/2],[e.x+e.width*.15,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x+e.width*.15,e.y+e.height]],SU={draw(e,t,n){const i=F.getRoughSVG(e).path(`M${t.x+t.width*.15} ${t.y} 
            H${t.x+t.width-t.width*.1} 
            A ${t.width*.1} ${t.height/2}, 0, 0, 1,${t.x+t.width-t.width*.1} ${t.y+t.height}
            H${t.x+t.width*.15}
            L${t.x} ${t.y+t.height/2}
            Z
            `,{...n,fillStyle:"solid"});return zt(i,"round"),i},isInsidePoint(e,t){const n=[[e.x,e.y+e.height/2],[e.x+e.width*.15,e.y],[e.x+e.width-e.width*.1,e.y],[e.x+e.width-e.width*.1,e.y+e.height],[e.x+e.width*.15,e.y+e.height]],r=hc(t,n),i=Jl(t,[e.x+e.width-e.width*.1,e.y+e.height/2],e.width*.1,e.height/2);return r||i},getCornerPoints(e){return b.getCornerPoints(e)},getNearestPoint(e,t){const n=_n(t,PU(e));return n[0]>e.x+e.width-e.width*.1?bi(t,[e.x+e.width-e.width*.1,e.y+e.height/2],e.width*.1,e.height/2):n},getTangentVectorByConnectionPoint(e,t){const n=b.getConnectionPoint(e,t),r=[e.x+e.width-e.width*.1,e.y+e.height/2],i=[n[0]-r[0],-(n[1]-r[1])],o=e.width*.1,s=e.height/2,l=nl(i[0],i[1],o,s);return rl(i[0],i[1],l)},getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=t.width-n*2-t.width*.25;return{width:i>0?i:0,height:r,x:t.x+n+t.width*.15,y:t.y+(t.height-r)/2}}},Jd={draw(e,t,n,r){const i=Lt();try{const o=Ip(e,{...r==null?void 0:r.element});if(o){const s=F.getRoughSVG(e),{x:l,y:c,width:h,height:d}=t,g=pm(s,[l,c],[l+h,c],n),v=pm(s,[l,c],[l,c+d],n);i.append(g,v),o.forEach(y=>{const x=b.getRectangleByPoints(y.points),{x:E,y:T,width:D,height:S}=x,R=ga(e,{x:E+gr,y:T+gr,width:D-gr*2,height:S-gr*2},{fill:y.fill,fillStyle:"solid",strokeWidth:0}),k=pm(s,[E+D,T],[E+D,T+S],n),O=pm(s,[E,T+S],[E+D,T+S],n);i.append(R,k,O)}),zt(i,"round")}}catch(o){console.error(o)}return i},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]);return b.isHit(e,n)},getCornerPoints(e){return b.getCornerPoints(e)},getNearestPoint(e,t){return yD(t,e,f0(e))},getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getTextRectangle(e,t){try{if(t&&t.id){const n=hh(t==null?void 0:t.board,e,t.id);if(n)return sp.isVerticalText(n)?TU(n):CD(n)}}catch(n){console.error(n)}return{x:0,y:0,width:0,height:0}}};function TU(e){const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight||0,i=t.height-ut.rectangleAndText*2-n*2;return{width:i>0?i:0,height:r,x:t.x-i/2+t.width/2,y:t.y+(t.height-r)/2}}function CD(e){const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight||0,i=t.width-ut.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+ut.rectangleAndText+n,y:t.y+(t.height-r)/2}}function px(e){const t=e.x+e.width/2,n={width:e.width/3/2,height:e.height/4/2};return e.y+e.height/4/2,{headArcCommand:{rx:n.width,ry:n.height,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:t,endY:e.y},bodyLine:[[t,e.y+e.height/4],[t,e.y+e.height/4*3]],armsLine:[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],leftLegLine:[[t,e.y+e.height/4*3],[e.x+e.width/12,e.y+e.height]],rightLegLine:[[t,e.y+e.height/4*3],[e.x+e.width/12*11,e.y+e.height]]}}const DU={draw(e,t,n){const r=F.getRoughSVG(e),{headArcCommand:i,bodyLine:o,armsLine:s,leftLegLine:l,rightLegLine:c}=px(t),h=[`M${o[0][0]} ${o[0][1]}`,`A${i.rx} ${i.ry} ${i.xAxisRotation} ${i.largeArcFlag} ${i.sweepFlag} ${i.endX} ${i.endY}`,`A${i.rx} ${i.ry} ${i.xAxisRotation} ${i.largeArcFlag} ${i.sweepFlag} ${o[0][0]} ${o[0][1]}`,`V${o[1][1]}`,`M${s[0][0]} ${s[0][1]} H${s[1][0]}`,`M${l[0][0]} ${l[0][1]} L${l[1][0]} ${l[1][1]}`,`M${c[0][0]} ${c[0][1]} L${c[1][0]} ${c[1][1]}`].join(" "),d=r.path(h,{...n,fillStyle:"solid"});return zt(d,"round"),d},getNearestPoint(e,t){const{headArcCommand:n,bodyLine:r,armsLine:i,leftLegLine:o,rightLegLine:s}=px(e),l=[e.x+e.width/2,e.y+e.height/4/2],c=bi(t,l,n.rx,n.ry),h=Tt(...t,...c),g=F4(t,[r,i,o,s]),v=Tt(...t,...g);return h<v?c:g},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]);return b.isHit(e,n)},getCornerPoints(e){return b.getCornerPoints(e)},getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,t){const n=b.getConnectionPoint(e,t);if(n[1]>=e.y&&n[1]<=e.y+e.height/4){const r=[e.x+e.width/2,e.y+e.height/4/2],i=[n[0]-r[0],-(n[1]-r[1])],o=e.width/2,s=e.height/2,l=nl(i[0],i[1],o,s);return rl(i[0],i[1],l)}return n[1]>=e.y+e.height/4&&n[1]<e.y+e.height/4*3?n[0]<e.x+e.width/2?ip(Yn([e.x,e.y+e.height/2],n),-(Math.PI/2)):ip(Yn([e.x+e.width,e.y+e.height/2],n),-(Math.PI/2)):n[1]>=e.y+e.height/4*3?n[0]<e.x+e.width/2?Yn(n,[e.x+e.width/12,e.y+e.height]):Yn([e.x+e.width/12*11,e.y+e.height],n):Yn(n,[e.x+e.width/4,e.y+e.height])},getTextRectangle:e=>{const t=b.getRectangleByPoints(e.points),n=e.textHeight,r=t.width+40;return{height:n,width:r>0?r:0,x:t.x-20,y:t.y+t.height+4}}},AU={draw(e,t,n){const i=F.getRoughSVG(e).path(`M${t.x} ${t.y} H${t.x+t.width} V${t.y+t.height} H${t.x} Z M${t.x+40} ${t.y} L${t.x+40} ${t.y+t.height} `,{...n,fillStyle:"solid"});return zt(i,"round"),i},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]);return b.isHit(e,n)},getCornerPoints(e){return b.getCornerPoints(e)},getNearestPoint(e,t){return _n(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=b.getConnectionPoint(e,t);return ti(n,r)},getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getTextRectangle(e){const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=40-ut.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+ut.rectangleAndText+n,y:t.y+(t.height-r)/2}}};function mx(e){const n=e.width*.7,r=e.x+e.width*.8;return{headerHeight:25,points:{leftTop:[e.x,e.y+25],topStart:[e.x,e.y],topEnd:[e.x+n,e.y],cornerPoint:[r,e.y+25],rightTop:[e.x+e.width,e.y+25],rightBottom:[e.x+e.width,e.y+e.height],leftBottom:[e.x,e.y+e.height],leftMiddle:[e.x,e.y+25],middlePoint:[r,e.y+25]}}}const BU={draw(e,t,n){const r=F.getRoughSVG(e),{points:i}=mx(t),o=[`M${i.leftTop[0]} ${i.leftTop[1]}`,`V${i.topStart[1]}`,`H${i.topEnd[0]}`,`L${i.cornerPoint[0]} ${i.cornerPoint[1]}`,`H${i.rightTop[0]}`,`V${i.rightBottom[1]}`,`H${i.leftBottom[0]}`,`V${i.leftMiddle[1]}`,`H${i.middlePoint[0]}`].join(" "),s=r.path(o,{...n,fillStyle:"solid"});return zt(s,"round"),s},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]);return b.isHit(e,n)},getCornerPoints(e){return b.getCornerPoints(e)},getNearestPoint(e,t){const{points:n}=mx(e),r=[[n.topStart,n.leftTop],[n.leftTop,n.leftBottom],[n.leftBottom,n.rightBottom],[n.rightBottom,n.rightTop],[n.topStart,n.topEnd],[n.topEnd,n.cornerPoint],[n.cornerPoint,n.rightTop],[n.leftMiddle,n.middlePoint]];return F4(t,r)},getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,t){const n=b.getConnectionPoint(e,t);return n[0]>e.x+e.width*.7&&n[1]<e.y+25?Yn([e.x+e.width*.7,e.y],n):Yn([e.x+e.width*.8,e.y+25],n)},getTextRectangle(e,t){var o,s;const n=b.getRectangleByPoints(e.points),r=Vt(e),i=(s=(o=e.texts)==null?void 0:o.find(l=>l.id===(t==null?void 0:t.id)))==null?void 0:s.textHeight;if((t==null?void 0:t.id)===es.name){const l=n.width*.7-ut.rectangleAndText-r;return{height:i,width:l>0?l:0,x:n.x+ut.rectangleAndText+r,y:n.y+(25-i)/2}}if((t==null?void 0:t.id)===es.content){const l=n.width-ut.rectangleAndText*2-r*2;return{height:i,width:l>0?l:0,x:n.x+ut.rectangleAndText+r,y:n.y+25+(n.height-25-i)/2}}return n}},MU={draw(e,t,n){const i=F.getRoughSVG(e).path(`M${t.x} ${t.y+25} 
            V${t.y}
            H${t.x+t.width} 
            V${t.y+t.height}
            H${t.x}
            V${t.y+25}
            H${t.x+t.width/3-8}
            L${t.x+t.width/3} ${t.y+16}
            V${t.y}
            `,{...n,fillStyle:"solid"});return zt(i,"round"),i},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]);return b.isHit(e,n)},getCornerPoints(e){return b.getCornerPoints(e)},getNearestPoint(e,t){return _n(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=b.getConnectionPoint(e,t);return ti(n,r)},getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getTextRectangle(e,t){var o,s;const n=b.getRectangleByPoints(e.points),r=Vt(e),i=(s=(o=e.texts)==null?void 0:o.find(l=>l.id===(t==null?void 0:t.id)))==null?void 0:s.textHeight;if((t==null?void 0:t.id)===es.name){const l=n.width/3-8-ut.rectangleAndText-r;return{height:i,width:l>0?l:0,x:n.x+ut.rectangleAndText+r,y:n.y+(25-i)/2}}if((t==null?void 0:t.id)===es.content){const l=n.width-ut.rectangleAndText*2-r*2;return{height:i,width:l>0?l:0,x:n.x+ut.rectangleAndText+r,y:n.y+25+ut.rectangleAndText+r}}return n}};function vx(e){return[[[e.x,e.y],[e.x+e.width,e.y+e.height]],[[e.x+e.width,e.y],[e.x,e.y+e.height]]]}const RU={draw(e,t,n){const r=F.getRoughSVG(e),i=vx(t),o=r.path(i.map(([s,l])=>`M${s[0]} ${s[1]} L${l[0]} ${l[1]}`).join(" "),{...n,fillStyle:"solid",strokeWidth:4});return zt(o,"round"),o},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]);return b.isHit(e,n)},getCornerPoints(e){return b.getCornerPoints(e)},getNearestPoint(e,t){const n=vx(e);let r=1/0,i=t;return n.forEach(o=>{const s=iv(t,o),l=Tt(t[0],t[1],s[0],s[1]);l<r&&(r=l,i=s)}),i},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=b.getConnectionPoint(e,t);return ti(n,r)},getConnectorPoints(e){return b.getEdgeCenterPoints(e)}},bU={draw(e,t,n){const i=F.getRoughSVG(e).path(`M${t.x} ${t.y} H${t.x+t.width} V${t.y+t.height} H${t.x} Z M${t.x+t.width*.125} ${t.y} L${t.x+t.width*.125} ${t.y+t.height} M${t.x+t.width-t.width*.125} ${t.y} L${t.x+t.width-t.width*.125} ${t.y+t.height}`,{...n,fillStyle:"solid"});return zt(i,"round"),i},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]);return b.isHit(e,n)},getCornerPoints(e){return b.getCornerPoints(e)},getNearestPoint(e,t){return _n(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=b.getConnectionPoint(e,t);return ti(n,r)},getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=t.width-ut.rectangleAndText*2-n*2-t.width*.125*2;return{height:r,width:i>0?i:0,x:t.x+ut.rectangleAndText+n+t.width*.125,y:t.y+(t.height-r)/2}}},kU={draw(e,t,n){const i=F.getRoughSVG(e).path(`M${t.x} ${t.y} 
            h${t.width-16}
            v16
            h16
            v${t.height-16}
            h${-t.width}
            Z
            M${t.x+t.width-16} ${t.y} 
            A16 16, 0,0,1, ${t.x+t.width} ${t.y+16}
            `,{...n,fillStyle:"solid"});return zt(i,"round"),i},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]);return b.isHit(e,n)},getCornerPoints(e){return b.getCornerPoints(e)},getNearestPoint(e,t){const n=_n(t,rn.getCornerPoints(e));return n[0]>e.x+e.width-16&&n[1]<e.y+16?bi(t,[e.x+e.width-16,e.y+16],16,16):n},getTangentVectorByConnectionPoint(e,t){const n=b.getConnectionPoint(e,t),r=[e.x+e.width*3/4,e.y+e.height/2],i=[n[0]-r[0],-(n[1]-r[1])],o=nl(i[0],i[1],16,16);return rl(i[0],i[1],o)},getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=t.width-ut.rectangleAndText*2-n-15;return{height:r,width:i>0?i:0,x:t.x+ut.rectangleAndText+n,y:t.y+(t.height-r)/2}}};function yx(e){const t=e.y+e.height/2,n=e.x+e.width*.3,r=e.width*.13,i=e.height*.285,o=n+r,s=e.width*.233;return{startPoint:[e.x,t],line1:[[e.x,t],[n,t]],circleArcCommand:{rx:r,ry:i,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:n,endY:t},verticalArcCommand:{rx:s,ry:e.height/2,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:o,endY:e.y+e.height},line2:[[o+s,t],[e.x+e.width,t]]}}const OU={draw(e,t,n){const r=F.getRoughSVG(e),{startPoint:i,line1:o,circleArcCommand:s,verticalArcCommand:l,line2:c}=yx(t),h=[`M${i[0]} ${i[1]}`,`H${o[1][0]}`,`A${s.rx} ${s.ry} ${s.xAxisRotation} ${s.largeArcFlag} ${s.sweepFlag} ${o[1][0]+s.rx*2} ${s.endY}`,`A${s.rx} ${s.ry} ${s.xAxisRotation} ${s.largeArcFlag} ${s.sweepFlag} ${s.endX} ${s.endY}`,`M${l.endX} ${t.y}`,`A${l.rx} ${l.ry} ${l.xAxisRotation} ${l.largeArcFlag} ${l.sweepFlag} ${l.endX} ${l.endY}`,`M${c[0][0]} ${c[0][1]} H${c[1][0]}`].join(" "),d=r.path(h,{...n,fillStyle:"solid"});return zt(d,"round"),d},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]);return b.isHit(e,n)},getCornerPoints(e){return b.getCornerPoints(e)},getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getNearestPoint(e,t){const{line1:n,line2:r,circleArcCommand:i,verticalArcCommand:o}=yx(e),s=_n(t,[...n,...r]),l=Tt(...t,...s),c=[n[1][0]+i.rx,n[1][1]],h=bi(t,c,i.rx,i.ry),d=Tt(...t,...h),g=[o.endX,e.y],v=ov(t,g,o),y=Tt(...t,...v),x=Math.min(l,d,y);return x===l?s:x===d?h:v},getTangentVectorByConnectionPoint(e,t){const n=b.getConnectionPoint(e,t);return n[0]>e.x+e.width*.43&&n[1]<e.y+e.height/2?ip(Yn(n,[e.x,e.y+e.height/2]),-Math.PI):n[0]>e.x+e.width*.43&&n[1]>e.y+e.height/2?Yn(n,[e.x,e.y+e.height/2]):Yn(n,[e.x,e.y+e.height/2])}};function wx(e){const t=e.width*.39,n=e.height/2;return{startPoint:[e.x,e.y],leftArcCommand:{rx:t,ry:n,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:e.x,endY:e.y+e.height},line:{startX:e.x+e.width*.41,startY:e.y+e.height/2,endX:e.x+e.width,endY:e.y+e.height/2}}}const IU={draw(e,t,n){const r=F.getRoughSVG(e),{startPoint:i,leftArcCommand:o,line:s}=wx(t),l=[`M${i[0]} ${i[1]}`,`A${o.rx} ${o.ry} ${o.xAxisRotation} ${o.largeArcFlag} ${o.sweepFlag} ${o.endX} ${o.endY}`,`M${s.startX} ${s.startY} H${s.endX}`].join(" "),c=r.path(l,{...n,fillStyle:"solid",fill:"transparent"});return zt(c,"round"),c},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]);return b.isHit(e,n)},getCornerPoints(e){return b.getCornerPoints(e)},getNearestPoint(e,t){const{startPoint:n,leftArcCommand:r,line:i}=wx(e);let o=1/0,s=t;const l=ov(t,n,r),c=Tt(t[0],t[1],l[0],l[1]);c<o&&(o=c,s=l);const h=[i.startX,i.startY],d=[i.endX,i.endY],g=iv(t,[h,d]),v=Tt(t[0],t[1],g[0],g[1]);return v<o&&(o=v,s=g),s},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=b.getConnectionPoint(e,t);return ti(n,r)},getConnectorPoints(e){return b.getEdgeCenterPoints(e)}},Cx=.54;function xx(e){const t=e.y+e.height/2,n=e.width*(1-Cx)/2,r=e.height/2,i=[e.x,t],o=e.x+e.width*Cx;return{startPoint:i,line:{startX:i[0],startY:t,endX:o,endY:t},arcCommands:[{rx:n,ry:r,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+e.width,endY:t},{rx:n,ry:r,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:o,endY:t}]}}const FU={draw(e,t,n){const r=F.getRoughSVG(e),{startPoint:i,line:o,arcCommands:s}=xx(t),l=[`M${i[0]} ${i[1]}`,`H${o.endX}`,...s.map(h=>`A${h.rx} ${h.ry} ${h.xAxisRotation} ${h.largeArcFlag} ${h.sweepFlag} ${h.endX} ${h.endY}`)].join(" "),c=r.path(l,{...n,fillStyle:"solid"});return zt(c,"round"),c},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]);return b.isHit(e,n)},getCornerPoints(e){return b.getCornerPoints(e)},getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getNearestPoint(e,t){const{line:n,arcCommands:r}=xx(e),i=[n.startX,n.startY],o=[n.endX,n.endY],s=_n(t,[i,o]),l=Tt(...t,...s),c=[e.x+3*e.width/4,n.startY],h=bi(t,c,r[0].rx,r[0].ry),d=Tt(...t,...h);return l<d?s:h},getTangentVectorByConnectionPoint(e,t){const n=b.getConnectionPoint(e,t),r=[e.x+e.width*3/4,e.y+e.height/2];if(n[0]>e.x+e.width*.54){const i=[n[0]-r[0],-(n[1]-r[1])],o=e.width*.46/2,s=e.height/2,l=nl(i[0],i[1],o,s);return rl(i[0],i[1],l)}return Yn(n,[e.x,e.y+e.height/2])}};function bm(e){const t=e.x+12,n=e.width>70?24:e.width*.2,r=e.height-28-e.height*.35>1?14:e.height*.175,i=e.y+e.height*.175,o=e.y+e.height-e.height*.175-r;return{boxSize:{width:n,height:r},points:{mainStart:[t,e.y],topBoxStart:[t,i],topBoxEnd:[t,i+r],bottomBoxStart:[t,o],bottomBoxEnd:[t,o+r],mainEnd:[t,e.y+e.height],rightTop:[e.x+e.width,e.y],rightBottom:[e.x+e.width,e.y+e.height]}}}const xD={draw(e,t,n){const r=F.getRoughSVG(e),{boxSize:i,points:o}=bm(t),s=[`M${o.mainStart[0]} ${o.mainStart[1]}`,`H${o.rightTop[0]}`,`V${o.rightBottom[1]}`,`H${o.mainEnd[0]}`,`M${o.topBoxStart[0]} ${o.topBoxStart[1]}`,`h${i.width/2} v${i.height} h${-i.width} v${-i.height} h${i.width/2}`,`M${o.bottomBoxStart[0]} ${o.bottomBoxStart[1]}`,`h${i.width/2} v${i.height} h${-i.width} v${-i.height} h${i.width/2}`,`M${o.mainStart[0]} ${o.mainStart[1]}`,`V${o.topBoxStart[1]}`,`M${o.topBoxEnd[0]} ${o.topBoxEnd[1]}`,`V${o.bottomBoxStart[1]}`,`M${o.bottomBoxEnd[0]} ${o.bottomBoxEnd[1]}`,`V${o.mainEnd[1]}`].join(" "),l=r.path(s,{...n,fillStyle:"solid"});return zt(l,"round"),l},getNearestPoint(e,t){const{boxSize:n,points:r}=bm(e),i=[[r.mainStart,[r.rightTop[0],r.mainStart[1]]],[[r.rightTop[0],r.mainStart[1]],r.rightBottom],[r.rightBottom,[r.mainEnd[0],r.rightBottom[1]]],[[r.mainEnd[0],r.rightBottom[1]],r.mainStart],[r.topBoxStart,[r.topBoxStart[0]+n.width/2,r.topBoxStart[1]]],[[r.topBoxStart[0]+n.width/2,r.topBoxStart[1]],[r.topBoxStart[0]+n.width/2,r.topBoxEnd[1]]],[[r.topBoxStart[0]+n.width/2,r.topBoxEnd[1]],[r.topBoxStart[0]-n.width/2,r.topBoxEnd[1]]],[[r.topBoxStart[0]-n.width/2,r.topBoxEnd[1]],[r.topBoxStart[0]-n.width/2,r.topBoxStart[1]]],[[r.topBoxStart[0]-n.width/2,r.topBoxStart[1]],r.topBoxStart],[r.bottomBoxStart,[r.bottomBoxStart[0]+n.width/2,r.bottomBoxStart[1]]],[[r.bottomBoxStart[0]+n.width/2,r.bottomBoxStart[1]],[r.bottomBoxStart[0]+n.width/2,r.bottomBoxEnd[1]]],[[r.bottomBoxStart[0]+n.width/2,r.bottomBoxEnd[1]],[r.bottomBoxStart[0]-n.width/2,r.bottomBoxEnd[1]]],[[r.bottomBoxStart[0]-n.width/2,r.bottomBoxEnd[1]],[r.bottomBoxStart[0]-n.width/2,r.bottomBoxStart[1]]],[[r.bottomBoxStart[0]-n.width/2,r.bottomBoxStart[1]],r.bottomBoxStart],[r.mainStart,r.topBoxStart],[r.topBoxEnd,r.bottomBoxStart],[r.bottomBoxEnd,r.mainEnd]];return F4(t,i)},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]);return b.isHit(e,n)},getCornerPoints(e){return b.getCornerPoints(e)},getTangentVectorByConnectionPoint(e,t){const{points:n}=bm(e),r=b.getConnectionPoint(e,t);return Yn(n.mainStart,r)},getConnectorPoints(e){const{points:t}=bm(e);return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[t.mainStart[0],e.y+e.height/2]]},getTextRectangle(e){const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=t.width-24-ut.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+24+ut.rectangleAndText+n,y:t.y+(t.height-r)/2}}},LU={draw(e,t,n){const r=F.getRoughSVG(e),i=t.width-45*2-18>1?45:t.width*.25,o=t.height-30-8*2>1?30:t.height*.2,s={x:t.x+t.width-18-i,y:t.y+8,width:i,height:o},l=r.path(`M${t.x} ${t.y} 
            H${t.x+t.width} 
            V${t.y+t.height} 
            H${t.x} Z

            `,{...n,fillStyle:"solid"}),c=xD.draw(e,s,n);return l.append(c),zt(l,"round"),l},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]);return b.isHit(e,n)},getCornerPoints(e){return b.getCornerPoints(e)},getNearestPoint(e,t){return _n(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=b.getConnectionPoint(e,t);return ti(n,r)},getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getTextRectangle(e){const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=t.width-45*2-18>1?45:t.width*.25,o=t.width-18-i-ut.rectangleAndText-n*2;return{height:r,width:o>0?o:0,x:t.x+ut.rectangleAndText+n,y:t.y+(t.height-r)/2}}},_U={draw(e,t,n){const r=F.getRoughSVG(e);return L0(r,t.x,t.y,t.x+t.width,t.y+t.height,{...n,fillStyle:"solid",dashGap:10,strokeLineDash:[10,10]},!1,4)},isInsidePoint(e,t){const n=b.getRectangleByPoints([t,t]);return b.isHit(e,n)},getCornerPoints(e){return b.getCornerPoints(e)},getNearestPoint(e,t){return _n(t,rn.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=rn.getCornerPoints(e),r=b.getConnectionPoint(e,t);return ti(n,r)},getConnectorPoints(e){return b.getEdgeCenterPoints(e)},getTextRectangle(e){const t=b.getRectangleByPoints(e.points),n=Vt(e),r=e.textHeight,i=t.width-ut.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+ut.rectangleAndText+n,y:t.y+(t.height-r)/2}}},NU={[pt.rectangle]:rn,[pt.diamond]:M5,[pt.ellipse]:R5,[pt.parallelogram]:ox,[pt.roundRectangle]:KV,[pt.text]:rn,[pt.triangle]:ZV,[pt.leftArrow]:_V,[pt.trapezoid]:qV,[pt.rightArrow]:XV,[pt.cross]:OV,[pt.star]:eU,[pt.pentagon]:jV,[pt.hexagon]:FV,[pt.octagon]:HV,[pt.pentagonArrow]:WV,[pt.processArrow]:VV,[pt.twoWayArrow]:JV,[pt.comment]:bV,[pt.roundComment]:YV,[pt.cloud]:GT,[gt.process]:rn,[gt.decision]:M5,[gt.connector]:R5,[gt.data]:ox,[gt.terminal]:tU,[gt.database]:vU,[gt.hardDisk]:yU,[gt.internalStorage]:wU,[gt.manualInput]:rU,[gt.preparation]:oU,[gt.manualLoop]:sU,[gt.merge]:aU,[gt.delay]:lU,[gt.storedData]:uU,[gt.or]:dU,[gt.summingJunction]:gU,[gt.predefinedProcess]:cU,[gt.offPage]:hU,[gt.document]:pU,[gt.multiDocument]:mU,[gt.noteCurlyLeft]:CU,[gt.noteCurlyRight]:xU,[gt.noteSquare]:EU,[gt.display]:SU,[xo.swimlaneHorizontal]:Jd,[xo.swimlaneVertical]:Jd,[T0.table]:Jd,[ft.actor]:DU,[ft.useCase]:R5,[ft.container]:AU,[ft.note]:kU,[ft.package]:BU,[ft.combinedFragment]:MU,[ft.class]:Jd,[ft.interface]:Jd,[ft.activation]:rn,[ft.object]:rn,[ft.deletion]:RU,[ft.activityClass]:bU,[ft.simpleClass]:rn,[ft.component]:xD,[ft.componentBox]:LU,[ft.template]:_U,[ft.port]:rn,[ft.branchMerge]:M5,[ft.assembly]:OU,[ft.requiredInterface]:IU,[ft.providedInterface]:FU},vi=e=>NU[e],Np=(e,t)=>{const n=Vt(t),r=t.source.boundId?Bs(e,t.source.boundId):void 0,i=t.target.boundId?Bs(e,t.target.boundId):void 0;let o=r?oc(r,t.source.connection):t.points[0],s=i?oc(i,t.target.connection):t.points[t.points.length-1],l=Qd([s[0]-o[0],s[1]-o[1]])||Ot.right,c=Xj(l);const h=Qf(l),d=Qf(c),g={key:Ms.source,point:o,direction:l,vector:[h.x,h.y]},v={key:Ms.target,point:s,direction:c,vector:[d.x,d.y]};if(r){const y=Jr.isSourceMarkOrTargetMark(t,Xr.none,Ms.source)?0:n,x=Ex(r,t.source.connection);if(g.vector=x,g.boundElement=r,Qa(r)){const E=Qd(ip(x,r.angle));l=E||l}else{const E=Qd(x);l=E||l}g.direction=l,o=oc(r,t.source.connection,l,y),g.point=Ja(o,r)||o}if(i){const y=Jr.isSourceMarkOrTargetMark(t,Xr.none,Ms.target)?0:n,x=Ex(i,t.target.connection);if(v.vector=x,v.boundElement=i,Qa(i)){const E=Qd(ip(x,i.angle));c=E||c}else{const E=Qd(x);c=E||c}v.direction=c,s=oc(i,t.target.connection,c,y),v.point=Ja(s,i)||s}return{source:g,target:v}},oc=(e,t,n,r)=>{const i=b.getRectangleByPoints(e.points);if(n&&r){const o=Qf(n),s=b.getConnectionPoint(i,t);return[s[0]+o.x*r,s[1]+o.y*r]}else return b.getConnectionPoint(i,t)},Ex=(e,t)=>{const n=b.getRectangleByPoints(e.points),r=Ac(e),i=vi(r);let o=[0,0];const s=QS(t);if(s&&e.shape!==pt.ellipse){const l=Qf(s);return[l.x,l.y]}if(i.getEdgeByConnectionPoint){const l=i.getEdgeByConnectionPoint(n,t);if(l){const c=[l[1][0]-l[0][0],l[1][1]-l[0][1]];return DC(c)}}if(i.getTangentVectorByConnectionPoint){const l=i.getTangentVectorByConnectionPoint(n,t);if(l)return DC(l)}return o},Hp=(e,t,n)=>{n=n??Np(e,t);const{sourceRectangle:r,targetRectangle:i}=Xz(e,t,n),{sourceOuterRectangle:o,targetOuterRectangle:s}=f$(r,i),l=n.source.point,c=n.target.point,h=RC(l,o,n.source.direction),d=RC(c,s,n.target.direction);return{sourcePoint:l,nextSourcePoint:h,sourceRectangle:r,sourceOuterRectangle:o,targetPoint:c,nextTargetPoint:d,targetRectangle:i,targetOuterRectangle:s}},HU=(e,t,n)=>{const r=H0(e,{match:i=>fe.isArrowLine(i)?i.source.boundId===i.id||i.target.boundId===i.id:!1,recursion:i=>!0});r.length&&r.forEach(i=>{const o=i.source.boundId===t.id,s=o?"source":"target",l={...i[s]},c=Vi(e,i),h=o?c[0]:c[c.length-1];l.connection=A0(e,h,t);const d=F.findPath(e,i),g=n.findIndex(v=>wt.equals(v.path,d));g===-1?n.push({property:{[s]:l},path:d}):n[g].property={...n[g].property,[s]:l}})};var Xr;(function(e){e.arrow="arrow",e.none="none",e.openTriangle="open-triangle",e.solidTriangle="solid-triangle",e.sharpArrow="sharp-arrow",e.oneSideUp="one-side-up",e.oneSideDown="one-side-down",e.hollowTriangle="hollow-triangle",e.singleSlash="single-slash"})(Xr||(Xr={}));var Ln;(function(e){e.straight="straight",e.curve="curve",e.elbow="elbow"})(Ln||(Ln={}));var Ms;(function(e){e.source="source",e.target="target"})(Ms||(Ms={}));const Jr={isSourceMarkOrTargetMark(e,t,n){return n===Ms.source?e.source.marker===t:e.target.marker===t},isSourceMark(e,t){return Jr.isSourceMarkOrTargetMark(e,t,Ms.source)},isTargetMark(e,t){return Jr.isSourceMarkOrTargetMark(e,t,Ms.target)},isBoundElementOfSource(e,t){return e.source.boundId===t.id},isBoundElementOfTarget(e,t){return e.target.boundId===t.id},getPoints(e,t){let n;if(t.source.boundId){const o=Bs(e,t.source.boundId),s=oc(o,t.source.connection);n=Ja(s,o)||s}else n=t.points[0];let r;if(t.target.boundId){const o=Bs(e,t.target.boundId),s=oc(o,t.target.connection);r=Ja(s,o)||s}else r=t.points[t.points.length-1];const i=t.points.length>2?t.points.slice(1,t.points.length-1):[];return[n,...i,r]}};var Uo;(function(e){e.basicShape="basicShape",e.flowchart="flowchart",e.text="text",e.arrowLine="arrow-line",e.UML="UML"})(Uo||(Uo={}));var I3;(function(e){e.vectorLine="vectorLine"})(I3||(I3={}));var hp;(function(e){e.straight="straight",e.curve="curve"})(hp||(hp={}));const fe={isGeometry:e=>e.type==="geometry",isArrowLine:e=>e.type==="arrow-line"||e.type==="line",isVectorLine:e=>e.type==="vector-line",isLine:e=>fe.isArrowLine(e)||fe.isVectorLine(e),isText:e=>e.type==="geometry"&&e.shape===pt.text,isImage:e=>e.type==="image",isTable:e=>sp.isTable(e),isDrawElement:e=>!!(fe.isGeometry(e)||fe.isLine(e)||fe.isImage(e)||fe.isTable(e)||fe.isSwimlane(e)),isCustomGeometryElement:(e,t)=>{const n=e.getPluginOptions(mT);return!!((n==null?void 0:n.customGeometryTypes)||[]).includes(t.type)},isShapeElement:e=>fe.isImage(e)||fe.isGeometry(e)||fe.isTable(e)||fe.isSwimlane(e),isBasicShape:e=>Object.keys(pt).includes(e.shape),isFlowchart:e=>Object.keys(gt).includes(e.shape),isUML:e=>Object.keys(ft).includes(e.shape),isSwimlane:e=>e.type==="swimlane",isVerticalSwimlane:e=>fe.isSwimlane(e)&&e.shape===xo.swimlaneVertical,isHorizontalSwimlane:e=>fe.isSwimlane(e)&&e.shape===xo.swimlaneHorizontal,isUMLClassOrInterface:e=>Object.keys(ft).includes(e.shape)&&[ft.class,ft.interface].includes(e.shape),isGeometryByTable:e=>fe.isUMLClassOrInterface(e),isElementByTable:e=>fe.isTable(e)||fe.isSwimlane(e)||fe.isGeometryByTable(e)};class Px extends Tc{constructor(){super()}initializeGenerator(){this.activeGenerator=bp(this.board,{getStrokeWidth:()=>(Qe(this.board).length===1&&!mi(this.board),gr),getStrokeOpacity:()=>Qe(this.board).length===1&&!mi(this.board)?1:.5,getRectangle:t=>b.getRectangleByPoints(t.points),hasResizeHandle:()=>gv(this.board,this.element)}),this.lineAutoCompleteGenerator=new ou(this.board),this.shapeGenerator=new ZT(this.board),$8(this.element)&&this.initializeTextManage(),this.getRef().addGenerator(ou.key,this.lineAutoCompleteGenerator),this.getRef().addGenerator(P3.key,this.activeGenerator),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,F.getElementTopHost(this.board),{selected:this.selected}),this.textGenerator&&this.textGenerator.draw(this.getElementG())}onContextChanged(t,n){t.element!==n.element||t.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected}),this.textGenerator&&this.updateText(n.element,t.element)):(!(t.selected===n.selected)||t.selected)&&(this.activeGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected}))}updateText(t,n){Ql(this.element)?this.textGenerator.update(this.element,t.texts,n.texts,this.getElementG()):this.textGenerator.update(this.element,t.text,n.text,this.getElementG())}initializeTextManage(){const t=(n,r,i)=>{r.newText?Ql(n)?Ui.setDrawTexts(this.board,n,{id:i.id,text:r.newText,textHeight:r.height}):Ui.setText(this.board,n,r.newText,r.width,r.height):Ui.setTextSize(this.board,n,r.width,r.height),r.operations&&B8(n,r.operations)};Ql(this.element)?this.textGenerator=new D8(this.board,this.element,this.element.texts,{onChange:t}):this.textGenerator=new kz(this.board,this.element,this.element.text,{onChange:t,getMaxWidth:()=>{var i;let n=Ar(this.element).width;const r=vi(this.element.shape).getTextRectangle;return r&&(n=r(this.element).width),(i=this.element)!=null&&i.autoSize?vT.defaultTextMaxWidth:n}}),this.textGenerator.initialize()}destroy(){var t;super.destroy(),this.activeGenerator.destroy(),this.lineAutoCompleteGenerator.destroy(),(t=this.textGenerator)==null||t.destroy()}}const GU="debug:plait:line-turning",Sx=I0(GU);class jU extends Tc{constructor(){super(),this.boundedElements={}}initializeGenerator(){this.shapeGenerator=new LT(this.board),this.activeGenerator=new eD(this.board),this.initializeTextManages()}initialize(){this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG());const t=Vi(this.board,this.element);this.activeGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected,linePoints:t}),super.initialize(),this.boundedElements=this.getBoundedElements(),this.drawText(),this.getRef().updateActiveSection=()=>{const n=Vi(this.board,this.element);this.activeGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected,linePoints:n})},Sx.isDebug()&&Sx.drawCircles(this.board,this.element.points.slice(1,-1),4,!0)}getBoundedElements(){const t={};if(this.element.source.boundId){const n=Bs(this.board,this.element.source.boundId);n&&(t.source=n)}if(this.element.target.boundId){const n=Bs(this.board,this.element.target.boundId);n&&(t.target=n)}return t}onContextChanged(t,n){const r=this.getBoundedElements(),i=r.source!==this.boundedElements.source||r.target!==this.boundedElements.target;this.boundedElements=r;const o=Vi(this.board,this.element);if(t.element!==n.element||t.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected,linePoints:o}),this.updateText(n.element.texts,t.element.texts),this.updateTextRectangle()):(t.selected!==n.selected||this.activeGenerator.needUpdate()||t.selected)&&this.activeGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected,linePoints:o}),i){this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected,linePoints:o}),this.updateTextRectangle();return}}initializeTextManages(){var t;if((t=this.element.texts)!=null&&t.length){const n=[];this.element.texts.forEach((r,i)=>{const o=this.createTextManage(r,i);n.push(o)}),this.getRef().initializeTextManage(n)}}drawText(){var t;(t=this.element.texts)!=null&&t.length&&this.getRef().getTextManages().forEach((n,r)=>{n.draw(this.element.texts[r].text),this.getElementG().append(n.g)})}createTextManage(t,n){return new Op(this.board,{getRectangle:()=>R8(this.board,this.element,n),onChange:r=>{const i=F.findPath(this.board,this.element),s=[...Kt.get(this.board,i).texts],l=r.width<R3?R3:r.width;s.splice(n,1,{text:r.newText?r.newText:this.element.texts[n].text,position:this.element.texts[n].position,width:l,height:r.height}),Ui.setArrowLineTexts(this.board,this.element,s),r.operations&&B8(this.element,r.operations)},getMaxWidth:()=>vT.defaultTextMaxWidth,textPlugins:[]})}updateText(t,n){if(t===n)return;const r=t.length,i=n.length,o=this.getRef().getTextManages();if(i===r)for(let s=0;s<r;s++)t[s].text!==n[s].text&&o[s].updateText(n[s].text);else this.getRef().destroyTextManage(),this.initializeTextManages(),this.drawText()}updateTextRectangle(){this.getRef().getTextManages().forEach(n=>{n.updateRectangle()})}destroy(){super.destroy(),this.activeGenerator.destroy(),this.getRef().destroyTextManage()}}class $U extends Tc{constructor(){super()}initializeGenerator(){this.shapeGenerator=new NT(this.board),this.activeGenerator=new eD(this.board),this.getRef().updateActiveSection=()=>{const t=lc(this.board,this.element);this.activeGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected,linePoints:t})}}initialize(){this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG());const t=lc(this.board,this.element);this.activeGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected,linePoints:t}),super.initialize()}onContextChanged(t,n){const r=lc(this.board,this.element);t.element!==n.element||t.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected,linePoints:r})):(t.selected!==n.selected||this.activeGenerator.needUpdate()||t.selected)&&this.activeGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected,linePoints:r})}destroy(){super.destroy(),this.activeGenerator.destroy()}}const WU=e=>{const{keyDown:t,dblClick:n}=e;return e.keyDown=r=>{const i=Qe(e),o=i.length===1,s=i[0];if(!F.isReadonly(e)&&!y8(r)&&!C8(r)&&!w8(r)&&o&&fe.isGeometry(s)){r.preventDefault(),B5(e,s);return}t(r)},e.dblClick=r=>{if(r.preventDefault(),!F.isReadonly(e)){const i=Dt(e,Bt(e,r.x,r.y)),o=il(e,i,void 0,!1);if(o&&fe.isGeometry(o)&&I8(o))if(Ql(o)){const s=mz(o,i)||o.texts.find(l=>l.id.includes(es.content))||o.texts[0];B5(e,o,s)}else B5(e,o)}n(r)},e},Tx=e=>{const t=T8();return F.isInPointer(e,t)&&pv(e)},k5=e=>{const t=T8();return F.isInPointer(e,t)&&lh(e)},zU=e=>{const{pointerMove:t,globalPointerUp:n,pointerUp:r}=e;let i=null,o=null,s=null;return e.pointerMove=l=>{i==null||i.remove(),i=Lt();const c=T8(),d=F.isInPointer(e,c)&&pv(e),g=Dt(e,Bt(e,l.x,l.y)),v=F.getPointer(e),y=_8(e,v);if(d){const x=Dc(v);if(v===pt.text){const E=_p(e,cp(e),x.textProperties["font-size"]),T=b.getPoints(b.getRectangleByCenterPoint(g,E.width,E.height));if(o=j8(e,T,cp(e)),s)s.textManage.updateRectangle(),s.g.append(s.textManage.g);else{const D=new Op(e,{getRectangle:()=>Ar(o)});D.draw(o.text),s={g:Lt(),textManage:D},F.getHost(e).append(s.g),s.g.append(D.g)}}else{const E=rD(v,g);o=fp(e,E,v),y.processDrawing(o,i),F.getElementTopHost(e).append(i)}}t(l)},e.pointerUp=l=>{Tx(e)&&o||r(l)},e.globalPointerUp=l=>{Tx(e)&&o&&(iu(e,o),s==null||s.textManage.destroy(),s==null||s.g.remove(),s=null),o=null,i==null||i.remove(),i=null,n(l)},e},VU=e=>{const{pointerDown:t,pointerMove:n,pointerUp:r,keyDown:i,keyUp:o}=e;let s=null,l=null,c=null,h=!1,d;return e.keyDown=g=>{h=Qt.isKeyHotkey("shift",g),i(g)},e.keyUp=g=>{h=!1,o(g)},e.pointerDown=g=>{if(!F.isReadonly(e)&&k5(e)){const v=Dt(e,Bt(e,g.x,g.y));s=v;const y=F.getPointer(e);if(y===pt.text){const x=Dc(y),E=_p(e,cp(e),x.textProperties["font-size"]),T=b.getPoints(b.getRectangleByCenterPoint(v,E.width,E.height)),D=j8(e,T,cp(e));iu(e,D),s=null}}t(g)},e.pointerMove=g=>{l==null||l.remove(),l=Lt();const v=Dt(e,Bt(e,g.x,g.y)),y=F.getPointer(e),x=_8(e,y);if(d==null||d.remove(),s&&k5(e)){let E=Jf([s,v],h);const T=b.getRectangleByPoints(E),[D,S]=Yn(s,v),R=Sv(e,[],{resizePoints:E,activeRectangle:T,directionFactors:[P0(D),P0(S)],isAspectRatio:h,isFromCorner:!0,isCreate:!0});d=R.snapG,F.getElementTopHost(e).append(d),E=Jf(R.activePoints,h),c=fp(e,E,y),x.processDrawing(c,l),F.getElementTopHost(e).append(l)}n(g)},e.pointerUp=g=>{if(k5(e)&&s){const v=Dt(e,Bt(e,g.x,g.y)),{width:y,height:x}=b.getRectangleByPoints([s,v]);if(Math.hypot(y,x)<8){const E=F.getPointer(e);if(E!==pt.text){const T=rD(E,v);c=fp(e,T,E)}}c&&iu(e,c),d==null||d.remove(),l==null||l.remove(),l=null,s=null,c=null;return}r(g)},e},UU=e=>{const t=e,{getDeletedFragment:n,buildFragment:r,insertFragment:i}=t;return t.getDeletedFragment=o=>{const s=k3(t);if(s.length){const l=s.filter(x=>fe.isGeometry(x)),c=s.filter(x=>fe.isArrowLine(x)),h=s.filter(x=>fe.isVectorLine(x)),d=s.filter(x=>fe.isImage(x)),g=s.filter(x=>fe.isTable(x)),v=s.filter(x=>fe.isSwimlane(x)),y=[...Pg(t,l),...Pg(t,d),...Pg(t,g),...Pg(t,v)].filter(x=>!c.includes(x));o.push(...l,...c,...h,...d,...g,...v,...y.filter(x=>!c.includes(x)))}return n(o)},t.buildFragment=(o,s,l,c)=>{const h=k3(t,c);let d=[];if(h.length){if(l===ua.cut){const E=h.filter(D=>fe.isGeometry(D)),T=h.filter(D=>fe.isArrowLine(D));d=Pg(t,E).filter(D=>!T.includes(D))}const g=[...h,...d],v=MV(t,g,s?[s.x,s.y]:[0,0]),x={text:tT(g),type:eu.elements,elements:v};o=cv(o,x)}return r(o,s,l,c)},t.insertFragment=(o,s,l)=>{var h,d,g;const c=Qe(t);if((h=o==null?void 0:o.files)!=null&&h.length){const v=VS.map(x=>"image/"+x),y=!mo(t)&&!(c.length===1&&t.isImageBindingAllowed(c[0]));if(v.includes(o.files[0].type)&&y){const x=o.files[0];rT(t,x,MW,E=>{Ui.insertImage(t,E,s)});return}}if((d=o==null?void 0:o.elements)!=null&&d.length){const v=(g=o.elements)==null?void 0:g.filter(y=>fe.isDrawElement(y));o.elements&&o.elements.length>0&&v.length>0&&RV(t,v,s)}if(o!=null&&o.text&&(!o.elements||o.elements.length===0)&&!(c.length===1&&c[0].children)){Ui.insertText(t,s,o.text);return}i(o,s,l)},t},Pg=(e,t)=>cz(e).filter(r=>t.find(i=>Jr.isBoundElementOfSource(r,i)||Jr.isBoundElementOfTarget(r,i))),XU=e=>{const{pointerDown:t,pointerMove:n,globalPointerUp:r}=e;let i=null,o,s=null,l=null;return e.pointerDown=c=>{const h=AW(),d=F.isInPointer(e,h);if(!F.isReadonly(e)&&d&&lh(e)){const g=Dt(e,Bt(e,c.x,c.y));i=g;const v=F8(e,g);v&&(o=v)}t(c)},e.pointerMove=c=>{s==null||s.remove(),s=Lt();let h=Dt(e,Bt(e,c.x,c.y));if(i){const d=F.getPointer(e);l=b8(e,d,i,h,o,s)}n(c)},e.globalPointerUp=c=>{l&&(Xe.insertNode(e,l,[e.children.length]),F0(e),sh(e,l),fn.updatePointerType(e,Zt.selection)),s==null||s.remove(),s=null,o=null,i=null,l=null,r(c)},e},KU=e=>{let t,n,r,i,o;return fh(e,{key:"draw-line",canResize:()=>!0,hitTest:l=>{const c=z8(e);if(c.length>0){let h=null;return c.forEach(d=>{const g=JT(e,d,l);g&&(h={element:d,handle:g.handle,handleIndex:g.handleIndex})}),h}return null},beforeResize:l=>{if(l.element.shape===Ln.elbow&&l.handle!==Yr.source&&l.handle!==Yr.target){const c=Hp(e,l.element);if(W8(l.element,c))return;const h=[...l.element.points],d=l.handleIndex,g=Ev(e,l.element);r=g[0],i=g[g.length-1],o=oD(e,l.element,g);const v=OT(e,l.element,[...h],o,d);t=v.index,n=v.deleteCount}},onResize:(l,c)=>{let h=[...l.element.points],d={...l.element.source},g={...l.element.target},v=l.handleIndex;const y=F8(e,c.endPoint);if(l.handle===Yr.source||l.handle===Yr.target){const x=l.handle===Yr.source?d:g;h[v]=c.endPoint,y?(x.connection=A0(e,c.endPoint,y),x.boundId=y.id):(x.connection=void 0,x.boundId=void 0)}else if(l.element.shape===Ln.elbow){if(o&&r&&i){const x=XW(o,r,i,v),E=o[v],T=o[v+1],[D,S]=KW(E,T,c,x);let R=[...h].slice(1,h.length-1);t!==null&&n!==null&&(FT(R)?R=[D,S]:R.splice(t,n,D,S),h=[r,...R,i])}}else l.handle===Yr.addHandle?h.splice(v+1,0,c.endPoint):h[v]=c.endPoint;if(!y){v=l.handle===Yr.addHandle?v+1:v;const x=Vi(e,l.element),E=[...h];E[0]=x[0],E[E.length-1]=x[x.length-1],(l.element.shape!==Ln.elbow||l.element.shape===Ln.elbow&&E.length===2)&&E.forEach((T,D)=>{D!==v&&h[v]&&(h[v]=M8(T,h[v]))})}Ui.resizeArrowLine(e,{points:h,source:d,target:g},l.path)},afterResize:l=>{if(l.element.shape===Ln.elbow){const c=Kt.get(e,l.path);let h=c&&[...c.points];if(h.length>2&&o&&r&&i){const d=o[0],g=o[o.length-1];h.splice(0,1,d),h.splice(-1,1,g),h=$l(h),mt.isEquals(h[0],d)&&h.splice(0,1),mt.isEquals(h[h.length-1],g)&&h.pop(),h.length===1&&(h=[]),h=[r,...h,i],Ui.resizeArrowLine(e,{points:h},l.path)}}t=null,n=null,r=null,i=null,o=null}}),e},YU=e=>{const{pointerMove:t,pointerUp:n}=e;let r=null;return e.pointerMove=i=>{if(r==null||r.remove(),F.isReadonly(e)){t(i);return}const o=Object.keys(Ln),s=F.isInPointer(e,o),l=Dt(e,Bt(e,i.x,i.y)),c=jj(e,h=>{const{element:d,handle:g}=h,v=g===Yr.target||g===Yr.source;return fe.isArrowLine(d)&&v});if(s||c){const h=YT(e,l);if(h){const d=L8(e,h,l),g=d.isHitEdge||d.isHitConnector;if(r=bz(e,h,{hasMask:g,hasConnector:!0}),g){const v=ah(F.getRoughSVG(e),d.connectorPoint||d.edgePoint,6,{stroke:Po,strokeWidth:g6,fill:Po,fillStyle:"solid"});r.appendChild(v)}Qa(h)&&Rs(r,b.getCenterPointByPoints(h.points),h.angle),F.getElementTopHost(e).append(r)}}t(i)},e.pointerUp=i=>{r==null||r.remove(),r=null,n(i)},e},ED=e=>fv(e,D0.lineText,HW),qU=e=>{const{dblClick:t}=e;return e.dblClick=n=>{var r,i;if(!F.isReadonly(e)){const o=Dt(e,Bt(e,n.x,n.y)),s=il(e,o);if(s&&fe.isArrowLine(s)){const l=s&&F.findPath(e,s),c=Vi(e,s),h=_n(o,c),d=(r=s.texts)!=null&&r.length?[...s.texts]:[],g=k8(e,s,o);if(jT(e,s,o))Dx(e,s,g);else{const y=ED(e),x=((i=mv("arrow-line"))==null?void 0:i.text)||{},E=sl(y,void 0,x),{width:T,height:D}=W0(e,E,{fontSize:S0,fontFamily:ql}),S=ZS(c,h);d.push({text:E,position:S,width:T,height:D}),Ui.setArrowLineTexts(e,s,d),setTimeout(()=>{if(l){const R=Kt.get(e,l),k=$0(R);Dx(e,R,k.length-1,!0)}})}}}t(n)},e};function Dx(e,t,n,r=!1){const o=$0(t)[n];o.edit(()=>{const s=Ke.string(o.getText()),l=ED(e);(!s||r&&s===l)&&Ui.removeArrowLineText(e,t,n)})}class ZU extends Tc{constructor(){super()}initializeGenerator(){this.imageGenerator=new ru(this.board,{getRectangle:t=>({x:t.points[0][0],y:t.points[0][1],width:t.points[1][0]-t.points[0][0],height:t.points[1][1]-t.points[0][1]}),getImageItem:t=>({url:t.url,width:t.points[1][0]-t.points[0][0],height:t.points[1][1]-t.points[0][1]})}),this.lineAutoCompleteGenerator=new ou(this.board),this.getRef().addGenerator(ou.key,this.lineAutoCompleteGenerator),this.getRef().updateActiveSection=()=>{this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.imageGenerator.processDrawing(this.element,this.getElementG()),this.lineAutoCompleteGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected})}onContextChanged(t,n){t.element!==n.element?(this.imageGenerator.updateImage(this.getElementG(),n.element,t.element),this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected})):(!(t.selected===n.selected)||t.selected)&&(this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected}))}destroy(){super.destroy(),this.imageGenerator.destroy(),this.lineAutoCompleteGenerator.destroy()}}const QU="plait-arrow-line-auto-complete-plugin-key",s0=new WeakMap,JU=e=>{const{pointerDown:t,pointerMove:n,globalPointerUp:r}=e;let i=null,o=null,s,l;return e.pointerDown=c=>{const h=k3(e),d=h.length===1&&h[0],g=qf(e,c.x,c.y);if(!F.isReadonly(e)&&d&&fe.isShapeElement(d)){const v=H8(e,d,!0),y=nD(pc(e,g,d,!0)||g,v),x=v[y];if(x){P6(e);const E=gI(e,x);i=Dt(e,Bt(e,E[0],E[1])),s=d,fn.updatePointerType(e,Ln.elbow)}}t(c)},e.pointerMove=c=>{o==null||o.remove(),o=Lt();let h=Dt(e,Bt(e,c.x,c.y));if(i&&s&&Tt(...pc(e,h,s)||h,...i)>R4*2){const g=b.getRectangleByPoints(s.points),v=Ac(s),y=vi(v);let x=i;y.getNearestCrossingPoint&&(x=y.getNearestCrossingPoint(g,i));const E=Ja(x,s)||x;l=b8(e,Ln.elbow,E,h,s,o),Xe.addSelectionWithTemporaryElements(e,[])}n(c)},e.globalPointerUp=c=>{var h;if(l){Xe.insertNode(e,l,[e.children.length]),F0(e),sh(e,l);const d=(h=e.getPluginOptions(QU))==null?void 0:h.afterComplete;d&&d(l)}else{const d=s0.get(e);d&&(Xe.insertNode(e,d.temporaryArrowLineElement,[e.children.length]),iu(e,d.temporaryShapeElement),s0.delete(e))}i&&(fn.updatePointerType(e,Zt.selection),i=null),o==null||o.remove(),o=null,s=null,l=null,r(c)},e},Ax=100,eX=e=>{const{pointerMove:t,pointerLeave:n,globalPointerUp:r}=e;let i=null,o=null,s=null,l=null,c=null;e.pointerMove=d=>{i==null||i.remove(),F.getBoardContainer(e).classList.remove(bg.crosshair);const g=k3(e);l==null||l.remove(),c==null||c.remove();const v=g.length===1&&g[0],y=qf(e,d.x,d.y);if(!F.isReadonly(e)&&!mi(e)&&v&&fe.isShapeElement(v)){const x=H8(e,v,!0),E=nD(pc(e,y,v,!0)||y,x),T=x[E];if(yn.getElementRef(v).getGenerator(ou.key).recoverAutoCompleteG(),T){if(i=ah(F.getRoughSVG(e),T,NW,{stroke:"none",fill:Yg(j0,_W),fillStyle:"solid"}),F.getActiveHost(e).append(i),F.getBoardContainer(e).classList.add(bg.crosshair),Qa(v)){const R=e.getRectangle(v),k=Bi(e,R);Rs(i,b.getCenterPoint(k),v.angle)}if(fe.isGeometry(v)&&!fe.isText(v)){const R=b.getRectangleByPoints(v.points);let k=b.getEdgeCenterPoints(R)[E];const O=v$(E);let $=qn(k,Ax,O);const z=_8(e,v.shape),K=v.points.map(ne=>qn(ne,Ax+cT(v.points[0],v.points[1],zF(O)),O));l=Lt(),c=Lt(),l.style.opacity="0.6",c.style.opacity="0.6",s=fp(e,K,v.shape),s.angle=v.angle,s.fill=v.fill,s.strokeColor=v.strokeColor,s.strokeStyle=v.strokeStyle,s.strokeWidth=v.strokeWidth,s.groupId=v.groupId;const te=Ja(k,v)||k,se=Ja($,s)||$;o=b8(e,Ln.elbow,te,se,v,l),s0.set(e,{temporaryArrowLineElement:o,temporaryShapeElement:s});const me=A0(e,se,s);o.target.boundId=s.id,o.target.connection=me,z.processDrawing(s,c),F.getElementTopHost(e).append(c)}return}}s0.delete(e),t(d)},e.pointerLeave=d=>{h(),n(d)};const h=()=>{i&&(i==null||i.remove(),F.getBoardContainer(e).classList.remove(bg.crosshair),l==null||l.remove(),c==null||c.remove()),s0.get(e)&&s0.delete(e)};return e.globalPointerUp=d=>{r(d),h()},e},tX=e=>{let t=0;const n=100;return fh(e,{key:"line-text",canResize:()=>!0,hitTest:i=>{let o=null;const s=il(e,i,l=>fe.isArrowLine(l));if(s){const l=k8(e,s,i),h=$0(s)[l];if(l!==-1&&!h.isEditing)return t=l,{element:s,handle:z6.e}}return o},onResize:(i,o)=>{const s=i.element;if(s){const l=o.endPoint,c=Vi(e,s);if(lP(l,c)<=n){const d=_n(l,c,!1),g=ZS(c,d),v=[...s.texts];v[t]={...v[t],position:g},Ui.setArrowLineTexts(e,s,v)}}}}),e},nX=e=>{const{pointerDown:t,pointerMove:n,globalPointerUp:r,afterChange:i,drawSelectionRectangle:o}=e;let s=null,l,c=!1;const h=()=>{const d=Qe(e);return d.length>0&&d.every(g=>fe.isDrawElement(g)&&!fe.isArrowLine(g)||fe.isCustomGeometryElement(e,g))};return e.pointerDown=d=>{if(!h()||F.isReadonly(e)||F.hasBeenTextEditing(e)||!Za(d)){t(d);return}const g=qf(e,d.x,d.y),v=Qe(e),y=on(e,v,!1),x=Bi(e,y),E=yV(x),T=Co(v),D=T?Ir(g,b.getCenterPoint(x),-T):g;E&&b.isHit(b.getRectangleByPoints([D,D]),E)&&(s={elements:[...v],startPoint:g}),t(d)},e.pointerMove=d=>{if(s){d.preventDefault();const g=!!d.shiftKey;d$(e,s);const v=qf(e,d.x,d.y),y=on(e,s.elements,!1),x=Bi(e,y),E=b.getCenterPoint(x);!Co(s.elements)&&s.elements.length>1&&(c=!0),da(e,"with-common-rotate",()=>{if(s&&s.startPoint){let T=_F(s.startPoint,v,E);const D=Co(s.elements);T=Zg(D+T),g&&(T+=Math.PI/12/2,T-=T%(Math.PI/12));let S=T%(Math.PI/2);if(Math.PI/2-S<=k6(5)){const R=Math.PI/2-S;T+=R}if(S<=k6(5)){const R=-S;T+=R}s.angle=Zg(T-D)||0,LF(e,s.elements,s.angle),Or.set(e,!0),F.getBoardContainer(e).classList.add("element-rotating")}});return}n(d)},e.globalPointerUp=d=>{if(r(d),c){c=!1;const g=Qe(e);Xe.addSelectionWithTemporaryElements(e,g)}F.getBoardContainer(e).classList.remove("element-rotating"),g$(e),s=null,Or.set(e,!1)},e.afterChange=()=>{if(i(),l&&(l.remove(),l=null),h()&&!mi(e)){if(c&&s){const d=on(e,s.elements,!1),g=Bi(e,d);l=EC(e,g),l.classList.add(Ew),s.angle&&Rs(l,b.getCenterPoint(g),s.angle)}else{const d=Qe(e),g=on(e,d,!1),v=Bi(e,g);l=EC(e,v),l.classList.add(Ew),Rs(l,b.getCenterPoint(v),Co(d))}F.getActiveHost(e).append(l)}},e.drawSelectionRectangle=()=>{if(c&&s){const d=on(e,s.elements,!1),g=Bi(e,d),v=ga(e,b.inflate(g,gr),{stroke:Po,strokeWidth:gr});return v.classList.add(Dp),s.angle&&Rs(v,b.getCenterPoint(g),s.angle),v}return o()},e};class PD extends Tc{constructor(){super()}initializeGenerator(){this.activeGenerator=bp(this.board,{getStrokeWidth:()=>gr,getStrokeOpacity:()=>1,getRectangle:t=>{const n=o0(t);return n!=null&&n.length?WW(this.board,this.element,n):b.getRectangleByPoints(t.points)},hasResizeHandle:()=>{const t=o0(this.element);return t!=null&&t.length?!1:gv(this.board,this.element)}}),this.tableGenerator=new xv(this.board),this.initializeTextManage(),this.lineAutoCompleteGenerator=new ou(this.board),this.getRef().addGenerator(ou.key,this.lineAutoCompleteGenerator),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.draw()}draw(){this.tableGenerator.processDrawing(this.element,this.getElementG()),this.textGenerator.draw(this.getElementG()),this.rotateVerticalText(),this.lineAutoCompleteGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected})}rotateVerticalText(){this.board.buildTable(this.element).cells.forEach(n=>{if(sp.isVerticalText(n)){const r=BT(this.board,n);if(r){const o=vi(T0.table).getTextRectangle(this.element,{id:n.id,board:this.board});r.g.classList.add("vertical-cell-text"),Rs(r.g,b.getCenterPoint(o),k6(-90))}}})}getDrawShapeTexts(t){return t.filter(n=>bT(n)).map(n=>({id:n.id,text:n.text,textHeight:n.textHeight,board:this.board}))}initializeTextManage(){const t=this.getDrawShapeTexts(this.element.cells);this.textGenerator=new D8(this.board,this.element,t,{onChange:(n,r,i)=>{const o=F.findPath(this.board,n);r.newText&&Ui.setTableText(this.board,o,i.id,r.newText,r.height),r.operations&&B8(n,r.operations)},getRenderRectangle:(n,r)=>{const i=hh(this.board,n,r.id);if(sp.isVerticalText(i)){const o=b.getRectangleByPoints(i.points),s=Vt(i),l=i.textHeight||0,c=o.height-ut.rectangleAndText*2-s*2;return{width:l,height:c>0?c:0,x:o.x+ut.rectangleAndText+s,y:o.y+(o.height-c)/2}}else return CD(i)}}),this.textGenerator.initialize()}onContextChanged(t,n){if(t.element!==n.element||t.hasThemeChanged){const r=o0(n.element);r!=null&&r.length&&(WC(n.element),AT(t.element,r)),this.tableGenerator.processDrawing(t.element,this.getElementG()),this.activeGenerator.processDrawing(t.element,F.getActiveHost(this.board),{selected:this.selected});const i=this.getDrawShapeTexts(n.element.cells),o=this.getDrawShapeTexts(t.element.cells);this.textGenerator.update(t.element,i,o,this.getElementG()),this.rotateVerticalText()}else{const r=t.selected===n.selected,i=o0(t.element);(!r||i!=null&&i.length||t.selected)&&this.activeGenerator.processDrawing(t.element,F.getActiveHost(this.board),{selected:this.selected}),this.selected||WC(t.element)}this.lineAutoCompleteGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected})}destroy(){super.destroy(),this.activeGenerator.destroy(),this.tableGenerator.destroy(),this.textGenerator.destroy(),this.lineAutoCompleteGenerator.destroy()}}const Bx=20;function rX(e){let t;return fh(e,{key:"draw-table",canResize:()=>{const r=Qe(e);return q6(e)&&!Qa(r[0])},hitTest:r=>{const o=Qe(e)[0];if(o&&fe.isElementByTable(o)){let s=e.getRectangle(o),l=e4(e,s,r,o.angle);if(l){const h=$f(e,o);if(h&&q6(e)||!h&&!qm(e,l.handle))return{element:o,handle:l.handle,cursorClass:l.cursorClass,rectangle:s}}const c=Ip(e,o);for(let h=0;h<c.length;h++)if(s=b.getRectangleByPoints(c[h].points),l=e4(e,s,r,0),l&&!qm(e,l.handle))return{element:o,handle:l.handle,cursorClass:l.cursorClass,rectangle:s,options:{cell:c[h]}}}return null},onResize:(r,i)=>{var s,l,c,h;t==null||t.remove();const o=F.findPath(e,r.element);if((s=r.options)!=null&&s.cell&&r.rectangle){const d=T3(r.handle),{originPoint:g,handlePoint:v}=t4(e,d,r.rectangle),y=[i.startPoint,i.endPoint],{xZoom:x,yZoom:E}=V8(y,g,v,!1,!1),T=(l=r.options)==null?void 0:l.cell.points,D=T.map($=>Ul($,g,x,E)),S=D[1][0]-T[1][0],R=D[1][1]-T[1][1],k=D[1][0]-D[0][0],O=D[1][1]-D[0][1];if(S!==0&&k>=Bx){const{columns:$,points:z}=MT(r.element,(c=r.options)==null?void 0:c.cell.columnId,k,S);Xe.setNode(e,{columns:$,points:z},o)}else if(R!==0&&O>=Bx){const{rows:$,points:z}=RT(r.element,(h=r.options)==null?void 0:h.cell.rowId,O,R);Xe.setNode(e,{rows:$,points:z},o)}}else{const d=qm(e,r.handle),g=i.isShift,v=T3(r.handle),{originPoint:y,handlePoint:x}=t4(e,v,r.rectangle),E=vD(e,r,i,{originPoint:y,handlePoint:x},g,d),T=Sv(e,[r.element],E);t=T.snapG,F.getElementTopHost(e).append(t);const D=T.activePoints,S=r.element.points,R=b.getRectangleByPoints(S),k=b.getRectangleByPoints(D),O=k.width-R.width,$=k.height-R.height;let z=[...r.element.columns],K=[...r.element.rows];O!==0&&(z=z.map(te=>te.width?{...te,width:te.width+O*(te.width/R.width)}:te)),$!==0&&(K=K.map(te=>te.height?{...te,height:te.height+$*(te.height/R.height)}:te)),Xe.setNode(e,{points:Jf(D),columns:z,rows:K},o)}},afterResize:r=>{t==null||t.remove(),t=null}}),e}const iX=e=>{const t=e,{drawElement:n,getRectangle:r,isRectangleHit:i,isHit:o,isMovable:s,dblClick:l,keyDown:c,pointerUp:h}=t;return t.drawElement=d=>fe.isElementByTable(d.element)?PD:n(d),t.isHit=(d,g,v)=>{if(fe.isElementByTable(d)){const y=b.getRectangleByPoints(d.points),x=Jd.getNearestPoint(y,g);return Tt(x[0],x[1],g[0],g[1])<=b4||b.isPointInRectangle(y,g)}return o(d,g,v)},t.getRectangle=d=>fe.isElementByTable(d)?b.getRectangleByPoints(d.points):r(d),t.isMovable=d=>fe.isElementByTable(d)?!0:s(d),t.isRectangleHit=(d,g)=>{if(fe.isElementByTable(d)){const v=b.getRectangleByPoints([g.anchor,g.focus]),y=b.getRectangleByPoints(d.points);return h3(b.getCornerPoints(y),v)}return i(d,g)},t.keyDown=d=>{const g=Qe(e),v=g.length===1,y=g[0];if(!F.isReadonly(e)&&!F.hasBeenTextEditing(t)&&!y8(d)&&!C8(d)&&!w8(d)&&v&&(d.preventDefault(),fe.isElementByTable(y))){const x=o0(y);let E=y.cells.find(T=>T.text&&T.textHeight);if(x!=null&&x.length&&(E=x.find(T=>T.text&&T.textHeight)),E){XC(e,E);return}}c(d)},t.dblClick=d=>{if(d.preventDefault(),!F.isReadonly(e)){const g=Dt(e,Bt(e,d.x,d.y)),v=il(e,g);if(v&&fe.isElementByTable(v)){const y=UC(t,v,g);if(y&&y.text&&y.textHeight){XC(e,y);return}}}l(d)},t.pointerUp=d=>{const g=F.isPointer(t,Zt.selection)||F.isPointer(t,Zt.hand);if(!Za(d)||dc(t)||!g){h(d);return}if(q6(t)){const y=Dt(t,Bt(t,d.x,d.y)),x=GW(t)[0],E=UC(t,x,y);E&&E.text&&E.textHeight&&AT(x,[E])}h(d)},t.buildTable=d=>d,rX(t)},O5=e=>fD(e)&&pv(e),I5=e=>fD(e)&&lh(e),oX=e=>{const{pointerMove:t,globalPointerUp:n,pointerUp:r}=e;let i=null,o=null;return e.pointerMove=s=>{i==null||i.remove(),i=Lt();const l=new xv(e),c=F.getPointer(e),h=O5(e),d=Dt(e,Bt(e,s.x,s.y));if(h){const g=cD(c,d);o=O3(c,g),l.processDrawing(o,i),F.getElementTopHost(e).append(i)}t(s)},e.pointerUp=s=>{O5(e)&&o||r(s)},e.globalPointerUp=s=>{O5(e)&&o&&iu(e,o),o=null,i==null||i.remove(),i=null,n(s)},e},sX=e=>{const{pointerDown:t,pointerMove:n,pointerUp:r,keyDown:i,keyUp:o}=e;let s=null,l=null,c=null,h=!1,d;return e.keyDown=g=>{h=Qt.isKeyHotkey("shift",g),i(g)},e.keyUp=g=>{h=!1,o(g)},e.pointerDown=g=>{!F.isReadonly(e)&&I5(e)&&(s=Dt(e,Bt(e,g.x,g.y))),t(g)},e.pointerMove=g=>{l==null||l.remove(),l=Lt();const v=new xv(e),y=Dt(e,Bt(e,g.x,g.y)),x=F.getPointer(e);if(d==null||d.remove(),s&&I5(e)){let E=Jf([s,y],h);const T=b.getRectangleByPoints(E),[D,S]=Yn(s,y),R=Sv(e,[],{resizePoints:E,activeRectangle:T,directionFactors:[P0(D),P0(S)],isAspectRatio:h,isFromCorner:!0,isCreate:!0});d=R.snapG,F.getElementTopHost(e).append(d),E=Jf(R.activePoints,h),c=O3(x,E),v.processDrawing(c,l),F.getElementTopHost(e).append(l)}n(g)},e.pointerUp=g=>{if(I5(e)&&s){const v=Dt(e,Bt(e,g.x,g.y)),{width:y,height:x}=b.getRectangleByPoints([s,v]);if(Math.hypot(y,x)<8){const E=F.getPointer(e),T=cD(E,v);c=O3(E,T)}c&&iu(e,c),d==null||d.remove(),l==null||l.remove(),l=null,s=null,c=null;return}r(g)},e},aX=e=>{const{drawElement:t,buildTable:n,pointerUp:r}=e;return e.drawElement=i=>fe.isSwimlane(i.element)?PD:t(i),e.buildTable=i=>fe.isSwimlane(i)?aV(i):n(i),sX(oX(e))},lX=e=>{const{pointerDown:t,pointerMove:n,dblClick:r,globalKeyDown:i}=e;let o=null,s=null,l=[];const c=()=>{s&&Xe.insertNode(e,s,[e.children.length]),F.getBoardContainer(e).classList.remove("vector-line-closed"),o==null||o.remove(),o=null,s=null,l=[]};return e.pointerDown=h=>{const d=BW(),g=F.isInPointer(e,d);if(!F.isReadonly(e)&&g&&lh(e)){let v=Dt(e,Bt(e,h.x,h.y));if(l.length>1&&Tt(...v,...l[0])<=M3){l.push(l[0]),c();return}l.push(v);return}t(h)},e.pointerMove=h=>{o==null||o.remove(),o=Lt();let d=Dt(e,Bt(e,h.x,h.y));F.getPointer(e)===I3.vectorLine&&l.length>0&&(Tt(...d,...l[0])<=M3?(d=l[0],F.getBoardContainer(e).classList.add("vector-line-closed")):F.getBoardContainer(e).classList.remove("vector-line-closed"),s=yz(e,hp.straight,l,d,o)),n(h)},e.dblClick=h=>{if(!F.isReadonly(e)&&s){c(),fn.updatePointerType(e,Zt.selection);return}r(h)},e.globalKeyDown=h=>{if(!F.isReadonly(e)){const d=Qt.isKeyHotkey("esc",h),g=Qt.isKeyHotkey("v",h);(d||g)&&s&&(c(),g&&fn.updatePointerType(e,Zt.selection))}i(h)},e},uX=e=>(fh(e,{key:"draw-vector-line",canResize:()=>!0,hitTest:n=>{const r=sD(e);if(r.length>0){let i=null;return r.forEach(o=>{const s=JT(e,o,n);s&&(i={element:o,handle:s.handle,handleIndex:s.handleIndex})}),i}return null},onResize:(n,r)=>{let i=[...n.element.points],o=n.handleIndex;if(n.handle===Yr.source||n.handle===Yr.target)if(i[o]=r.endPoint,Lp(n.element.points))i[i.length-1]=r.endPoint;else{const s=n.handle===Yr.source?i[i.length-1]:i[0];Tt(...r.endPoint,...s)<=M3&&(i[o]=s)}else n.handle===Yr.addHandle?i.splice(o+1,0,r.endPoint):i[o]=r.endPoint;Xe.setNode(e,{points:i},n.path)}}),e),SD=e=>{const{drawElement:t,getRectangle:n,isRectangleHit:r,isHit:i,isInsidePoint:o,isMovable:s,isAlign:l,getRelatedFragment:c,getOneHitElement:h}=e;return e.drawElement=d=>fe.isGeometry(d.element)?(fe.isUML(d.element),Px):fe.isArrowLine(d.element)?jU:fe.isVectorLine(d.element)?$U:fe.isImage(d.element)?ZU:t(d),e.getRectangle=d=>{if(fe.isGeometry(d))return b.getRectangleByPoints(d.points);if(fe.isArrowLine(d)){const g=Vi(e,d),v=d.texts.map((x,E)=>R8(e,d,E)),y=b.getRectangleByPoints(g);return b.getBoundingRectangle([y,...v])}if(fe.isVectorLine(d)){const g=lc(e,d),v=b.getRectangleByPoints(g);return b.getBoundingRectangle([v])}return fe.isImage(d)?b.getRectangleByPoints(d.points):n(d)},e.isRectangleHit=(d,g)=>{const v=xz(e,d,g);return v!==null?v:r(d,g)},e.isHit=(d,g,v)=>{const y=Dz(e,d,g,v);return y!==null?y:i(d,g,v)},e.getOneHitElement=d=>d.every(v=>fe.isDrawElement(v))?UT(e,d):h(d),e.isInsidePoint=(d,g)=>{const v=Bz(e,d,g);return v!==null?v:o(d,g)},e.isMovable=d=>{if(fe.isGeometry(d)||fe.isImage(d)||fe.isVectorLine(d))return!0;if(fe.isArrowLine(d)){const g=Qe(e),v=y=>!!g.find(x=>x.id===y);return!!(!d.source.boundId&&!d.target.boundId||d.source.boundId&&v(d.source.boundId)&&g.includes(d)||d.target.boundId&&v(d.target.boundId)&&g.includes(d))}return s(d)},e.isAlign=d=>fe.isGeometry(d)||fe.isImage(d)?!0:l(d),e.getRelatedFragment=(d,g)=>{const v=g!=null&&g.length?g:Qe(e),x=e.children.filter(E=>fe.isArrowLine(E)).filter(E=>{const T=v.find(R=>R.id===E.source.boundId),D=v.find(R=>R.id===E.target.boundId),S=v.includes(E);return T&&D&&!S});return c([...d,...x],g)},aX(iX(CV(lX(eX(YU(uX(KU(tX(qU(nX(XU(JU(zU(VU(UU(WU(e)))))))))))))))))},yt={isAbstract(e){return typeof e.start=="number"&&typeof e.end=="number"}};var Je;(function(e){e.right="right",e.left="left",e.standard="standard",e.upward="upward",e.downward="downward",e.rightBottomIndented="right-bottom-indented",e.rightTopIndented="right-top-indented",e.leftTopIndented="left-top-indented",e.leftBottomIndented="left-bottom-indented"})(Je||(Je={}));var Eo;(function(e){e.logic="logic",e.indented="indented",e.fishBone="fish-bone"})(Eo||(Eo={}));function n4(e){return e.origin.layout?e.origin.layout:yt.isAbstract(e.origin)?X8(n4(e.parent)):e.parent?n4(e.parent):null}const el=e=>e===Je.rightBottomIndented||e===Je.rightTopIndented||e===Je.leftBottomIndented||e===Je.leftTopIndented,cX=e=>e===Je.right||e===Je.left||e===Je.downward||e===Je.upward,Do=e=>e===Je.standard,hi=e=>e===Je.right||e===Je.left||e===Je.standard||el(e),dp=e=>e===Je.right||e===Je.left||e===Je.standard,r4=e=>e===Je.upward||e===Je.downward,sc=e=>e===Je.leftTopIndented||e===Je.rightTopIndented||e===Je.upward,fX=e=>e===Je.leftBottomIndented||e===Je.rightBottomIndented||e===Je.downward,gp=e=>e===Je.left||e===Je.leftTopIndented||e===Je.leftBottomIndented,F3=e=>e===Je.right||e===Je.rightTopIndented||e===Je.rightBottomIndented,F5=e=>el(e)?Eo.indented:(Do(e)||cX(e),Eo.logic),X8=e=>el(e)?F3(e)?Je.right:Je.left:e;class pp{constructor(t,n,r,i){this.x=0,this.y=0,this.vGap=0,this.hGap=0,this.width=0,this.height=0,this.depth=0,this.children=[],this.left=!1,this.up=!1;const o=n.getHorizontalGap(t,i),s=n.getVerticalGap(t,i);this.origin=t,this.width=n.getWidth(t),this.height=n.getHeight(t),this.x=this.y=0,i&&(this.parent=i);const l=n4(this);this.layout=l&&l!==Je.standard?l:r.rootLayoutType;const c=n.getVerticalConnectingPosition(t,i);c&&(this.verticalConnectingPosition=c),this.addGap(o,s)}isRoot(){return this.depth===0}addGap(t,n){const r=this;r.hGap+=t,r.vGap+=n,r.width+=2*t,r.height+=2*n}eachNode(t){TD(this,t)}getBoundingBox(){const t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,right:Number.MIN_VALUE,bottom:Number.MIN_VALUE,width:0,height:0};return this.eachNode(n=>{t.left=Math.min(t.left,n.x),t.top=Math.min(t.top,n.y),t.right=Math.max(t.right,n.x+n.width),t.bottom=Math.max(t.bottom,n.y+n.height)}),t.width=t.right-t.left,t.height=t.bottom-t.top,t}translate(t=0,n=0){this.eachNode(r=>{r.x+=t,r.y+=n})}right2left(){const t=this,n=t.getBoundingBox();t.eachNode(r=>{r.x=r.x-(r.x-n.left)*2-r.width,r.left=!0}),t.translate(n.width,0)}down2up(){const t=this,n=t.getBoundingBox();t.eachNode(r=>{r.y=r.y-(r.y-n.top)*2-r.height,r.up=!0}),t.translate(0,n.height)}}function TD(e,t){var n;(n=e.children)==null||n.forEach(r=>{TD(r,t)}),t(e)}class hX{constructor(t,n,r,i,o,s,l,c,h,d){this.left=t,this.right=n,this.top=r,this.bottom=i,this.width=o,this.height=s,this.rootX=l,this.rootY=c,this.rootWidth=h,this.rootHeight=d}}function dX(e){return{left:e.top,right:e.bottom,top:e.left,bottom:e.right,width:e.height,height:e.width,rootX:e.rootY,rootY:e.rootX,rootWidth:e.rootHeight,rootHeight:e.rootWidth}}var i4;(function(e){e.middle="middle",e.bottom="bottom"})(i4||(i4={}));class eh{constructor(t,n,r,i,o){this.width=t,this.height=n,this.y=r,this.children=i,this.childrenCount=i.length,this.x=0,this.preliminary=0,this.modifier=0,this.shift=0,this.change=0,this.tl=null,this.tr=null,this.el=null,this.er=null,this.msel=0,this.mser=0,this.origin=o}}const Bc=e=>{var t;return e.children?(t=e.children)==null?void 0:t.filter(n=>n instanceof pp?!yt.isAbstract(n.origin):n instanceof eh?!yt.isAbstract(n.origin.origin):!yt.isAbstract(n)):[]},DD=(e,t)=>{const n=e.children.indexOf(t);return e.children.find(r=>{if(r instanceof pp)return yt.isAbstract(r.origin)&&r.origin.end===n;if(r instanceof eh&&e instanceof eh){if(yt.isAbstract(r.origin.origin)){const{end:i}=uc(r.origin.origin,e.origin);return i===n}return!1}return yt.isAbstract(r)&&r.end===n})},gX=(e,t)=>{const n=e.children.indexOf(t);return e.children.find(r=>{if(r instanceof pp)return yt.isAbstract(r.origin)&&r.origin.start===n;if(r instanceof eh&&e instanceof eh){if(yt.isAbstract(r.origin.origin)){const{start:i}=uc(r.origin.origin,e.origin);return i===n}return!1}return yt.isAbstract(r)&&r.start===n})},uc=(e,t)=>{let n=e.start,r=e.end;if(Do(t.layout)){const i=t.origin.rightNodeCount;n>=i&&(r-=i,n-=i)}return{start:n,end:r}};function L3(e,t,n){e.children[t].modifier+=n}function pX(e){return e.childrenCount===0?null:e.children[0]}function AD(e){let t=Bc(e);return e.childrenCount===0?null:t[t.length-1]}function mX(e,t){if(yt.isAbstract(e.children[t].origin.origin))return;let n=e.children[t-1],r=e.children[t],i=n.modifier+n.preliminary+n.width,o=r.modifier+r.preliminary,s=0,l=e,c=e;for(;n||r;){if(n){let d=s+n.modifier+n.preliminary+n.width;d>i&&(i=d),i=MD(l,n,i,s),l=n,s=n.modifier+s,n=AD(n)}if(r){let d=r.modifier+r.preliminary;d<o&&(o=d),o=wX(c,r,o),c=r,r=pX(r)}}const h=i-o;h>0&&L3(e,t,h)}function vX(e){const t=e.children[0];let n=t.preliminary+t.modifier;const r=Bc(e),i=r[r.length-1];let o=i.modifier+i.preliminary+i.width;t.origin.blackNode&&t.origin.blackNode.rootX>t.origin.blackNode.left&&(n=n+(t.origin.blackNode.rootX-t.origin.blackNode.left)),i.origin.blackNode&&i.origin.blackNode.rootX+i.origin.blackNode.rootWidth<i.origin.blackNode.right&&(o=o-(i.origin.blackNode.right-(i.origin.blackNode.rootX+i.origin.blackNode.rootWidth))),t.origin.verticalConnectingPosition&&i.origin.verticalConnectingPosition&&(n=n+t.width-t.origin.vGap,o=o-i.origin.vGap);let s=e.width/2;e.origin.verticalConnectingPosition&&(s=e.width-e.origin.vGap);const l=(n+o)/2-s;l>0?e.preliminary=l:e.children.forEach((c,h)=>{L3(e,h,Math.abs(l))})}function o4(e){if(e.childrenCount!==0){o4(e.children[0]);for(let t=1;t<e.childrenCount;t++){const n=e.children.find(r=>{let i=null;if(yt.isAbstract(r.origin.origin)){let{end:o}=uc(r.origin.origin,e.origin);i=o}return i===t-1});n&&yX(e,n),o4(e.children[t]),mX(e,t)}vX(e)}}function BD(e,t){t+=e.modifier,e.x=e.preliminary+t;for(let n=0;n<e.childrenCount;n++)BD(e.children[n],t)}function yX(e,t,n){const{start:r,end:i}=uc(t.origin.origin,e.origin),o=e.children.indexOf(t),s=e.children[r];let l=e.children[i];const c=s.modifier;let h=l.modifier+l.preliminary+l.width,d=l.modifier,g=e;for(e.children[o].modifier=s.modifier;l.childrenCount;){g=l;const x=AD(l);l=x||l;let E=d+l.modifier+l.preliminary+l.width;h=MD(g,l,h,d),d+=l.modifier,E>h&&(h=E)}const v=t.origin.blackNode?t.origin.blackNode.rootX*2+t.origin.blackNode.rootWidth:t.width,y=h-c;if(y>v){const x=(y-v)/2;L3(e,o,x)}else{const x=(v-y)/2;for(let E=r;E<i+1;E++)L3(e,E,x)}}function MD(e,t,n,r){const i=DD(e,t);return i?Math.max(i.modifier+i.width+r,n):n}function wX(e,t,n){const r=gX(e,t);return r?Math.min(r.modifier+r.preliminary,n):n}function CX(e){o4(e),BD(e,0)}function s4(e,t=0){e.x=t,e.children.forEach(n=>{if(yt.isAbstract(n.origin)){let r=0;for(let i=n.origin.start;i<=n.origin.end;i++){const o=e.children[i].getBoundingBox();r=Math.max(o.width,r)}s4(n,e.x+e.width/2+r)}else s4(n,e.x+e.width/2)})}function xX(e,t){let n=e.y+e.height,r=null;i(e);function i(o){o.children.forEach((s,l)=>{const c=o.children.find(d=>yt.isAbstract(d.origin)&&d.origin.end===l-1);if(c){const d=r!=null&&r.origin.isCollapsed?t.getExtendHeight(s.origin):0;n=EX(o,c)+d}if(yt.isAbstract(s.origin))return;let h=n+s.vGap;r&&!dp(r.layout)&&r.origin.children.length>0&&(r.origin.isCollapsed?h=h+t.getExtendHeight(s.origin):h=h+t.getIndentedCrossLevelGap()),s.y=h,r=s,n=s.y+s.height,i(s)})}}function EX(e,t){const n=t.origin,r=e.children.indexOf(t),i=e.children[n.start],o=e.children[n.end];e.children[r].y=i.y;const s=i.y;let l=o.y+o.height,c=o,h=e;for(;c!=null&&c.children.length;){h=c;const y=Bc(h);c=y[y.length-1];const x=DD(h,c);l=x?Math.max(x.y+x.height,c.y+c.height):c.y+c.height}const d=l-s,g=t.blackNode?t.blackNode.height:t.height,v=t.blackNode?t.blackNode.rootY*2+t.blackNode.rootHeight:t.height;if(v>d){const y=(v-d)/2;for(let x=n.start;x<=n.end;x++)e.children[x].eachNode(E=>{E.y+=y})}else{const y=(d-v)/2;e.children[r].y+=y}return Math.max(t.y+g,i.y+d)}function RD(e,t,n){n?t.y=e.x:t.x=e.x,e.children.forEach((r,i)=>{RD(r,t.children[i],n)})}function bD(e,t,n=0){var r,i;if(t){if(yt.isAbstract(e.origin)){const{start:o,end:s}=uc(e.origin,e.parent);for(let l=o;l<=s;l++){const c=(r=e.parent)==null?void 0:r.children[l].getBoundingBox().right;n=Math.max(c,n)}}e.x=n,n+=e.width}else{if(yt.isAbstract(e.origin))for(let o=e.origin.start;o<=e.origin.end;o++){const s=(i=e.parent)==null?void 0:i.children[o].getBoundingBox().bottom;n=Math.max(s,n)}e.y=n,n+=e.height}e.children.forEach(o=>{bD(o,t,n)})}const kD=(e,t)=>{const n=[];return e.children.forEach(r=>{n.push(kD(r,t))}),t?(e.blackNode&&(e.blackNode=dX(e.blackNode)),new eh(e.height,e.width,e.x,n,e)):new eh(e.width,e.height,e.y,n,e)};class PX{constructor(){}layout(t,n,r,i,o=!1,s){const l=[],c=[],h=this.buildLayoutNode(t,r,i,l,s);switch(l.filter(g=>g.origin.children.length>0).forEach(g=>{const v=g.layout,y=i.toTop||hi(i.rootLayoutType)&&sc(v),x=i.toLeft||!hi(i.rootLayoutType)&&gp(v),E=hi(v),T=this.layout(g.origin,F5(v),r,{toTop:y,toLeft:x,rootLayoutType:i.rootLayoutType},E,g.parent);!i.toTop&&y&&n!==Eo.indented&&T.down2up(),!i.toLeft&&x&&T.right2left();const D=T.getBoundingBox();g.width=D.width,g.height=D.height,g.blackNode=new hX(D.left,D.right,D.top,D.bottom,D.width,D.height,T.x,T.y,T.width,T.height),c.push(T)}),n){case Eo.indented:s4(h),xX(h,r);break;case Eo.fishBone:break;case Eo.logic:default:bD(h,o);const g=kD(h,o);CX(g),RD(g,h,o);break}const d=[];return l.filter(g=>g.origin.children.length>0).forEach((g,v)=>{if(g.parent){const y=c[v];y.parent=g.parent;let x,E;hi(g.parent.layout)?(x=y.x,E=0):(x=0,E=y.y),y.translate(g.x-x,g.y-E);const D=g.parent.children.indexOf(g),S=g.parent.children[D];g.parent.children[D]=Object.assign(S,y);const R=d.find(k=>k.parent===g.parent&&!yt.isAbstract(g.origin));R?(R.offsetX<x&&(R.offsetX=x),R.offsetX<E&&(R.offsetX=E)):yt.isAbstract(g.origin)||d.push({parent:g.parent,offsetX:x,offsetY:E})}}),d.forEach(g=>{g.parent.children.forEach(v=>v.translate(g.offsetX,g.offsetY))}),h}buildLayoutNode(t,n,r,i,o){const s=new pp(t,n,r,o);if(!s.origin.isCollapsed){const l=[s];let c;for(;c=l.pop();)if(!c.origin.isCollapsed){const h=c.origin.children,d=h?h.length:0;if(c.children=[],h&&d)for(let g=0;g<d;g++){const v=new pp(h[g],n,r,c);c.children.push(v),v.depth=c.depth+1,(c.layout!==v.layout&&(F5(c.layout)!==F5(v.layout)||hi(c.layout)!==hi(v.layout))||yt.isAbstract(v.origin))&&!v.origin.isCollapsed?i.push(v):l.push(v)}}}return s}}class SX{static layout(t,n,r){const i=new PX;if(Do(r)){const g=t.children.length,v=[],y=[],x={...t};for(let S=0;S<g;S++){const R=t.children[S];if(yt.isAbstract(R)&&R.end<t.rightNodeCount){v.push(R);continue}if(yt.isAbstract(R)&&R.start>=t.rightNodeCount){y.push(R);continue}S<t.rightNodeCount?v.push(R):y.push(R)}x.children=v;const E=i.layout(x,Eo.logic,n,{toLeft:!1,toTop:!1,rootLayoutType:r},!0);x.children=y;const T=i.layout(x,Eo.logic,n,{toLeft:!0,toTop:!1,rootLayoutType:r},!0);T.right2left(),E.translate(T.x-E.x,T.y-E.y);const D=E.children.filter(S=>yt.isAbstract(S.origin));return E.children=E.children.filter(S=>!yt.isAbstract(S.origin)),T.children.forEach(S=>{E.children.push(S),S.parent=E}),E.children=E.children.concat(D),E.x=T.x,E.origin=t,E}const o=el(r),s=o?Eo.indented:Eo.logic,l=o?!0:hi(r),c=sc(r),h=gp(r),d=i.layout(t,s,n,{toTop:c,toLeft:h,rootLayoutType:r},l);return c&&d.down2up(),h&&d.right2left(),d}}const _3=new WeakMap;var nn;(function(e){e.top="top",e.right="right",e.bottom="bottom",e.left="left"})(nn||(nn={}));const N3={[Je.right]:[nn.right],[Je.left]:[nn.left],[Je.upward]:[nn.top],[Je.downward]:[nn.bottom],[Je.rightBottomIndented]:[nn.right,nn.bottom],[Je.rightTopIndented]:[nn.right,nn.top],[Je.leftBottomIndented]:[nn.left,nn.bottom],[Je.leftTopIndented]:[nn.left,nn.top]};var Xl;(function(e){e.mind="mind"})(Xl||(Xl={}));const TX=["#A287E0","#6E80DB","#6DC4C4","#E0B75E","#B1C675","#77C386","#C18976","#E48484","#E582D4","#6AB1E4"],DX=["#F94239","#FF8612","#F3D222","#B3D431","#00BC7B","#06ADBF","#476BFF","#4E49BE","#8957E5","#FE5DA1"],AX=["#6D89C1","#F2BDC7","#B796D9","#5BA683","#B3D431 ","#F2DC6C","#F7C98D","#60B4D1","#838F9E","#C1A381"],BX=["#459476","#9A894F","#D48444","#E9C358 ","#4B9D9D","#C14C41","#827086 ","#60718D","#D38183","#9DC19D"],MX=["#3DD1AE","#F6C659","#A9E072","#FF877B ","#F693E7","#5DCFFF","#868AF6","#4C6DC7","#D97C26","#268FAC"],RX=["#E46C57","#579360","#B98339","#3A62D1 ","#B883B7","#42ABE5","#2B9D8F","#A4705E","#265833","#787865"],OD={...VP,branchColors:TX,rootFill:"#f5f5f5",rootTextColor:ei},bX={...UP,branchColors:DX,rootFill:ei,rootTextColor:"#FFFFFF"},kX={...XP,branchColors:AX,rootFill:"#FFFFFF",rootTextColor:ei},OX={...KP,branchColors:BX,rootFill:"#153D5D",rootTextColor:"#FFFFFF"},IX={...YP,branchColors:MX,rootFill:"#FFFFFF",rootTextColor:ei},FX={...qP,branchColors:RX,rootFill:"#FFFFFF",rootTextColor:ei},ID=[OD,bX,kX,OX,IX,FX],LX={isMindThemeColor(e){return!!(e.branchColors&&e.rootFill&&e.rootTextColor)}},Tv="plait-mind-plugin-key",Kr=4,h0="#6698FF",Mx="#AAAAAA",a4=2,Rx=8,FD=10,Rf=2,Ua=20,Sg=10,_X=Yg("#000000",.2),NX="#6698FF",bx="white",HX=240;var B0;(function(e){e.mindCentralText="mind-center-text",e.abstractNodeText="abstract-node-text"})(B0||(B0={}));function l4(e,t){const n=e.getPluginOptions(Tv),r=t.data.emojis.length;return{width:LD(t)*r+r*2*n.emojiPadding+(r-1)*n.spaceBetweenEmojis,height:t.height}}function LD(e){return qt.isMind(e)?20:16}const th=(e,t,n)=>t[n],M0={branch:{color:Mx,width:2},shape:{strokeColor:Mx,strokeWidth:2}},Dv={shape:{rectangleRadius:4,strokeWidth:2,fill:"none"}},GX=e=>{const t=e.rightNodeCount,n=e.children;let r=[],i=[];for(let o=0;o<n.length;o++){const s=n[o];if(yt.isAbstract(s)&&s.end<t){r.push(s);continue}if(yt.isAbstract(s)&&s.start>=t){i.push(s);continue}o<t?r.push(s):i.push(s)}return{leftChildren:i,rightChildren:r}},Gp=e=>{const t=Be.findParent(e);if(!t)return;const n=t.children.indexOf(e);return t.children.find(r=>yt.isAbstract(r)&&n>=r.start&&n<=r.end)},_D=e=>{const t=Be.findParent(e);if(!t)return[];const n=t.children.indexOf(e);return t.children.filter(r=>yt.isAbstract(r)&&r.start>n)},ND=(e,t)=>{const n=[];return t.filter(r=>!yt.isAbstract(r)&&!qt.isMind(r)).forEach(r=>{const i=Gp(r);if(i&&t.indexOf(i)===-1&&n.indexOf(i)===-1){const{start:o,end:s}=i;Be.getParent(r).children.slice(o,s+1).every(h=>t.indexOf(h)>-1)&&n.push(i)}}),n},HD=(e,t)=>{const n=[];return t.filter(r=>!yt.isAbstract(r)&&!qt.isMind(r)).forEach(r=>{const i=Gp(r);if(i&&t.indexOf(i)>0){const o=n.findIndex(s=>s.abstract===i);o===-1?n.push({abstract:i,references:[r]}):n[o].references.push(r)}}),n};function GD(e,t){const n=t.indexOf(e.references[0]),r=t.indexOf(e.references[e.references.length-1]);return{start:n,end:r}}const jD=(e,t,n=1,r=!0,i=new Map)=>{const o=Kt.parent(e,t),s=t[t.length-1]!==0;let l;if(!s)l=o.children.filter(g=>yt.isAbstract(g));else{const g=Kt.get(e,wt.previous(t));l=_D(g)}if(l.length&&l.forEach(g=>{let v=i.get(g);v||(v={start:0,end:0},i.set(g,v)),v.start=v.start+n,v.end=v.end+n}),!s)return i;const c=Kt.get(e,wt.previous(t)),h=Gp(c),d=!r&&h&&h.end===t[t.length-1]-1;if(h&&!d){let g=i.get(h);g||(g={start:0,end:0},i.set(h,g)),g.end=g.end+n}return i},$D=(e,t,n=new Map)=>(t.forEach(r=>{if(!qt.isMind(r)){const i=_D(r).filter(s=>!t.includes(s));i.length&&i.forEach(s=>{let l=n.get(s);l||(l={start:0,end:0},n.set(s,l)),l.start=l.start-1,l.end=l.end-1});const o=Gp(r);if(o&&!t.includes(o)){let s=n.get(o);s||(s={start:0,end:0},n.set(o,s)),s.end=s.end-1}}}),n),WD=(e,t)=>!!Be.getAncestors(e,t).find(r=>yt.isAbstract(r)),K8=(e,t)=>yt.isAbstract(t)||WD(e,t)?VD(e,t):th(e,t,"branchColor")||th(e,t,"strokeColor")||UD(e,t),Y8=(e,t)=>th(e,t,"branchShape")||nh.bight,zD=(e,t)=>th(e,t,"branchWidth")||th(e,t,"strokeWidth")||a4,jX=(e,t)=>Jo(t.branchWidth)?M0.branch.width:t.branchWidth,VD=(e,t)=>t.branchColor||t.strokeColor?t.branchColor||t.strokeColor:M0.branch.color,UD=(e,t)=>{const n=F.findPath(e,t);return $X(e,n[1])},$X=(e,t)=>{const n=q8(e),r=n.branchColors.length,i=t%r;return n.branchColors[i]},q8=e=>{const n=F.getThemeColors(e).find(r=>r.mode===e.theme.themeColorMode);return n&&LX.isMindThemeColor(n)?n:OD},Z8=(e,t)=>{if(qt.isMind(t)){const n=q8(e).rootFill;return t.strokeColor||n}return yt.isAbstract(t)||WD(e,t)?t.strokeColor||M0.shape.strokeColor:th(e,t,"strokeColor")||UD(e,t)},Av=(e,t)=>t.strokeStyle||Wi.solid,jp=(e,t)=>t.strokeWidth||(yt.isAbstract(t)?M0.shape.strokeWidth:Dv.shape.strokeWidth),XD=(e,t)=>{if(t.fill)return t.fill;const n=q8(e).rootFill;return t.isRoot?n:Dv.shape.fill},mp=(e,t)=>th(e,t,"shape")||su.roundRectangle;function Q8(e){const t=uh(e);t==null||t.edit(()=>{},n=>{const r=n;return r.key==="Enter"&&!r.shiftKey})}const L5=(e,t)=>(t!=null&&t.length?t:Qe(e)).filter(r=>Be.isMindElement(e,r)),kx=e=>{const t=[];return e.forEach(n=>{N3[n].forEach(i=>{!t.includes(i)&&!t.includes(ey(i))&&t.push(i)})}),t},WX=(e,t)=>{const n=N3[e],r=N3[t];if(!r)throw new Error(`unexpected layout: ${t} on correct layout`);return r.find(i=>n.includes(ey(i)))},zX=(e,t)=>{const n=t===nn.left||t===nn.right;let r=Je.standard;switch(e){case Je.left:r=Je.right;break;case Je.right:r=Je.left;break;case Je.downward:r=Je.upward;break;case Je.upward:r=Je.downward;break;case Je.rightBottomIndented:r=n?Je.leftBottomIndented:Je.rightTopIndented;break;case Je.leftBottomIndented:r=n?Je.rightBottomIndented:Je.leftTopIndented;break;case Je.rightTopIndented:r=n?Je.leftTopIndented:Je.rightBottomIndented;break;case Je.leftTopIndented:r=n?Je.rightTopIndented:Je.leftBottomIndented;break}return r},J8=()=>Je.standard,Ox=e=>{const t=[],n=e.map(ey);for(const r in Je){const i=Je[r],o=N3[i];if(o){const s=o.some(c=>e.includes(c)),l=o.some(c=>n.includes(c));s&&!l&&t.push(i)}}return t},ey=e=>{let t=nn.right;switch(e){case nn.top:t=nn.bottom;break;case nn.bottom:t=nn.top;break;case nn.right:t=nn.left;break;case nn.left:t=nn.right;break}return t},vc=e=>e.layout||J8(),VX=e=>{function t(r,i){return r.isRoot?Kr*12:(i&&i.isRoot(),Kr*3)}function n(r,i){return r.isRoot?Kr*12:Kr*8.5}return{getHeight(r){return Pn.getNodeHeight(e,r)},getWidth(r){return Pn.getNodeWidth(e,r)},getHorizontalGap(r,i){const o=i&&i.layout||vc(r),s=hi(o);return el(o)?Kr*6:s?n(r):t(r,i)},getVerticalGap(r,i){const o=i&&i.layout||vc(r);return el(o)?Kr*3.5:hi(o)?t(r,i):n(r)},getVerticalConnectingPosition(r,i){if(r.shape===su.underline&&i&&dp(i.layout))return i4.bottom},getExtendHeight(r){return 0},getIndentedCrossLevelGap(){return Kr*1}}},ty=14,KD=18,UX=34,XX={defaultTextMaxWidth:34*14},KX="#6698FF80",Qu=3.5,Ix=10,km=8,YX="",qX="",ZX=e=>fv(e,B0.mindCentralText,YX),QX=e=>fv(e,B0.abstractNodeText,qX),Bv=(e,t,n,r,i)=>{let o=ql,s=ty;t?(o=ql,s=KD):n&&(o=ql);const l=s*UX;return W0(e,r,{fontSize:s,fontFamily:o},i||l)},Fx=(e,t)=>{const n=ZX(e),r=Bv(e,!0,!1,sl(n)),i=Mv(n,r.width,r.height,{layout:Je.right});i.isRoot=!0,i.type="mindmap";const o=Pn.getNodeWidth(e,i),s=Pn.getNodeHeight(e,i);return i.points=[[t[0]-o/2,t[1]-s/2]],i},Mv=(e,t,n,r)=>{const i={id:Sn(),data:{topic:sl(e)},children:[],width:t,height:n};let o;for(o in r)Jo(r[o])||(i[o]=r[o]);return i},JX=["fill","strokeColor","strokeWidth","strokeStyle","shape","layout","branchColor","branchWidth","branchShape"],YD=e=>e.children.reduce((n,r)=>n+YD(r),0)+e.children.length,qD=(e,t)=>{let n=Be.findParent(t);for(;n;){if(n===e)return!0;n=Be.findParent(n)}return!1},jg=e=>{let t=[];return e.forEach(n=>{e.some(i=>qD(i,n))||t.push(n)}),t},Lx=(e,t)=>e.y>t.y,ZD=e=>{const t={...e};t.id=Sn(),t.children=[];for(const n of e.children)t.children.push(ZD(n));return t},ny=(e,t,n)=>{const r={};t.isRoot||(JX.forEach(o=>{r[o]=t[o]}),delete r.layout);const i=Mv("",ty,dT,r);Xe.insertNode(e,i,n),F0(e),sh(e,i),setTimeout(()=>{Q8(i)})},eK=e=>{const t=[],n=[];for(let r=0;r<e.length;r++){const i=Be.getParent(e[r]),o=n.indexOf(i);o===-1?(n.push(i),t.push([e[r]])):t[o].push(e[r])}return{parentElements:n,abstractIncludedGroups:t}},_x=(e,t)=>{if(qt.isMind(t))return KD;if(Be.isMindElement(e,t))return ty;throw new Error("can not find default font-size")},vp={horizontal:{nodeAndText:Kr*2.5,emojiAndText:Kr*1.5},vertical:{nodeAndText:Kr,nodeAndImage:Kr,imageAndText:Kr*1.5}},ry={horizontal:{nodeAndText:Kr*4,emojiAndText:Kr*2},vertical:{nodeAndText:Kr*2}},_5=(e,t)=>{const r=qt.isMind(t)?ry.horizontal.nodeAndText:vp.horizontal.nodeAndText,i=jp(e,t);return r+i},N5=(e,t)=>{const n=qt.isMind(t),r=jp(e,t);return(n?ry.vertical.nodeAndText:vp.vertical.nodeAndText)+r},Nx=e=>qt.isMind(e)?ry.horizontal.emojiAndText:vp.horizontal.emojiAndText,Pn={getNodeWidth(e,t){const n=_5(e,t);return Be.hasEmojis(t)?Pn.getEmojiLeftSpace(e,t)+l4(e,t).width+Nx(t)+Pn.getTopicDynamicWidth(e,t)+n:n+Pn.getTopicDynamicWidth(e,t)+n},getNodeHeight(e,t){const n=E5(e,t.data.topic,{fontSize:S0,fontFamily:ql},Pn.getTopicMaxDynamicWidth(e,t)),r=d0(e,t,n.width,n.height),i=N5(e,t);return Be.hasImage(t)?Pn.getTextTopSpace(e,t)+r.height+i:i+r.height+i},getTopicDynamicWidth(e,t){var s;const n=E5(e,t.data.topic,{fontSize:_x(e,t),fontFamily:ql},Pn.getTopicMaxDynamicWidth(e,t)),r=d0(e,t,n.width,n.width),i=t.manualWidth||r.width,o=Be.hasImage(t)?(s=t.data.image)==null?void 0:s.width:0;return Math.max(i,o)},getTopicHeight(e,t){const n=E5(e,t.data.topic,{fontSize:S0,fontFamily:ql},Pn.getTopicMaxDynamicWidth(e,t));return d0(e,t,n.width,n.height).height},getTopicMaxDynamicWidth(e,t){var n;return Math.max(XX.defaultTextMaxWidth,t.manualWidth||0,Be.hasImage(t)?(n=t.data.image)==null?void 0:n.width:0)},getNodeNewDynamicWidth(e,t,n){const r=t.manualWidth||t.width;return Math.max(r,n)},getNodeResizableMinWidth(e,t){const n=Pn.getNodeTopicMinWidth(e,t);return Be.hasImage(t)&&t.data.image.width>n?t.data.image.width:n},getNodeTopicMinWidth(e,t){const n=_x(e,t),r=L$(t.data.topic);return(r[Zr.fontSize]?Number(r[Zr.fontSize]):null)||n},getTextLeftSpace(e,t){const n=_5(e,t);return Be.hasEmojis(t)?Pn.getEmojiLeftSpace(e,t)+l4(e,t).width+Nx(t):n},getTextTopSpace(e,t){const n=N5(e,t);return Be.hasImage(t)?Pn.getImageTopSpace(e,t)+t.data.image.height+vp.vertical.imageAndText:n},getImageTopSpace(e,t){return jp(e,t)+vp.vertical.nodeAndImage},getEmojiLeftSpace(e,t){const n=e.getPluginOptions(Tv);return _5(e,t)-n.emojiPadding},getEmojiTopSpace(e,t){return N5(e,t)}},tK=e=>{const t=S0;return typeof e=="string"?t:Zl.getMarksByElement(e)[Zr.fontSize]||t},d0=(e,t,n,r)=>{const i=Pn.getNodeTopicMinWidth(e,t);return{width:n<i?i:n,height:r}};function nr(e){const t=e.x+e.hGap;let n=e.y+e.vGap;const r=e.width-e.hGap*2,i=e.height-e.vGap*2;return{x:t,y:n,width:r,height:i}}function nK(e,t){const n=Pn.getNodeWidth(e,t),r=Pn.getNodeHeight(e,t);return{x:t.points[0][0],y:t.points[0][1],width:n,height:r}}function QD(e,t,n){const r=Be.getNode(n);return!!(r&&Ap(t[0],t[1],nr(r))===0)}function JD(e,t){let{x:n,y:r}=nr(Be.getNode(t));n=n+Pn.getEmojiLeftSpace(e,t);const{width:i}=l4(e,t);return{x:n,y:r,width:i,height:Pn.getNodeHeight(e,t)}}function eA(e,t){let n=nr(t);return tA(e,n,t.origin)}function tA(e,t,n){const r=t.x+Pn.getTextLeftSpace(e,n),i=t.y+Pn.getTextTopSpace(e,n),o=Pn.getTopicDynamicWidth(e,n);return{height:Pn.getTopicHeight(e,n),width:o,x:r,y:i}}function Rv(e,t){let{x:n,y:r}=nr(Be.getNode(t));const i=t.manualWidth||t.width;n=i>t.data.image.width?n+Pn.getTextLeftSpace(e,t)+(i-t.data.image.width)/2:n+Pn.getTextLeftSpace(e,t),r=Pn.getImageTopSpace(e,t)+r;const{width:o,height:s}=t.data.image;return{x:n,y:r,width:o,height:s}}const nA=(e,t,n)=>{const r=Rv(e,t),i=b.getOutlineRectangle(r,-9/2);return b.isPointInRectangle(i,n)},rK=(e,t,n)=>{const r=Rv(e,t);return XS(r,aa).find(s=>b.isHit(b.getRectangleByPoints([n,n]),s.rectangle))},iK=(e,t)=>{const n={...t};return delete n.isRoot,delete n.rightNodeCount,delete n.type,n.layout===Je.standard&&delete n.layout,n},u4=e=>{const t={...e};return delete t.start,delete t.end,t},oK=(e,t)=>{const n={...t};return Ke.string(n.data.topic)||(n.data.topic={children:[{text:""}]}),n==null||delete n.strokeColor,n==null||delete n.fill,n==null||delete n.shape,n==null||delete n.strokeWidth,n==null||delete n.isCollapsed,{...n,layout:n.layout??Je.right,isRoot:!0,type:"mindmap"}},sK=(e,t)=>{iT(e,t),yn.getElementRef(t).getGenerator(ru.key).setFocus(t,!0)},Qm=(e,t)=>{n$(e),yn.getElementRef(t).getGenerator(ru.key).setFocus(t,!1)},rA=(e,t,n)=>{const r=uh(t),{height:i}=r.getSize(void 0,n);if(Math.abs(i-t.height)>2)return i},iA=e=>{yn.getElementG(e).classList.add("dragging-node"),!e.isCollapsed&&e.children.forEach(t=>{iA(t)})},oA=e=>{yn.getElementG(e).classList.remove("dragging-node"),!e.isCollapsed&&e.children.forEach(t=>{oA(t)})},Hx=(e,t)=>{lu(e,t),t?F.getBoardContainer(e).classList.add("mind-node-dragging"):F.getBoardContainer(e).classList.remove("mind-node-dragging")},aK=(e,t,n)=>{let r=Bc(e);if(qt.isMind(e)&&Do(vc(e))){const s=sA(e,t);s&&(r=r.slice(0,e.rightNodeCount)),s||(r=r.slice(e.rightNodeCount,r.length),n=[...n,n[n.length-1]-e.rightNodeCount])}let i=n[n.length-1]!==0,o=n[n.length-1]!==((r==null?void 0:r.length)||0);return e.isCollapsed&&(o=!1,i=!1),{hasPreviousNode:i,hasNextNode:o}},sA=(e,t)=>{const n=t.target;return qt.isMind(e)&&Do(vc(e))&&e.children.indexOf(n)!==-1&&e.children.indexOf(n)<e.rightNodeCount||qt.isMind(n)&&Do(vc(n))&&t.detectResult==="right"},lK=(e,t,n)=>{if(!t.origin.isRoot&&!yt.isAbstract(t.origin)){const r=Ao.getCorrectLayoutByElement(e,t==null?void 0:t.parent.origin);if(Do(r)){const o=t.parent.children.findIndex(s=>s===t)>=(t.parent.origin.rightNodeCount||0);return $a(n,[o?"right":"left"])}if(gp(r))return $a(n,["right"]);if(F3(r))return $a(n,["left"]);if(r===Je.upward)return $a(n,["bottom"]);if(r===Je.downward)return $a(n,["top"])}else{const r=Ao.getCorrectLayoutByElement(e,t==null?void 0:t.origin);if(Do(r))return $a(n,["top","bottom"]);if(r===Je.upward)return $a(n,["left","right","bottom"]);if(r===Je.downward)return $a(n,["left","right","top"]);if(gp(r))return $a(n,["right","top","bottom"]);if(F3(r))return $a(n,["left","top","bottom"])}return null},$a=(e,t)=>{const n=e;return t.forEach(r=>{const i=n.findIndex(o=>o===r);i!==-1&&n.splice(i,1)}),n.length?n:null},uK=(e,t,n,r)=>{let i=null;return pi(e,o=>{if(!Be.isMindElement(e,o)||i)return;const s=Be.getNode(o),l=cK(s,t);l&&(i=lK(e,s,l)),n=null;const c=r.every(h=>fK(h,s.origin));i&&c&&(n={target:s.origin,detectResult:i[0]})},oh(e)),n},cK=(e,t)=>{const{x:n,y:r,width:i,height:o}=nr(e),s=r+o/2,l=n+i/2,c=e.y,h=e.y+e.height,d=e.x,g=e.x+e.width,v=[];return t[1]>r&&t[1]<r+o?(t[0]>d&&t[0]<l&&v.push("left"),t[0]>l&&t[0]<g&&v.push("right"),(t[0]>n&&t[0]<l||t[0]>l&&t[0]<n+i)&&(t[1]<s?v.push("top"):v.push("bottom")),v.length?v:null):t[0]>n&&t[0]<n+i?(t[1]>c&&t[1]<s&&v.push("top"),t[1]>s&&t[1]<h&&v.push("bottom"),(t[1]>r&&t[1]<r+o||t[1]>s&&t[1]<r+o)&&(t[0]<l?v.push("left"):v.push("right")),v.length?v:null):null},fK=(e,t)=>e!==t&&!qD(e,t),hK=(e,t)=>{let n=F.findPath(e,t==null?void 0:t.target);const r=qt.isMind(t==null?void 0:t.target)?vc(t==null?void 0:t.target):Ao.getCorrectLayoutByElement(e,Be.getParent(t==null?void 0:t.target)),i=Bc(t.target);return r4(r)&&((t.detectResult==="top"||t.detectResult==="bottom")&&n.push(i.length),t.detectResult==="right"&&(n=wt.next(n))),dp(r)&&(t.detectResult==="right"&&(qt.isMind(t==null?void 0:t.target)&&Do(r)?n.push(t==null?void 0:t.target.rightNodeCount):n.push(i.length)),t.detectResult==="left"&&n.push(i.length),t.detectResult==="bottom"&&(n=wt.next(n))),el(r)&&(sc(r)&&t.detectResult==="top"&&(n=wt.next(n)),fX(r)&&t.detectResult==="bottom"&&(n=wt.next(n)),gp(r)&&t.detectResult==="left"&&n.push(i.length),F3(r)&&t.detectResult==="right"&&n.push(i.length)),n};function dK(e,t){const n=nr(t);return iy(e,n,t.origin)}function iy(e,t,n){const r=XD(e,n),i=Z8(e,n),o=jp(e,n),s=Av(e,n),l=Sc(s,o),c=b.inflate(t,-o);return L0(F.getRoughSVG(e),c.x,c.y,c.x+c.width,c.y+c.height,{stroke:i,strokeWidth:o,fill:r,fillStyle:"solid",strokeLineDash:l},!1,Dv.shape.rectangleRadius)}var jn;(function(e){e.left="left",e.center="center",e.right="right"})(jn||(jn={}));var An;(function(e){e.top="top",e.middle="middle",e.bottom="bottom"})(An||(An={}));const wo=(e,t)=>{let n=e.x,r=e.y;return t[0]===jn.center&&(n=e.x+e.width/2),t[0]===jn.right&&(n=e.x+e.width),t[1]===An.middle&&(r=e.y+e.height/2),t[1]===An.bottom&&(r=e.y+e.height),[n,r]},ac=(e,t)=>t?e.left?nn.left:nn.right:e.up?nn.top:nn.bottom,Xo=(e,t)=>{if(t===nn.left&&(e[0]===jn.right?e[0]=jn.left:e[0]===jn.left&&(e[0]=jn.right)),t===nn.bottom||t===nn.top){let n=jn.center,r=An.middle;e[1]===An.top&&(n=jn.left),e[1]===An.bottom&&(n=jn.right),e[0]===jn.left&&(r=An.top),e[0]===jn.right&&(r=An.bottom),e[0]=n,e[1]=r}t===nn.top&&(e[1]===An.bottom?e[1]=An.top:e[1]===An.top&&(e[1]=An.bottom))};function gK(e,t,n,r=!0,i=null,o,s){const l=Y8(e,t.origin),c=o||zD(e,n.origin),h=i||K8(e,n.origin),d=Av(e,n.origin),g=mp(e,n.origin)===su.underline;let v,y,x,E,T=t,D=n;const S=nr(T),R=nr(D);v=T.x+T.width/2,y=Lx(t,n)?S.y:S.y+S.height,x=t.left?D.x+D.hGap+R.width:D.x+D.hGap,E=g?D.y+D.height-D.vGap:D.y+D.height/2;let k=Lx(t,n)?t.left?[-1,-1]:[1,-1]:t.left?[-1,1]:[1,1],O=[[v,y],[v,y],[v,y],[v,E-D.hGap*3*k[1]/5],[v,E-D.hGap*k[1]/5],[v+D.hGap*k[0]/4,E],[v+D.hGap*k[0]*3/5,E],g&&r?[x+(D.width-D.hGap*2)*k[0],E]:[x,E],g&&r?[x+(D.width-D.hGap*2)*k[0],E]:[x,E],g&&r?[x+(D.width-D.hGap*2)*k[0],E]:[x,E]];const $=Sc(d,c);if(l===nh.polyline){const K=[[v,y],[v,E],[x,E],g&&r?[x+(D.width-D.hGap*2)*k[0],E]:[x,E]];return bs(K,{stroke:h,strokeWidth:c,strokeLineDash:$})}const z=To(O,.001);return oI(z,{stroke:h,strokeWidth:c})}function pK(e,t,n,r,i=null,o,s){const l=Y8(e,t.origin),c=i||K8(e,n.origin),h=o||zD(e,n.origin),d=Av(e,n.origin),g=l===nh.polyline?!0:!t.origin.isRoot,v=mp(e,t.origin),x=mp(e,n.origin)===su.underline,E=v===su.underline,T=nr(n),D=nr(t),S=ac(n,r),R=[jn.right,An.middle],k=[jn.left,An.middle];Xo(R,S),Xo(k,S),r&&E&&!t.origin.isRoot&&(R[1]=An.bottom),r&&x&&(k[1]=An.bottom);let O=wo(D,R),$=wo(T,k);const K=g?qn(O,8,S):O;let te=g?[O,K,K]:[];const se=(t.hGap+n.hGap)/3,me=-(t.hGap+n.hGap)/2.4;let ne=[K,qn(K,se,S),qn($,me,S),$];const oe=qn($,T.width,S),ve=x&&r?[oe,oe,oe]:[],ge=To([...te,...ne,...ve]),Me=Sc(d,h);let Pe;if(l===nh.polyline){const le=qn(K,8,S),we=[...te,le,r?[le[0],$[1]]:[$[0],le[1]],$,...ve];Pe=bs(we,{stroke:c,strokeWidth:h,strokeLineDash:Me})}else Pe=F.getRoughSVG(e).curve(ge,{stroke:c,strokeWidth:h,strokeLineDash:Me});return d===Wi.dotted&&zt(Pe,"round"),Pe}function aA(e,t,n,r,i,o,s,l){return Be.isIndentedLayout(t.origin)?gK(e,t,n,i,o,s):pK(e,t,n,r,o,s)}const mK="foreign-object-emoji";class vK{constructor(t){this.board=t,this.emojiComponentRef=null}draw(t,n,r){this.destroy();const i={board:this.board,emojiItem:n,element:r,fontSize:LD(r)};this.emojiComponentRef=this.board.renderEmoji(t,i)}destroy(){this.emojiComponentRef&&(this.emojiComponentRef.destroy(),this.emojiComponentRef=null)}}const Ty=class Ty{constructor(t){this.board=t,this.emojiGenerators=[]}drawEmojis(t){if(this.destroy(),Be.hasEmojis(t)){this.g=Lt(),this.g.classList.add("emojis");const n=JD(this.board,t),r=G4(n.x,n.y,n.width,n.height);r.classList.add(mK),this.g.append(r);const i=document.createElement("div");return i.classList.add("node-emojis-container"),r.append(i),this.emojiGenerators=t.data.emojis.map(o=>{const s=new vK(this.board);return s.draw(i,o,t),s}),this.g}}destroy(){this.g&&this.g.remove(),this.emojiGenerators.forEach(t=>t.destroy()),this.emojiGenerators=[]}};Ty.key="node-emojis-generator";let yp=Ty;const yK=(e,t,n,r)=>{const i=yn.getElementRef(t),o=Be.getNode(t),s=Lt();s.classList.add("dragging","fake-node","plait-board-attached");const l={...o,x:o.x+n,y:o.y+r},c=eA(e,o),h=dK(e,l),d=uh(t).g.cloneNode(!0);if(kg(d,c.width,c.height,c.x+n,c.y+r),s==null||s.append(h),s==null||s.append(d),Be.hasEmojis(t)){const v=i.getGenerator(yp.key).g.cloneNode(!0),y=JD(e,t);kg(v,y.width,y.height,y.x+n,y.y+r),s==null||s.append(v)}if(Be.hasImage(t)){const v=i.getGenerator(ru.key).g.cloneNode(!0),y=Rv(e,t);kg(v,y.width,y.height,y.x+n,y.y+r),s==null||s.append(v)}return s},wK=(e,t,n)=>{const r=t.target,i=Lt(),o=Kt.get(e,wt.parent(n)),s=Ao.getLayoutByElement(o),l=hi(s),{hasNextNode:c,hasPreviousNode:h}=aK(o,t,n),d=30,g=12;let v,y,x,E;if(!h&&!c){const K=Be.getNode(o),te=nr(K);E=ac(K,l),x=K,qt.isMind(r)&&Do(s)&&(t.detectResult==="left"?(E=nn.left,x.left=!0):(E=nn.right,x.left=!1));const se=[jn.right,An.middle];Xo(se,E);const me=wo(te,se);if(el(s)){const ne=[jn.center,sc(s)?An.top:An.bottom],oe=wo(te,ne);y=qn(oe,g,E),y[1]=sc(s)?y[1]-g:y[1]+g}else y=qn(me,d,E)}else if(!h&&c){const K=Kt.get(e,n);x=Be.getNode(K);const te=nr(x);E=ac(x,l);const se=[jn.left,An.top];Xo(se,E);let me=-12;Be.isIndentedLayout(o)&&(me=sc(s)?me/2+x.height-x.vGap:0),y=wo(te,se),y=Tm(y,me,E)}else if(h&&!c){const K=Kt.get(e,wt.previous(n));x=Be.getNode(K);const te=nr(x);E=ac(x,l);const se=[jn.left,An.bottom];Xo(se,E);let me=g;Be.isIndentedLayout(o)&&(me=sc(s)?-me-(x.height-x.vGap):me),y=wo(te,se),y=Tm(y,me,E)}else{const K=Kt.get(e,wt.previous(n));x=Be.getNode(K);const te=nr(x),se=Kt.get(e,n),me=Be.getNode(se),ne=nr(me),oe=[jn.left,An.bottom],ve=[jn.left,An.top];E=ac(x,l),Xo(oe,E),Xo(ve,E);const ge=wo(te,oe),Me=wo(ne,ve);y=[(ge[0]+Me[0])/2,(ge[1]+Me[1])/2]}let T=y,D=y;const S=l?g:d,R=l?d:g;T=Tm(T,-S/2,E),D=Tm(D,S/2,E),D=qn(D,R,E);const k=Math.min(T[0],D[0]),O=Math.min(T[1],D[1]);v={...x,x:k,y:O,width:d,height:g,hGap:Be.isIndentedLayout(o)?Kr*4+(x.origin.strokeWidth||a4):0,vGap:Be.isIndentedLayout(o)?Kr:0};const $=L0(F.getRoughSVG(e),v.x,v.y,v.x+d,v.y+g,{stroke:h0,strokeWidth:2,fill:h0,fillStyle:"solid"}),z=aA(e,Be.getNode(o),v,l,!1,h0,a4);return i==null||i.appendChild(z),i==null||i.appendChild($),i};var di;(function(e){e.start="start",e.end="end"})(di||(di={}));var $g;(function(e){e.start="start",e.resizing="resizing",e.end="end"})($g||($g={}));function Gx(e,t,n,r,i){const o=Lt(),s=Be.getParent(n),l=Ao.getCorrectLayoutByElement(e,n),c=hi(l),h=s.children.slice(n.start,n.end+1),d=on(e,h,!0),g=Bi(e,d);let v=b.getOutlineRectangle(g,-3.5);i&&(v=Mg(v,i,r,c));const y=xK(t,v.x,v.y,v.x+v.width,v.y+v.height,c,{stroke:h0,strokeWidth:1,fillStyle:"solid"}),x=[jn.center,An.top],E=[jn.center,An.bottom],T=ac(Be.getNode(n),c);Xo(x,T),Xo(E,T);let D=wo(v,x),S=wo(v,E);const R=qn(D,-10/2,T),k=qn(D,Ix/2,T),O=qn(S,-10/2,T),$=qn(S,Ix/2,T),z=t.line(R[0],R[1],k[0],k[1],jx(r===di.start)),K=t.line(O[0],O[1],$[0],$[1],jx(r===di.end));return CK(e,r,c),zt(z,"round"),zt(K,"round"),o.append(z),o.append(K),o.append(y),o}function jx(e){return e?{stroke:h0,strokeWidth:4,fillStyle:"solid"}:{stroke:KX,strokeWidth:3,fillStyle:"solid"}}function CK(e,t,n){t?n?F.getBoardContainer(e).classList.add("abstract-resizing-horizontal"):F.getBoardContainer(e).classList.add("abstract-resizing-vertical"):(F.getBoardContainer(e).classList.remove("abstract-resizing-horizontal"),F.getBoardContainer(e).classList.remove("abstract-resizing-vertical"))}function xK(e,t,n,r,i,o,s){const l=Math.abs(t-r),c=Math.abs(n-i),h=5,v=10+4*2;if(o){const y=(l-v-h*2)/2,x=c-h*2;return e.path(`M${t+h},${n}
            l${y},0
            m${v},0
            l${y},0
            a${h},${h},0,0,1,${h},${h}
            l0,${x}
            a${h},${h},0,0,1,-${h},${h}
            l-${y},0
            m-${v},0
            l-${y},0
            a${h},${h},0,0,1,-${h},-${h}
            l0,-${x}
            a${h},${h},0,0,1,${h},-${h}`,s)}else{const y=(c-v-h*2)/2,x=l-h*2;return e.path(`M${t+h},${n}
            l${x},0
            a${h},${h},0,0,1,${h},${h}
            l0,${y}
            m0,${v}
            l0,${y}
            a${h},${h},0,0,1,-${h},${h}
            l-${x},0
            a${h},${h},0,0,1,-${h},-${h}
            l0,-${y}
            m0,-${v}
            l0,-${y}
            a${h},${h},0,0,1,${h},-${h}`,s)}}const Dy=class Dy extends ts{canDraw(t,n){return!!n.selected}draw(t,n){const r=Lt(),i=Be.getNode(t),o=nr(i),s=Bi(this.board,o),l=jp(this.board,t),c=gr,h=b.inflate(s,c),d=L0(F.getRoughSVG(this.board),h.x,h.y,h.x+h.width,h.y+h.height,{stroke:h0,strokeWidth:c,fill:""},!0,Dv.shape.rectangleRadius+(c+l)/2);return yt.isAbstract(t)&&(this.abstractOutlineG=Gx(this.board,F.getRoughSVG(this.board),t),r.append(this.abstractOutlineG),d.classList.add("abstract-element")),r.appendChild(d),r.classList.add(Dp),r}updateAbstractOutline(t,n,r){const i=Gx(this.board,F.getRoughSVG(this.board),t,n,r);this.abstractOutlineG&&(this.abstractOutlineG.replaceWith(i),this.abstractOutlineG=i)}};Dy.key="mind-node-active";let yc=Dy;const Mg=(e,t,n,r)=>r?n===di.start?{...e,y:t,height:e.height+e.y-t}:{...e,height:t-e.y}:n===di.start?{...e,x:t,width:e.width+e.x-t}:{...e,width:t-e.x},EK=(e,t,n,r,i,o)=>{const s=Be.getNode(r),{start:l,end:c}=uc(s.origin,i),h=n[l],d=n[c];if(t===di.start){const g=n.filter(E=>yt.isAbstract(E)&&E.end<r.start);let v;if(g.length){const E=g.map(T=>{const{end:D}=uc(T,i);return D}).sort((T,D)=>D-T)[0];v=n[E+1]}else v=n[0];const y=on(e,[v],!0),x=on(e,[d],!1);return o?{max:x.y-Qu,min:y.y-Qu}:{max:x.x-Qu,min:y.x-Qu}}else{const g=n.filter(E=>yt.isAbstract(E)&&E.start>r.end);let v;if(g.length){const E=g.map(T=>{const{start:D}=uc(T,i);return D}).sort((T,D)=>T-D)[0];v=n[E-1]}else{const E=n.filter(T=>!yt.isAbstract(T));v=n[E.length-1]}const y=on(e,[v],!0),x=on(e,[h],!1);return o?{max:y.y+y.height+Qu,min:x.y+x.height+Qu}:{max:y.x+y.width+Qu,min:x.x+x.width+Qu}}},lA=(e,t,n)=>{const r=Ao.getCorrectLayoutByElement(e,t),i=hi(r),s=Be.getParent(t).children.slice(t.start,t.end+1);let l=on(e,s,!0);l=b.getOutlineRectangle(l,-3.5);const c=$x(l,i,di.start),h=$x(l,i,di.end),d=b.getRectangleByPoints([n,n]);if(b.isHit(d,c))return di.start;if(b.isHit(d,h))return di.end},$x=(e,t,n)=>{let r;if(n===di.start){const i=t?e.y:e.x;r=Mg(e,i+km/2,di.end,t),r=Mg(r,i-km/2,n,t)}else{const i=t?e.y+e.height:e.x+e.width;r=Mg(e,i-km/2,di.start,t),r=Mg(r,i+km/2,n,t)}return r};function PK(e,t,n,r){const i=t.filter(d=>!yt.isAbstract(d)),o=i.map(d=>on(e,[d],!1)),s=on(e,[i[0]],!0),l={x:s.x-s.width,y:s.y-s.height,width:s.width,height:s.height},c=on(e,[i[i.length-1]],!0),h={x:c.x+c.width,y:c.y+c.height,width:c.width,height:c.height};o.push(h),o.unshift(l);for(let d=0;d<o.length-1;d++){const g=r?o[d].y:o[d].x,v=r?o[d].height:o[d].width;if(n>=g+v/2&&n<=o[d+1][r?"y":"x"]+o[d+1][r?"height":"width"]/2)return d-1}return 0}function SK(e,t,n){let r;const i=Qe(e).filter(o=>yt.isAbstract(o)).find(o=>(r=lA(e,o,n),r));return t===i||(t&&(yn.getElementRef(t).getGenerator(yc.key).updateAbstractOutline(t),t=void 0),i&&(t=i,yn.getElementRef(t).getGenerator(yc.key).updateAbstractOutline(t,r))),t}const uA=e=>{const t=Be.findParent(e);if(t){const n=t.children.findIndex(r=>r.id===e.id);if(t.isRoot&&vc(t)===Je.standard&&t.rightNodeCount&&n<=t.rightNodeCount-1)return!0}return!1},cA=(e,t,n,r=[])=>{let i=r.findIndex(s=>wt.equals(s.path,t));const o=Kt.get(e,t);return i===-1?r.push({path:t,rightNodeCount:o.rightNodeCount+n}):r[i].rightNodeCount+=n,r},fA=(e,t,n=[])=>(t.forEach(r=>{if(uA(r)){const i=Be.getParent(r),o=F.findPath(e,i);let s=n.findIndex(l=>wt.equals(l.path,o));s===-1?n.push({path:o,rightNodeCount:i.rightNodeCount-1}):n[s].rightNodeCount-=1}}),n);function oy(e,t){const n=Bc(t);return F.findPath(e,t).concat(n.length)}function TK(e,t){const n=F.findPath(e,t);return Y.next(n)}const sy=(e,t)=>{const n=Be.getAncestors(e,t);n.unshift(t);const r=n[n.length-1];let i=vc(r);if(qt.isMind(t))return i;const o=Be.getNode(t);let s=i;i===Je.standard&&(s=o.left?Je.left:Je.right);let l=null;const c=n.find(h=>h.layout||yt.isAbstract(h));if(c)if(yt.isAbstract(c)){const h=Be.getParent(c),d=sy(e,h);l=X8(d)}else l=c==null?void 0:c.layout;if(l===Je.standard||!l)return s;{const h=WX(s,l);return h?zX(l,h):l}},hA=(e,t)=>{const n=[];t.layout&&n.unshift(sy(e,t));let r=Be.findParent(t);for(;r;)r.layout&&n.unshift(r.layout),r=Be.findParent(r);return n},DK=(e,t)=>{const n=Be.findParent(t);if(n){const r=hA(e,n);if(r[0]===Je.standard){const h=Be.getNode(t);r[0]=h.left?Je.left:Je.right}const i=kx(r);let o=Ox(i);const s=[r[r.length-1]],l=kx(s),c=Ox(l);return o=o.filter(h=>c.some(d=>d===h)),o}},c4=e=>{const t=e.layout;if(t)return t;const n=!qt.isMind(e)&&Be.getParent(e);return yt.isAbstract(e)&&n?X8(c4(n)):n?c4(n):J8()},Ao={getAvailableSubLayoutsByElement:DK,getBranchLayouts:hA,getLayoutByElement:c4,getCorrectLayoutByElement:sy},qt={isMind:e=>e.type==="mindmap"},Be={hasLayout(e,t){return Ao.getLayoutByElement(e)===t},isIndentedLayout(e){const t=Ao.getLayoutByElement(e);return el(t)},isMindElement(e,t){return!!(t.data&&t.data.topic&&!Jo(t.width)&&!Jo(t.height))},getParent(e){if(qt.isMind(e))throw new Error("mind root node can not get parent");return jf.get(e)},findParent(e){return qt.isMind(e)?void 0:jf.get(e)},getRoot(e,t){const n=F.findPath(e,t);return Kt.get(e,n.slice(0,1))},getAncestors(e,t){const n=F.findPath(e,t),r=[];for(const i of wt.ancestors(n,{reverse:!0})){const o=Kt.get(e,i);o&&!F.isBoard(o)&&r.push(o)}return r},getNode(e){const t=_3.get(e);if(!t)throw new Error(`can not get node from ${JSON.stringify(e)}`);return t},findParentNode(e){if(qt.isMind(e))return;const t=Be.getParent(e);return Be.getNode(t)},hasEmojis(e){return!!e.data.emojis},hasImage(e){return!!e.data.image},getEmojis(e){return e.data.emojis}};var su;(function(e){e.roundRectangle="round-rectangle",e.underline="underline"})(su||(su={}));var nh;(function(e){e.bight="bight",e.polyline="polyline"})(nh||(nh={}));function AK(e,t,n){const i=jX(e,t.origin),o=VD(e,t.origin),s=Av(e,t.origin),l=t.parent,c=Y8(e,t.origin),h=nr(t);let d=l.children.slice(t.origin.start,t.origin.end+1).map(te=>te.origin);const g=on(e,d,!0),v=ac(t,n),y=[jn.right,An.top],x=[jn.right,An.bottom],E=[jn.left,An.middle];Xo(y,v),Xo(x,v),Xo(E,v);let T=wo(g,y),D=wo(g,x),S=wo(h,E),R=cT(S,T,n)-15*2;T=qn(T,15,v);let k=qn(T,R,v);D=qn(D,15,v);let O=qn(D,R,v),$=qn(S,-15,v);const z=Sc(s,i);if(c===nh.polyline){const te=Lt(),se=bs([T,k,$,O,D],{stroke:o,strokeWidth:i}),me=bs([S,$],{stroke:o,strokeWidth:i,strokeLineDash:z});return te.appendChild(se),te.appendChild(me),te}return F.getRoughSVG(e).path(`M${T[0]},${T[1]} Q${k[0]},${k[1]} ${$[0]},${$[1]} Q${O[0]},${O[1]} ${D[0]},${D[1]} M${S[0]},${S[1]} L${$[0]},${$[1]}`,{stroke:o,strokeWidth:i,strokeLineDash:z})}const dA=(e,t)=>{t.forEach((n,r)=>{const i=r.start+n.start,o=r.end+n.end,s=F.findPath(e,r);i>o?Xe.removeNode(e,s):Xe.setNode(e,{start:i,end:o},s)})},gA=(e,t)=>{const n=t.rightNodeCount,r=t.children.find(i=>yt.isAbstract(i)&&i.end>=n&&i.start<n);if(r){const i=F.findPath(e,r);Xe.setNode(e,{end:n-1},i)}},BK=(e,t)=>{let n=jg(t);const{parentElements:r,abstractIncludedGroups:i}=eK(n);i.forEach((o,s)=>{const l=r[s];MK(e,l,o)})},MK=(e,t,n)=>{const r=n.map(l=>t.children.indexOf(l)).sort((l,c)=>l-c),i=t==null?void 0:t.rightNodeCount,o=r[0],s=r[r.length-1];if(Do(Ao.getLayoutByElement(t))&&i&&o<i&&s>=i){const l=t.children.length,c=[...F.findPath(e,t),l],h=r.filter(g=>g>=i),d=r.filter(g=>g<i);H5(e,c,d[0],d[d.length-1]),H5(e,wt.next(c),h[0],h[h.length-1])}else{const l=[...F.findPath(e,t),t.children.length];H5(e,l,o,s)}},H5=(e,t,n,r)=>{const i=QX(e),{width:o,height:s}=Bv(e,!1,!1,sl(i)),l=Mv(i,o,s,{strokeWidth:M0.branch.width,branchWidth:M0.branch.width});l.start=n,l.end=r,Xe.insertNode(e,l,t),F0(e),sh(e,l)},RK=(e,t,n,r,i)=>{const o={data:{...t.data,topic:n},...d0(e,t,r,i)},s=F.findPath(e,t);Xe.setNode(e,o,s)},bK=(e,t,n,r)=>{const i=F.findPath(e,t),{width:o,height:s}=d0(e,t,n,r),l={manualWidth:o,height:s};Xe.setNode(e,l,i)},kK=(e,t,n,r)=>{const i={...d0(e,t,n,r)};let o=Math.ceil(t.width)===Math.ceil(i.width),s=Math.ceil(t.height)===Math.ceil(i.height);if(t.manualWidth&&(o=!0),!o||!s){const l=F.findPath(e,t);Xe.setNode(e,i,l)}},pA=(e,t,n)=>{const r=e.pathRef(n);t.forEach(i=>{r.current&&Xe.insertNode(e,i,r.current)}),r.unref()},OK=(e,t,n,r)=>{var l;const i=Kt.get(e,Y.parent(r)),o=[...Y.parent(r),(l=i.children)==null?void 0:l.length],s=t.map(c=>{const{start:h,end:d}=GD(c,n);return{...c.abstract,start:h+r[r.length-1],end:d+r[r.length-1]}});pA(e,s,o)},mA=(e,t)=>{t.forEach(n=>{Xe.setNode(e,{rightNodeCount:n.rightNodeCount},n.path)})},IK=(e,t)=>{if(Be.isMindElement(e,t)){av(e,t);const n=F.findPath(e,t);if(t.isCollapsed){const r={isCollapsed:!1};Ss.withoutSaving(e,()=>{Xe.setNode(e,r,n)})}ny(e,t,oy(e,t))}},FK=(e,t)=>{if(Be.isMindElement(e,t)&&!qt.isMind(t)&&!yt.isAbstract(t)){const n=F.findPath(e,t);if(uA(t)){const i=cA(e,n.slice(0,1),1);mA(e,i)}const r=jD(e,Y.next(n));dA(e,r),ny(e,t,TK(e,t))}},LK=(e,t)=>{Xe.insertNode(e,t,[e.children.length]),Xe.addSelectionWithTemporaryElements(e,[t])},_K=(e,t,n)=>{const i=[...t.data.emojis||[]];i.push(n);const o={data:{...t.data,emojis:i}},s=F.findPath(e,t);Xe.setNode(e,o,s)},NK=(e,t,n)=>{const r=t.data.emojis.filter(s=>s!==n),i={data:{topic:t.data.topic}};Be.hasImage(t)&&(i.data.image=t.data.image),r.length>0&&(i.data.emojis=r);const o=F.findPath(e,t);Xe.setNode(e,i,o)},HK=(e,t,n,r)=>{const i={data:{...t.data}},o=t.data.emojis.map(l=>l===n?r:l);i.data.emojis=o;const s=F.findPath(e,t);Xe.setNode(e,i,s)},GK=(e,t)=>{Qm(e,t);const n={data:{...t.data}};delete n.data.image;const r=F.findPath(e,t),i=Pn.getNodeNewDynamicWidth(e,t,0),o=rA(e,t,i);o&&(n.height=o),Xe.setNode(e,n,r)},jK=(e,t,n)=>{const r={data:{...t.data,image:n}},i=Pn.getNodeNewDynamicWidth(e,t,n.width),o=rA(e,t,i);o&&(r.height=o);const s=F.findPath(e,t);Xe.setNode(e,r,s)},vA=(e,t,n)=>{var i;const r=Kt.get(e,n);r&&t&&((i=r.children)==null||i.forEach((o,s)=>{var l;o.layout&&((dp(t)&&r4(o.layout)||r4(t)&&dp(o.layout))&&Xe.setNode(e,{layout:null},[...n,s]),(l=o.children)!=null&&l.length&&vA(e,t,[...n,s]))}))},$K=(e,t)=>{const n=(r,i)=>{if(Be.isMindElement(e,r)){vA(e,t,i);const o=Kt.get(e,i);if(qt.isMind(o)&&Do(t)){let s={rightNodeCount:o.children.length/2};Xe.setNode(e,s,i),gA(e,o)}Xe.setNode(e,{layout:t},i)}};pa.setProperty(e,{},{callback:n})},WK=(e,t)=>{pa.setProperty(e,{shape:t})},zK=(e,t)=>{pa.setProperty(e,{branchShape:t})},VK=(e,t)=>{pa.setProperty(e,{branchWidth:t})},UK=(e,t)=>{pa.setProperty(e,{branchColor:t})},Tr={setLayout:$K,setShape:WK,setBranchShape:zK,setBranchWidth:VK,setBranchColor:UK,setTopic:RK,setTopicSize:kK,setNodeManualWidth:bK,addEmoji:_K,removeEmoji:NK,replaceEmoji:HK,insertAbstract:BK,setAbstractsByRefs:dA,setAbstractByStandardLayout:gA,insertNodes:pA,insertAbstractNodes:OK,setRightNodeCountByRefs:mA,removeImage:GK,setImage:jK,insertChildNode:IK,insertSiblingNode:FK,insertMind:LK};class XK extends ts{constructor(t){super(t,{prepend:!0})}canDraw(t,n){return mp(this.board,t)===su.roundRectangle}draw(t,n){const r=nr(n.node);return iy(this.board,r,n.node.origin)}}const Ay=class Ay extends ts{canDraw(t,n){return!!((n!=null&&n.isHovered||n!=null&&n.isHoveredCollapseArea||n!=null&&n.isHoveredAddArea)&&f4(this.board)||n!=null&&n.isSelected&&YK(this.board,t)&&f4(this.board)||t.isCollapsed)}draw(t,n){const r=Lt(),i=K8(this.board,t),o=wA(this.board,t),s=CA(this.board,t,o),l=qn(s[1],Ua/2,o),c=t.children.length>0,h=!t.isCollapsed&&($f(this.board,t)||!!(n!=null&&n.isHovered)||!!(n!=null&&n.isHoveredCollapseArea)||!!(n!=null&&n.isHoveredAddArea)),d=h&&c&&!qt.isMind(t),g=h&&!F.isReadonly(this.board),v=h&&yA(t,l,o)||null;return this.toggleCollapseOrAdd(l,v,i,r,d,g,!!(n!=null&&n.isHoveredAddArea),!!(n!=null&&n.isShowCollapseAnimation),!!(n!=null&&n.isShowAddAnimation)),this.toggleExpandBadge(t,s,l,i,r,!!t.isCollapsed,!!(n!=null&&n.isHoveredExpandArea)),r}toggleCollapseOrAdd(t,n,r,i,o,s,l,c,h){var d;if((d=this.collapseOrAddG)==null||d.remove(),!(!o&&!s)){if(this.collapseOrAddG=Lt(),o){const g=Lt();this.collapseOrAddG.appendChild(g),g.classList.add("collapse-button"),c&&g.classList.add("animated");const v=F.getRoughSVG(this.board).circle(t[0],t[1],Ua,{fill:"#fff",stroke:r,strokeWidth:Rf,fillStyle:"solid"}),y=qn(t,-10/2),x=qn(t,Sg/2),E=F.getRoughSVG(this.board).line(y[0],y[1],x[0],x[1],{fill:"#fff",stroke:r,strokeWidth:Rf,fillStyle:"solid"});g.appendChild(v),g.appendChild(E),zt(E,"round")}if(s&&n){const g=Lt();this.collapseOrAddG.appendChild(g),g.classList.add("add-button"),h&&g.classList.add("animated");const v=F.getRoughSVG(this.board).circle(n[0],n[1],Ua+Rf,{fill:l?NX:_X,stroke:W6,fillStyle:"solid"}),y=[n[0]-Sg/2,n[1]],x=[n[0]+Sg/2,n[1]],E=[n[0],n[1]-Sg/2],T=[n[0],n[1]+Sg/2],D=F.getRoughSVG(this.board).line(y[0],y[1],x[0],x[1],{stroke:bx,strokeWidth:Rf});zt(D,"round");const S=F.getRoughSVG(this.board).line(E[0],E[1],T[0],T[1],{stroke:bx,strokeWidth:Rf});zt(S,"round"),g.appendChild(v),g.appendChild(D),g.appendChild(S)}i.appendChild(this.collapseOrAddG)}}toggleExpandBadge(t,n,r,i,o,s,l){var S;if((S=this.expandG)==null||S.remove(),!s)return;this.expandG=Lt(),this.expandG.classList.add("expanded-button");const c=n[1],h=F.getRoughSVG(this.board).line(n[0][0],n[0][1],c[0],c[1],{fill:i,stroke:i,fillStyle:"solid",strokeWidth:Rf}),d=l?Yg(i,.4):Yg(i,.2),g=F.getRoughSVG(this.board).circle(r[0],r[1],Ua+Rf,{fill:d,stroke:W6,fillStyle:"solid"}),v=YD(t);let y=`${v}`,x=r[1]+4.5;v>=99&&(y="...",x=r[1]+1);const{width:E,height:T}=W0(this.board,sl(y),{fontSize:Number(B3.fontSize12),fontFamily:ql}),D=NO(r[0]-E/2,x,i,`${y}`);D.setAttribute("style",`font-size: ${Number(B3.fontSize12)}px;`),this.expandG.appendChild(h),this.expandG.appendChild(g),this.expandG.appendChild(D),o.appendChild(this.expandG)}};Ay.key="mind-node-more";let wp=Ay;const KK=(e,t)=>{const n=wA(e,t),[r,i]=CA(e,t,n),o=qn(i,Ua/2,n),s=yA(t,o,n);return{collapseCenter:o,addCenter:s}},yA=(e,t,n)=>{var i;let r=t;return((i=e.children)==null?void 0:i.length)>0&&!qt.isMind(e)&&(r=qn(r,FD+Ua,n)),r},wA=(e,t)=>{const n=Be.getNode(t),r=Ao.getLayoutByElement(t),i=hi(r);let o=ac(n,i);return el(r)&&(o=sc(r)?nn.top:nn.bottom),o},CA=(e,t,n)=>{const r=Be.getNode(t),i=mp(e,t)===su.underline,o=nr(r);let s=[jn.right,An.middle];Xo(s,n);const l=Ao.getLayoutByElement(t);hi(l)&&i&&!t.isRoot&&(s[1]=An.bottom);let h=wo(o,s);const d=qn(h,FD,n);return[h,d]},YK=(e,t)=>{const r=Qe(e).filter(i=>Be.isMindElement(e,i)).reverse();return r[r.length-1]===t},f4=e=>!Vl(e)&&!mi(e)&&!dc(e)&&!gc(e);class xA extends Tc{get textManage(){return this.getRef().getTextManages()[0]}constructor(){super(),this.shapeG=null,this.trackBy=(t,n)=>n.origin.id}initializeGenerator(){this.nodeShapeGenerator=new XK(this.board),this.nodeEmojisGenerator=new yp(this.board),this.activeGenerator=new yc(this.board),this.nodeMoreGenerator=new wp(this.board),this.imageGenerator=new ru(this.board,{getRectangle:r=>Rv(this.board,r),getImageItem:r=>r.data.image});const t=(this.board.getPluginOptions($6)||{}).textPlugins,n=new Op(this.board,{getRectangle:()=>eA(this.board,this.node),onChange:r=>{const i=r.width,o=r.height;r.newText?Tr.setTopic(this.board,this.element,r.newText,i,o):Tr.setTopicSize(this.board,this.element,i,o)},getMaxWidth:()=>Pn.getTopicMaxDynamicWidth(this.board,this.element),textPlugins:t||[]});this.getRef().addGenerator(yc.key,this.activeGenerator),this.getRef().addGenerator(yp.key,this.nodeEmojisGenerator),this.getRef().addGenerator(ru.key,this.imageGenerator),this.getRef().addGenerator(wp.key,this.nodeMoreGenerator),this.getRef().initializeTextManage(n),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.node=Be.getNode(this.element),this.index=l0.get(this.element)||0,this.roughSVG=F.getRoughSVG(this.board),this.nodeShapeGenerator.processDrawing(this.element,this.getElementG(),{node:this.node}),this.drawLink(),this.drawTopic(),this.activeGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected}),this.nodeMoreGenerator.processDrawing(this.element,this.getElementG()),this.drawEmojis(),this.imageGenerator.processDrawing(this.element,this.getElementG()),qt.isMind(this.context.parent)&&this.getElementG().classList.add("branch")}onContextChanged(t,n){const r=Be.getNode(t.element),i=b.isEqual(this.node,r);if(this.node=r,!i||t.element!==n.element||t.hasThemeChanged)this.activeGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected}),this.nodeMoreGenerator.processDrawing(this.element,this.getElementG(),{isSelected:this.selected}),this.nodeShapeGenerator.processDrawing(this.element,this.getElementG(),{node:this.node}),this.drawLink(),this.drawEmojis(),!Be.hasImage(n.element)&&Be.hasImage(this.element)&&this.imageGenerator.processDrawing(this.element,this.getElementG()),Be.hasImage(n.element)&&Be.hasImage(this.element)&&this.imageGenerator.updateImage(this.getElementG(),n.element,t.element),Be.hasImage(n.element)&&!Be.hasImage(this.element)&&this.imageGenerator.destroy(),this.updateTopic();else{const o=t.selected===n.selected,s=t.parent===n.parent;(!o||t.selected)&&(this.activeGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected}),this.nodeMoreGenerator.processDrawing(this.element,this.getElementG(),{isSelected:this.selected})),s||this.drawLink()}}drawEmojis(){const t=this.nodeEmojisGenerator.drawEmojis(this.element);t&&this.getElementG().append(t)}drawLink(){if(qt.isMind(this.element))return;const t=Be.getParent(this.element),n=Be.getNode(t);this.linkLineG&&this.linkLineG.remove();const r=Ao.getLayoutByElement(t);yt.isAbstract(this.node.origin)?this.linkLineG=AK(this.board,this.node,hi(r)):this.linkLineG=aA(this.board,n,this.node,hi(r)),this.getElementG().append(this.linkLineG)}drawTopic(){this.textManage.draw(this.element.data.topic),this.getElementG().append(this.textManage.g)}updateTopic(){this.textManage.updateText(this.element.data.topic),this.textManage.updateRectangle()}destroy(){super.destroy(),this.nodeEmojisGenerator.destroy(),this.imageGenerator.destroy(),this.activeGenerator.destroy(),_3.get(this.element)===this.node&&_3.delete(this.element),this.getRef().destroyTextManage()}}class qK extends xA{initialize(){this.updateMindLayout(),super.initialize(),this.getElementG().classList.add("root")}beforeContextChange(t){t.element!==this.element&&this.initialized&&this.updateMindLayout(t.element)}updateMindLayout(t=this.element){const n=t.layout||J8();this.root=SX.layout(t,VX(this.board),n),this.updateMindNodeLocation(t)}updateMindNodeLocation(t){const{x:n,y:r,hGap:i,vGap:o}=this.root,s=n+i,l=r+o;pi(this.root,c=>{c.x=c.x-s+t.points[0][0],c.y=c.y-l+t.points[0][1],_3.set(c.origin,c)})}}const ZK=5,QK=e=>{const{pointerDown:t,pointerMove:n,globalPointerUp:r}=e;let i=[],o=[],s,l,c,h=null,d;return e.pointerDown=g=>{if(F.isReadonly(e)||F.hasBeenTextEditing(e)||!F.isPointer(e,Zt.selection)||!Za(g)){t(g);return}const v=Dt(e,Bt(e,g.x,g.y)),y=Qe(e),x=il(e,v);if(x&&Be.isMindElement(e,x)&&!qt.isMind(x)&&!yt.isAbstract(x)){const E=y.filter(D=>Be.isMindElement(e,D)&&!D.isRoot&&!yt.isAbstract(D));y.length>0&&y.includes(x)?(i=E,s=v):(i=[x],s=v)}i.length&&(o=ND(e,i)),t(g)},e.pointerMove=g=>{if(!e.options.readonly&&i.length&&s){const v=Dt(e,Bt(e,g.x,g.y));if(Tt(s[0],s[1],v[0],v[1])<ZK)return;Hx(e,!0),c==null||c.remove();const x=Dt(e,Bt(e,g.x,g.y));h=uK(e,x,h,[...i,...o]),h!=null&&h.target&&(d=hK(e,h),c=wK(e,h,d),F.getHost(e).appendChild(c));const E=v[0]-s[0],T=v[1]-s[1];l==null||l.remove(),l=Lt(),[...i,...o].forEach(D=>{iA(D)}),i.forEach(D=>{const S=yK(e,D,E,T);l==null||l.appendChild(S)}),F.getHost(e).appendChild(l);return}n(g)},e.globalPointerUp=g=>{const v=jg(i);if(!e.options.readonly&&v.length){if(v.push(...o),dc(e)&&v.forEach(y=>{oA(y)}),h){const y=e.pathRef(d),x=wt.hasPrevious(d)&&e.pathRef(wt.previous(d)),E=e.pathRef(F.findPath(e,h.target));let T=HD(e,v);const D=v.filter(se=>!T.some(me=>me.abstract===se)).map(se=>yt.isAbstract(se)?u4(se):se);if(d[d.length-1]!==0){const se=Kt.get(e,wt.previous(d)),me=Gp(se);if(me&&me.end!==d[d.length-1]-1){const oe=T.map(ve=>u4(ve.abstract));D.push(...oe),T=[]}}const R=$D(e,v);jD(e,d,D.length,!1,R),Tr.setAbstractsByRefs(e,R);let k=fA(e,v);const O=Kt.get(e,wt.parent(d));sA(O,h)&&E.current&&(k=cA(e,E.current.slice(0,1),D.length,k)),Tr.setRightNodeCountByRefs(e,k),e8.removeElements(e,v);let z=y.current;const K=wt.parent(y.current||d);if(!z){const se=x&&x.unref();if(se)z=wt.next(se);else{const me=Kt.get(e,K),ne=Bc(me);z=[...K,ne.length||0]}}Tr.insertNodes(e,D,z),T.length&&Tr.insertAbstractNodes(e,T,D,z),E.current&&y.current&&wt.isAncestor(E.current,y.current)&&h.target.isCollapsed&&Xe.setNode(e,{isCollapsed:!1},E.current),E.unref(),y.unref();let te=[];pi(e,se=>{i.some(ne=>ne.id===se.id)&&te.push(se)}),Xe.addSelectionWithTemporaryElements(e,te)}Hx(e,!1),i=[],l==null||l.remove(),l=void 0,c==null||c.remove(),c=void 0,h=null}r(g)},e},JK=e=>{const t=e,{pointerDown:n,pointerMove:r,pointerUp:i}=e;let o,s,l,c;return e.pointerDown=h=>{if(!Za(h)||F.isReadonly(e)){n(h);return}const d=Qe(e).filter(v=>yt.isAbstract(v)),g=Dt(e,Bt(e,h.x,h.y));if(o=d.find(v=>(s=lA(e,v,g),s)),o){t!=null&&t.onAbstractResize&&t.onAbstractResize($g.start);return}n(h)},e.pointerMove=h=>{Qe(e);const d=Dt(e,Bt(e,h.x,h.y));if(l=SK(e,l,d),s&&o){const g=Ao.getCorrectLayoutByElement(e,o),v=hi(g),y=Be.getParent(o);let x=y.children;const E=Ao.getLayoutByElement(y);if(Do(E)){const te=y.rightNodeCount,{leftChildren:se,rightChildren:me}=GX(y);o.end<te&&(x=me),o.start>=te&&(x=se)}t!=null&&t.onAbstractResize&&t.onAbstractResize($g.resizing);const T=v?d[1]:d[0],D=Be.getNode(y),S=EK(e,s,x,o,D,v),R=Math.min(S.max,Math.max(S.min,T));let k=PK(e,x,R,v);if(s===di.start&&k+1===o.start||s===di.end&&k===o.end)c=void 0;else{if(Do(D.layout)){const te=D.origin.rightNodeCount;o.start>=te&&(k+=te)}c=s===di.start?{start:k+1}:{end:k}}const z=yn.getElementRef(o).getGenerator(yc.key),K=qg(e,[R,R]);z.updateAbstractOutline(o,s,v?K[1]:K[0])}r(h)},e.pointerUp=h=>{if(s=void 0,o){if(t!=null&&t.onAbstractResize&&t.onAbstractResize($g.end),c){const d=F.findPath(e,o);Xe.setNode(e,c,d)}else yn.getElementRef(o).getGenerator(yc.key).updateAbstractOutline(o);o=void 0;return}i(h)},e},eY=e=>{const t=e;return e.setPluginOptions(Tv,{spaceBetweenEmojis:4,emojiPadding:0}),t},tY="m",nY=e=>{const t=e,{keyDown:n,pointerDown:r,pointerMove:i,pointerUp:o}=e;let s=null,l=null;t.pointerDown=h=>{const d=F.isPointer(e,Xl.mind);if(!F.isReadonly(e)&&lh(e)&&d){const g=Dt(e,Bt(e,h.x,h.y)),v=Fx(t,g);Tr.insertMind(e,v),fn.updatePointerType(e,Zt.selection);return}r(h)},t.pointerMove=h=>{if(F.isReadonly(e)){i(h);return}const d=F.isPointer(e,Xl.mind);pv(e)&&d?da(e,"with-mind-create",()=>{let g=F.getMovingPointInBoard(e);if(g){g=Dt(t,Bt(e,g[0],g[1])),l=Fx(t,g);const v=nK(t,l),y=iy(e,v,l),x=tA(t,v,l);if(s)s.textManage.updateRectangle(x),s.nodeG.remove(),s.nodeG=y,s.g.append(y),s.g.append(s.textManage.g);else{const E=new Op(e,{getRectangle:()=>x});E.draw(l.data.topic),s={g:Lt(),nodeG:y,textManage:E},s.g.classList.add("root"),s.g.setAttribute("plait-mind-temporary","true"),F.getHost(e).append(s.g),s.g.append(s.nodeG,E.g)}}}):c(),i(h)},t.pointerUp=h=>{if(l){Tr.insertMind(e,l),fn.updatePointerType(e,Zt.selection),l=null,c();return}o(h)},e.keyDown=h=>{if(F.isReadonly(e)||Qe(e).length>0){n(h);return}if(h.key===tY&&!F.isPointer(e,Xl.mind)){fn.updatePointerType(e,Xl.mind),yo(e,qr.drawing),h.preventDefault();return}n(h)};function c(){s&&(s.textManage.destroy(),s.g.remove(),s=null)}return t},rY=e=>{const t=e,{keyDown:n,globalKeyDown:r}=t;return t.keyDown=i=>{const o=Qe(t),s=o.length===1,l=o.length===1&&Be.isMindElement(t,o[0]),c=o[0];if(Zj(i)&&l&&!qt.isMind(c)&&c.children&&c.children.length>0){Xe.setNode(t,{isCollapsed:!c.isCollapsed},F.findPath(t,c));return}if(!F.isReadonly(t)){if(Qj(i)&&l){i.preventDefault(),Tr.insertChildNode(t,c);return}if(Jj(i)&&l&&!qt.isMind(c)&&!yt.isAbstract(c)){Tr.insertSiblingNode(t,c);return}if(!y8(i)&&!C8(i)&&!w8(i)&&s&&Be.isMindElement(t,c)){i.preventDefault(),Q8(c);return}}n(i)},t.globalKeyDown=i=>{if(F.isFocus(t)&&F.hasBeenTextEditing(t)&&Qt.isHotkey("mod+z",i)){const{history:o}=t,{undos:s}=o,l=s.length>0?s[s.length-1][0]:void 0;l&&l.type==="insert_node"&&Be.isMindElement(t,l.node)&&uh(l.node).isEditing&&t.undo()}r(i)},t},iY=e=>{const{pointerMove:t,pointerLeave:n,pointerUp:r}=e;let i=null;e.pointerMove=s=>{f4(e)&&da(e,"with-mind-node-hover-hit-test",()=>{i&&!yn.hasMounted(i.target)&&(i=null);const l=Wx(e,s.x,s.y);i&&l&&i.target===l.target||(i&&o({target:i.target,isHovered:!1,isHoveredCollapseArea:!1,isHoveredExpandArea:!1,isHoveredAddArea:!1}),l?(o(l),i?i.target=l.target:i=l):i=null)}),t(s)},e.pointerUp=s=>{if(i&&(i.isHoveredCollapseArea||i.isHoveredExpandArea)){const c={isCollapsed:!i.target.isCollapsed},h=F.findPath(e,i.target);Xe.setNode(e,c,h),setTimeout(()=>{const d=Wx(e,s.x,s.y);d?(o(d),i=d):i=null},0);return}if(i&&i.isHoveredAddArea&&!F.isReadonly(e)){if(i){const l=oy(e,i.target);ny(e,i.target,l)}return}r(s)};const o=s=>{const l=yn.getElementRef(s.target),c=l==null?void 0:l.getGenerator(wp.key);if(c){const h=yn.getElementG(s.target);c.processDrawing(s.target,h,{isHovered:s.isHovered,isHoveredCollapseArea:s.isHoveredCollapseArea,isHoveredExpandArea:s.isHoveredExpandArea,isSelected:$f(e,s.target),isHoveredAddArea:s.isHoveredAddArea,isShowCollapseAnimation:(s.isHovered||s.isHoveredCollapseArea)&&!$f(e,s.target),isShowAddAnimation:(s.isHovered||s.isHoveredAddArea)&&!$f(e,s.target)})}};return e.pointerLeave=s=>{i&&o({target:i.target,isHovered:!1,isHoveredCollapseArea:!1,isHoveredExpandArea:!1,isHoveredAddArea:!1}),i=null,n(s)},e},Wx=(e,t,n)=>{let r=null,i=!1,o=!1,s=!1,l=!1;const c=Dt(e,Bt(e,t,n));return pi(e,h=>{if(r||!Be.isMindElement(e,h))return;const d=qt.isMind(h),g=QD(e,c,h);let v=!1,y=!1;const{collapseCenter:x,addCenter:E}=KK(e,h),T=!d&&b.getRectangleByCenterPoint(x,Ua,Ua);v=T&&b.isHit(b.getRectangleByPoints([c,c]),T);const D=b.getRectangleByCenterPoint(E,Ua,Ua);y=b.isHit(b.getRectangleByPoints([c,c]),D),(g||v||y)&&(i=g,h.children.length>0&&(h.isCollapsed?s=v:o=v),l=y,r=h)},oh(e),!0),r?{target:r,isHovered:i,isHoveredCollapseArea:o,isHoveredExpandArea:s,isHoveredAddArea:l}:null},oY=e=>{const{keyDown:t,pointerUp:n,globalPointerUp:r,buildFragment:i,insertFragment:o,deleteFragment:s,afterChange:l}=e;return e.pointerUp=c=>{const h=mo(e);if(h&&Be.isMindElement(e,h)&&!SO(c)&&(F.isReadonly(e)||!Za(c)||!F.isPointer(e,Zt.selection))){Qm(e,h),n(c);return}if(F.isReadonly(e)){n(c);return}const d=Dt(e,Bt(e,c.x,c.y)),g=il(e,d),v=g&&Be.isMindElement(e,g)&&Be.hasImage(g)&&nA(e,g,d);if(v&&h&&g===h){P6(e),n(c);return}h&&Be.isMindElement(e,h)&&Qm(e,h),v&&g&&(P6(e),sK(e,g)),n(c)},e.keyDown=c=>{const h=mo(e);if(!F.isReadonly(e)&&h&&(Ai.isDeleteBackward(c)||Ai.isDeleteForward(c))){sh(e,h),Tr.removeImage(e,h);return}t(c)},e.globalPointerUp=c=>{if(F.isFocus(e)){const h=c.target instanceof Node&&F.getBoardContainer(e).contains(c.target),d=mo(e);d&&Be.isMindElement(e,d)&&!h&&Qm(e,d)}r(c)},e.buildFragment=(c,h,d,g)=>{const v=mo(e);return v&&(c=HI(eu.medias,[v.data.image],"")),i(c,h,d,g)},e.deleteFragment=c=>{const h=mo(e);h&&Tr.removeImage(e,h),s(c)},e.insertFragment=(c,h,d)=>{var x,E;const g=Qe(e),v=!!mo(e),y=g.length===1&&Be.isMindElement(e,g[0]);if(v||y){if((x=c==null?void 0:c.files)!=null&&x.length){const T=VS.map(S=>"image/"+S),D=g[0]||mo(e);if(T.includes(c.files[0].type)){const S=c.files[0];rT(e,S,HX,R=>{Tr.setImage(e,D,R)});return}}if((E=c==null?void 0:c.medias)!=null&&E.length){const T=g[0]||mo(e);Tr.setImage(e,T,c.medias[0]);return}}o(c,h,d)},e.afterChange=()=>{l();const c=mo(e);c&&Be.isMindElement(e,c)&&yn.getElementRef(c).getGenerator(ru.key).setFocus(c,!0)},e},sY=e=>{let t=null;return fh(e,{key:"mind-node",canResize:()=>!0,hitTest:r=>{const i=aY(e,r);return i?{element:i,handle:null,cursorClass:oa.ew}:null},beforeResize:r=>{t={minWidth:Pn.getNodeResizableMinWidth(e,r.element),currentWidth:Pn.getTopicDynamicWidth(e,r.element),path:F.findPath(e,r.element),textManage:uh(r.element)}},onResize:(r,i)=>{let o=t.currentWidth+mt.getOffsetX(i.startPoint,i.endPoint);o<=t.minWidth&&(o=t.minWidth);const s=Kt.get(e,t.path);if(s&&Pn.getNodeTopicMinWidth(e,s)!==o){t.textManage.updateRectangleWidth(o);const{height:l}=t.textManage.getSize(void 0,o);Tr.setNodeManualWidth(e,s,o,l)}},afterResize:r=>{t=null}}),e},aY=(e,t)=>{const n=Qe(e).filter(r=>Be.isMindElement(e,r));if(n.length>0){const r=n.find(i=>{const o=lY(e,i);return Ap(t[0],t[1],o)<=0});return r||null}return null},lY=(e,t)=>{const n=Be.getNode(t),r=nr(n);return{x:r.x+r.width-Rx,y:r.y,width:Rx*2,height:r.height}},uY=e=>(fh(e,{key:"mind-node-image",canResize:()=>!0,hitTest:n=>{const r=mo(e),i=r&&Be.isMindElement(e,r)?r:void 0;if(i){const o=rK(e,i,n);if(o)return{element:i,handle:o.handle,cursorClass:o.cursorClass}}return null},onResize:(n,r)=>{const i=mt.getOffsetX(r.startPoint,r.endPoint),o=n.element.data.image.width,s=n.element.data.image.height,l=n.path;let c=o+i;c<=100&&(c=100);const h=o/s,d=c/h,g={...n.element.data.image,width:c,height:d};Tr.setImage(e,Kt.get(e,l),g),iT(e,Kt.get(e,l))}}),e),cY=(e,t,n)=>{let r=[];const i=ND(e,t),o=HD(e,[...t,...i]),s=t.filter(c=>!o.find(h=>h.abstract===c));s.push(...o.map(c=>c.abstract));const l=s.map(c=>Be.getNode(c));return s.forEach((c,h)=>{const d=nr(l[h]),g=[[d.x-n[0],d.y-n[1]]],v=o.find(y=>y.abstract===c);if(yt.isAbstract(c)&&v){const{start:y,end:x}=GD(v,s);r.push({...c,points:g,start:y,end:x})}else if(yt.isAbstract(c)){let y={...c,points:g};delete y.start,delete y.end,r.push(y)}else r.push({...c,points:g})}),r},fY=(e,t,n,r)=>{let i,o;const s=Qe(e);let l=[];const c=s.length===1,h=s[0],d=h&&F.findPath(e,h),g=h&&Bc(h).length;t.forEach((v,y)=>{if(i=ZD(v),c&&r!==ua.duplicate){if(v.isRoot){i=iK(e,i);const{width:x,height:E}=zx(e,i,h);i.width=x,i.height=E}yt.isAbstract(i)&&(i.start=i.start+g,i.end=i.end+g),o=[...d,g+y]}else{const x=[n[0]+v.points[0][0],n[1]+v.points[0][1]];if(i.points=[x],yt.isAbstract(v)&&(i=u4(i)),!v.isRoot){i=oK(e,i);const{width:E,height:T}=zx(e,i);i.width=E,i.height=T}o=[e.children.length]}l.push(i),Xe.insertNode(e,i,o)}),Xe.addSelectionWithTemporaryElements(e,l)},hY=(e,t,n)=>{const{width:r,height:i}=Bv(e,!1,qt.isMind(t),sl(n)),o=Mv(n,Math.max(r,tK(n)),i,{});Xe.insertNode(e,o,oy(e,t)),Xe.addSelectionWithTemporaryElements(e,[o])},zx=(e,t,n)=>Bv(e,qt.isMind(t),n&&qt.isMind(n)||!1,t.data.topic,t.manualWidth),dY=e=>{const t=e;let n;const{getDeletedFragment:r,insertFragment:i,buildFragment:o,deleteFragment:s}=t;return t.getDeletedFragment=l=>{const c=L5(t);if(c.length){n=jg(c).reverse();const h=$D(t,n);Tr.setAbstractsByRefs(t,h);const d=fA(t,c);Tr.setRightNodeCountByRefs(t,d);const g=jg(c);l.push(...g)}return r(l)},t.deleteFragment=l=>{if(s(l),n){const c=gY(t,n);c&&sh(t,c),n=null}},t.buildFragment=(l,c,h,d)=>{const g=L5(t,d),v=jg(g);if(v.length){const y=cY(t,v,c?[c.x,c.y]:[0,0]),E={text:tT(g),type:eu.elements,elements:y};l=cv(l,E)}return o(l,c,h,d)},t.insertFragment=(l,c,h)=>{var d,g;if((d=l==null?void 0:l.elements)!=null&&d.length){const v=(g=l.elements)==null?void 0:g.filter(y=>Be.isMindElement(t,y));v&&v.length>0&&fY(t,v,c,h)}if(l!=null&&l.text){const v=L5(t);if(v.length===1){hY(t,v[0],sl(l.text));return}}i(l,c,h)},t},gY=(e,t)=>{let n;const r=t[0],i=F.findPath(e,r);let o=i;if(wt.hasPrevious(i)&&(o=wt.previous(i)),yt.isAbstract(r)){const h=Be.getParent(r);t.includes(h.children[r.start])||(n=h.children[r.start])}try{n||(n=Kt.get(e,o))}catch{}const s=t[0],l=Be.findParent(s),c=t.every(h=>Be.findParent(h)===l);return l&&c&&!n&&(n=l),n},pY=e=>{const t=e;return t.renderEmoji=(n,r)=>{throw new Error("No implementation for renderEmoji method.")},t},mY=e=>!(!e.data||!e.data.topic),vY=e=>!(Jo(e.width)||Jo(e.height)),yY=e=>{const t={children:[{text:""}]};if(e.data)e.data.topic||(e.data.topic=t);else{const n={topic:t};e.data=n}},wY=e=>{Jo(e.width)&&(e.width=56),Jo(e.height)&&(e.width=20)},EA=e=>{const t=e,{drawElement:n,dblClick:r,isRectangleHit:i,isHit:o,getRectangle:s,isMovable:l,isRecursion:c,isAlign:h,isImageBindingAllowed:d,canAddToGroup:g,canSetZIndex:v,isExpanded:y,getOneHitElement:x,normalizeElement:E}=t;return t.normalizeElement=T=>{qt.isMind(T.element)&&pi(T.element,D=>{mY(D)||yY(D),vY(D)||wY(D)}),E(T)},t.drawElement=T=>qt.isMind(T.element)?qK:Be.isMindElement(t,T.element)?xA:n(T),t.applyTheme=T=>{const D=T,S=!F.isBoard(T)&&((D==null?void 0:D.branchColor)||(D==null?void 0:D.fill)||(D==null?void 0:D.strokeColor));if(qt.isMind(T)&&S){const R=F.findPath(t,T);Xe.setNode(t,{fill:null,strokeColor:null,branchColor:null},R)}},t.getRectangle=T=>Be.isMindElement(t,T)?(yn.hasMounted(T)||console.error("mind element has not been mounted"),nr(Be.getNode(T))):s(T),t.canAddToGroup=T=>Be.isMindElement(t,T)&&!T.isRoot?!1:g(T),t.canSetZIndex=T=>Be.isMindElement(t,T)&&!T.isRoot?!1:v(T),t.isRecursion=T=>Be.isMindElement(t,T)&&T.isCollapsed?!1:c(T),t.isRectangleHit=(T,D)=>{if(Be.isMindElement(t,T)){const S=nr(Be.getNode(T));return b.isHit(b.getRectangleByPoints([D.anchor,D.focus]),S)}return i(T,D)},t.isHit=(T,D,S)=>{if(Be.isMindElement(t,T)){const R=nr(Be.getNode(T));return b.isHit(b.getRectangleByPoints([D,D]),R)}return o(T,D,S)},t.getOneHitElement=T=>T.every(S=>Be.isMindElement(t,S))?T[0]:x(T),t.isMovable=T=>qt.isMind(T)&&T.isRoot?!0:l(T),t.isImageBindingAllowed=T=>Be.isMindElement(t,T)?!0:d(T),t.isAlign=T=>qt.isMind(T)&&T.isRoot?!0:h(T),t.isExpanded=T=>Be.isMindElement(t,T)&&!qt.isMind(T)?!T.isCollapsed:y(T),t.dblClick=T=>{if(F.isReadonly(t)){r(T);return}const D=Dt(t,Bt(t,T.x,T.y));t.children.filter(S=>qt.isMind(S)).forEach(S=>{pi(S,R=>{!F.hasBeenTextEditing(t)&&QD(t,D,R)&&Q8(R)},oh(t))}),!F.hasBeenTextEditing(t)&&r(T)},pY(sY(uY(oY(iY(dY(rY(eY(nY(JK(QK(t)))))))))))};var G5={exports:{}},Vx;function CY(){return Vx||(Vx=1,function(e){/*!mobile-detect v1.4.5 2021-03-13*//*!@license Copyright 2013, Heinrich Goebl, License: MIT, see https://github.com/hgoebl/mobile-detect.js*/(function(t,n){t(function(){var r={};r.mobileDetectRules={phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+|\\b(BBA100|BBB100|BBD100|BBE100|BBF100|STH100)\\b-[0-9]+",Pixel:"; \\bPixel\\b",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 5X|Nexus 6",Dell:"Dell[;]? (Streak|Aero|Venue|Venue Pro|Flash|Smoke|Mini 3iX)|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b|XT1068|XT1092|XT1052",Samsung:"\\bSamsung\\b|SM-G950F|SM-G955F|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|SM-N910C|SM-A310F|GT-I9190|SM-J500FN|SM-G903F|SM-J330F|SM-G610F|SM-G981B|SM-G892A|SM-A530F",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323|M257)|LM-G710",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533|SOV34|601SO|F8332",Asus:"Asus.*Galaxy|PadFone.*Mobile",Xiaomi:"^(?!.*\\bx11\\b).*xiaomi.*$|POCOPHONE F1|MI 8|Redmi Note 9S|Redmi Note 5A Prime|N2G47H|M2001J2G|M2001J2I|M1805E10A|M2004J11G|M1902F1G|M2002J9G|M2004J19G|M2003J6A1G",NokiaLumia:"Lumia [0-9]{3,4}",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo (3DS|Switch)",Amoi:"Amoi",INQ:"INQ",OnePlus:"ONEPLUS",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",GoogleTablet:"Android.*Pixel C",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y?|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|SM-P555M|SM-P355M|SM-T113NU|SM-T815Y|SM-T585|SM-T285|SM-T825|SM-W708|SM-T835|SM-T830|SM-T837V|SM-T720|SM-T510|SM-T387V|SM-P610|SM-T290|SM-T515|SM-T590|SM-T595|SM-T725|SM-T817P|SM-P585N0|SM-T395|SM-T295|SM-T865|SM-P610N|SM-P615|SM-T970|SM-T380|SM-T5950|SM-T905|SM-T231|SM-T500|SM-T860",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome/[0-9.]+ (?!Mobile)",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b|\\bP024\\b|\\bP00C\\b",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30|A3-A40",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)|TB-X103F|TB-X304X|TB-X304F|TB-X304L|TB-X505F|TB-X505L|TB-X505X|TB-X605F|TB-X605L|TB-8703F|TB-8703X|TB-8703N|TB-8704N|TB-8704F|TB-8704X|TB-8704V|TB-7304F|TB-7304I|TB-7304X|Tab2A7-10F|Tab2A7-20F|TB2-X30L|YT3-X50L|YT3-X50F|YT3-X50M|YT-X705F|YT-X703F|YT-X703L|YT-X705L|YT-X705X|TB2-X30F|TB2-X30L|TB2-X30M|A2107A-F|A2107A-H|TB3-730F|TB3-730M|TB3-730X|TB-7504F|TB-7504X|TB-X704F|TB-X104F|TB3-X70F|TB-X705F|TB-8504F|TB3-X70L|TB3-710F|TB-X704L",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",NokiaLumiaTablet:"Lumia 2520",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP641|SGP612|SOT31|SGP771|SGP611|SGP612|SGP712",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*\\b(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris ([E|M]10|M8))\\b|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim|M2-A01L|BAH-L09|BAH-W09|AGS-L09|CMR-AL19",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z930|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android [0-9.]+; [a-z-]+; \\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)|Qualcore 1027",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497|VFD 1400",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9|TECNO DP8D",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",VerizonTablet:"QTAQZ3|QTAIR7|QTAQTZ3|QTASUN1|QTASUN2|QTAXIA1",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+|V10 \\b4G\\b",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MediacomTablet:"M-MPI10C3G|M-SP10EG|M-SP10EGP|M-SP10HXAH|M-SP7HXAH|M-SP10HXBH|M-SP8HXAH|M-SP8MXA",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",KocasoTablet:"\\b(TB-1207)\\b",HisenseTablet:"\\b(F5281|E2371)\\b",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b|WVT101|TM1088|KT107"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Windows Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad|AppleCoreMedia",iPadOS:"CPU OS 13",SailfishOS:"Sailfish",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+$|Coast/[0-9.]+",Skyfire:"Skyfire",Edge:"\\bEdgiOS\\b|Mobile Safari/[.0-9]* Edge",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version((?!\\bEdgiOS\\b).)*Mobile.*Safari|Safari.*Mobile|MobileSafari",WeChat:"\\bMicroMessenger\\b",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger",PaleMoon:"Android.*PaleMoon|Mobile.*PaleMoon"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:["Firefox/[VER]","FxiOS/[VER]"],Fennec:"Fennec/[VER]",Edge:"Edge/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]",UCBrowser:["UCWEB[VER]","UC.*Browser/[VER]"],MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",SamsungBrowser:"SamsungBrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",PaleMoon:"PaleMoon/[VER]",SailfishBrowser:"SailfishBrowser/[VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Goanna:"Goanna/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",Sailfish:"Sailfish [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|Google-AMPHTML|s~amp-validator|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom|contentkingapp|AspiegelBot",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|Nintendo Switch|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},r.detectMobileBrowsers={fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,tabletPattern:/android|ipad|playbook|silk/i};var i=Object.prototype.hasOwnProperty,o;r.FALLBACK_PHONE="UnknownPhone",r.FALLBACK_TABLET="UnknownTablet",r.FALLBACK_MOBILE="UnknownMobile",o="isArray"in Array?Array.isArray:function(g){return Object.prototype.toString.call(g)==="[object Array]"};function s(g,v){return g!=null&&v!=null&&g.toLowerCase()===v.toLowerCase()}function l(g,v){var y,x,E=g.length;if(!E||!v)return!1;for(y=v.toLowerCase(),x=0;x<E;++x)if(y===g[x].toLowerCase())return!0;return!1}function c(g){for(var v in g)i.call(g,v)&&(g[v]=new RegExp(g[v],"i"))}function h(g){return(g||"").substr(0,500)}(function(){var v,y,x,E,T,D,S=r.mobileDetectRules;for(v in S.props)if(i.call(S.props,v)){for(y=S.props[v],o(y)||(y=[y]),T=y.length,E=0;E<T;++E)x=y[E],D=x.indexOf("[VER]"),D>=0&&(x=x.substring(0,D)+"([\\w._\\+]+)"+x.substring(D+5)),y[E]=new RegExp(x,"i");S.props[v]=y}c(S.oss),c(S.phones),c(S.tablets),c(S.uas),c(S.utils),S.oss0={WindowsPhoneOS:S.oss.WindowsPhoneOS,WindowsMobileOS:S.oss.WindowsMobileOS}})(),r.findMatch=function(g,v){for(var y in g)if(i.call(g,y)&&g[y].test(v))return y;return null},r.findMatches=function(g,v){var y=[];for(var x in g)i.call(g,x)&&g[x].test(v)&&y.push(x);return y},r.getVersionStr=function(g,v){var y=r.mobileDetectRules.props,x,E,T,D;if(i.call(y,g)){for(x=y[g],T=x.length,E=0;E<T;++E)if(D=x[E].exec(v),D!==null)return D[1]}return null},r.getVersion=function(g,v){var y=r.getVersionStr(g,v);return y?r.prepareVersionNo(y):NaN},r.prepareVersionNo=function(g){var v;return v=g.split(/[a-z._ \/\-]/i),v.length===1&&(g=v[0]),v.length>1&&(g=v[0]+".",v.shift(),g+=v.join("")),Number(g)},r.isMobileFallback=function(g){return r.detectMobileBrowsers.fullPattern.test(g)||r.detectMobileBrowsers.shortPattern.test(g.substr(0,4))},r.isTabletFallback=function(g){return r.detectMobileBrowsers.tabletPattern.test(g)},r.prepareDetectionCache=function(g,v,y){if(g.mobile===n){var x,E,T;if(E=r.findMatch(r.mobileDetectRules.tablets,v),E){g.mobile=g.tablet=E,g.phone=null;return}if(x=r.findMatch(r.mobileDetectRules.phones,v),x){g.mobile=g.phone=x,g.tablet=null;return}r.isMobileFallback(v)?(T=d.isPhoneSized(y),T===n?(g.mobile=r.FALLBACK_MOBILE,g.tablet=g.phone=null):T?(g.mobile=g.phone=r.FALLBACK_PHONE,g.tablet=null):(g.mobile=g.tablet=r.FALLBACK_TABLET,g.phone=null)):r.isTabletFallback(v)?(g.mobile=g.tablet=r.FALLBACK_TABLET,g.phone=null):g.mobile=g.tablet=g.phone=null}},r.mobileGrade=function(g){var v=g.mobile()!==null;return g.os("iOS")&&g.version("iPad")>=4.3||g.os("iOS")&&g.version("iPhone")>=3.1||g.os("iOS")&&g.version("iPod")>=3.1||g.version("Android")>2.1&&g.is("Webkit")||g.version("Windows Phone OS")>=7||g.is("BlackBerry")&&g.version("BlackBerry")>=6||g.match("Playbook.*Tablet")||g.version("webOS")>=1.4&&g.match("Palm|Pre|Pixi")||g.match("hp.*TouchPad")||g.is("Firefox")&&g.version("Firefox")>=12||g.is("Chrome")&&g.is("AndroidOS")&&g.version("Android")>=4||g.is("Skyfire")&&g.version("Skyfire")>=4.1&&g.is("AndroidOS")&&g.version("Android")>=2.3||g.is("Opera")&&g.version("Opera Mobi")>11&&g.is("AndroidOS")||g.is("MeeGoOS")||g.is("Tizen")||g.is("Dolfin")&&g.version("Bada")>=2||(g.is("UC Browser")||g.is("Dolfin"))&&g.version("Android")>=2.3||g.match("Kindle Fire")||g.is("Kindle")&&g.version("Kindle")>=3||g.is("AndroidOS")&&g.is("NookTablet")||g.version("Chrome")>=11&&!v||g.version("Safari")>=5&&!v||g.version("Firefox")>=4&&!v||g.version("MSIE")>=7&&!v||g.version("Opera")>=10&&!v?"A":g.os("iOS")&&g.version("iPad")<4.3||g.os("iOS")&&g.version("iPhone")<3.1||g.os("iOS")&&g.version("iPod")<3.1||g.is("Blackberry")&&g.version("BlackBerry")>=5&&g.version("BlackBerry")<6||g.version("Opera Mini")>=5&&g.version("Opera Mini")<=6.5&&(g.version("Android")>=2.3||g.is("iOS"))||g.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||g.version("Opera Mobi")>=11&&g.is("SymbianOS")?"B":(g.version("BlackBerry")<5||g.match("MSIEMobile|Windows CE.*Mobile")||g.version("Windows Mobile")<=5.2,"C")},r.detectOS=function(g){return r.findMatch(r.mobileDetectRules.oss0,g)||r.findMatch(r.mobileDetectRules.oss,g)},r.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height};function d(g,v){this.ua=h(g),this._cache={},this.maxPhoneWidth=v||600}return d.prototype={constructor:d,mobile:function(){return r.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return r.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return r.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===n&&(this._cache.userAgent=r.findMatch(r.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return this._cache.userAgents===n&&(this._cache.userAgents=r.findMatches(r.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return this._cache.os===n&&(this._cache.os=r.detectOS(this.ua)),this._cache.os},version:function(g){return r.getVersion(g,this.ua)},versionStr:function(g){return r.getVersionStr(g,this.ua)},is:function(g){return l(this.userAgents(),g)||s(g,this.os())||s(g,this.phone())||s(g,this.tablet())||l(r.findMatches(r.mobileDetectRules.utils,this.ua),g)},match:function(g){return g instanceof RegExp||(g=new RegExp(g,"i")),g.test(this.ua)},isPhoneSized:function(g){return d.isPhoneSized(g||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===n&&(this._cache.grade=r.mobileGrade(this)),this._cache.grade}},typeof window<"u"&&window.screen?d.isPhoneSized=function(g){return g<0?n:r.getDeviceSmallerSide()<=g}:d.isPhoneSized=function(){},d._impl=r,d.version="1.4.5 2021-03-13",d})})(function(t){if(e.exports)return function(n){e.exports=n()};if(typeof window<"u")return function(n){window.MobileDetect=n()};throw new Error("unknown environment")}())}(G5)),G5.exports}var xY=CY();const EY=Cc(xY),Ux=e=>M.jsx("span",{className:"mind-node-emoji",style:{fontSize:`${e.fontSize}px`},children:e.emojiItem.name}),PY=e=>{const t=e;return e.setPluginOptions(Tv,{emojiPadding:0,spaceBetweenEmojis:4}),t.renderEmoji=(n,r)=>{const i=document.createElement("span");n.appendChild(i);const o=q3.createRoot(i);o.render(M.jsx(Ux,{...r}));let s={...r};return{destroy:()=>{setTimeout(()=>{o.unmount()},0)},update:c=>{s={...s,...c},o.render(M.jsx(Ux,{...s}))}}},t},Xx=e=>{const t={src:e.imageItem.url,draggable:!1,width:"100%"};return M.jsx("div",{children:M.jsx("img",{...t,className:sn("image-origin",{"image-origin--focus":e.isFocus})})})};var R0=(e=>(e.COPY="copy",e.PASTE="paste",e.CUT="cut",e.KEYDOWN="keydown",e.KEYUP="keyup",e.MOUSE_MOVE="mousemove",e.RESIZE="resize",e.UNLOAD="unload",e.FOCUS="focus",e.BLUR="blur",e.DRAG_OVER="dragover",e.DROP="drop",e.GESTURE_END="gestureend",e.BEFORE_UNLOAD="beforeunload",e.GESTURE_START="gesturestart",e.GESTURE_CHANGE="gesturechange",e.POINTER_MOVE="pointermove",e.POINTER_DOWN="pointerdown",e.POINTER_UP="pointerup",e.STATE_CHANGE="statechange",e.WHEEL="wheel",e.TOUCH_START="touchstart",e.TOUCH_END="touchend",e.HASHCHANGE="hashchange",e.VISIBILITY_CHANGE="visibilitychange",e.SCROLL="scroll",e.MENU_ITEM_SELECT="menu.itemSelect",e.MESSAGE="message",e.FULLSCREENCHANGE="fullscreenchange",e))(R0||{});const ay={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},ly={json:"application/json",drawnix:"application/vnd.drawnix+json",...ay},SY={drawnix:1},uy=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),TY=uy?Promise.resolve().then(function(){return bY}):Promise.resolve().then(function(){return _Y});async function DY(...e){return(await TY).default(...e)}uy?Promise.resolve().then(function(){return OY}):Promise.resolve().then(function(){return HY});const AY=uy?Promise.resolve().then(function(){return FY}):Promise.resolve().then(function(){return jY});async function BY(...e){return(await AY).default(...e)}const MY=async e=>{const t=await e.getFile();return t.handle=e,t};var RY=async(e=[{}])=>{Array.isArray(e)||(e=[e]);const t=[];e.forEach((i,o)=>{t[o]={description:i.description||"Files",accept:{}},i.mimeTypes?i.mimeTypes.map(s=>{t[o].accept[s]=i.extensions||[]}):t[o].accept["*/*"]=i.extensions||[]});const n=await window.showOpenFilePicker({id:e[0].id,startIn:e[0].startIn,types:t,multiple:e[0].multiple||!1,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}),r=await Promise.all(n.map(MY));return e[0].multiple?r:r[0]},bY={__proto__:null,default:RY};function Jm(e){function t(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var r=n.done;return Promise.resolve(n.value).then(function(i){return{value:i,done:r}})}return Jm=function(n){this.s=n,this.n=n.next},Jm.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(n){var r=this.s.return;return r===void 0?Promise.resolve({value:n,done:!0}):t(r.apply(this.s,arguments))},throw:function(n){var r=this.s.return;return r===void 0?Promise.reject(n):t(r.apply(this.s,arguments))}},new Jm(e)}const PA=async(e,t,n=e.name,r)=>{const i=[],o=[];var s,l=!1,c=!1;try{for(var h,d=function(g){var v,y,x,E=2;for(typeof Symbol<"u"&&(y=Symbol.asyncIterator,x=Symbol.iterator);E--;){if(y&&(v=g[y])!=null)return v.call(g);if(x&&(v=g[x])!=null)return new Jm(v.call(g));y="@@asyncIterator",x="@@iterator"}throw new TypeError("Object is not async iterable")}(e.values());l=!(h=await d.next()).done;l=!1){const g=h.value,v=`${n}/${g.name}`;g.kind==="file"?o.push(g.getFile().then(y=>(y.directoryHandle=e,y.handle=g,Object.defineProperty(y,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>v})))):g.kind!=="directory"||!t||r&&r(g)||i.push(PA(g,t,v,r))}}catch(g){c=!0,s=g}finally{try{l&&d.return!=null&&await d.return()}finally{if(c)throw s}}return[...(await Promise.all(i)).flat(),...await Promise.all(o)]};var kY=async(e={})=>{e.recursive=e.recursive||!1,e.mode=e.mode||"read";const t=await window.showDirectoryPicker({id:e.id,startIn:e.startIn,mode:e.mode});return(await(await t.values()).next()).done?[t]:PA(t,e.recursive,void 0,e.skipDirectory)},OY={__proto__:null,default:kY},IY=async(e,t=[{}],n=null,r=!1,i=null)=>{Array.isArray(t)||(t=[t]),t[0].fileName=t[0].fileName||"Untitled";const o=[];let s=null;if(e instanceof Blob&&e.type?s=e.type:e.headers&&e.headers.get("content-type")&&(s=e.headers.get("content-type")),t.forEach((h,d)=>{o[d]={description:h.description||"Files",accept:{}},h.mimeTypes?(d===0&&s&&h.mimeTypes.push(s),h.mimeTypes.map(g=>{o[d].accept[g]=h.extensions||[]})):s?o[d].accept[s]=h.extensions||[]:o[d].accept["*/*"]=h.extensions||[]}),n)try{await n.getFile()}catch(h){if(n=null,r)throw h}const l=n||await window.showSaveFilePicker({suggestedName:t[0].fileName,id:t[0].id,startIn:t[0].startIn,types:o,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1});!n&&i&&i(l);const c=await l.createWritable();return"stream"in e?(await e.stream().pipeTo(c),l):"body"in e?(await e.body.pipeTo(c),l):(await c.write(await e),await c.close(),l)},FY={__proto__:null,default:IY},LY=async(e=[{}])=>(Array.isArray(e)||(e=[e]),new Promise((t,n)=>{const r=document.createElement("input");r.type="file";const i=[...e.map(c=>c.mimeTypes||[]),...e.map(c=>c.extensions||[])].join();r.multiple=e[0].multiple||!1,r.accept=i||"",r.style.display="none",document.body.append(r);const o=c=>{typeof s=="function"&&s(),t(c)},s=e[0].legacySetup&&e[0].legacySetup(o,()=>s(n),r),l=()=>{window.removeEventListener("focus",l),r.remove()};r.addEventListener("click",()=>{window.addEventListener("focus",l)}),r.addEventListener("change",()=>{window.removeEventListener("focus",l),r.remove(),o(r.multiple?Array.from(r.files):r.files[0])}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),_Y={__proto__:null,default:LY},NY=async(e=[{}])=>(Array.isArray(e)||(e=[e]),e[0].recursive=e[0].recursive||!1,new Promise((t,n)=>{const r=document.createElement("input");r.type="file",r.webkitdirectory=!0;const i=s=>{typeof o=="function"&&o(),t(s)},o=e[0].legacySetup&&e[0].legacySetup(i,()=>o(n),r);r.addEventListener("change",()=>{let s=Array.from(r.files);e[0].recursive?e[0].recursive&&e[0].skipDirectory&&(s=s.filter(l=>l.webkitRelativePath.split("/").every(c=>!e[0].skipDirectory({name:c,kind:"directory"})))):s=s.filter(l=>l.webkitRelativePath.split("/").length===2),i(s)}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),HY={__proto__:null,default:NY},GY=async(e,t={})=>{Array.isArray(t)&&(t=t[0]);const n=document.createElement("a");let r=e;"body"in e&&(r=await async function(s,l){const c=s.getReader(),h=new ReadableStream({start:v=>async function y(){return c.read().then(({done:x,value:E})=>{if(!x)return v.enqueue(E),y();v.close()})}()}),d=new Response(h),g=await d.blob();return c.releaseLock(),new Blob([g],{type:l})}(e.body,e.headers.get("content-type"))),n.download=t.fileName||"Untitled",n.href=URL.createObjectURL(await r);const i=()=>{typeof o=="function"&&o()},o=t.legacySetup&&t.legacySetup(i,()=>o(),n);return n.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(n.href),3e4),i()}),n.click(),null},jY={__proto__:null,default:GY};const SA=e=>{var r,i;const t=(r=e.extensions)==null?void 0:r.reduce((o,s)=>(o.push(ly[s]),o),[]),n=(i=e.extensions)==null?void 0:i.reduce((o,s)=>s==="jpg"?o.concat(".jpg",".jpeg"):o.concat(`.${s}`),[]);return DY({description:e.description,extensions:n,mimeTypes:t,multiple:e.multiple??!1})},$Y=(e,t)=>BY(e,{fileName:`${t.name}.${t.extension}`,description:t.description,extensions:[`.${t.extension}`]},t.fileHandle);var cy=(e=>(e.drawnix="drawnix",e))(cy||{});const WY=()=>new Date().getTime().toString(),TA=async(e,t=WY())=>{const n=UY(e),r=new Blob([n],{type:ly.drawnix});return{fileHandle:await $Y(r,{name:t,extension:"drawnix",description:"Drawnix file"})}},zY=async e=>{const t=await SA({description:"Drawnix files"});return XY(e,await qY(t))},VY=e=>e&&e.type===cy.drawnix&&Array.isArray(e.elements)&&typeof e.viewport=="object",UY=e=>{const t={type:cy.drawnix,version:SY.drawnix,source:"web",elements:e.children,viewport:e.viewport};return JSON.stringify(t,null,2)},XY=async(e,t)=>{const n=await ZY(t);let r;try{if(r=JSON.parse(n),VY(r))return r;throw new Error("Error: invalid file")}catch{throw new Error("Error: invalid file")}},KY=(e,t,n)=>new File([e],n||"",{type:t}),YY=e=>"arrayBuffer"in e?e.arrayBuffer():new Promise((t,n)=>{const r=new FileReader;r.onload=i=>{var o;if(!((o=i.target)!=null&&o.result))return n(new Error("Couldn't convert blob to ArrayBuffer"));t(i.target.result)},r.readAsArrayBuffer(e)}),qY=async e=>{var t;return e.type||(t=e==null?void 0:e.name)!=null&&t.endsWith(".drawnix")&&(e=KY(await YY(e),ly.drawnix,e.name)),e},ZY=async e=>{let t;return"text"in Blob?t=await e.text():t=await new Promise(n=>{const r=new FileReader;r.readAsText(e,"utf8"),r.onloadend=()=>{r.readyState===FileReader.DONE&&n(r.result)}}),t},QY=async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;t(i)},r.onerror=i=>n(i),r.readAsDataURL(e)}),Kx=e=>!!e&&Object.values(ay).includes(e),JY=e=>new Promise((t,n)=>{const r=new Image;r.onload=()=>{t(r)},r.onerror=i=>{n(i)},r.src=e}),eq=(e,t,n)=>{const r=e.width>n?n:e.width,i=r/e.width*e.height;return{url:t,width:r,height:i}},h4=async(e,t,n,r)=>{const i=Qe(e)[0]||mo(e),o=i?240:400,s=await QY(t),l=await JY(s),c=eq(l,s,o),h=n&&il(e,n);if(r&&h&&Be.isMindElement(e,h)){Tr.setImage(e,h,c);return}i&&Be.isMindElement(e,i)&&!r?Tr.setImage(e,i,c):Ui.insertImage(e,c,n)};class tq{constructor(t={}){this.overlay=null,this.imageContainer=null,this.image=null,this.closeButton=null,this.controlsContainer=null,this.delegationHandler=null,this.dragHandler=null,this.mouseUpHandler=null,this.animationFrameId=null,this.pendingUpdate=!1,this.state={zoom:1,x:0,y:0,isDragging:!1,dragStartX:0,dragStartY:0,imageStartX:0,imageStartY:0},this.styleElement=null,this.options={zoomStep:t.zoomStep||.2,minZoom:t.minZoom||.1,maxZoom:t.maxZoom||5,enableKeyboard:t.enableKeyboard!==!1},this.addStyles(),this.bindEvents()}open(t,n=""){this.createOverlay(),this.createImage(t,n),this.resetState(),document.body.style.overflow="hidden"}close(){this.overlay&&(this.cleanupDragEvents(),document.removeEventListener("mousemove",this.delegationHandler),document.removeEventListener("mouseup",this.delegationHandler),document.removeEventListener("keydown",this.delegationHandler),document.removeEventListener("wheel",this.delegationHandler),this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),document.body.removeChild(this.overlay),this.overlay=null,this.image=null,this.imageContainer=null,this.closeButton=null,this.controlsContainer=null,this.delegationHandler=null,this.dragHandler=null,this.mouseUpHandler=null,this.pendingUpdate=!1),document.body.style.overflow=""}createOverlay(){this.overlay=document.createElement("div"),this.overlay.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(45, 45, 45, 0.95);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      cursor: grab;
    `,this.overlay.addEventListener("click",t=>{t.target===this.overlay&&this.close()}),this.createCloseButton(),this.createControls(),document.body.appendChild(this.overlay)}createCloseButton(){this.closeButton=document.createElement("div"),this.closeButton.innerHTML="",this.closeButton.className="image-viewer-close-btn",this.closeButton.addEventListener("click",()=>this.close()),this.overlay.appendChild(this.closeButton)}createControls(){this.controlsContainer=document.createElement("div"),this.controlsContainer.style.cssText=`
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      z-index: 10001;
    `,this.addStyles();const t=document.createElement("button");t.innerHTML="+",t.className="image-viewer-control-btn",t.addEventListener("click",()=>this.zoomIn());const n=document.createElement("button");n.innerHTML="-",n.className="image-viewer-control-btn",n.addEventListener("click",()=>this.zoomOut());const r=document.createElement("button");r.innerHTML="",r.className="image-viewer-control-btn",r.addEventListener("click",()=>this.resetState()),this.controlsContainer.appendChild(n),this.controlsContainer.appendChild(r),this.controlsContainer.appendChild(t),this.overlay.appendChild(this.controlsContainer)}createImage(t,n){this.imageContainer=document.createElement("div"),this.imageContainer.style.cssText=`
      position: relative;
      cursor: grab;
      display: flex;
      align-items: center;
      justify-content: center;
      max-width: calc(100vw - 80px);
      max-height: calc(100vh - 160px);
    `,this.image=document.createElement("img"),this.image.src=t,this.image.alt=n,this.image.style.cssText=`
      max-width: calc(100vw - 80px);
      max-height: calc(100vh - 160px);
      width: auto;
      height: auto;
      display: block;
      user-select: none;
      pointer-events: none;
      object-fit: contain;
    `,this.imageContainer.appendChild(this.image),this.overlay.appendChild(this.imageContainer),this.bindDragEvents()}bindDragEvents(){this.imageContainer&&(this.dragHandler=t=>{if(!this.state.isDragging)return;const n=t.clientX-this.state.dragStartX,r=t.clientY-this.state.dragStartY;this.state.x=this.state.imageStartX+n,this.state.y=this.state.imageStartY+r,this.pendingUpdate||(this.pendingUpdate=!0,this.animationFrameId=requestAnimationFrame(()=>{this.updateImageTransform(),this.pendingUpdate=!1}))},this.mouseUpHandler=()=>{this.state.isDragging&&(this.state.isDragging=!1,this.imageContainer&&(this.imageContainer.style.cursor="grab"),this.overlay&&(this.overlay.style.cursor="grab"),this.cleanupDragEvents())},this.imageContainer.addEventListener("mousedown",t=>{t.preventDefault(),this.state.isDragging=!0,this.state.dragStartX=t.clientX,this.state.dragStartY=t.clientY,this.state.imageStartX=this.state.x,this.state.imageStartY=this.state.y,this.imageContainer&&(this.imageContainer.style.cursor="grabbing"),this.overlay&&(this.overlay.style.cursor="grabbing"),this.dragHandler&&this.mouseUpHandler&&(document.addEventListener("mousemove",this.dragHandler,{passive:!0}),document.addEventListener("mouseup",this.mouseUpHandler,{once:!0}))}))}cleanupDragEvents(){this.dragHandler&&document.removeEventListener("mousemove",this.dragHandler),this.mouseUpHandler&&document.removeEventListener("mouseup",this.mouseUpHandler)}bindEvents(){this.delegationHandler=t=>{if(this.overlay){if(t.type==="keydown"&&this.options.enableKeyboard){const n=t;switch(n.key){case"Escape":this.close();break;case"+":case"=":n.preventDefault(),this.zoomIn();break;case"-":n.preventDefault(),this.zoomOut();break;case"0":n.preventDefault(),this.resetState();break}}else if(t.type==="wheel"){const n=t;n.preventDefault(),n.deltaY<0?this.zoomIn():this.zoomOut()}}},document.addEventListener("keydown",this.delegationHandler),document.addEventListener("wheel",this.delegationHandler,{passive:!1})}zoomIn(){this.state.zoom=Math.min(this.state.zoom+this.options.zoomStep,this.options.maxZoom),this.updateImageTransform()}zoomOut(){this.state.zoom=Math.max(this.state.zoom-this.options.zoomStep,this.options.minZoom),this.updateImageTransform()}resetState(){this.state.zoom=1,this.state.x=0,this.state.y=0,this.updateImageTransform()}updateImageTransform(){this.imageContainer&&(this.imageContainer.style.transform=`
      translate(${this.state.x}px, ${this.state.y}px) 
      scale(${this.state.zoom})
    `)}addStyles(){this.styleElement||(this.styleElement=document.createElement("style"),this.styleElement.textContent=`
        .image-viewer-control-btn {
          background: rgba(0, 0, 0, 0.8);
          color: white;
          border: none;
          padding: 8px 14px;
          border-radius: 4px;
          cursor: pointer;
          font-size: 18px;
          transition: background 0.2s;
          user-select: none;
        }
        
        .image-viewer-control-btn:hover {
          background: rgba(0, 0, 0, 0.4);
        }
        
        .image-viewer-close-btn {
          position: absolute;
          top: 20px;
          right: 30px;
          color: white;
          font-size: 18px;
          cursor: pointer;
          z-index: 10001;
          user-select: none;
          width: 36px;
          height: 34px;
          display: flex;
          border-radius: 50%;
          justify-content: center;
          background: rgba(0, 0, 0, 0.8);
          transition: all 0.2s ease;
          line-height: 34px;
          padding-bottom:2px;
        }
        
        .image-viewer-close-btn:hover {
          background: rgba(0, 0, 0, 0.4);
        }
      `,document.head.appendChild(this.styleElement))}removeStyles(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}destroy(){this.close(),this.removeStyles()}}const nq=e=>{const t=e,{insertFragment:n,drop:r,pointerUp:i}=t,o=new tq({zoomStep:.3,minZoom:.1,maxZoom:5,enableKeyboard:!0});return t.insertFragment=(s,l,c)=>{var h;if((h=s==null?void 0:s.files)!=null&&h.length&&Kx(s.files[0].type)){const d=s.files[0];h4(e,d,l,!1);return}n(s,l,c)},t.drop=s=>{var l,c;if((c=(l=s.dataTransfer)==null?void 0:l.files)!=null&&c.length){const h=s.dataTransfer.files[0];if(Kx(h.type)){const d=Dt(e,Bt(e,s.x,s.y));return h4(e,h,d,!0),!0}}return r(s)},t.pointerUp=s=>{const l=mo(e);if(l&&!Vl(e)&&!mi(e)&&!dc(e)){const c=Dt(e,Bt(e,s.x,s.y)),h=il(e,c);h&&Be.isMindElement(e,h)&&Be.hasImage(h)&&nA(e,h,c)&&l===h&&o.open(h.data.image.url)}i(s)},t},rq={"toolbar.hand":"  H","toolbar.selection":"  V","toolbar.mind":"  M","toolbar.text":"  T","toolbar.arrow":"  A","toolbar.shape":"","toolbar.image":"  Cmd+U","toolbar.extraTools":"","toolbar.pen":"  P","toolbar.eraser":"  E","toolbar.arrow.straight":"","toolbar.arrow.elbow":"","toolbar.arrow.curve":"","toolbar.shape.rectangle":"  R","toolbar.shape.ellipse":"  O","toolbar.shape.triangle":"","toolbar.shape.terminal":"","toolbar.shape.diamond":"","toolbar.shape.parallelogram":"","toolbar.shape.roundRectangle":"","zoom.in":"  Cmd++","zoom.out":"  Cmd+-","zoom.fit":"","zoom.100":" 100%","theme.default":"","theme.colorful":"","theme.soft":"","theme.retro":"","theme.dark":"","theme.starry":"","color.none":"","color.unknown":"","color.default":"","color.white":"","color.gray":"","color.deepBlue":"","color.red":"","color.green":"","color.yellow":"","color.purple":"","color.orange":"","color.pastelPink":"","color.cyan":"","color.brown":"","color.forestGreen":"","color.lightGray":"","general.undo":"","general.redo":"","general.menu":"","general.duplicate":"","general.delete":"","language.switcher":"Language","language.chinese":"","language.english":"English","language.russian":"","menu.open":"","menu.saveFile":"","menu.exportImage":"","menu.exportImage.png":"PNG","menu.exportImage.jpg":"JPG","menu.cleanBoard":"","menu.github":"GitHub","dialog.mermaid.title":"Mermaid  Drawnix","dialog.mermaid.description":"","dialog.mermaid.flowchart":"","dialog.mermaid.sequence":"","dialog.mermaid.class":"","dialog.mermaid.otherTypes":" Drawnix ","dialog.mermaid.syntax":"Mermaid ","dialog.mermaid.placeholder":" Mermaid ","dialog.mermaid.preview":"","dialog.mermaid.insert":"","dialog.markdown.description":" Markdown ","dialog.markdown.syntax":"Markdown ","dialog.markdown.placeholder":" Markdown ","dialog.markdown.preview":"","dialog.markdown.insert":"","dialog.error.loadMermaid":" Mermaid ","extraTools.mermaidToDrawnix":"Mermaid  Drawnix","extraTools.markdownToDrawnix":"Markdown  Drawnix","cleanConfirm.title":"","cleanConfirm.description":"?","cleanConfirm.cancel":"","cleanConfirm.ok":"","popupLink.delLink":"","popupToolbar.fillColor":"","popupToolbar.fontColor":"","popupToolbar.link":"","popupToolbar.stroke":"","textPlaceholders.link":"","textPlaceholders.text":"","line.source":"","line.target":"","line.arrow":"","line.none":"","stroke.solid":"","stroke.dashed":"","stroke.dotted":"","draw.lineText":"","draw.geometryText":"","mind.centralText":"","mind.abstractNodeText":"","markdown.example":`# 
  
  -  bug   
    -  
      -    
  
  -    
    -  
      -    
  
  -   
    -   
      -    
      
  ##      
  
  ### Hello world    
  
  ####       `},iq={"toolbar.hand":"Hand  H","toolbar.selection":"Selection  V","toolbar.mind":"Mind  M","toolbar.text":"Text  T","toolbar.arrow":"Arrow  A","toolbar.shape":"Shape","toolbar.image":"Image  Cmd+U","toolbar.extraTools":"Extra Tools","toolbar.pen":"Pen  P","toolbar.eraser":"Eraser  E","toolbar.arrow.straight":"Straight Arrow Line","toolbar.arrow.elbow":"Elbow Arrow Line","toolbar.arrow.curve":"Curve Arrow Line","toolbar.shape.rectangle":"Rectangle  R","toolbar.shape.ellipse":"Ellipse  O","toolbar.shape.triangle":"Triangle","toolbar.shape.terminal":"Terminal","toolbar.shape.diamond":"Diamond","toolbar.shape.parallelogram":"Parallelogram","toolbar.shape.roundRectangle":"Round Rectangle","zoom.in":"Zoom In  Cmd++","zoom.out":"Zoom Out  Cmd+-","zoom.fit":"Fit to Screen","zoom.100":"Zoom to 100%","theme.default":"Default","theme.colorful":"Colorful","theme.soft":"Soft","theme.retro":"Retro","theme.dark":"Dark","theme.starry":"Starry","color.none":"Topic Color","color.unknown":"Other Color","color.default":"Basic Black","color.white":"White","color.gray":"Grey","color.deepBlue":"Deep Blue","color.red":"Red","color.green":"Green","color.yellow":"Yellow","color.purple":"Purple","color.orange":"Orange","color.pastelPink":"Paster Pink","color.cyan":"Cyan","color.brown":"Brown","color.forestGreen":"Forest Green","color.lightGray":"Light Grey","general.undo":"Undo","general.redo":"Redo","general.menu":"App Menu","general.duplicate":"Duplicate","general.delete":"Delete","language.switcher":"Language","language.chinese":"","language.english":"English","language.russian":"","menu.open":"Open","menu.saveFile":"Save File","menu.exportImage":"Export Image","menu.exportImage.png":"PNG","menu.exportImage.jpg":"JPG","menu.cleanBoard":"Clear Board","menu.github":"GitHub","dialog.mermaid.title":"Mermaid to Drawnix","dialog.mermaid.description":"Currently supports","dialog.mermaid.flowchart":"flowcharts","dialog.mermaid.sequence":"sequence diagrams","dialog.mermaid.class":"class diagrams","dialog.mermaid.otherTypes":", and other diagram types (rendered as images).","dialog.mermaid.syntax":"Mermaid Syntax","dialog.mermaid.placeholder":"Write your Mermaid chart definition here","dialog.mermaid.preview":"Preview","dialog.mermaid.insert":"Insert","dialog.markdown.description":"Supports automatic conversion of Markdown syntax to mind map.","dialog.markdown.syntax":"Markdown Syntax","dialog.markdown.placeholder":"Write your Markdown text definition here...","dialog.markdown.preview":"Preview","dialog.markdown.insert":"Insert","dialog.error.loadMermaid":"Failed to load Mermaid library","extraTools.mermaidToDrawnix":"Mermaid to Drawnix","extraTools.markdownToDrawnix":"Markdown to Drawnix","cleanConfirm.title":"Clear Board","cleanConfirm.description":"This will clear the entire board. Do you want to continue?","cleanConfirm.cancel":"Cancel","cleanConfirm.ok":"OK","popupLink.delLink":"Delete Link","popupToolbar.fillColor":"Fill Color","popupToolbar.fontColor":"Font Color","popupToolbar.link":"Insert Link","popupToolbar.stroke":"Stroke","textPlaceholders.link":"Link","textPlaceholders.text":"Text","line.source":"Start","line.target":"End","line.arrow":"Arrow","line.none":"None","stroke.solid":"Solid","stroke.dashed":"Dashed","stroke.dotted":"Dotted","markdown.example":`# I have started

  - Let me see who made this bug   
    -  
      - Turns out it was me   

  - Unexpectedly, it cannot run; why is that   
    - Unexpectedly, it can run now; why is that?  
      -    

  - What can run  
    - then do not touch it  
      -    
    
  ## Boy or girl     

  ### Hello world    

  #### Wow, a programmer     `,"draw.lineText":"Text","draw.geometryText":"Text","mind.centralText":"Central Topic","mind.abstractNodeText":"Summary"},oq={"toolbar.hand":"  H","toolbar.selection":"  V","toolbar.mind":"Mind-  M","toolbar.text":"  T","toolbar.arrow":"  A","toolbar.shape":"","toolbar.image":"  Cmd+U","toolbar.extraTools":"","toolbar.pen":"  P","toolbar.eraser":"  E","toolbar.arrow.straight":" ","toolbar.arrow.elbow":" ","toolbar.arrow.curve":" ","toolbar.shape.rectangle":"  R","toolbar.shape.ellipse":"  O","toolbar.shape.triangle":"","toolbar.shape.terminal":"","toolbar.shape.diamond":"","toolbar.shape.parallelogram":"","toolbar.shape.roundRectangle":" ","zoom.in":"  Cmd++","zoom.out":"  Cmd+-","zoom.fit":"  ","zoom.100":"  100%","theme.default":"","theme.colorful":"","theme.soft":"","theme.retro":"","theme.dark":"","theme.starry":"","color.none":"","color.unknown":" ","color.default":"","color.white":"","color.gray":"","color.deepBlue":"","color.red":"","color.green":"","color.yellow":"","color.purple":"","color.orange":"","color.pastelPink":"","color.cyan":"","color.brown":"","color.forestGreen":"","color.lightGray":"-","general.undo":"","general.redo":"","general.menu":" ","general.duplicate":"","general.delete":"","language.switcher":"Language","language.chinese":"","language.english":"English","language.russian":"","menu.open":"","menu.saveFile":"","menu.exportImage":"","menu.exportImage.png":"PNG","menu.exportImage.jpg":"JPG","menu.cleanBoard":" ","menu.github":"GitHub","dialog.mermaid.title":"Mermaid  Drawnix","dialog.mermaid.description":"","dialog.mermaid.flowchart":"-","dialog.mermaid.sequence":" ","dialog.mermaid.class":" ","dialog.mermaid.otherTypes":"    (  ).","dialog.mermaid.syntax":" Mermaid","dialog.mermaid.placeholder":"    Mermaid-","dialog.mermaid.preview":"","dialog.mermaid.insert":"","dialog.markdown.description":"    Markdown  mind-.","dialog.markdown.syntax":" Markdown","dialog.markdown.placeholder":"     Markdown","dialog.markdown.preview":"","dialog.markdown.insert":"","dialog.error.loadMermaid":"    Mermaid","extraTools.mermaidToDrawnix":"Mermaid  Drawnix","extraTools.markdownToDrawnix":"Markdown  Drawnix","cleanConfirm.title":" ","cleanConfirm.description":"    .   ?","cleanConfirm.cancel":"","cleanConfirm.ok":"","popupLink.delLink":" ","popupToolbar.fillColor":" ","popupToolbar.fontColor":" ","popupToolbar.link":" ","popupToolbar.stroke":"","textPlaceholders.link":"","textPlaceholders.text":"","line.source":"","line.target":"","line.arrow":"","line.none":"","stroke.solid":"","stroke.dashed":"","stroke.dotted":"","markdown.example":`# I have started

  - Let me see who made this bug   
    -  
      - Turns out it was me   

  - Unexpectedly, it cannot run; why is that   
    - Unexpectedly, it can run now; why is that?  
      -    

  - What can run  
    - then do not touch it  
      -    
    
  ## Boy or girl     

  ### Hello world    

  #### Wow, a programmer     `,"draw.lineText":"","draw.geometryText":"","mind.centralText":" ","mind.abstractNodeText":""},DA={zh:rq,en:iq,ru:oq},AA=G.createContext(void 0),sq=({children:e,defaultLanguage:t="zh"})=>{const[n,r]=G.useState(()=>localStorage.getItem("language")||t),i=l=>{localStorage.setItem("language",l),r(l)},o=l=>DA[n][l]||l,s=G.useMemo(()=>({language:n,setLanguage:i,t:o}),[n]);return M.jsx(AA.Provider,{value:s,children:e})},Zn=()=>{const e=G.useContext(AA);if(!e)throw new Error("useI18n must be used within I18nProvider");return e},aq=()=>({t:t=>{const n=localStorage.getItem("language")||"zh";return DA[n][t]||t},language:localStorage.getItem("language")||"zh"}),BA=e=>{const t=e;t.renderImage=(r,i)=>{const o=q3.createRoot(r);o.render(M.jsx(Xx,{...i}));let s={...i};return{destroy:()=>{setTimeout(()=>{o.unmount()},0)},update:c=>{s={...s,...c},o.render(M.jsx(Xx,{...s}))}}};const{t:n}=aq();return t.getI18nValue=r=>r===D0.lineText?n("draw.lineText"):r===D0.geometryText?n("draw.geometryText"):r===B0.mindCentralText?n("mind.centralText"):r===B0.abstractNodeText?n("mind.abstractNodeText"):null,nq(t)},Bo=xt.forwardRef(({children:e,padding:t,className:n,style:r,...i},o)=>M.jsx("div",{className:sn("island",n),style:{"--padding":t,...r},ref:o,...i,children:e})),lq=G.forwardRef(({children:e,gap:t,align:n,justifyContent:r,className:i,style:o},s)=>M.jsx("div",{className:sn("stack stack_horizontal",i),style:{"--gap":t,alignItems:n,justifyContent:r,...o},ref:s,children:e})),uq=G.forwardRef(({children:e,gap:t,align:n,justifyContent:r,className:i,style:o},s)=>M.jsx("div",{className:sn("stack stack_vertical",i),style:{"--gap":t,justifyItems:n,justifyContent:r,...o},ref:s,children:e})),Ri={Row:lq,Col:uq};class cq extends DOMException{constructor(t="Request Aborted"){super(t,"AbortError")}}const fq=e=>!!e&&typeof e=="object"&&"then"in e&&"catch"in e&&"finally"in e,hq=(e,t,{checkForDefaultPrevented:n=!0}={})=>function(i){if(e==null||e(i),!n||!(i!=null&&i.defaultPrevented))return t==null?void 0:t(i)},dq=e=>{const t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]);let i=r.length;const o=new Uint8Array(i);for(;i--;)o[i]=r.charCodeAt(i);return new Blob([o],{type:n})},gq=(e,t={})=>_I(e,{fillStyle:"transparent",inlineStyleClassNames:".extend,.emojis,.text",padding:20,ratio:4,...t});function pq(e,t){const n=document.createElement("a"),r=window.URL.createObjectURL(e);n.href=r,n.download=t,document.body.append(n),n.click(),window.URL.revokeObjectURL(r),n.remove()}const fy=(e,t)=>{const n=[];for(let r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n},Cp=e=>(e=e.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter"),d3||zO?e.replace(/\bCtrlOrCmd\b/gi,"Cmd").replace(/\bAlt\b/i,"Option"):e.replace(/\bCtrlOrCmd\b/gi,"Ctrl")),bn=xt.forwardRef((e,t)=>{const{id:n}={id:"drawnix"},r=xt.useRef(null);xt.useImperativeHandle(t,()=>r.current);const i=`tool-icon_size_${e.size||"medium"}`,[o,s]=G.useState(!1),l=G.useRef(!0),c=async d=>{var v;const g="onClick"in e&&((v=e.onClick)==null?void 0:v.call(e,d));if(fq(g))try{s(!0),await g}catch(y){if(y instanceof cq)console.warn(y);else throw y}finally{l.current&&s(!1)}};G.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const h=G.useRef(null);if(e.type==="button"||e.type==="icon"||e.type==="submit"){const d=e.type==="icon"?"button":e.type;return M.jsxs("button",{className:sn("tool-icon_type_button",i,e.className,e.visible&&!e.hidden?"tool-icon_type_button--show":"tool-icon_type_button--hide",{"tool-icon":!e.hidden,"tool-icon--selected":e.selected}),style:e.style,"data-testid":e["data-testid"],hidden:e.hidden,title:e.title,"aria-label":e["aria-label"],type:d,onClick:c,onPointerDown:g=>{var v;(v=e.onPointerDown)==null||v.call(e,{pointerType:g.pointerType||null,event:g})},onPointerUp:g=>{var v;(v=e.onPointerUp)==null||v.call(e,{pointerType:g.pointerType||null})},ref:r,disabled:o||!!e.disabled,children:[(e.icon||e.label)&&M.jsxs("div",{className:"tool-icon__icon","aria-hidden":"true","aria-disabled":!!e.disabled,children:[e.icon||e.label,e.keyBindingLabel&&M.jsx("span",{className:"tool-icon__keybinding",children:e.keyBindingLabel})]}),e.showAriaLabel&&M.jsx("div",{className:"tool-icon__label",children:e["aria-label"]}),e.children&&M.jsx("div",{className:"tool-icon__icon",children:e.children})]})}return M.jsxs("label",{className:sn("tool-icon",e.className),title:e.title,onPointerDown:d=>{var g;h.current=d.pointerType||null,(g=e.onPointerDown)==null||g.call(e,{pointerType:d.pointerType||null,event:d})},onPointerUp:d=>{var g;(g=e.onPointerUp)==null||g.call(e,{pointerType:d.pointerType||null}),requestAnimationFrame(()=>{h.current=null})},children:[M.jsx("input",{className:`tool-icon_type_radio ${i}`,type:"radio",name:e.name,"aria-label":e["aria-label"],"aria-keyshortcuts":e["aria-keyshortcuts"],"data-testid":e["data-testid"],id:`${n}-${e.id}`,onChange:()=>{var d;(d=e.onChange)==null||d.call(e,{pointerType:h.current})},checked:e.checked,ref:r}),M.jsxs("div",{className:"tool-icon__icon",children:[e.icon,e.keyBindingLabel&&M.jsx("span",{className:"tool-icon__keybinding",children:e.keyBindingLabel})]})]})});bn.displayName="ToolButton";const jt=e=>e,mq=jt(M.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:M.jsx("g",{id:"Hand",stroke:"none",fill:"currentColor",children:M.jsx("path",{d:"M8.44583468,0.500225887 C9.07406934,0.510185679 9.54739531,0.839591366 9.86192311,1.34305279 C9.89696656,1.39914649 9.92878401,1.45492964 9.9576026,1.50991157 L9.9576026,1.50991157 L10.0210033,1.64201027 L10.061978,1.62350755 C10.1972891,1.56834247 10.3444107,1.53218464 10.5027907,1.51755353 L10.5027907,1.51755353 L10.6649031,1.51019133 C11.4883708,1.51019133 12.0208782,1.99343346 12.3023042,2.66393278 C12.3903714,2.87392911 12.4344191,3.10047818 12.4339446,3.3257952 L12.4339446,3.3257952 L12.4360033,3.80501027 L12.5160535,3.78341501 C12.6124478,3.76124046 12.7138812,3.74739854 12.820201,3.74250274 L12.820201,3.74250274 L12.9833264,3.74194533 C13.6121166,3.7657478 14.0645887,4.0801724 14.3087062,4.56112689 C14.4521117,4.8436609 14.4987984,5.11349437 14.4999262,5.33449618 L14.4999262,5.33449618 L14.3922653,12.049414 C14.3784752,12.909177 14.0717787,13.7360948 13.5212406,14.3825228 C13.4055676,14.5183496 13.2843697,14.643961 13.1582361,14.7596335 C12.4634771,15.3967716 11.755103,15.6538706 11.1897396,15.7000055 L11.1897396,15.7000055 L7.4723083,15.6798158 C7.14276373,15.634268 6.81580098,15.5154267 6.49455235,15.3472501 C6.25643701,15.2225944 6.06881706,15.0975452 5.88705731,14.9494308 L5.88705731,14.9494308 L2.55198782,11.500873 C2.39559475,11.3769079 2.17626793,11.1748532 1.9548636,10.9139403 C1.57867502,10.4706225 1.33501976,10.0139923 1.30330257,9.52833025 C1.28093191,9.18578476 1.37200912,8.85641102 1.5826788,8.56872564 C1.82538833,8.23725279 2.12881965,8.02107162 2.47470569,7.92957033 C2.95807982,7.80169771 3.42705723,7.92468989 3.86509644,8.18731167 C4.04431391,8.29475961 4.1816109,8.40304483 4.26225571,8.47866867 L4.26225571,8.47866867 L4.61400328,8.79701027 L4.57247249,3.59275349 L4.57628524,3.46204923 C4.5897691,3.23444442 4.64087578,2.95701848 4.75937106,2.66961597 C5.01017272,2.06131302 5.49670227,1.64692543 6.21363856,1.60818786 C6.44223508,1.59583681 6.65042099,1.62176802 6.83696985,1.68057551 L6.83696985,1.68057551 L6.86400328,1.69001027 C6.88501862,1.63593052 6.90764242,1.58175442 6.9331867,1.52672633 L6.9331867,1.52672633 L7.01883595,1.35955614 C7.31549194,0.832047939 7.79476072,0.48993549 8.44583468,0.500225887 Z M8.42684173,1.70001476 C8.26825412,1.69756905 8.16339456,1.77242008 8.06478367,1.94776814 C8.03967773,1.99241107 8.01831703,2.03811495 8.00083464,2.07855067 L8.00083464,2.07855067 L7.94879157,2.2035905 L7.94354455,2.20731401 L7.943,3.161 L7.97170661,3.16123746 L7.97170661,7.60991883 L6.77170661,7.60991883 L6.771,3.338 L6.74362358,3.33880359 C6.74284189,3.29064626 6.73014163,3.20282206 6.7002616,3.11094408 L6.66446012,3.01903385 C6.58982025,2.85766739 6.49843292,2.79455071 6.27838133,2.80644008 C6.07001018,2.81769881 5.95642108,2.91444507 5.86877664,3.12702089 C5.79792279,3.29887224 5.77228127,3.48655908 5.77246879,3.58977183 L5.77246879,3.58977183 L5.83613619,11.5252021 L3.41863956,9.33477657 L3.31637296,9.25979571 L3.24805011,9.21651224 C3.06096922,9.10434987 2.89279975,9.06024641 2.78159879,9.0896637 C2.71007735,9.10858411 2.63607367,9.1613084 2.55086305,9.27768211 C2.51020424,9.33320478 2.49638061,9.38319687 2.50075171,9.4501283 C2.51206889,9.62341997 2.64503022,9.87260054 2.86983366,10.1375191 C3.03268834,10.3294345 3.19762053,10.4813781 3.35554956,10.6131022 L3.35554956,10.6131022 L6.68454317,14.0569073 C6.71106575,14.0773808 6.74806086,14.1037158 6.79369091,14.1335929 L6.79369091,14.1335929 L6.95464838,14.2315311 L7.05111031,14.2841211 C7.25978123,14.3933622 7.46253523,14.4670573 7.55685495,14.4854708 L7.55685495,14.4854708 L11.1407985,14.5022108 C11.1503576,14.5013899 11.1627905,14.4997539 11.1779002,14.4971772 L11.1779002,14.4971772 L11.2991076,14.4694224 C11.3491682,14.4557375 11.4083624,14.437284 11.4751158,14.4130563 C11.769383,14.3062543 12.066676,14.1324596 12.3471758,13.8752234 C12.4371203,13.7927386 12.5240597,13.7026333 12.607654,13.6044743 C12.9760464,13.1719172 13.183059,12.6137678 13.1924195,12.030173 L13.1924195,12.030173 L13.3000132,5.32832551 C13.2997939,5.29016685 13.2826117,5.19085946 13.2386527,5.10425262 C13.1843838,4.99733326 13.1129774,4.94771265 12.9379578,4.94108739 C12.6814739,4.93138871 12.534132,5.11189595 12.4756792,5.39480062 L12.4768718,7.52734922 L11.2768718,7.52734922 L11.276,5.688 L11.2462883,5.6883208 L11.2339541,3.32771285 C11.2341,3.2560396 11.2209054,3.18817621 11.1957482,3.12818892 C11.0820579,2.85732094 10.9199288,2.71019133 10.6649031,2.71019133 C10.456829,2.71019133 10.3197487,2.87378067 10.2524297,3.11264939 L10.2530225,7.512783 L9.05302254,7.512783 L9.053,3.288 L9.01554331,3.28724203 L8.98800328,2.29901027 L8.9629175,2.22263368 C8.94515567,2.17417174 8.92167756,2.11937748 8.8924232,2.06330056 L8.8924232,2.06330056 L8.84420197,1.9788544 C8.72758855,1.79219249 8.59915015,1.70280728 8.42684173,1.70001476 Z"})})})),vq=jt(M.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:M.jsx("g",{id:"selection",stroke:"none",fill:"currentColor",children:M.jsx("path",{d:"M1.38232686,2.38218266 L5.4143451,14.2246629 L5.45540179,14.3136477 C5.6738376,14.7029541 6.25143564,14.7273637 6.49230627,14.3232393 L8.11486037,11.5990854 L10.8833927,14.4351257 C11.1162256,14.673686 11.4988798,14.6767204 11.7354668,14.4418826 L14.1933351,12.0021862 L14.263123,11.9192708 C14.4260847,11.6858139 14.4039042,11.3621027 14.1959502,11.1531274 L11.3598604,8.30408543 L14.0003903,6.44278167 C14.4042341,6.15799031 14.3099422,5.5344405 13.8399491,5.38178897 L2.13023795,1.60291226 C1.65322163,1.44797961 1.20794286,1.91192855 1.38232686,2.38218266 Z M2.93689198,3.12556703 L12.3288604,6.15308543 L10.0883903,7.73315528 L10.0121747,7.79676991 C9.78025886,8.02517222 9.77056424,8.40723513 10.0088753,8.64671667 L12.9218604,11.5730854 L11.3198604,13.1630854 L8.42938714,10.2026992 L8.35682877,10.1391916 C8.07802132,9.93187508 7.66955488,10.0042813 7.48460396,10.3145856 L6.10286037,12.6310854 L2.93689198,3.12556703 Z"})})})),yq=jt(M.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:M.jsx("g",{id:"Mind",stroke:"none",fill:"currentColor",children:M.jsx("path",{d:"M14.5,1.5 C15.3284271,1.5 16,2.17157288 16,3 L16,4.5 C16,5.32842712 15.3284271,6 14.5,6 L10.5,6 C9.70541385,6 9.05512881,5.38217354 9.00332687,4.60070262 L7.75,4.6 C6.70187486,4.6 5.75693372,5.0417832 5.09122946,5.7492967 L5.5,5.75 C6.32842712,5.75 7,6.42157288 7,7.25 L7,8.75 C7,9.57842712 6.32842712,10.25 5.5,10.25 L4.69703093,10.2512226 C5.3493111,11.2442937 6.47308134,11.9 7.75,11.9 L9.004,11.9 L9.00686658,11.85554 C9.07955132,11.0948881 9.72030388,10.5 10.5,10.5 L14.5,10.5 C15.3284271,10.5 16,11.1715729 16,12 L16,13.5 C16,14.3284271 15.3284271,15 14.5,15 L10.5,15 C9.67157288,15 9,14.3284271 9,13.5 L9,13.1 L7.75,13.1 C5.78479628,13.1 4.09258608,11.9311758 3.33061658,10.2507745 L1.5,10.25 C0.671572875,10.25 0,9.57842712 0,8.75 L0,7.25 C0,6.42157288 0.671572875,5.75 1.5,5.75 L3.5932906,5.74973863 C4.44206161,4.34167555 5.98606075,3.4 7.75,3.4 L9,3.4 L9,3 C9,2.17157288 9.67157288,1.5 10.5,1.5 L14.5,1.5 Z M14.5,11.7 L10.5,11.7 C10.3343146,11.7 10.2,11.8343146 10.2,12 L10.2,13.5 C10.2,13.6656854 10.3343146,13.8 10.5,13.8 L14.5,13.8 C14.6656854,13.8 14.8,13.6656854 14.8,13.5 L14.8,12 C14.8,11.8343146 14.6656854,11.7 14.5,11.7 Z M5.5,6.95 L1.5,6.95 C1.33431458,6.95 1.2,7.08431458 1.2,7.25 L1.2,8.75 C1.2,8.91568542 1.33431458,9.05 1.5,9.05 L5.5,9.05 C5.66568542,9.05 5.8,8.91568542 5.8,8.75 L5.8,7.25 C5.8,7.08431458 5.66568542,6.95 5.5,6.95 Z M14.5,2.7 L10.5,2.7 C10.3343146,2.7 10.2,2.83431458 10.2,3 L10.2,4.5 C10.2,4.66568542 10.3343146,4.8 10.5,4.8 L14.5,4.8 C14.6656854,4.8 14.8,4.66568542 14.8,4.5 L14.8,3 C14.8,2.83431458 14.6656854,2.7 14.5,2.7 Z"})})})),wq=jt(M.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:M.jsx("g",{id:"geometry",stroke:"none",fill:"currentColor",children:M.jsx("path",{d:"M9.3,6.7 L1.7,6.7 L1.7,14.3 L9.3,14.3 L9.3,6.7 Z M10.5,9.8 C12.8748244,9.8 14.8,7.87482442 14.8,5.5 C14.8,3.12517558 12.8748244,1.2 10.5,1.2 C8.12517558,1.2 6.2,3.12517558 6.2,5.5 L9.5,5.5 C10.0522847,5.5 10.5,5.94771525 10.5,6.5 L10.5,9.8 Z M10.5,14.5 C10.5,15.0522847 10.0522847,15.5 9.5,15.5 L1.5,15.5 C0.94771525,15.5 0.5,15.0522847 0.5,14.5 L0.5,6.5 C0.5,5.94771525 0.94771525,5.5 1.5,5.5 L5,5.5 C5,2.46243388 7.46243388,0 10.5,0 C13.5375661,0 16,2.46243388 16,5.5 C16,8.53756612 13.5375661,11 10.5,11 L10.5,14.5 Z"})})})),Cq=jt(M.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:M.jsx("g",{id:"font",stroke:"none",fill:"currentColor",children:M.jsx("path",{d:"M4.75,14.5069828 C4.41862915,14.5069828 4.15,14.2383536 4.15,13.9069828 C4.15,13.5756119 4.41862915,13.3069828 4.75,13.3069828 L7.3993606,13.306 L7.3993606,2.7 L2.7113606,2.7 L2.7113606,4.10415313 C2.7113606,4.40238689 2.49377099,4.64979988 2.20868371,4.69630014 L2.1113606,4.70415313 C1.77998975,4.70415313 1.5113606,4.43552397 1.5113606,4.10415313 L1.5113606,2.1 C1.5113606,1.76862915 1.77998975,1.5 2.1113606,1.5 L13.8810378,1.5 C14.2124087,1.5 14.4810378,1.76862915 14.4810378,2.1 L14.4810378,4.10415313 C14.4810378,4.43552397 14.2124087,4.70415313 13.8810378,4.70415313 C13.549667,4.70415313 13.2810378,4.43552397 13.2810378,4.10415313 L13.2810378,2.7 L8.5993606,2.7 L8.5993606,13.306 L11.25,13.3069828 C11.5813708,13.3069828 11.85,13.5756119 11.85,13.9069828 C11.85,14.2383536 11.5813708,14.5069828 11.25,14.5069828 L4.75,14.5069828 Z"})})})),xq=jt(M.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[M.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),M.jsx("path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"}),M.jsx("path",{d:"M18 13.3l-6.3 -6.3"})]})),Eq=jt(M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:M.jsx("g",{id:"straight-line",stroke:"none",fill:"currentColor",children:M.jsx("path",{d:"M8.55595221,-1.5261864 C8.88741773,-1.5261864 9.15621426,-1.25765205 9.15653772,-0.926186684 L9.16739175,10.3828136 L10.9946787,10.3836977 C11.2708211,10.3836977 11.4946787,10.6075553 11.4946787,10.8836977 C11.4946787,10.9607525 11.4768694,11.0367648 11.4426413,11.1058002 L8.8378495,16.3594519 C8.7642512,16.5078936 8.58425218,16.5685662 8.43581043,16.4949679 C8.37895485,16.4667786 8.33250284,16.4212859 8.30313336,16.3650308 L5.56226325,11.1150985 C5.43446412,10.8703088 5.52930372,10.5682659 5.77409341,10.4404667 C5.84552557,10.4031736 5.92491301,10.3836977 6.0054942,10.3836977 L7.96739175,10.3828136 L7.95653772,-0.926186684 C7.95621467,-1.25723416 8.22431979,-1.52586306 8.55536727,-1.52618611 Z",id:"",transform:"translate(8.500035, 7.500035) rotate(-135.000000) translate(-8.500035, -7.500035) "})})})),Pq=jt(M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:M.jsx("path",{d:"M3 3h18v18H3z",stroke:"currentColor",strokeWidth:"2",fill:"none"})})),Sq=jt(M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:M.jsx("g",{id:"terminal",stroke:"none",fill:"currentColor",children:M.jsx("path",{d:"M11,3 C13.7614237,3 16,5.23857625 16,8 C16,10.7614237 13.7614237,13 11,13 L5,13 C2.23857625,13 0,10.7614237 0,8 C0,5.23857625 2.23857625,3 5,3 L11,3 Z M11,4.2 L5,4.2 C2.90131795,4.2 1.2,5.90131795 1.2,8 C1.2,10.0330982 2.79664702,11.6932796 4.8044525,11.7950555 L5,11.8 L11,11.8 C13.098682,11.8 14.8,10.098682 14.8,8 C14.8,5.96690176 13.203353,4.30672042 11.1955475,4.20494454 L11,4.2 Z"})})})),Tq=jt(M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:M.jsx("g",{id:"ellipse",stroke:"none",fill:"currentColor",children:M.jsx("path",{d:"M8,1 C11.8659932,1 15,4.13400675 15,8 C15,11.8659932 11.8659932,15 8,15 C4.13400675,15 1,11.8659932 1,8 C1,4.13400675 4.13400675,1 8,1 Z M8,2.2 C4.79674845,2.2 2.2,4.79674845 2.2,8 C2.2,11.2032515 4.79674845,13.8 8,13.8 C11.2032515,13.8 13.8,11.2032515 13.8,8 C13.8,4.79674845 11.2032515,2.2 8,2.2 Z"})})})),Dq=jt(M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:M.jsx("g",{id:"triangle",stroke:"none",fill:"currentColor",children:M.jsx("path",{d:"M8.23125547,1.21366135 C8.3114266,1.25857939 8.37766784,1.32472334 8.42270367,1.40482837 L15.6471754,14.2549655 C15.7825042,14.4956743 15.6970768,14.800513 15.456368,14.9358418 C15.3815505,14.977905 15.2971646,15 15.2113335,15 L0.787227066,15 C0.511084691,15 0.287227066,14.7761424 0.287227066,14.5 C0.287227066,14.414418 0.309194147,14.3302684 0.351025556,14.2556064 L7.55066033,1.40546924 C7.6856352,1.1645618 7.99034802,1.07868648 8.23125547,1.21366135 Z M7.98695902,3.07926294 L1.98095902,13.7992629 L14.014959,13.7992629 L7.98695902,3.07926294 Z"})})})),Aq=jt(M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:M.jsx("g",{stroke:"none",fill:"currentColor",children:M.jsx("path",{d:"M13.7636471,2.6449804 C13.7716713,2.69552516 13.7718878,2.74700226 13.7642892,2.79761274 L12.3875778,11.9671885 C12.3550099,12.1841069 12.184864,12.3544698 11.9679874,12.3873141 L2.78433018,13.7781116 C2.511301,13.8194599 2.25644773,13.6316454 2.21509947,13.3586162 C2.20737253,13.307594 2.20759072,13.2556831 2.21574631,13.2047277 L3.67471119,4.08923146 C3.70888725,3.87570215 3.87646006,3.70834166 4.09003253,3.67443635 L13.1914362,2.22955927 C13.4641633,2.18626298 13.7203508,2.37225335 13.7636471,2.6449804 Z M12.4355704,3.5645263 L4.77957044,4.7795263 L3.55157044,12.4485263 L11.2775704,11.2775263 L12.4355704,3.5645263 Z",transform:"translate(7.989647, 8.003560) rotate(-315.000000) translate(-7.989647, -8.003560) "})})})),Bq=jt(M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:M.jsx("g",{stroke:"none",fill:"currentColor",children:M.jsx("path",{d:"M15.3062871,3.5 C15.5824294,3.5 15.8062871,3.72385763 15.8062871,4 C15.8062871,4.05374105 15.7976231,4.10713065 15.7806287,4.15811388 L13.113962,12.1581139 C13.045905,12.362285 12.8548356,12.5 12.6396204,12.5 L0.693712943,12.5 C0.417570568,12.5 0.193712943,12.2761424 0.193712943,12 C0.193712943,11.946259 0.202376883,11.8928694 0.219371294,11.8418861 L2.88603796,3.84188612 C2.95409498,3.63771505 3.14516441,3.5 3.36037961,3.5 L15.3062871,3.5 Z M14.335,4.7 L3.864,4.7 L1.664,11.3 L12.134,11.3 L14.335,4.7 Z"})})})),Mq=jt(M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:M.jsx("g",{stroke:"none",fill:"currentColor",children:M.jsx("path",{d:"M11,3 C13.7614237,3 16,5.23857625 16,8 C16,10.7614237 13.7614237,13 11,13 L5,13 C2.23857625,13 0,10.7614237 0,8 C0,5.23857625 2.23857625,3 5,3 L11,3 Z M11,4.2 L5,4.2 C2.90131795,4.2 1.2,5.90131795 1.2,8 C1.2,10.0330982 2.79664702,11.6932796 4.8044525,11.7950555 L5,11.8 L11,11.8 C13.098682,11.8 14.8,10.098682 14.8,8 C14.8,5.96690176 13.203353,4.30672042 11.1955475,4.20494454 L11,4.2 Z"})})})),Rq=jt(M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:M.jsx("g",{stroke:"none",fill:"currentColor",children:M.jsx("path",{d:"M8.55595221,-1.5261864 C8.88741773,-1.5261864 9.15621426,-1.25765205 9.15653772,-0.926186684 L9.16739175,10.3828136 L10.9946787,10.3836977 C11.2708211,10.3836977 11.4946787,10.6075553 11.4946787,10.8836977 C11.4946787,10.9607525 11.4768694,11.0367648 11.4426413,11.1058002 L8.8378495,16.3594519 C8.7642512,16.5078936 8.58425218,16.5685662 8.43581043,16.4949679 C8.37895485,16.4667786 8.33250284,16.4212859 8.30313336,16.3650308 L5.56226325,11.1150985 C5.43446412,10.8703088 5.52930372,10.5682659 5.77409341,10.4404667 C5.84552557,10.4031736 5.92491301,10.3836977 6.0054942,10.3836977 L7.96739175,10.3828136 L7.95653772,-0.926186684 C7.95621467,-1.25723416 8.22431979,-1.52586306 8.55536727,-1.52618611 Z",transform:"translate(8.500035, 7.500035) rotate(-135.000000) translate(-8.500035, -7.500035) "})})})),bq=jt(M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:M.jsx("g",{stroke:"none",fill:"currentColor",children:M.jsx("path",{d:"M10.0153197,2.75391207 C10.0923746,2.75391207 10.1683869,2.77172133 10.2374222,2.80594949 L15.4910739,5.41074126 C15.6395156,5.48433956 15.7001882,5.66433859 15.6265899,5.81278033 C15.5984006,5.86963592 15.5529079,5.91608792 15.4966529,5.9454574 L10.2467205,8.68632752 C10.0019308,8.81412664 9.69988791,8.71928704 9.57208878,8.47449735 C9.53479568,8.40306519 9.51531974,8.32367776 9.51531974,8.24309656 L9.51458753,6.62591207 L6.16858753,6.62651279 L6.16914066,12.0061269 C6.16914066,12.3043606 5.95155104,12.5517736 5.66646377,12.5982739 L5.56914066,12.6061269 L0.534587532,12.6061269 C0.203216682,12.6061269 -0.0654124678,12.3374977 -0.0654124678,12.0061269 C-0.0654124678,11.674756 0.203216682,11.4061269 0.534587532,11.4061269 L4.96858753,11.4055128 L4.96914066,6.02651279 C4.96914066,5.72827903 5.18673027,5.48086604 5.47181754,5.43436578 L5.56914066,5.42651279 L9.51458753,5.42591207 L9.51531974,3.25391207 C9.51531974,2.9777697 9.73917736,2.75391207 10.0153197,2.75391207 Z"})})})),kq=jt(M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:M.jsx("g",{stroke:"none",fill:"currentColor",children:M.jsx("path",{d:"M10.0153197,2.75391207 C10.0923746,2.75391207 10.1683869,2.77172133 10.2374222,2.80594949 L15.4910739,5.41074126 C15.6395156,5.48433956 15.7001882,5.66433859 15.6265899,5.81278033 C15.5984006,5.86963592 15.5529079,5.91608792 15.4966529,5.9454574 L10.2467205,8.68632752 C10.0019308,8.81412664 9.69988791,8.71928704 9.57208878,8.47449735 C9.53479568,8.40306519 9.51531974,8.32367776 9.51531974,8.24309656 L9.51423005,6.39035523 C5.97984781,6.85936966 3.21691607,9.08498364 1.18879108,13.1285821 C1.04022695,13.4247836 0.679673152,13.5444674 0.383471635,13.3959033 C0.0872701176,13.2473391 -0.0324136308,12.8867853 0.116150501,12.5905838 C2.34388813,8.14900524 5.48945543,5.65776043 9.51468497,5.18078677 L9.51531974,3.25391207 C9.51531974,2.9777697 9.73917736,2.75391207 10.0153197,2.75391207 Z"})})})),MA=jt(M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:M.jsxs("g",{strokeWidth:"1.5",children:[M.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),M.jsx("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),M.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),M.jsx("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]})})),Oq=jt(M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:M.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"})})),Iq=jt(M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:M.jsxs("g",{strokeWidth:"1.25",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",children:[M.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),M.jsx("path",{d:"M15 8h.01"}),M.jsx("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),M.jsx("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),M.jsx("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),M.jsx("path",{d:"M19 16v6"}),M.jsx("path",{d:"M22 19l-3 3l-3 -3"})]})})),Fq=jt(M.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:M.jsx("g",{id:"zoom-out",stroke:"none",fill:"currentColor",strokeWidth:"1",children:M.jsx("path",{fillRule:"nonzero",d:"M6.85,2.73225886e-13 C10.6331505,2.73225886e-13 13.7,3.06684946 13.7,6.85 C13.7,8.54194045 13.0865836,10.0906098 12.0700142,11.2857448 L15.4201976,14.5717081 C15.6567367,14.8037768 15.6603607,15.1836585 15.4282919,15.4201976 C15.1962232,15.6567367 14.8163415,15.6603607 14.5798024,15.4282919 L14.5798024,15.4282919 L11.2163456,12.128262 C10.0309427,13.1099691 8.50937591,13.7 6.85,13.7 C3.06684946,13.7 4.58522109e-14,10.6331505 4.58522109e-14,6.85 C4.58522109e-14,3.06684946 3.06684946,2.73225886e-13 6.85,2.73225886e-13 Z M6.85,1.2 C3.72959116,1.2 1.2,3.72959116 1.2,6.85 C1.2,9.97040884 3.72959116,12.5 6.85,12.5 C8.31753357,12.5 9.65438791,11.9404957 10.6588859,11.0231643 C10.6855412,10.9625408 10.7245275,10.9050898 10.7743982,10.8542584 C10.8288931,10.7987137 10.8915387,10.7560124 10.9585649,10.7261903 C11.9144009,9.71595758 12.5,8.35136579 12.5,6.85 C12.5,3.72959116 9.97040884,1.2 6.85,1.2 Z M4.6,6.2 L9.12944565,6.2 C9.4608165,6.2 9.72944565,6.46862915 9.72944565,6.8 C9.72944565,7.09823376 9.51185604,7.34564675 9.22676876,7.39214701 L9.12944565,7.4 L4.6,7.4 C4.26862915,7.4 4,7.13137085 4,6.8 C4,6.50176624 4.21758961,6.25435325 4.50267688,6.20785299 L4.6,6.2 L9.12944565,6.2 Z"})})})),Lq=jt(M.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:M.jsx("g",{id:"zoom-in",stroke:"none",fill:"currentColor",strokeWidth:"1",children:M.jsx("path",{fillRule:"nonzero",d:"M6.85,-1.81188398e-13 C10.6331505,-1.81188398e-13 13.7,3.06684946 13.7,6.85 C13.7,8.54194045 13.0865836,10.0906098 12.0700142,11.2857448 L15.4201976,14.5717081 C15.6567367,14.8037768 15.6603607,15.1836585 15.4282919,15.4201976 C15.1962232,15.6567367 14.8163415,15.6603607 14.5798024,15.4282919 L14.5798024,15.4282919 L11.2163456,12.128262 C10.0309427,13.1099691 8.50937591,13.7 6.85,13.7 C3.06684946,13.7 4.61852778e-14,10.6331505 4.61852778e-14,6.85 C4.61852778e-14,3.06684946 3.06684946,-1.81188398e-13 6.85,-1.81188398e-13 Z M6.85,1.2 C3.72959116,1.2 1.2,3.72959116 1.2,6.85 C1.2,9.97040884 3.72959116,12.5 6.85,12.5 C8.31753357,12.5 9.65438791,11.9404957 10.6588859,11.0231643 C10.6855412,10.9625408 10.7245275,10.9050898 10.7743982,10.8542584 C10.8288931,10.7987137 10.8915387,10.7560124 10.9585649,10.7261903 C11.9144009,9.71595758 12.5,8.35136579 12.5,6.85 C12.5,3.72959116 9.97040884,1.2 6.85,1.2 Z M6.86472282,3.93527718 C7.16295659,3.93527718 7.41036958,4.15286679 7.45686984,4.43795406 L7.46472282,4.53527718 L7.464,6.19927718 L9.12944565,6.2 C9.42767941,6.2 9.6750924,6.41758961 9.72159266,6.70267688 L9.72944565,6.8 C9.72944565,7.09823376 9.51185604,7.34564675 9.22676876,7.39214701 L9.12944565,7.4 L7.464,7.39927718 L7.46472282,9.06472282 C7.46472282,9.36295659 7.24713321,9.61036958 6.96204594,9.65686984 L6.86472282,9.66472282 C6.56648906,9.66472282 6.31907607,9.44713321 6.27257581,9.16204594 L6.26472282,9.06472282 L6.264,7.39927718 L4.6,7.4 C4.30176624,7.4 4.05435325,7.18241039 4.00785299,6.89732312 L4,6.8 C4,6.50176624 4.21758961,6.25435325 4.50267688,6.20785299 L4.6,6.2 L6.264,6.19927718 L6.26472282,4.53527718 C6.26472282,4.2701805 6.43664548,4.0452385 6.67507642,3.96586557 L6.76739971,3.94313016 L6.86472282,3.93527718 Z"})})})),_q=jt(M.jsx("svg",{viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:M.jsx("g",{id:"save-file",stroke:"none",fill:"currentColor",children:M.jsx("path",{fillRule:"nonzero",d:"M11.064 9.1l2.645 2.595.03-.029.848.849-3.523 3.323-.848-.848 1.994-1.883H7.5v-1.2h4.712l-1.996-1.958.848-.849zM9.356.3L13.7 3.71V7.9h-1.2l-.001-2.633H8.5V1.5L3.1 1.5a.4.4 0 0 0-.392.32L2.7 1.9v12a.4.4 0 0 0 .32.392l.08.008h3.418v1.2H3.1a1.6 1.6 0 0 1-1.593-1.454L1.5 13.9v-12A1.6 1.6 0 0 1 2.954.307L3.1.3h6.256zM9.7 2.095v1.973l2.51-.001L9.7 2.095z"})})})),Nq=jt(M.jsx("svg",{viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:M.jsx("g",{id:"save-file",stroke:"currentColor",fill:"none",children:M.jsx("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"})})})),Hq=jt(M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"background-color-icon",children:M.jsxs("g",{transform:"translate(1 1)",fillRule:"evenodd",fill:"#000",stroke:"none",children:[M.jsx("circle",{fillOpacity:".04",r:"11",cy:"11",cx:"11"}),M.jsx("path",{d:"M17 20.221V17h3.221A11.06 11.06 0 0 1 17 20.221zm-12 0A11.06 11.06 0 0 1 1.779 17H5v3.221zM20.221 5H17V1.779A11.06 11.06 0 0 1 20.221 5zM9 .181V1H6.411A10.919 10.919 0 0 1 9 .181zM15.589 1H13V.181c.907.167 1.775.445 2.589.819zM13 21.819V21h2.589c-.814.374-1.682.652-2.589.819zm-4 0A10.919 10.919 0 0 1 6.411 21H9v.819zm-8-6.23A10.919 10.919 0 0 1 .181 13H1v2.589zm0-9.178V9H.181C.348 8.093.626 7.225 1 6.411zM21.819 9H21V6.411c.374.814.652 1.682.819 2.589zM21 15.589V13h.819A10.919 10.919 0 0 1 21 15.589zM5 1.779V5H1.779A11.06 11.06 0 0 1 5 1.779zM5 13h4v4H5v-4zm8 0h4v4h-4v-4zM5 5h4v4H5V5zm8 0h4v4h-4V5zm0 12v4H9v-4h4zm8-8v4h-4V9h4zm-8 0v4H9V9h4zM5 9v4H1V9h4zm8-8v4H9V1h4z",fillOpacity:".12"})]})})),Gq=jt(M.jsx("svg",{viewBox:"0 0 32 32",className:"no-color-icon",children:M.jsxs("g",{xmlns:"http://www.w3.org/2000/svg",fillRule:"nonzero",fill:"currentColor",stroke:"none",children:[M.jsx("path",{d:"M2 16c0 7.733 6.267 14 14 14s14-6.267 14-14S23.733 2 16 2 2 8.267 2 16zm-1 0C1 7.716 7.714 1 16 1c8.284 0 15 6.714 15 15 0 8.284-6.714 15-15 15-8.284 0-15-6.714-15-15z"}),M.jsx("path",{d:"M6.354 26.354l-.708-.708 20-20 .708.708z"})]})})),jq=jt(M.jsx("svg",{className:"selected-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:M.jsx("polyline",{points:"20 6 9 17 4 12"})})),$q=jt(M.jsx("svg",{viewBox:"0 0 24 24",className:"stroke-icon",children:M.jsxs("g",{xmlns:"http://www.w3.org/2000/svg",stroke:"none",fillRule:"evenodd",fill:"#000",children:[M.jsx("path",{d:"M12 5a7 7 0 1 0 0 14 7 7 0 0 0 0-14zm0-4c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1z",fillRule:"nonzero",fillOpacity:".04"}),M.jsx("path",{d:"M12 5V1c1.491 0 2.914.297 4.21.835L14.68 5.53A6.979 6.979 0 0 0 12 5zm4.95 2.048l2.828-2.828a11.016 11.016 0 0 1 2.388 3.568l-3.697 1.53a7.01 7.01 0 0 0-1.519-2.27zM19 12h4c0 1.491-.297 2.914-.835 4.21l-3.696-1.53c.342-.826.531-1.73.531-2.68zm-2.05 4.95l2.828 2.828a11.016 11.016 0 0 1-3.567 2.387l-1.532-3.696a7.01 7.01 0 0 0 2.27-1.52zM12 19v4c-1.491 0-2.914-.297-4.21-.835l1.53-3.696c.826.342 1.73.531 2.68.531zm-4.95-2.05l-2.828 2.828a11.016 11.016 0 0 1-2.387-3.567l3.696-1.532a7.01 7.01 0 0 0 1.52 2.27zM5 12H1c0-1.491.297-2.914.835-4.21L5.53 9.32A6.979 6.979 0 0 0 5 12zm2.05-4.95L4.222 4.222a11.016 11.016 0 0 1 3.567-2.387L9.321 5.53a7.01 7.01 0 0 0-2.27 1.52z",fillOpacity:".12"})]})})),Wq=jt(M.jsx("svg",{viewBox:"0 0 24 24",children:M.jsx("g",{xmlns:"http://www.w3.org/2000/svg",id:"icon-border-white",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",opacity:"0.1",children:M.jsxs("g",{id:"Group",children:[M.jsx("path",{d:"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M12,23 C5.92486775,23 1,18.0751322 1,12 C1,5.92486775 5.92486775,1 12,1 C18.0751322,1 23,5.92486775 23,12 C23,18.0751322 18.0751322,23 12,23 Z",fill:"#000000",fillRule:"nonzero"}),M.jsx("path",{d:"M12,19 C15.8659932,19 19,15.8659932 19,12 C19,8.13400675 15.8659932,5 12,5 C8.13400675,5 5,8.13400675 5,12 C5,15.8659932 8.13400675,19 12,19 Z M12,20 C7.581722,20 4,16.418278 4,12 C4,7.581722 7.581722,4 12,4 C16.418278,4 20,7.581722 20,12 C20,16.418278 16.418278,20 12,20 Z",fill:"#000000",fillRule:"nonzero"})]})})})),zq=jt(M.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:M.jsxs("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:[M.jsx("path",{d:"M-18-19h60v40h-60z"}),M.jsx("path",{d:"M0 0h24v2H0z",fill:"currentColor"})]})})),Vq=jt(M.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:M.jsx("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:M.jsx("g",{fill:"currentColor",children:M.jsx("path",{d:"M0 0h6v2H0zM9 0h6v2H9zM18 0h6v2h-6z"})})})})),Uq=jt(M.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:M.jsx("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:M.jsxs("g",{fill:"currentColor",children:[M.jsx("rect",{rx:"1",height:"2",width:"2"}),M.jsx("rect",{rx:"1",x:"4",height:"2",width:"2"}),M.jsx("rect",{rx:"1",x:"8",height:"2",width:"2"}),M.jsx("rect",{rx:"1",x:"12",height:"2",width:"2"}),M.jsx("rect",{rx:"1",x:"16",height:"2",width:"2"}),M.jsx("rect",{rx:"1",x:"20",height:"2",width:"2"})]})})})),Xq=({currentColor:e})=>M.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",className:"font-color-icon",children:M.jsxs("g",{id:"font-color",strokeWidth:"1",fillRule:"evenodd",stroke:"none",fill:"currentColor",children:[M.jsx("path",{id:"secondary-color",d:"M1.999 15.011h11.998V13.81H1.999z",fill:e||"#333333"}),M.jsx("path",{d:"M6.034 7.59h4.104L8.086 2.297 6.034 7.59zm-.465 1.2l-1.437 3.707H2.845L7.301 1h1.287l-.001.004h.286l4.454 11.492h-1.288L10.603 8.79H5.569z",id:"A"})]})}),Kq=jt(M.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:M.jsx("g",{stroke:"none",fill:"currentColor",children:M.jsx("g",{id:"undo-cion",transform:"translate(1 1)",children:M.jsx("path",{d:"M3.84 5.825a.6.6 0 0 1 .063.774l-.064.075a.6.6 0 0 1-.774.063l-.074-.063L.176 3.859a.6.6 0 0 1-.064-.775l.064-.074L3.01.176a.6.6 0 0 1 .912.774l-.063.074-1.795 1.794h6.851a5.1 5.1 0 0 1 .216 10.196l-.216.004h-4a.6.6 0 0 1-.097-1.192l.097-.008h4a3.9 3.9 0 0 0 .201-7.795l-.2-.005H2.033l1.805 1.807z",id:"undo-icon-path"})})})})),Yq=jt(M.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:M.jsx("g",{stroke:"none",fill:"currentColor",children:M.jsx("g",{id:"redo-cion",transform:"matrix(-1 0 0 1 15.015 1)",children:M.jsx("path",{d:"M3.84 5.825a.6.6 0 0 1 .063.774l-.064.075a.6.6 0 0 1-.774.063l-.074-.063L.176 3.859a.6.6 0 0 1-.064-.775l.064-.074L3.01.176a.6.6 0 0 1 .912.774l-.063.074-1.795 1.794h6.851a5.1 5.1 0 0 1 .216 10.196l-.216.004h-4a.6.6 0 0 1-.097-1.192l.097-.008h4a3.9 3.9 0 0 0 .201-7.795l-.2-.005H2.033l1.805 1.807z",id:"redo-icon-path"})})})})),H3=jt(M.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",children:M.jsx("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"})})),qq=jt(M.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:M.jsxs("g",{strokeWidth:"1.25",children:[M.jsx("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),M.jsx("path",{d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]})})),hy=jt(M.jsx("svg",{viewBox:"0 0 1024 1024",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:M.jsx("path",{d:"M170.794667 896c3.456 0 6.912-0.426667 10.325333-1.28l170.666667-42.666667c7.509333-1.877333 14.378667-5.76 19.84-11.221333L896.128 316.330667c16.128-16.128 25.002667-37.546667 25.002667-60.330667s-8.874667-44.202667-25.002667-60.330667L828.458667 128c-32.256-32.256-88.405333-32.256-120.661334 0L183.296 652.501333a42.794667 42.794667 0 0 0-11.221333 19.797334l-42.666667 170.666666A42.666667 42.666667 0 0 0 170.794667 896z m597.333333-707.669333L835.797333 256l-67.669333 67.669333L700.458667 256l67.669333-67.669333zM251.989333 704.469333l388.138667-388.138666L707.797333 384l-388.181333 388.138667-90.197333 22.528 22.570666-90.197334z"})})),Zq=jt(M.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:M.jsx("g",{id:"image",stroke:"none",fill:"currentColor",children:M.jsx("path",{d:"M10.496 7c-.824 0-1.572-.675-1.498-1.5 0-.825.674-1.5 1.498-1.5.823 0 1.497.675 1.497 1.5S11.319 7 10.496 7zM13.8 9.476V2.2H2.2v5.432l.1-.078C3.132 6.904 4.029 6.5 5 6.5c.823 0 1.552.27 2.342.778.226.145.449.304.735.518.06.045.546.413.69.52 1.634 1.21 2.833 1.6 4.798 1.207l.235-.047zm0 1.523V10.7c-5 1-6.3-3-8.8-3-1.5 0-2.8 1.6-2.8 1.6v4.6h11.6V11zM14 1c.6 0 1 .536 1 1.071v11.784c0 .642-.4 1.071-1 1.071H2c-.6 0-1-.429-1-1.07V2.07c0-.535.4-1.07 1-1.07h12z"})})})),RA=jt(M.jsx("svg",{stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:M.jsxs("g",{strokeWidth:1.8,fill:"none",children:[M.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),M.jsx("path",{d:"M12 3l-4 7h8z"}),M.jsx("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),M.jsx("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})]})})),Qq=jt(M.jsx("svg",{stroke:"currentColor",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:M.jsx("path",{stroke:"none",fill:"currentColor",d:"M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z"})})),Jq=jt(M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:M.jsx("g",{stroke:"none",fill:"currentColor",children:M.jsx("path",{d:"M14.85,2.5 C15.4851275,2.5 16,3.01487254 16,3.65 L16,12.35 C16,12.9851275 15.4851275,13.5 14.85,13.5 L1.15,13.5 C0.514872538,13.5 0,12.9851275 0,12.35 L0,3.65 C0,3.01487254 0.514872538,2.5 1.15,2.5 L14.85,2.5 Z M14.85,3.7 L1.15,3.7 C1.17735931,3.7 1.2,3.72264069 1.2,3.75 L1.2,12.25 C1.2,12.2773593 1.17735931,12.3 1.15,12.3 L14.85,12.3 C14.8226407,12.3 14.8,12.2773593 14.8,12.25 L14.8,3.75 C14.8,3.72264069 14.8226407,3.7 14.85,3.7 Z M3.5,10.5 L3.5,5.5 L5.25,5.5 L7,7.8 L8.75,5.5 L10.5,5.5 L10.5,10.5 L8.75,10.5 L8.75,7.5 L7,9.8 L5.25,7.5 L5.25,10.5 L3.5,10.5 Z M12.5,10.5 L11,8.5 L12.5,8.5 L12.5,5.5 L11,5.5 L12.5,5.5 L12.5,8.5 L14,8.5 L12.5,10.5 Z"})})})),eZ=jt(M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:M.jsx("g",{stroke:"none",fill:"currentColor",children:M.jsx("path",{d:"M12.253 4.13h-1.2v-1a2.8 2.8 0 0 0-5.6 0v4a2.8 2.8 0 0 0 2.8 2.8v1.2a4 4 0 0 1-4-4v-4a4 4 0 0 1 8 0v1zm-8 8h1.2v1a2.8 2.8 0 0 0 5.6 0v-4a2.8 2.8 0 0 0-2.8-2.8v-1.2a4 4 0 0 1 4 4v4a4 4 0 0 1-8 0v-1z",transform:"rotate(46 8.253 8.13)"})})})),bA=jt(M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:M.jsx("g",{stroke:"none",children:M.jsx("path",{d:"M8.44521878,4.21103025 C8.58299906,3.97171622 8.8886944,3.88940684 9.12800843,4.02718711 L15.242109,7.54725833 C15.3194119,7.59176394 15.3834015,7.65613893 15.4274422,7.73370766 C15.5637831,7.97384463 15.4796398,8.27904026 15.2395028,8.41538118 L9.12748155,11.8855614 C9.0176214,11.947936 8.88822223,11.9664118 8.76529593,11.9372749 C8.4965984,11.8735862 8.33040588,11.604134 8.39409456,11.3354364 L9.018,8.69941945 L1.5,8.7 C1.22385763,8.7 1,8.47614237 1,8.2 L1,8 C1,7.72385763 1.22385763,7.5 1.5,7.5 L9.075,7.49941945 L8.39165922,4.57430951 C8.3700078,4.48168206 8.37536432,4.38547957 8.40609313,4.29679626 Z"})})})),kA=jt(M.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:M.jsx("g",{stroke:"none",children:M.jsx("rect",{x:"1",y:"7.5",width:"14",height:"1.2",rx:".5"})})})),OA={[hr.default]:{strokeColor:ei,fill:"#FFFFFF"},[hr.colorful]:{strokeColor:"#06ADBF",fill:"#CDEFF2"},[hr.soft]:{strokeColor:"#6D89C1",fill:"#DADFEB"},[hr.retro]:{strokeColor:"#E9C358",fill:"#F6EDCF"},[hr.dark]:{strokeColor:"#FFFFFF",fill:"#434343"},[hr.starry]:{strokeColor:"#42ABE5",fill:"#163F5A"}};var Ko=(e=>(e.eraser="eraser",e.nibPen="nibPen",e.feltTipPen="feltTipPen",e.artisticBrush="artisticBrush",e.markerHighlight="markerHighlight",e))(Ko||{});const IA="freehand",Ps={isFreehand:e=>e.type===IA},FA=[{icon:hy,pointer:Ko.feltTipPen,titleKey:"toolbar.pen"},{icon:xq,pointer:Ko.eraser,titleKey:"toolbar.eraser"}],tZ=fy(FA,5),nZ=({onPointerUp:e})=>{const{t}=Zn(),n=Dr();return M.jsx(Bo,{padding:1,children:M.jsx(Ri.Col,{gap:1,children:tZ.map((r,i)=>M.jsx(Ri.Row,{gap:1,children:r.map((o,s)=>M.jsx(bn,{className:sn({fillable:!1}),selected:n.pointer===o.pointer,type:"icon",size:"small",visible:!0,icon:o.icon,title:t(o.titleKey),"aria-label":t(o.titleKey),onPointerDown:()=>{yo(n,qr.dnd),fn.updatePointerType(n,o.pointer)},onPointerUp:()=>{yo(n,qr.drawing),e(o.pointer)}},s))},i))})})},rZ=[{icon:Pq,title:"toolbar.shape.rectangle",pointer:pt.rectangle},{icon:Tq,title:"toolbar.shape.ellipse",pointer:pt.ellipse},{icon:Dq,title:"toolbar.shape.triangle",pointer:pt.triangle},{icon:Sq,title:"toolbar.shape.terminal",pointer:gt.terminal},{icon:Aq,title:"toolbar.shape.diamond",pointer:pt.diamond},{icon:Bq,title:"toolbar.shape.parallelogram",pointer:pt.parallelogram},{icon:Mq,title:"toolbar.shape.roundRectangle",pointer:pt.roundRectangle}],iZ=fy(rZ,5),oZ=({onPointerUp:e})=>{const t=Dr(),{t:n}=Zn();return M.jsx(Bo,{padding:1,children:M.jsx(Ri.Col,{gap:1,children:iZ.map((r,i)=>M.jsx(Ri.Row,{gap:1,children:r.map((o,s)=>M.jsx(bn,{className:sn({fillable:!1}),type:"icon",size:"small",visible:!0,icon:o.icon,title:n(o.title||"toolbar.shape"),"aria-label":n(o.title||"toolbar.shape"),onPointerDown:()=>{yo(t,qr.dnd),fn.updatePointerType(t,o.pointer)},onPointerUp:()=>{yo(t,qr.drawing),e(o.pointer)}},s))},i))})})},sZ=[{icon:Rq,title:"toolbar.arrow.straight",pointer:Ln.straight},{icon:bq,title:"toolbar.arrow.elbow",pointer:Ln.elbow},{icon:kq,title:"toolbar.arrow.curve",pointer:Ln.curve}],aZ=({onPointerUp:e})=>{const t=Dr(),{t:n}=Zn();return M.jsx(Bo,{padding:1,children:M.jsx(Ri.Row,{gap:1,children:sZ.map((r,i)=>M.jsx(bn,{className:sn({fillable:!1}),type:"icon",size:"small",visible:!0,icon:r.icon,title:n(r.title),"aria-label":n(r.title),onPointerDown:()=>{yo(t,qr.drawing),fn.updatePointerType(t,r.pointer)},onPointerUp:()=>{e(r.pointer)}},i))})})};function bv(){return typeof window<"u"}function Mc(e){return LA(e)?(e.nodeName||"").toLowerCase():"#document"}function qo(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function al(e){var t;return(t=(LA(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function LA(e){return bv()?e instanceof Node||e instanceof qo(e).Node:!1}function dr(e){return bv()?e instanceof Element||e instanceof qo(e).Element:!1}function Qr(e){return bv()?e instanceof HTMLElement||e instanceof qo(e).HTMLElement:!1}function d4(e){return!bv()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof qo(e).ShadowRoot}function $p(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=ks(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function lZ(e){return["table","td","th"].includes(Mc(e))}function kv(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function dy(e){const t=Ov(),n=dr(e)?ks(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function uZ(e){let t=au(e);for(;Qr(t)&&!wc(t);){if(dy(t))return t;if(kv(t))return null;t=au(t)}return null}function Ov(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function wc(e){return["html","body","#document"].includes(Mc(e))}function ks(e){return qo(e).getComputedStyle(e)}function Iv(e){return dr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function au(e){if(Mc(e)==="html")return e;const t=e.assignedSlot||e.parentNode||d4(e)&&e.host||al(e);return d4(t)?t.host:t}function _A(e){const t=au(e);return wc(t)?e.ownerDocument?e.ownerDocument.body:e.body:Qr(t)&&$p(t)?t:_A(t)}function cc(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=_A(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),s=qo(i);if(o){const l=g4(s);return t.concat(s,s.visualViewport||[],$p(i)?i:[],l&&n?cc(l):[])}return t.concat(i,cc(i,[],n))}function g4(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Ff(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function Vo(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&d4(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function NA(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function HA(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function cZ(e){return e.mozInputSource===0&&e.isTrusted?!0:p4()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function fZ(e){return dZ()?!1:!p4()&&e.width===0&&e.height===0||p4()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function hZ(){return/apple/i.test(navigator.vendor)}function p4(){const e=/android/i;return e.test(NA())||e.test(HA())}function dZ(){return HA().includes("jsdom/")}function Yx(e,t){return["mouse","pen"].includes(e)}function gZ(e){return"nativeEvent"in e}function pZ(e){return e.matches("html,body")}function ra(e){return(e==null?void 0:e.ownerDocument)||document}function j5(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function _f(e){return"composedPath"in e?e.composedPath()[0]:e.target}const mZ="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function GA(e){return Qr(e)&&e.matches(mZ)}function $5(e){e.preventDefault(),e.stopPropagation()}function vZ(e){return e?e.getAttribute("role")==="combobox"&&GA(e):!1}const G3=Math.min,Xf=Math.max,j3=Math.round,Om=Math.floor,Ya=e=>({x:e,y:e}),yZ={left:"right",right:"left",bottom:"top",top:"bottom"},wZ={start:"end",end:"start"};function qx(e,t,n){return Xf(e,G3(t,n))}function Fv(e,t){return typeof e=="function"?e(t):e}function rh(e){return e.split("-")[0]}function Lv(e){return e.split("-")[1]}function jA(e){return e==="x"?"y":"x"}function $A(e){return e==="y"?"height":"width"}function b0(e){return["top","bottom"].includes(rh(e))?"y":"x"}function WA(e){return jA(b0(e))}function CZ(e,t,n){n===void 0&&(n=!1);const r=Lv(e),i=WA(e),o=$A(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=$3(s)),[s,$3(s)]}function xZ(e){const t=$3(e);return[m4(e),t,m4(t)]}function m4(e){return e.replace(/start|end/g,t=>wZ[t])}function EZ(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:s;default:return[]}}function PZ(e,t,n,r){const i=Lv(e);let o=EZ(rh(e),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),t&&(o=o.concat(o.map(m4)))),o}function $3(e){return e.replace(/left|right|bottom|top/g,t=>yZ[t])}function SZ(e){return{top:0,right:0,bottom:0,left:0,...e}}function TZ(e){return typeof e!="number"?SZ(e):{top:e,right:e,bottom:e,left:e}}function W3(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var DZ=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],z3=DZ.join(","),zA=typeof Element>"u",k0=zA?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,V3=!zA&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},U3=function e(t,n){var r;n===void 0&&(n=!0);var i=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),o=i===""||i==="true",s=o||n&&t&&e(t.parentNode);return s},AZ=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},BZ=function(t,n,r){if(U3(t))return[];var i=Array.prototype.slice.apply(t.querySelectorAll(z3));return n&&k0.call(t,z3)&&i.unshift(t),i=i.filter(r),i},MZ=function e(t,n,r){for(var i=[],o=Array.from(t);o.length;){var s=o.shift();if(!U3(s,!1))if(s.tagName==="SLOT"){var l=s.assignedElements(),c=l.length?l:s.children,h=e(c,!0,r);r.flatten?i.push.apply(i,h):i.push({scopeParent:s,candidates:h})}else{var d=k0.call(s,z3);d&&r.filter(s)&&(n||!t.includes(s))&&i.push(s);var g=s.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(s),v=!U3(g,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(g&&v){var y=e(g===!0?s.children:g.children,!0,r);r.flatten?i.push.apply(i,y):i.push({scopeParent:s,candidates:y})}else o.unshift.apply(o,s.children)}}return i},VA=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},UA=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||AZ(t))&&!VA(t)?0:t.tabIndex},RZ=function(t,n){var r=UA(t);return r<0&&n&&!VA(t)?0:r},bZ=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},XA=function(t){return t.tagName==="INPUT"},kZ=function(t){return XA(t)&&t.type==="hidden"},OZ=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},IZ=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},FZ=function(t){if(!t.name)return!0;var n=t.form||V3(t),r=function(l){return n.querySelectorAll('input[type="radio"][name="'+l+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(t.name));else try{i=r(t.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var o=IZ(i,t.form);return!o||o===t},LZ=function(t){return XA(t)&&t.type==="radio"},_Z=function(t){return LZ(t)&&!FZ(t)},NZ=function(t){var n,r=t&&V3(t),i=(n=r)===null||n===void 0?void 0:n.host,o=!1;if(r&&r!==t){var s,l,c;for(o=!!((s=i)!==null&&s!==void 0&&(l=s.ownerDocument)!==null&&l!==void 0&&l.contains(i)||t!=null&&(c=t.ownerDocument)!==null&&c!==void 0&&c.contains(t));!o&&i;){var h,d,g;r=V3(i),i=(h=r)===null||h===void 0?void 0:h.host,o=!!((d=i)!==null&&d!==void 0&&(g=d.ownerDocument)!==null&&g!==void 0&&g.contains(i))}}return o},Zx=function(t){var n=t.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},HZ=function(t,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var o=k0.call(t,"details>summary:first-of-type"),s=o?t.parentElement:t;if(k0.call(s,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var l=t;t;){var c=t.parentElement,h=V3(t);if(c&&!c.shadowRoot&&i(c)===!0)return Zx(t);t.assignedSlot?t=t.assignedSlot:!c&&h!==t.ownerDocument?t=h.host:t=c}t=l}if(NZ(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Zx(t);return!1},GZ=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return k0.call(n,"fieldset[disabled] *")?!0:!i.contains(t)}return!0}n=n.parentElement}return!1},jZ=function(t,n){return!(n.disabled||U3(n)||kZ(n)||HZ(n,t)||OZ(n)||GZ(n))},v4=function(t,n){return!(_Z(n)||UA(n)<0||!jZ(t,n))},$Z=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},WZ=function e(t){var n=[],r=[];return t.forEach(function(i,o){var s=!!i.scopeParent,l=s?i.scopeParent:i,c=RZ(l,s),h=s?e(i.candidates):l;c===0?s?n.push.apply(n,h):n.push(l):r.push({documentOrder:o,tabIndex:c,item:i,isScope:s,content:h})}),r.sort(bZ).reduce(function(i,o){return o.isScope?i.push.apply(i,o.content):i.push(o.content),i},[]).concat(n)},_v=function(t,n){n=n||{};var r;return n.getShadowRoot?r=MZ([t],n.includeContainer,{filter:v4.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:$Z}):r=BZ(t,n.includeContainer,v4.bind(null,n)),WZ(r)},zZ=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return k0.call(t,z3)===!1?!1:v4(n,t)};function Qx(e,t,n){let{reference:r,floating:i}=e;const o=b0(t),s=WA(t),l=$A(s),c=rh(t),h=o==="y",d=r.x+r.width/2-i.width/2,g=r.y+r.height/2-i.height/2,v=r[l]/2-i[l]/2;let y;switch(c){case"top":y={x:d,y:r.y-i.height};break;case"bottom":y={x:d,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:g};break;case"left":y={x:r.x-i.width,y:g};break;default:y={x:r.x,y:r.y}}switch(Lv(t)){case"start":y[s]-=v*(n&&h?-1:1);break;case"end":y[s]+=v*(n&&h?-1:1);break}return y}const VZ=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,l=o.filter(Boolean),c=await(s.isRTL==null?void 0:s.isRTL(t));let h=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:d,y:g}=Qx(h,r,c),v=r,y={},x=0;for(let E=0;E<l.length;E++){const{name:T,fn:D}=l[E],{x:S,y:R,data:k,reset:O}=await D({x:d,y:g,initialPlacement:r,placement:v,strategy:i,middlewareData:y,rects:h,platform:s,elements:{reference:e,floating:t}});d=S??d,g=R??g,y={...y,[T]:{...y[T],...k}},O&&x<=50&&(x++,typeof O=="object"&&(O.placement&&(v=O.placement),O.rects&&(h=O.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):O.rects),{x:d,y:g}=Qx(h,v,c)),E=-1)}return{x:d,y:g,placement:v,strategy:i,middlewareData:y}};async function KA(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:s,elements:l,strategy:c}=e,{boundary:h="clippingAncestors",rootBoundary:d="viewport",elementContext:g="floating",altBoundary:v=!1,padding:y=0}=Fv(t,e),x=TZ(y),T=l[v?g==="floating"?"reference":"floating":g],D=W3(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(T)))==null||n?T:T.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:h,rootBoundary:d,strategy:c})),S=g==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,R=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),k=await(o.isElement==null?void 0:o.isElement(R))?await(o.getScale==null?void 0:o.getScale(R))||{x:1,y:1}:{x:1,y:1},O=W3(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:S,offsetParent:R,strategy:c}):S);return{top:(D.top-O.top+x.top)/k.y,bottom:(O.bottom-D.bottom+x.bottom)/k.y,left:(D.left-O.left+x.left)/k.x,right:(O.right-D.right+x.right)/k.x}}const UZ=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:l,platform:c,elements:h}=t,{mainAxis:d=!0,crossAxis:g=!0,fallbackPlacements:v,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:E=!0,...T}=Fv(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const D=rh(i),S=b0(l),R=rh(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(h.floating)),O=v||(R||!E?[$3(l)]:xZ(l)),$=x!=="none";!v&&$&&O.push(...PZ(l,E,x,k));const z=[l,...O],K=await KA(t,T),te=[];let se=((r=o.flip)==null?void 0:r.overflows)||[];if(d&&te.push(K[D]),g){const ve=CZ(i,s,k);te.push(K[ve[0]],K[ve[1]])}if(se=[...se,{placement:i,overflows:te}],!te.every(ve=>ve<=0)){var me,ne;const ve=(((me=o.flip)==null?void 0:me.index)||0)+1,ge=z[ve];if(ge)return{data:{index:ve,overflows:se},reset:{placement:ge}};let Me=(ne=se.filter(Pe=>Pe.overflows[0]<=0).sort((Pe,he)=>Pe.overflows[1]-he.overflows[1])[0])==null?void 0:ne.placement;if(!Me)switch(y){case"bestFit":{var oe;const Pe=(oe=se.filter(he=>{if($){const le=b0(he.placement);return le===S||le==="y"}return!0}).map(he=>[he.placement,he.overflows.filter(le=>le>0).reduce((le,we)=>le+we,0)]).sort((he,le)=>he[1]-le[1])[0])==null?void 0:oe[0];Pe&&(Me=Pe);break}case"initialPlacement":Me=l;break}if(i!==Me)return{reset:{placement:Me}}}return{}}}};async function XZ(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=rh(n),l=Lv(n),c=b0(n)==="y",h=["left","top"].includes(s)?-1:1,d=o&&c?-1:1,g=Fv(t,e);let{mainAxis:v,crossAxis:y,alignmentAxis:x}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:g.mainAxis||0,crossAxis:g.crossAxis||0,alignmentAxis:g.alignmentAxis};return l&&typeof x=="number"&&(y=l==="end"?x*-1:x),c?{x:y*d,y:v*h}:{x:v*h,y:y*d}}const KZ=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:s,middlewareData:l}=t,c=await XZ(t,e);return s===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:s}}}}},YZ=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:l={fn:T=>{let{x:D,y:S}=T;return{x:D,y:S}}},...c}=Fv(e,t),h={x:n,y:r},d=await KA(t,c),g=b0(rh(i)),v=jA(g);let y=h[v],x=h[g];if(o){const T=v==="y"?"top":"left",D=v==="y"?"bottom":"right",S=y+d[T],R=y-d[D];y=qx(S,y,R)}if(s){const T=g==="y"?"top":"left",D=g==="y"?"bottom":"right",S=x+d[T],R=x-d[D];x=qx(S,x,R)}const E=l.fn({...t,[v]:y,[g]:x});return{...E,data:{x:E.x-n,y:E.y-r,enabled:{[v]:o,[g]:s}}}}}};function YA(e){const t=ks(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Qr(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,l=j3(n)!==o||j3(r)!==s;return l&&(n=o,r=s),{width:n,height:r,$:l}}function gy(e){return dr(e)?e:e.contextElement}function g0(e){const t=gy(e);if(!Qr(t))return Ya(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=YA(t);let s=(o?j3(n.width):n.width)/r,l=(o?j3(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!l||!Number.isFinite(l))&&(l=1),{x:s,y:l}}const qZ=Ya(0);function qA(e){const t=qo(e);return!Ov()||!t.visualViewport?qZ:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function ZZ(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==qo(e)?!1:t}function ih(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=gy(e);let s=Ya(1);t&&(r?dr(r)&&(s=g0(r)):s=g0(e));const l=ZZ(o,n,r)?qA(o):Ya(0);let c=(i.left+l.x)/s.x,h=(i.top+l.y)/s.y,d=i.width/s.x,g=i.height/s.y;if(o){const v=qo(o),y=r&&dr(r)?qo(r):r;let x=v,E=g4(x);for(;E&&r&&y!==x;){const T=g0(E),D=E.getBoundingClientRect(),S=ks(E),R=D.left+(E.clientLeft+parseFloat(S.paddingLeft))*T.x,k=D.top+(E.clientTop+parseFloat(S.paddingTop))*T.y;c*=T.x,h*=T.y,d*=T.x,g*=T.y,c+=R,h+=k,x=qo(E),E=g4(x)}}return W3({width:d,height:g,x:c,y:h})}function py(e,t){const n=Iv(e).scrollLeft;return t?t.left+n:ih(al(e)).left+n}function ZA(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:py(e,r)),o=r.top+t.scrollTop;return{x:i,y:o}}function QZ(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",s=al(r),l=t?kv(t.floating):!1;if(r===s||l&&o)return n;let c={scrollLeft:0,scrollTop:0},h=Ya(1);const d=Ya(0),g=Qr(r);if((g||!g&&!o)&&((Mc(r)!=="body"||$p(s))&&(c=Iv(r)),Qr(r))){const y=ih(r);h=g0(r),d.x=y.x+r.clientLeft,d.y=y.y+r.clientTop}const v=s&&!g&&!o?ZA(s,c,!0):Ya(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-c.scrollLeft*h.x+d.x+v.x,y:n.y*h.y-c.scrollTop*h.y+d.y+v.y}}function JZ(e){return Array.from(e.getClientRects())}function eQ(e){const t=al(e),n=Iv(e),r=e.ownerDocument.body,i=Xf(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Xf(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+py(e);const l=-n.scrollTop;return ks(r).direction==="rtl"&&(s+=Xf(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:l}}function tQ(e,t){const n=qo(e),r=al(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,l=0,c=0;if(i){o=i.width,s=i.height;const h=Ov();(!h||h&&t==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:o,height:s,x:l,y:c}}function nQ(e,t){const n=ih(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=Qr(e)?g0(e):Ya(1),s=e.clientWidth*o.x,l=e.clientHeight*o.y,c=i*o.x,h=r*o.y;return{width:s,height:l,x:c,y:h}}function Jx(e,t,n){let r;if(t==="viewport")r=tQ(e,n);else if(t==="document")r=eQ(al(e));else if(dr(t))r=nQ(t,n);else{const i=qA(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return W3(r)}function QA(e,t){const n=au(e);return n===t||!dr(n)||wc(n)?!1:ks(n).position==="fixed"||QA(n,t)}function rQ(e,t){const n=t.get(e);if(n)return n;let r=cc(e,[],!1).filter(l=>dr(l)&&Mc(l)!=="body"),i=null;const o=ks(e).position==="fixed";let s=o?au(e):e;for(;dr(s)&&!wc(s);){const l=ks(s),c=dy(s);!c&&l.position==="fixed"&&(i=null),(o?!c&&!i:!c&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||$p(s)&&!c&&QA(e,s))?r=r.filter(d=>d!==s):i=l,s=au(s)}return t.set(e,r),r}function iQ(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[...n==="clippingAncestors"?kv(t)?[]:rQ(t,this._c):[].concat(n),r],l=s[0],c=s.reduce((h,d)=>{const g=Jx(t,d,i);return h.top=Xf(g.top,h.top),h.right=G3(g.right,h.right),h.bottom=G3(g.bottom,h.bottom),h.left=Xf(g.left,h.left),h},Jx(t,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function oQ(e){const{width:t,height:n}=YA(e);return{width:t,height:n}}function sQ(e,t,n){const r=Qr(t),i=al(t),o=n==="fixed",s=ih(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=Ya(0);if(r||!r&&!o)if((Mc(t)!=="body"||$p(i))&&(l=Iv(t)),r){const v=ih(t,!0,o,t);c.x=v.x+t.clientLeft,c.y=v.y+t.clientTop}else i&&(c.x=py(i));const h=i&&!r&&!o?ZA(i,l):Ya(0),d=s.left+l.scrollLeft-c.x-h.x,g=s.top+l.scrollTop-c.y-h.y;return{x:d,y:g,width:s.width,height:s.height}}function W5(e){return ks(e).position==="static"}function eE(e,t){if(!Qr(e)||ks(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return al(e)===n&&(n=n.ownerDocument.body),n}function JA(e,t){const n=qo(e);if(kv(e))return n;if(!Qr(e)){let i=au(e);for(;i&&!wc(i);){if(dr(i)&&!W5(i))return i;i=au(i)}return n}let r=eE(e,t);for(;r&&lZ(r)&&W5(r);)r=eE(r,t);return r&&wc(r)&&W5(r)&&!dy(r)?n:r||uZ(e)||n}const aQ=async function(e){const t=this.getOffsetParent||JA,n=this.getDimensions,r=await n(e.floating);return{reference:sQ(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function lQ(e){return ks(e).direction==="rtl"}const uQ={convertOffsetParentRelativeRectToViewportRelativeRect:QZ,getDocumentElement:al,getClippingRect:iQ,getOffsetParent:JA,getElementRects:aQ,getClientRects:JZ,getDimensions:oQ,getScale:g0,isElement:dr,isRTL:lQ};function eB(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function cQ(e,t){let n=null,r;const i=al(e);function o(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function s(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const h=e.getBoundingClientRect(),{left:d,top:g,width:v,height:y}=h;if(l||t(),!v||!y)return;const x=Om(g),E=Om(i.clientWidth-(d+v)),T=Om(i.clientHeight-(g+y)),D=Om(d),R={rootMargin:-x+"px "+-E+"px "+-T+"px "+-D+"px",threshold:Xf(0,G3(1,c))||1};let k=!0;function O($){const z=$[0].intersectionRatio;if(z!==c){if(!k)return s();z?s(!1,z):r=setTimeout(()=>{s(!1,1e-7)},1e3)}z===1&&!eB(h,e.getBoundingClientRect())&&s(),k=!1}try{n=new IntersectionObserver(O,{...R,root:i.ownerDocument})}catch{n=new IntersectionObserver(O,R)}n.observe(e)}return s(!0),o}function fQ(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,h=gy(e),d=i||o?[...h?cc(h):[],...cc(t)]:[];d.forEach(D=>{i&&D.addEventListener("scroll",n,{passive:!0}),o&&D.addEventListener("resize",n)});const g=h&&l?cQ(h,n):null;let v=-1,y=null;s&&(y=new ResizeObserver(D=>{let[S]=D;S&&S.target===h&&y&&(y.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var R;(R=y)==null||R.observe(t)})),n()}),h&&!c&&y.observe(h),y.observe(t));let x,E=c?ih(e):null;c&&T();function T(){const D=ih(e);E&&!eB(E,D)&&n(),E=D,x=requestAnimationFrame(T)}return n(),()=>{var D;d.forEach(S=>{i&&S.removeEventListener("scroll",n),o&&S.removeEventListener("resize",n)}),g==null||g(),(D=y)==null||D.disconnect(),y=null,c&&cancelAnimationFrame(x)}}const hQ=KZ,dQ=YZ,gQ=UZ,pQ=(e,t,n)=>{const r=new Map,i={platform:uQ,...n},o={...i.platform,_c:r};return VZ(e,t,{...i,platform:o})};var e3=typeof document<"u"?G.useLayoutEffect:G.useEffect;function X3(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!X3(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!X3(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function tB(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function tE(e,t){const n=tB(e);return Math.round(t*n)/n}function z5(e){const t=G.useRef(e);return e3(()=>{t.current=e}),t}function mQ(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:l=!0,whileElementsMounted:c,open:h}=e,[d,g]=G.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[v,y]=G.useState(r);X3(v,r)||y(r);const[x,E]=G.useState(null),[T,D]=G.useState(null),S=G.useCallback(he=>{he!==$.current&&($.current=he,E(he))},[]),R=G.useCallback(he=>{he!==z.current&&(z.current=he,D(he))},[]),k=o||x,O=s||T,$=G.useRef(null),z=G.useRef(null),K=G.useRef(d),te=c!=null,se=z5(c),me=z5(i),ne=z5(h),oe=G.useCallback(()=>{if(!$.current||!z.current)return;const he={placement:t,strategy:n,middleware:v};me.current&&(he.platform=me.current),pQ($.current,z.current,he).then(le=>{const we={...le,isPositioned:ne.current!==!1};ve.current&&!X3(K.current,we)&&(K.current=we,g8.flushSync(()=>{g(we)}))})},[v,t,n,me,ne]);e3(()=>{h===!1&&K.current.isPositioned&&(K.current.isPositioned=!1,g(he=>({...he,isPositioned:!1})))},[h]);const ve=G.useRef(!1);e3(()=>(ve.current=!0,()=>{ve.current=!1}),[]),e3(()=>{if(k&&($.current=k),O&&(z.current=O),k&&O){if(se.current)return se.current(k,O,oe);oe()}},[k,O,oe,se,te]);const ge=G.useMemo(()=>({reference:$,floating:z,setReference:S,setFloating:R}),[S,R]),Me=G.useMemo(()=>({reference:k,floating:O}),[k,O]),Pe=G.useMemo(()=>{const he={position:n,left:0,top:0};if(!Me.floating)return he;const le=tE(Me.floating,d.x),we=tE(Me.floating,d.y);return l?{...he,transform:"translate("+le+"px, "+we+"px)",...tB(Me.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:le,top:we}},[n,l,Me.floating,d.x,d.y]);return G.useMemo(()=>({...d,update:oe,refs:ge,elements:Me,floatingStyles:Pe}),[d,oe,ge,Me,Pe])}const my=(e,t)=>({...hQ(e),options:[e,t]}),vQ=(e,t)=>({...dQ(e),options:[e,t]}),vy=(e,t)=>({...gQ(e),options:[e,t]});function Nv(e){return G.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})},e)}const nB={...Pb},yQ=nB.useInsertionEffect,wQ=yQ||(e=>e());function rc(e){const t=G.useRef(()=>{});return wQ(()=>{t.current=e}),G.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Yo=typeof document<"u"?G.useLayoutEffect:G.useEffect;function xp(){return xp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xp.apply(this,arguments)}let nE=!1,CQ=0;const rE=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+CQ++;function xQ(){const[e,t]=G.useState(()=>nE?rE():void 0);return Yo(()=>{e==null&&t(rE())},[]),G.useEffect(()=>{nE=!0},[]),e}const EQ=nB.useId,Wp=EQ||xQ;function PQ(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const SQ=G.createContext(null),TQ=G.createContext(null),rB=()=>{var e;return((e=G.useContext(SQ))==null?void 0:e.id)||null},yy=()=>G.useContext(TQ);function Ep(e){return"data-floating-ui-"+e}function V5(e){const t=G.useRef(e);return Yo(()=>{t.current=e}),t}let iE=0;function Yd(e,t){t===void 0&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=t;r&&cancelAnimationFrame(iE);const o=()=>e==null?void 0:e.focus({preventScroll:n});i?o():iE=requestAnimationFrame(o)}function DQ(e,t){var n;let r=[],i=(n=e.find(o=>o.id===t))==null?void 0:n.parentId;for(;i;){const o=e.find(s=>s.id===i);i=o==null?void 0:o.parentId,o&&(r=r.concat(o))}return r}function Wg(e,t){let n=e.filter(i=>{var o;return i.parentId===t&&((o=i.context)==null?void 0:o.open)}),r=n;for(;r.length;)r=e.filter(i=>{var o;return(o=r)==null?void 0:o.some(s=>{var l;return i.parentId===s.id&&((l=i.context)==null?void 0:l.open)})}),n=n.concat(r);return n}let qd=new WeakMap,Im=new WeakSet,Fm={},U5=0;const AQ=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,iB=e=>e&&(e.host||iB(e.parentNode)),BQ=(e,t)=>t.map(n=>{if(e.contains(n))return n;const r=iB(n);return e.contains(r)?r:null}).filter(n=>n!=null);function MQ(e,t,n,r){const i="data-floating-ui-inert",o=r?"inert":n?"aria-hidden":null,s=BQ(t,e),l=new Set,c=new Set(s),h=[];Fm[i]||(Fm[i]=new WeakMap);const d=Fm[i];s.forEach(g),v(t),l.clear();function g(y){!y||l.has(y)||(l.add(y),y.parentNode&&g(y.parentNode))}function v(y){!y||c.has(y)||[].forEach.call(y.children,x=>{if(Mc(x)!=="script")if(l.has(x))v(x);else{const E=o?x.getAttribute(o):null,T=E!==null&&E!=="false",D=(qd.get(x)||0)+1,S=(d.get(x)||0)+1;qd.set(x,D),d.set(x,S),h.push(x),D===1&&T&&Im.add(x),S===1&&x.setAttribute(i,""),!T&&o&&x.setAttribute(o,"true")}})}return U5++,()=>{h.forEach(y=>{const x=(qd.get(y)||0)-1,E=(d.get(y)||0)-1;qd.set(y,x),d.set(y,E),x||(!Im.has(y)&&o&&y.removeAttribute(o),Im.delete(y)),E||y.removeAttribute(i)}),U5--,U5||(qd=new WeakMap,qd=new WeakMap,Im=new WeakSet,Fm={})}}function oE(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=ra(e[0]).body;return MQ(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,t,n)}const Pp=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function oB(e,t){const n=_v(e,Pp());t==="prev"&&n.reverse();const r=n.indexOf(Ff(ra(e)));return n.slice(r+1)[0]}function sB(){return oB(document.body,"next")}function aB(){return oB(document.body,"prev")}function zg(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!Vo(n,r)}function RQ(e){_v(e,Pp()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function sE(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const Hv={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let bQ;function aE(e){e.key==="Tab"&&(e.target,clearTimeout(bQ))}const K3=G.forwardRef(function(t,n){const[r,i]=G.useState();Yo(()=>(hZ()&&i("button"),document.addEventListener("keydown",aE),()=>{document.removeEventListener("keydown",aE)}),[]);const o={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Ep("focus-guard")]:"",style:Hv};return G.createElement("span",xp({},t,o))}),lB=G.createContext(null),lE=Ep("portal");function kQ(e){e===void 0&&(e={});const{id:t,root:n}=e,r=Wp(),i=cB(),[o,s]=G.useState(null),l=G.useRef(null);return Yo(()=>()=>{o==null||o.remove(),queueMicrotask(()=>{l.current=null})},[o]),Yo(()=>{if(!r||l.current)return;const c=t?document.getElementById(t):null;if(!c)return;const h=document.createElement("div");h.id=r,h.setAttribute(lE,""),c.appendChild(h),l.current=h,s(h)},[t,r]),Yo(()=>{if(n===null||!r||l.current)return;let c=n||(i==null?void 0:i.portalNode);c&&!dr(c)&&(c=c.current),c=c||document.body;let h=null;t&&(h=document.createElement("div"),h.id=t,c.appendChild(h));const d=document.createElement("div");d.id=r,d.setAttribute(lE,""),c=h||c,c.appendChild(d),l.current=d,s(d)},[t,n,r,i]),o}function uB(e){const{children:t,id:n,root:r,preserveTabOrder:i=!0}=e,o=kQ({id:n,root:r}),[s,l]=G.useState(null),c=G.useRef(null),h=G.useRef(null),d=G.useRef(null),g=G.useRef(null),v=s==null?void 0:s.modal,y=s==null?void 0:s.open,x=!!s&&!s.modal&&s.open&&i&&!!(r||o);return G.useEffect(()=>{if(!o||!i||v)return;function E(T){o&&zg(T)&&(T.type==="focusin"?sE:RQ)(o)}return o.addEventListener("focusin",E,!0),o.addEventListener("focusout",E,!0),()=>{o.removeEventListener("focusin",E,!0),o.removeEventListener("focusout",E,!0)}},[o,i,v]),G.useEffect(()=>{o&&(y||sE(o))},[y,o]),G.createElement(lB.Provider,{value:G.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:c,afterOutsideRef:h,beforeInsideRef:d,afterInsideRef:g,portalNode:o,setFocusManagerState:l}),[i,o])},x&&o&&G.createElement(K3,{"data-type":"outside",ref:c,onFocus:E=>{if(zg(E,o)){var T;(T=d.current)==null||T.focus()}else{const D=aB()||(s==null?void 0:s.refs.domReference.current);D==null||D.focus()}}}),x&&o&&G.createElement("span",{"aria-owns":o.id,style:Hv}),o&&g8.createPortal(t,o),x&&o&&G.createElement(K3,{"data-type":"outside",ref:h,onFocus:E=>{if(zg(E,o)){var T;(T=g.current)==null||T.focus()}else{const D=sB()||(s==null?void 0:s.refs.domReference.current);D==null||D.focus(),s!=null&&s.closeOnFocusOut&&(s==null||s.onOpenChange(!1,E.nativeEvent,"focus-out"))}}}))}const cB=()=>G.useContext(lB),y4="data-floating-ui-focusable";function OQ(e){return e?e.hasAttribute(y4)?e:e.querySelector("["+y4+"]")||e:null}const IQ=20;let Lf=[];function X5(e){Lf=Lf.filter(n=>n.isConnected);let t=e;if(!(!t||Mc(t)==="body")){if(!zZ(t,Pp())){const n=_v(t,Pp())[0];n&&(t=n)}Lf.push(t),Lf.length>IQ&&(Lf=Lf.slice(-20))}}function uE(){return Lf.slice().reverse().find(e=>e.isConnected)}const FQ=G.forwardRef(function(t,n){return G.createElement("button",xp({},t,{type:"button",ref:n,tabIndex:-1,style:Hv}))});function fB(e){const{context:t,children:n,disabled:r=!1,order:i=["content"],guards:o=!0,initialFocus:s=0,returnFocus:l=!0,restoreFocus:c=!1,modal:h=!0,visuallyHiddenDismiss:d=!1,closeOnFocusOut:g=!0}=e,{open:v,refs:y,nodeId:x,onOpenChange:E,events:T,dataRef:D,floatingId:S,elements:{domReference:R,floating:k}}=t,O=typeof s=="number"&&s<0,$=vZ(R)&&O,z=AQ()?o:!0,K=V5(i),te=V5(s),se=V5(l),me=yy(),ne=cB(),oe=G.useRef(null),ve=G.useRef(null),ge=G.useRef(!1),Me=G.useRef(!1),Pe=G.useRef(-1),he=ne!=null,le=OQ(k),we=rc(function(Le){return Le===void 0&&(Le=le),Le?_v(Le,Pp()):[]}),U=rc(Le=>{const $e=we(Le);return K.current.map(Fe=>R&&Fe==="reference"?R:le&&Fe==="floating"?le:$e).filter(Boolean).flat()});G.useEffect(()=>{if(r||!h)return;function Le(Fe){if(Fe.key==="Tab"){Vo(le,Ff(ra(le)))&&we().length===0&&!$&&$5(Fe);const Ze=U(),et=_f(Fe);K.current[0]==="reference"&&et===R&&($5(Fe),Fe.shiftKey?Yd(Ze[Ze.length-1]):Yd(Ze[1])),K.current[1]==="floating"&&et===le&&Fe.shiftKey&&($5(Fe),Yd(Ze[0]))}}const $e=ra(le);return $e.addEventListener("keydown",Le),()=>{$e.removeEventListener("keydown",Le)}},[r,R,le,h,K,$,we,U]),G.useEffect(()=>{if(r||!k)return;function Le($e){const Fe=_f($e),et=we().indexOf(Fe);et!==-1&&(Pe.current=et)}return k.addEventListener("focusin",Le),()=>{k.removeEventListener("focusin",Le)}},[r,k,we]),G.useEffect(()=>{if(r||!g)return;function Le(){Me.current=!0,setTimeout(()=>{Me.current=!1})}function $e(Fe){const Ze=Fe.relatedTarget;queueMicrotask(()=>{const et=!(Vo(R,Ze)||Vo(k,Ze)||Vo(Ze,k)||Vo(ne==null?void 0:ne.portalNode,Ze)||Ze!=null&&Ze.hasAttribute(Ep("focus-guard"))||me&&(Wg(me.nodesRef.current,x).find(Q=>{var Se,Te;return Vo((Se=Q.context)==null?void 0:Se.elements.floating,Ze)||Vo((Te=Q.context)==null?void 0:Te.elements.domReference,Ze)})||DQ(me.nodesRef.current,x).find(Q=>{var Se,Te;return((Se=Q.context)==null?void 0:Se.elements.floating)===Ze||((Te=Q.context)==null?void 0:Te.elements.domReference)===Ze})));if(c&&et&&Ff(ra(le))===ra(le).body){Qr(le)&&le.focus();const Q=Pe.current,Se=we(),Te=Se[Q]||Se[Se.length-1]||le;Qr(Te)&&Te.focus()}($||!h)&&Ze&&et&&!Me.current&&Ze!==uE()&&(ge.current=!0,E(!1,Fe,"focus-out"))})}if(k&&Qr(R))return R.addEventListener("focusout",$e),R.addEventListener("pointerdown",Le),k.addEventListener("focusout",$e),()=>{R.removeEventListener("focusout",$e),R.removeEventListener("pointerdown",Le),k.removeEventListener("focusout",$e)}},[r,R,k,le,h,x,me,ne,E,g,c,we,$]),G.useEffect(()=>{var Le;if(r)return;const $e=Array.from((ne==null||(Le=ne.portalNode)==null?void 0:Le.querySelectorAll("["+Ep("portal")+"]"))||[]);if(k){const Fe=[k,...$e,oe.current,ve.current,K.current.includes("reference")||$?R:null].filter(et=>et!=null),Ze=h||$?oE(Fe,z,!z):oE(Fe);return()=>{Ze()}}},[r,R,k,h,K,ne,$,z]),Yo(()=>{if(r||!Qr(le))return;const Le=ra(le),$e=Ff(Le);queueMicrotask(()=>{const Fe=U(le),Ze=te.current,et=(typeof Ze=="number"?Fe[Ze]:Ze.current)||le,Q=Vo(le,$e);!O&&!Q&&v&&Yd(et,{preventScroll:et===le})})},[r,v,le,O,U,te]),Yo(()=>{if(r||!le)return;let Le=!1;const $e=ra(le),Fe=Ff($e);let et=D.current.openEvent;X5(Fe);function Q(ke){let{open:vt,reason:Ye,event:At,nested:hn}=ke;vt&&(et=At),Ye==="escape-key"&&y.domReference.current&&X5(y.domReference.current),Ye==="hover"&&At.type==="mouseleave"&&(ge.current=!0),Ye==="outside-press"&&(hn?(ge.current=!1,Le=!0):ge.current=!(cZ(At)||fZ(At)))}T.on("openchange",Q);const Se=$e.createElement("span");Se.setAttribute("tabindex","-1"),Se.setAttribute("aria-hidden","true"),Object.assign(Se.style,Hv),he&&R&&R.insertAdjacentElement("afterend",Se);function Te(){return typeof se.current=="boolean"?uE()||Se:se.current.current||Se}return()=>{T.off("openchange",Q);const ke=Ff($e),vt=Vo(k,ke)||me&&Wg(me.nodesRef.current,x).some(hn=>{var Mt;return Vo((Mt=hn.context)==null?void 0:Mt.elements.floating,ke)});(vt||et&&["click","mousedown"].includes(et.type))&&y.domReference.current&&X5(y.domReference.current);const At=Te();queueMicrotask(()=>{se.current&&!ge.current&&Qr(At)&&(!(At!==ke&&ke!==$e.body)||vt)&&At.focus({preventScroll:Le}),Se.remove()})}},[r,k,le,se,D,y,T,me,x,he,R]),G.useEffect(()=>{queueMicrotask(()=>{ge.current=!1})},[r]),Yo(()=>{if(!r&&ne)return ne.setFocusManagerState({modal:h,closeOnFocusOut:g,open:v,onOpenChange:E,refs:y}),()=>{ne.setFocusManagerState(null)}},[r,ne,h,v,E,y,g]),Yo(()=>{if(r||!le||typeof MutationObserver!="function"||O)return;const Le=()=>{const Fe=le.getAttribute("tabindex"),Ze=we(),et=Ff(ra(k)),Q=Ze.indexOf(et);Q!==-1&&(Pe.current=Q),K.current.includes("floating")||et!==y.domReference.current&&Ze.length===0?Fe!=="0"&&le.setAttribute("tabindex","0"):Fe!=="-1"&&le.setAttribute("tabindex","-1")};Le();const $e=new MutationObserver(Le);return $e.observe(le,{childList:!0,subtree:!0,attributes:!0}),()=>{$e.disconnect()}},[r,k,le,y,K,we,O]);function xe(Le){return r||!d||!h?null:G.createElement(FQ,{ref:Le==="start"?oe:ve,onClick:$e=>E(!1,$e.nativeEvent)},typeof d=="string"?d:"Dismiss")}const Ie=!r&&z&&(h?!$:!0)&&(he||h);return G.createElement(G.Fragment,null,Ie&&G.createElement(K3,{"data-type":"inside",ref:ne==null?void 0:ne.beforeInsideRef,onFocus:Le=>{if(h){const Fe=U();Yd(i[0]==="reference"?Fe[0]:Fe[Fe.length-1])}else if(ne!=null&&ne.preserveTabOrder&&ne.portalNode)if(ge.current=!1,zg(Le,ne.portalNode)){const Fe=sB()||R;Fe==null||Fe.focus()}else{var $e;($e=ne.beforeOutsideRef.current)==null||$e.focus()}}}),!$&&xe("start"),n,xe("end"),Ie&&G.createElement(K3,{"data-type":"inside",ref:ne==null?void 0:ne.afterInsideRef,onFocus:Le=>{if(h)Yd(U()[0]);else if(ne!=null&&ne.preserveTabOrder&&ne.portalNode)if(g&&(ge.current=!0),zg(Le,ne.portalNode)){const Fe=aB()||R;Fe==null||Fe.focus()}else{var $e;($e=ne.afterOutsideRef.current)==null||$e.focus()}}}))}let Lm=0;function LQ(){const e=/iP(hone|ad|od)|iOS/.test(NA()),t=document.body.style,r=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",i=window.innerWidth-document.documentElement.clientWidth,o=t.left?parseFloat(t.left):window.scrollX,s=t.top?parseFloat(t.top):window.scrollY;if(t.overflow="hidden",i&&(t[r]=i+"px"),e){var l,c;const h=((l=window.visualViewport)==null?void 0:l.offsetLeft)||0,d=((c=window.visualViewport)==null?void 0:c.offsetTop)||0;Object.assign(t,{position:"fixed",top:-(s-Math.floor(d))+"px",left:-(o-Math.floor(h))+"px",right:"0"})}return()=>{Object.assign(t,{overflow:"",[r]:""}),e&&(Object.assign(t,{position:"",top:"",left:"",right:""}),window.scrollTo(o,s))}}let cE=()=>{};const _Q=G.forwardRef(function(t,n){const{lockScroll:r=!1,...i}=t;return Yo(()=>{if(r)return Lm++,Lm===1&&(cE=LQ()),()=>{Lm--,Lm===0&&cE()}},[r]),G.createElement("div",xp({ref:n},i,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...i.style}}))});function fE(e){return Qr(e.target)&&e.target.tagName==="BUTTON"}function hE(e){return GA(e)}function hB(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:o}}=e,{enabled:s=!0,event:l="click",toggle:c=!0,ignoreMouse:h=!1,keyboardHandlers:d=!0,stickIfOpen:g=!0}=t,v=G.useRef(),y=G.useRef(!1),x=G.useMemo(()=>({onPointerDown(E){v.current=E.pointerType},onMouseDown(E){const T=v.current;E.button===0&&l!=="click"&&(Yx(T)&&h||(n&&c&&(!(i.current.openEvent&&g)||i.current.openEvent.type==="mousedown")?r(!1,E.nativeEvent,"click"):(E.preventDefault(),r(!0,E.nativeEvent,"click"))))},onClick(E){const T=v.current;if(l==="mousedown"&&v.current){v.current=void 0;return}Yx(T)&&h||(n&&c&&(!(i.current.openEvent&&g)||i.current.openEvent.type==="click")?r(!1,E.nativeEvent,"click"):r(!0,E.nativeEvent,"click"))},onKeyDown(E){v.current=void 0,!(E.defaultPrevented||!d||fE(E))&&(E.key===" "&&!hE(o)&&(E.preventDefault(),y.current=!0),E.key==="Enter"&&r(!(n&&c),E.nativeEvent,"click"))},onKeyUp(E){E.defaultPrevented||!d||fE(E)||hE(o)||E.key===" "&&y.current&&(y.current=!1,r(!(n&&c),E.nativeEvent,"click"))}}),[i,o,l,h,d,r,n,g,c]);return G.useMemo(()=>s?{reference:x}:{},[s,x])}const NQ={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},HQ={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},dE=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function dB(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:o}=e,{enabled:s=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:h="pointerdown",referencePress:d=!1,referencePressEvent:g="pointerdown",ancestorScroll:v=!1,bubbles:y,capture:x}=t,E=yy(),T=rc(typeof c=="function"?c:()=>!1),D=typeof c=="function"?T:c,S=G.useRef(!1),R=G.useRef(!1),{escapeKey:k,outsidePress:O}=dE(y),{escapeKey:$,outsidePress:z}=dE(x),K=G.useRef(!1),te=rc(ge=>{var Me;if(!n||!s||!l||ge.key!=="Escape"||K.current)return;const Pe=(Me=o.current.floatingContext)==null?void 0:Me.nodeId,he=E?Wg(E.nodesRef.current,Pe):[];if(!k&&(ge.stopPropagation(),he.length>0)){let le=!0;if(he.forEach(we=>{var U;if((U=we.context)!=null&&U.open&&!we.context.dataRef.current.__escapeKeyBubbles){le=!1;return}}),!le)return}r(!1,gZ(ge)?ge.nativeEvent:ge,"escape-key")}),se=rc(ge=>{var Me;const Pe=()=>{var he;te(ge),(he=_f(ge))==null||he.removeEventListener("keydown",Pe)};(Me=_f(ge))==null||Me.addEventListener("keydown",Pe)}),me=rc(ge=>{var Me;const Pe=S.current;S.current=!1;const he=R.current;if(R.current=!1,h==="click"&&he||Pe||typeof D=="function"&&!D(ge))return;const le=_f(ge),we="["+Ep("inert")+"]",U=ra(i.floating).querySelectorAll(we);let xe=dr(le)?le:null;for(;xe&&!wc(xe);){const Fe=au(xe);if(wc(Fe)||!dr(Fe))break;xe=Fe}if(U.length&&dr(le)&&!pZ(le)&&!Vo(le,i.floating)&&Array.from(U).every(Fe=>!Vo(xe,Fe)))return;if(Qr(le)&&ve){const Fe=le.clientWidth>0&&le.scrollWidth>le.clientWidth,Ze=le.clientHeight>0&&le.scrollHeight>le.clientHeight;let et=Ze&&ge.offsetX>le.clientWidth;if(Ze&&ks(le).direction==="rtl"&&(et=ge.offsetX<=le.offsetWidth-le.clientWidth),et||Fe&&ge.offsetY>le.clientHeight)return}const Ie=(Me=o.current.floatingContext)==null?void 0:Me.nodeId,Le=E&&Wg(E.nodesRef.current,Ie).some(Fe=>{var Ze;return j5(ge,(Ze=Fe.context)==null?void 0:Ze.elements.floating)});if(j5(ge,i.floating)||j5(ge,i.domReference)||Le)return;const $e=E?Wg(E.nodesRef.current,Ie):[];if($e.length>0){let Fe=!0;if($e.forEach(Ze=>{var et;if((et=Ze.context)!=null&&et.open&&!Ze.context.dataRef.current.__outsidePressBubbles){Fe=!1;return}}),!Fe)return}r(!1,ge,"outside-press")}),ne=rc(ge=>{var Me;const Pe=()=>{var he;me(ge),(he=_f(ge))==null||he.removeEventListener(h,Pe)};(Me=_f(ge))==null||Me.addEventListener(h,Pe)});G.useEffect(()=>{if(!n||!s)return;o.current.__escapeKeyBubbles=k,o.current.__outsidePressBubbles=O;let ge=-1;function Me(U){r(!1,U,"ancestor-scroll")}function Pe(){window.clearTimeout(ge),K.current=!0}function he(){ge=window.setTimeout(()=>{K.current=!1},Ov()?5:0)}const le=ra(i.floating);l&&(le.addEventListener("keydown",$?se:te,$),le.addEventListener("compositionstart",Pe),le.addEventListener("compositionend",he)),D&&le.addEventListener(h,z?ne:me,z);let we=[];return v&&(dr(i.domReference)&&(we=cc(i.domReference)),dr(i.floating)&&(we=we.concat(cc(i.floating))),!dr(i.reference)&&i.reference&&i.reference.contextElement&&(we=we.concat(cc(i.reference.contextElement)))),we=we.filter(U=>{var xe;return U!==((xe=le.defaultView)==null?void 0:xe.visualViewport)}),we.forEach(U=>{U.addEventListener("scroll",Me,{passive:!0})}),()=>{l&&(le.removeEventListener("keydown",$?se:te,$),le.removeEventListener("compositionstart",Pe),le.removeEventListener("compositionend",he)),D&&le.removeEventListener(h,z?ne:me,z),we.forEach(U=>{U.removeEventListener("scroll",Me)}),window.clearTimeout(ge)}},[o,i,l,D,h,n,r,v,s,k,O,te,$,se,me,z,ne]),G.useEffect(()=>{S.current=!1},[D,h]);const oe=G.useMemo(()=>({onKeyDown:te,[NQ[g]]:ge=>{d&&r(!1,ge.nativeEvent,"reference-press")}}),[te,r,d,g]),ve=G.useMemo(()=>({onKeyDown:te,onMouseDown(){R.current=!0},onMouseUp(){R.current=!0},[HQ[h]]:()=>{S.current=!0}}),[te,h]);return G.useMemo(()=>s?{reference:oe,floating:ve}:{},[s,oe,ve])}function GQ(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Wp(),o=G.useRef({}),[s]=G.useState(()=>PQ()),l=rB()!=null,[c,h]=G.useState(r.reference),d=rc((y,x,E)=>{o.current.openEvent=y?x:void 0,s.emit("openchange",{open:y,event:x,reason:E,nested:l}),n==null||n(y,x,E)}),g=G.useMemo(()=>({setPositionReference:h}),[]),v=G.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return G.useMemo(()=>({dataRef:o,open:t,onOpenChange:d,elements:v,events:s,floatingId:i,refs:g}),[t,d,v,s,i,g])}function Gv(e){e===void 0&&(e={});const{nodeId:t}=e,n=GQ({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[o,s]=G.useState(null),[l,c]=G.useState(null),d=(i==null?void 0:i.domReference)||o,g=G.useRef(null),v=yy();Yo(()=>{d&&(g.current=d)},[d]);const y=mQ({...e,elements:{...i,...l&&{reference:l}}}),x=G.useCallback(R=>{const k=dr(R)?{getBoundingClientRect:()=>R.getBoundingClientRect(),contextElement:R}:R;c(k),y.refs.setReference(k)},[y.refs]),E=G.useCallback(R=>{(dr(R)||R===null)&&(g.current=R,s(R)),(dr(y.refs.reference.current)||y.refs.reference.current===null||R!==null&&!dr(R))&&y.refs.setReference(R)},[y.refs]),T=G.useMemo(()=>({...y.refs,setReference:E,setPositionReference:x,domReference:g}),[y.refs,E,x]),D=G.useMemo(()=>({...y.elements,domReference:d}),[y.elements,d]),S=G.useMemo(()=>({...y,...r,refs:T,elements:D,nodeId:t}),[y,T,D,t,r]);return Yo(()=>{r.dataRef.current.floatingContext=S;const R=v==null?void 0:v.nodesRef.current.find(k=>k.id===t);R&&(R.context=S)}),G.useMemo(()=>({...y,context:S,refs:T,elements:D}),[y,T,D,S])}const gE="active",pE="selected";function K5(e,t,n){const r=new Map,i=n==="item";let o=e;if(i&&e){const{[gE]:s,[pE]:l,...c}=e;o=c}return{...n==="floating"&&{tabIndex:-1,[y4]:""},...o,...t.map(s=>{const l=s?s[n]:null;return typeof l=="function"?e?l(e):null:l}).concat(e).reduce((s,l)=>(l&&Object.entries(l).forEach(c=>{let[h,d]=c;if(!(i&&[gE,pE].includes(h)))if(h.indexOf("on")===0){if(r.has(h)||r.set(h,[]),typeof d=="function"){var g;(g=r.get(h))==null||g.push(d),s[h]=function(){for(var v,y=arguments.length,x=new Array(y),E=0;E<y;E++)x[E]=arguments[E];return(v=r.get(h))==null?void 0:v.map(T=>T(...x)).find(T=>T!==void 0)}}}else s[h]=d}),s),{})}}function gB(e){e===void 0&&(e=[]);const t=e.map(l=>l==null?void 0:l.reference),n=e.map(l=>l==null?void 0:l.floating),r=e.map(l=>l==null?void 0:l.item),i=G.useCallback(l=>K5(l,e,"reference"),t),o=G.useCallback(l=>K5(l,e,"floating"),n),s=G.useCallback(l=>K5(l,e,"item"),r);return G.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:s}),[i,o,s])}const jQ=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function pB(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:o=!0,role:s="dialog"}=t,l=(n=jQ.get(s))!=null?n:s,c=Wp(),d=rB()!=null,g=G.useMemo(()=>l==="tooltip"||s==="label"?{["aria-"+(s==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":l==="alertdialog"?"dialog":l,"aria-controls":r?i:void 0,...l==="listbox"&&{role:"combobox"},...l==="menu"&&{id:c},...l==="menu"&&d&&{role:"menuitem"},...s==="select"&&{"aria-autocomplete":"none"},...s==="combobox"&&{"aria-autocomplete":"list"}},[l,i,d,r,c,s]),v=G.useMemo(()=>{const x={id:i,...l&&{role:l}};return l==="tooltip"||s==="label"?x:{...x,...l==="menu"&&{"aria-labelledby":c}}},[l,i,c,s]),y=G.useCallback(x=>{let{active:E,selected:T}=x;const D={role:"option",...E&&{id:i+"-option"}};switch(s){case"select":return{...D,"aria-selected":E&&T};case"combobox":return{...D,...E&&{"aria-selected":!0}}}return{}},[i,s]);return G.useMemo(()=>o?{reference:g,floating:v,item:y}:{},[o,g,v,y])}function $Q({initialOpen:e=!1,placement:t="bottom",modal:n,sideOffset:r,open:i,onOpenChange:o}={}){const[s,l]=G.useState(e),[c,h]=G.useState(),[d,g]=G.useState(),v=i??s,y=o??l,x=Gv({placement:t,open:v,onOpenChange:y,whileElementsMounted:fQ,middleware:[my(r||4),vy({crossAxis:t.includes("-"),fallbackAxisSideDirection:"end",padding:5}),vQ({padding:5})]}),E=x.context,T=hB(E,{enabled:i==null}),D=dB(E),S=pB(E),R=gB([T,D,S]);return G.useMemo(()=>({open:v,setOpen:y,...R,...x,modal:n,labelId:c,descriptionId:d,setLabelId:h,setDescriptionId:g}),[v,y,R,x,n,c,d])}const mB=G.createContext(null),vB=()=>{const e=G.useContext(mB);if(e==null)throw new Error("Popover components must be wrapped in <Popover />");return e};function ca({children:e,modal:t=!1,...n}){const r=$Q({modal:t,...n});return M.jsx(mB.Provider,{value:r,children:e})}const fa=G.forwardRef(function({children:t,asChild:n=!1,...r},i){const o=vB(),s=t.ref,l=Nv([o.refs.setReference,i,s]);return n&&G.isValidElement(t)?G.cloneElement(t,o.getReferenceProps({ref:l,...r,...t.props,"data-state":o.open?"open":"closed"})):M.jsx("button",{ref:l,type:"button","data-state":o.open?"open":"closed",...o.getReferenceProps(r),children:t})}),ha=G.forwardRef(function({container:t,style:n,...r},i){const{context:o,...s}=vB(),l=Nv([s.refs.setFloating,i]);return o.open?M.jsx(uB,{root:t,children:M.jsx(fB,{context:o,modal:s.modal,children:M.jsx("div",{ref:l,style:{...s.floatingStyles,...n},"aria-labelledby":s.labelId,"aria-describedby":s.descriptionId,...s.getFloatingProps(r),children:r.children})})}):null});var Gf=(e=>(e.mermaidToDrawnix="mermaidToDrawnix",e.markdownToDrawnix="markdownToDrawnix",e))(Gf||{});const yB=G.createContext(null),Is=()=>{const e=G.useContext(yB);if(!e)throw new Error("The `useDrawnix` hook must be used inside the <Drawnix> component's context.");return e},WQ=()=>{const{appState:e,setAppState:t}=Is();return n=>{t({...e,pointer:n})}},jv=xt.createContext({}),w4=(e="",t=!1)=>`menu-item menu-item-base ${e} ${t?"menu-item--active":""}`.trim(),wB=(e,t)=>{const n=G.useContext(jv);return hq(e,r=>{var o;const i=new CustomEvent(R0.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});t==null||t(i),i.defaultPrevented||(o=n.onSelect)==null||o.call(n,i)})},K0=({children:e,className:t="",onSelect:n,style:r})=>{const i=sn(`menu ${t}`).trim();return M.jsx(jv.Provider,{value:{onSelect:n},children:M.jsx("div",{className:i,style:r,"data-testid":"menu",children:M.jsx(Bo,{className:"menu-container",padding:2,children:e})})})};K0.displayName="Menu";const CB=({icon:e,shortcut:t,children:n})=>M.jsxs(M.Fragment,{children:[e&&M.jsx("div",{className:"menu-item__icon",children:e}),M.jsx("div",{className:"menu-item__text",children:n}),t&&M.jsx("div",{className:"menu-item__shortcut",children:t})]}),Mi=({icon:e,onSelect:t,children:n,shortcut:r,className:i,selected:o,submenu:s,...l})=>{const[c,h]=G.useState(!1),d=G.useRef(),g=wB(l.onClick,t),v=M.jsx(CB,{icon:e,shortcut:r,children:n}),y=()=>{d.current&&window.clearTimeout(d.current),h(!0)},x=()=>{d.current=window.setTimeout(()=>{h(!1)},100)};return s?M.jsxs(ca,{open:c,onOpenChange:h,placement:"right-start",children:[M.jsx(fa,{asChild:!0,children:M.jsx("button",{...l,type:"button",className:w4(i,o||c),title:l.title??l["aria-label"],onClick:g,onMouseEnter:y,onMouseLeave:x,children:v})}),M.jsx(ha,{onMouseEnter:y,onMouseLeave:x,children:s})]}):M.jsx("button",{...l,onClick:g,type:"button",className:w4(i,o),title:l.title??l["aria-label"],children:v})};Mi.displayName="MenuItem";const xB=({children:e})=>M.jsx("div",{style:{display:"inline-flex",marginLeft:"auto",padding:"2px 4px",background:"var(--color-promo)",color:"var(--color-surface-lowest)",borderRadius:6,fontSize:9,fontFamily:"Cascadia, monospace"},children:e});xB.displayName="MenuItemBadge";Mi.Badge=xB;const EB=()=>{const{appState:e,setAppState:t}=Is(),{t:n}=Zn();return M.jsx(Mi,{"data-testid":"marmaid-to-drawnix-button",onSelect:()=>{t({...e,openDialogType:Gf.mermaidToDrawnix})},icon:Qq,"aria-label":n("extraTools.mermaidToDrawnix"),children:n("extraTools.mermaidToDrawnix")})};EB.displayName="MermaidToDrawnix";const PB=()=>{const{appState:e,setAppState:t}=Is(),{t:n}=Zn();return M.jsx(Mi,{"data-testid":"markdown-to-drawnix-button",onSelect:()=>{t({...e,openDialogType:Gf.markdownToDrawnix})},icon:Jq,"aria-label":n("extraTools.markdownToDrawnix"),children:n("extraTools.markdownToDrawnix")})};PB.displayName="MarkdownToDrawnix";const zQ=()=>{const e=Dr(),{t}=Zn(),n=F.getBoardContainer(e),[r,i]=G.useState(!1);return M.jsxs(ca,{sideOffset:12,open:r,onOpenChange:o=>{i(o)},placement:"bottom-start",children:[M.jsx(fa,{asChild:!0,children:M.jsx(bn,{type:"icon",visible:!0,selected:r,icon:RA,title:t("toolbar.extraTools"),"aria-label":t("toolbar.extraTools"),onPointerDown:()=>{i(!r)}})}),M.jsx(ha,{container:n,children:M.jsxs(K0,{onSelect:()=>{i(!1)},children:[M.jsx(EB,{}),M.jsx(PB,{})]})})]},0)},t3=(e,t)=>{const n=Qe(e);gq(e,{elements:n.length>0?n:void 0,fillStyle:t?"transparent":"white"}).then(r=>{if(r){const i=t?"png":"jpg",o=dq(r),s=`drawnix-${new Date().getTime()}.${i}`;pq(o,s)}})},SB=async e=>{const t=await SA({description:"Image",extensions:Object.keys(ay)});h4(e,t)},Y5=e=>e===Zt.hand||e===Zt.selection,mE=[{icon:mq,pointer:Zt.hand,titleKey:"toolbar.hand"},{icon:vq,pointer:Zt.selection,titleKey:"toolbar.selection"},{icon:yq,pointer:Xl.mind,titleKey:"toolbar.mind"},{icon:Cq,pointer:pt.text,titleKey:"toolbar.text"},{icon:hy,pointer:Ko.feltTipPen,titleKey:"toolbar.pen",key:"freehand"},{icon:Eq,titleKey:"toolbar.arrow",key:"arrow",pointer:Ln.straight},{icon:wq,titleKey:"toolbar.shape",key:"shape",pointer:pt.rectangle},{icon:Zq,titleKey:"toolbar.image",key:"image"},{icon:RA,titleKey:"toolbar.extraTools",key:"extra-tools"}],VQ=e=>Object.keys(Ln).includes(e.pointer),UQ=e=>Object.keys(pt).includes(e.pointer)||Object.keys(gt).includes(e.pointer),XQ=()=>{const e=Dr(),{appState:t}=Is(),{t:n}=Zn(),r=WQ(),i=F.getBoardContainer(e),[o,s]=G.useState(!1),[l,c]=G.useState(!1),[h,d]=G.useState(!1),[g,v]=G.useState(mE.find(D=>D.key==="freehand")),y=D=>{yo(e,qr.dnd),fn.updatePointerType(e,D),r(D)},x=()=>{yo(e,qr.drawing)},E=D=>F.isPointer(e,D.pointer)&&!l&&!h&&!o,T=D=>F.isInPointer(D,[Ko.feltTipPen,Ko.eraser]);return M.jsx(Bo,{padding:1,className:sn("draw-toolbar",tl),children:M.jsx(Ri.Row,{gap:1,children:mE.map((D,S)=>t.isMobile&&D.pointer===Zt.hand?M.jsx(M.Fragment,{}):D.key==="freehand"?M.jsxs(ca,{open:o||T(e),sideOffset:12,onOpenChange:R=>{s(R)},children:[M.jsx(fa,{asChild:!0,children:M.jsx(bn,{type:"icon",visible:!0,selected:o||T(e),icon:g.icon,title:g.titleKey?n(g.titleKey):"Freehand","aria-label":g.titleKey?n(g.titleKey):"Freehand",onPointerDown:()=>{s(!o),y(g.pointer)},onPointerUp:()=>{x()}})}),M.jsx(ha,{container:i,children:M.jsx(nZ,{onPointerUp:R=>{r(R),v(FA.find(k=>k.pointer===R))}})})]},S):D.key==="shape"?M.jsxs(ca,{open:h,sideOffset:12,onOpenChange:R=>{d(R)},children:[M.jsx(fa,{asChild:!0,children:M.jsx(bn,{type:"icon",visible:!0,selected:h||UQ(e)&&!F.isPointer(e,pt.text),icon:D.icon,title:D.titleKey?n(D.titleKey):"Shape","aria-label":D.titleKey?n(D.titleKey):"Shape",onPointerDown:()=>{d(!h)}})}),M.jsx(ha,{container:i,children:M.jsx(oZ,{onPointerUp:R=>{d(!1),r(R)}})})]},S):D.key==="arrow"?M.jsxs(ca,{open:l,sideOffset:12,onOpenChange:R=>{c(R)},children:[M.jsx(fa,{asChild:!0,children:M.jsx(bn,{type:"icon",visible:!0,selected:l||VQ(e),icon:D.icon,title:D.titleKey?n(D.titleKey):"","aria-label":D.titleKey?n(D.titleKey):"",onPointerDown:()=>{c(!l)}})}),M.jsx(ha,{container:i,children:M.jsx(aZ,{onPointerUp:R=>{c(!1),r(R)}})})]},S):D.key==="extra-tools"?M.jsx(zQ,{},S):M.jsx(bn,{type:"radio",icon:D.icon,checked:E(D),title:D.titleKey?n(D.titleKey):"","aria-label":D.titleKey?n(D.titleKey):"",onPointerDown:()=>{D.pointer&&!Y5(D.pointer)&&y(D.pointer)},onPointerUp:()=>{D.pointer&&!Y5(D.pointer)?x():D.pointer&&Y5(D.pointer)&&(fn.updatePointerType(e,D.pointer),r(D.pointer)),D.key==="image"&&SB(e)}},S))})})},KQ=()=>{var o;const e=Dr(),{t}=Zn(),n=F.getBoardContainer(e),[r,i]=G.useState(!1);return M.jsx(Bo,{padding:1,className:sn("zoom-toolbar",tl),children:M.jsxs(Ri.Row,{gap:1,children:[M.jsx(bn,{type:"button",icon:Fq,visible:!0,title:t("zoom.out"),"aria-label":t("zoom.out"),onPointerUp:()=>{fn.updateZoom(e,e.viewport.zoom-.1)},className:"zoom-out-button"},0),M.jsxs(ca,{sideOffset:12,open:r,onOpenChange:s=>{i(s)},placement:"bottom-end",children:[M.jsx(fa,{asChild:!0,children:M.jsxs("div",{title:t("zoom.fit"),"aria-label":t("zoom.fit"),className:sn("zoom-menu-trigger",{active:r}),onPointerUp:()=>{i(!r)},children:[Number(((((o=e==null?void 0:e.viewport)==null?void 0:o.zoom)||1)*100).toFixed(0)),"%"]},1)}),M.jsx(ha,{container:n,children:M.jsxs(K0,{onSelect:()=>{i(!1)},children:[M.jsx(Mi,{"data-testid":"open-button",onSelect:()=>{fn.fitViewport(e)},"aria-label":t("zoom.fit"),shortcut:"Cmd+Shift+=",children:t("zoom.fit")}),M.jsx(Mi,{"data-testid":"open-button",onSelect:()=>{fn.updateZoom(e,1)},"aria-label":t("zoom.100"),shortcut:"Cmd+0",children:t("zoom.100")})]})})]}),M.jsx(bn,{type:"button",icon:Lq,visible:!0,title:t("zoom.in"),"aria-label":t("zoom.in"),onPointerUp:()=>{fn.updateZoom(e,e.viewport.zoom+.1)},className:"zoom-in-button"},2)]})})},YQ="TRANSPARENT",wy="NO_COLOR",Cy="#FFFFFF",TB=[{name:"color.none",value:wy},{name:"color.default",value:ei},{name:"color.white",value:Cy},{name:"color.gray",value:"#808080"},{name:"color.deepBlue",value:"#1E90FF"},{name:"color.red",value:"#FF4500"},{name:"color.green",value:"#2ECC71"},{name:"color.yellow",value:"#FFD700"},{name:"color.purple",value:"#8A2BE2"},{name:"color.orange",value:"#FFA500"},{name:"color.pastelPink",value:"#FFB3BA"},{name:"color.cyan",value:"#00CED1"},{name:"color.brown",value:"#8B4513"},{name:"color.forestGreen",value:"#228B22"},{name:"color.lightGray",value:"#D3D3D3"}];function qQ(e){return Math.round((100-e)/100*255)}function ZQ(e){return Math.round((1-e/255)*100)}function Y0(e,t){const r=qQ(100-t).toString(16).padStart(2,"0");return`${e}${r}`}function q0(e){e=e.replace(/^#/,"");let t;if(e.length===8)t=parseInt(e.slice(6,8),16);else if(e.length===4)t=parseInt(e.slice(3,4).repeat(2),16);else return 100;return 100-ZQ(t)}function QQ(e){return e!=="none"}function dh(e){const t=e.replace(/^#/,"").toUpperCase();return t.length===8?"#"+t.slice(0,6):t.length===4?"#"+t.slice(0,3):t.length===6||t.length===3?"#"+t:e}function DB(e){return e===Cy}function AB(e){return e===0}function zp(e){return e===100}function p0(e){return e===wy}function JQ(e){return!e||e===ei}var Rg={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var eJ=Rg.exports,vE;function tJ(){return vE||(vE=1,function(e,t){(function(){var n,r="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",h=500,d="__lodash_placeholder__",g=1,v=2,y=4,x=1,E=2,T=1,D=2,S=4,R=8,k=16,O=32,$=64,z=128,K=256,te=512,se=30,me="...",ne=800,oe=16,ve=1,ge=2,Me=3,Pe=1/0,he=9007199254740991,le=17976931348623157e292,we=NaN,U=4294967295,xe=U-1,Ie=U>>>1,Le=[["ary",z],["bind",T],["bindKey",D],["curry",R],["curryRight",k],["flip",te],["partial",O],["partialRight",$],["rearg",K]],$e="[object Arguments]",Fe="[object Array]",Ze="[object AsyncFunction]",et="[object Boolean]",Q="[object Date]",Se="[object DOMException]",Te="[object Error]",ke="[object Function]",vt="[object GeneratorFunction]",Ye="[object Map]",At="[object Number]",hn="[object Null]",Mt="[object Object]",kn="[object Promise]",Cn="[object Proxy]",dn="[object RegExp]",_t="[object Set]",an="[object String]",pr="[object Symbol]",Ki="[object Undefined]",$n="[object WeakMap]",Yi="[object WeakSet]",mr="[object ArrayBuffer]",wn="[object DataView]",On="[object Float32Array]",Lr="[object Float64Array]",ki="[object Int8Array]",Fs="[object Int16Array]",ns="[object Int32Array]",Mo="[object Uint8Array]",ll="[object Uint8ClampedArray]",Ro="[object Uint16Array]",qi="[object Uint32Array]",uu=/\b__p \+= '';/g,Rc=/\b(__p \+=) '' \+/g,Zi=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ls=/&(?:amp|lt|gt|quot|#39);/g,_s=/[&<>"']/g,bc=RegExp(Ls.source),gh=RegExp(_s.source),ph=/<%-([\s\S]+?)%>/g,mh=/<%([\s\S]+?)%>/g,kc=/<%=([\s\S]+?)%>/g,Oc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vh=/^\w*$/,ul=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,cl=/[\\^$.*+?()[\]{}|]/g,fl=RegExp(cl.source),Ic=/^\s+/,ma=/\s/,cu=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,fu=/\{\n\/\* \[wrapped with (.+)\] \*/,Fc=/,? & /,Z0=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Q0=/[()=,{}\[\]\/\s]/,J0=/\\(\\)?/g,Ns=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Lc=/\w*$/,yh=/^[-+]0x[0-9a-f]+$/i,e1=/^0b[01]+$/i,wh=/^\[object .+?Constructor\]$/,Ch=/^0o[0-7]+$/i,xh=/^(?:0|[1-9]\d*)$/,Eh=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,hu=/($^)/,Ph=/['\n\r\u2028\u2029\\]/g,xn="\\ud800-\\udfff",Sh="\\u0300-\\u036f",rs="\\ufe20-\\ufe2f",Th="\\u20d0-\\u20ff",is=Sh+rs+Th,du="\\u2700-\\u27bf",_c="a-z\\xdf-\\xf6\\xf8-\\xff",gu="\\xac\\xb1\\xd7\\xf7",yi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",t1="\\u2000-\\u206f",Oi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",H="A-Z\\xc0-\\xd6\\xd8-\\xde",q="\\ufe0e\\ufe0f",W=gu+yi+t1+Oi,ie="[']",ue="["+xn+"]",ee="["+W+"]",De="["+is+"]",He="\\d+",Ve="["+du+"]",We="["+_c+"]",qe="[^"+xn+W+He+du+_c+H+"]",st="\\ud83c[\\udffb-\\udfff]",Nt="(?:"+De+"|"+st+")",ln="[^"+xn+"]",en="(?:\\ud83c[\\udde6-\\uddff]){2}",Et="[\\ud800-\\udbff][\\udc00-\\udfff]",Tn="["+H+"]",_r="\\u200d",os="(?:"+We+"|"+qe+")",pu="(?:"+Tn+"|"+qe+")",Nc="(?:"+ie+"(?:d|ll|m|re|s|t|ve))?",hl="(?:"+ie+"(?:D|LL|M|RE|S|T|VE))?",Hc=Nt+"?",dl="["+q+"]?",ss="(?:"+_r+"(?:"+[ln,en,Et].join("|")+")"+dl+Hc+")*",bo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",va="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",mu=dl+Hc+ss,Gc="(?:"+[Ve,en,Et].join("|")+")"+mu,ya="(?:"+[ln+De+"?",De,en,Et,ue].join("|")+")",$v=RegExp(ie,"g"),Up=RegExp(De,"g"),gl=RegExp(st+"(?="+st+")|"+ya+mu,"g"),Wv=RegExp([Tn+"?"+We+"+"+Nc+"(?="+[ee,Tn,"$"].join("|")+")",pu+"+"+hl+"(?="+[ee,Tn+os,"$"].join("|")+")",Tn+"?"+os+"+"+Nc,Tn+"+"+hl,va,bo,He,Gc].join("|"),"g"),Xp=RegExp("["+_r+xn+is+q+"]"),Dh=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Kp=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],zv=-1,Dn={};Dn[On]=Dn[Lr]=Dn[ki]=Dn[Fs]=Dn[ns]=Dn[Mo]=Dn[ll]=Dn[Ro]=Dn[qi]=!0,Dn[$e]=Dn[Fe]=Dn[mr]=Dn[et]=Dn[wn]=Dn[Q]=Dn[Te]=Dn[ke]=Dn[Ye]=Dn[At]=Dn[Mt]=Dn[dn]=Dn[_t]=Dn[an]=Dn[$n]=!1;var En={};En[$e]=En[Fe]=En[mr]=En[wn]=En[et]=En[Q]=En[On]=En[Lr]=En[ki]=En[Fs]=En[ns]=En[Ye]=En[At]=En[Mt]=En[dn]=En[_t]=En[an]=En[pr]=En[Mo]=En[ll]=En[Ro]=En[qi]=!0,En[Te]=En[ke]=En[$n]=!1;var vu={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Ah={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Vv={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Uv={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},n1=parseFloat,Bh=parseInt,Mh=typeof As=="object"&&As&&As.Object===Object&&As,Yp=typeof self=="object"&&self&&self.Object===Object&&self,Wn=Mh||Yp||Function("return this")(),jc=t&&!t.nodeType&&t,as=jc&&!0&&e&&!e.nodeType&&e,r1=as&&as.exports===jc,yu=r1&&Mh.process,ni=function(){try{var ae=as&&as.require&&as.require("util").types;return ae||yu&&yu.binding&&yu.binding("util")}catch{}}(),i1=ni&&ni.isArrayBuffer,wi=ni&&ni.isDate,pl=ni&&ni.isMap,Rh=ni&&ni.isRegExp,wu=ni&&ni.isSet,qp=ni&&ni.isTypedArray;function ri(ae,Ae,ye){switch(ye.length){case 0:return ae.call(Ae);case 1:return ae.call(Ae,ye[0]);case 2:return ae.call(Ae,ye[0],ye[1]);case 3:return ae.call(Ae,ye[0],ye[1],ye[2])}return ae.apply(Ae,ye)}function o1(ae,Ae,ye,nt){for(var Ft=-1,gn=ae==null?0:ae.length;++Ft<gn;){var lr=ae[Ft];Ae(nt,lr,ye(lr),ae)}return nt}function Nr(ae,Ae){for(var ye=-1,nt=ae==null?0:ae.length;++ye<nt&&Ae(ae[ye],ye,ae)!==!1;);return ae}function bh(ae,Ae){for(var ye=ae==null?0:ae.length;ye--&&Ae(ae[ye],ye,ae)!==!1;);return ae}function s1(ae,Ae){for(var ye=-1,nt=ae==null?0:ae.length;++ye<nt;)if(!Ae(ae[ye],ye,ae))return!1;return!0}function wa(ae,Ae){for(var ye=-1,nt=ae==null?0:ae.length,Ft=0,gn=[];++ye<nt;){var lr=ae[ye];Ae(lr,ye,ae)&&(gn[Ft++]=lr)}return gn}function kh(ae,Ae){var ye=ae==null?0:ae.length;return!!ye&&Cu(ae,Ae,0)>-1}function a1(ae,Ae,ye){for(var nt=-1,Ft=ae==null?0:ae.length;++nt<Ft;)if(ye(Ae,ae[nt]))return!0;return!1}function In(ae,Ae){for(var ye=-1,nt=ae==null?0:ae.length,Ft=Array(nt);++ye<nt;)Ft[ye]=Ae(ae[ye],ye,ae);return Ft}function Ca(ae,Ae){for(var ye=-1,nt=Ae.length,Ft=ae.length;++ye<nt;)ae[Ft+ye]=Ae[ye];return ae}function l1(ae,Ae,ye,nt){var Ft=-1,gn=ae==null?0:ae.length;for(nt&&gn&&(ye=ae[++Ft]);++Ft<gn;)ye=Ae(ye,ae[Ft],Ft,ae);return ye}function Xv(ae,Ae,ye,nt){var Ft=ae==null?0:ae.length;for(nt&&Ft&&(ye=ae[--Ft]);Ft--;)ye=Ae(ye,ae[Ft],Ft,ae);return ye}function u1(ae,Ae){for(var ye=-1,nt=ae==null?0:ae.length;++ye<nt;)if(Ae(ae[ye],ye,ae))return!0;return!1}var Kv=f1("length");function Zp(ae){return ae.split("")}function Yv(ae){return ae.match(Z0)||[]}function Qp(ae,Ae,ye){var nt;return ye(ae,function(Ft,gn,lr){if(Ae(Ft,gn,lr))return nt=gn,!1}),nt}function Oh(ae,Ae,ye,nt){for(var Ft=ae.length,gn=ye+(nt?1:-1);nt?gn--:++gn<Ft;)if(Ae(ae[gn],gn,ae))return gn;return-1}function Cu(ae,Ae,ye){return Ae===Ae?Lh(ae,Ae,ye):Oh(ae,Jp,ye)}function c1(ae,Ae,ye,nt){for(var Ft=ye-1,gn=ae.length;++Ft<gn;)if(nt(ae[Ft],Ae))return Ft;return-1}function Jp(ae){return ae!==ae}function e2(ae,Ae){var ye=ae==null?0:ae.length;return ye?h1(ae,Ae)/ye:we}function f1(ae){return function(Ae){return Ae==null?n:Ae[ae]}}function Ih(ae){return function(Ae){return ae==null?n:ae[Ae]}}function t2(ae,Ae,ye,nt,Ft){return Ft(ae,function(gn,lr,Bn){ye=nt?(nt=!1,gn):Ae(ye,gn,lr,Bn)}),ye}function qv(ae,Ae){var ye=ae.length;for(ae.sort(Ae);ye--;)ae[ye]=ae[ye].value;return ae}function h1(ae,Ae){for(var ye,nt=-1,Ft=ae.length;++nt<Ft;){var gn=Ae(ae[nt]);gn!==n&&(ye=ye===n?gn:ye+gn)}return ye}function d1(ae,Ae){for(var ye=-1,nt=Array(ae);++ye<ae;)nt[ye]=Ae(ye);return nt}function Zv(ae,Ae){return In(Ae,function(ye){return[ye,ae[ye]]})}function n2(ae){return ae&&ae.slice(0,_h(ae)+1).replace(Ic,"")}function Ii(ae){return function(Ae){return ae(Ae)}}function $c(ae,Ae){return In(Ae,function(ye){return ae[ye]})}function Hs(ae,Ae){return ae.has(Ae)}function r2(ae,Ae){for(var ye=-1,nt=ae.length;++ye<nt&&Cu(Ae,ae[ye],0)>-1;);return ye}function g1(ae,Ae){for(var ye=ae.length;ye--&&Cu(Ae,ae[ye],0)>-1;);return ye}function i2(ae,Ae){for(var ye=ae.length,nt=0;ye--;)ae[ye]===Ae&&++nt;return nt}var o2=Ih(vu),s2=Ih(Ah);function a2(ae){return"\\"+Uv[ae]}function xu(ae,Ae){return ae==null?n:ae[Ae]}function Eu(ae){return Xp.test(ae)}function Qv(ae){return Dh.test(ae)}function Jv(ae){for(var Ae,ye=[];!(Ae=ae.next()).done;)ye.push(Ae.value);return ye}function Fh(ae){var Ae=-1,ye=Array(ae.size);return ae.forEach(function(nt,Ft){ye[++Ae]=[Ft,nt]}),ye}function p1(ae,Ae){return function(ye){return ae(Ae(ye))}}function Qi(ae,Ae){for(var ye=-1,nt=ae.length,Ft=0,gn=[];++ye<nt;){var lr=ae[ye];(lr===Ae||lr===d)&&(ae[ye]=d,gn[Ft++]=ye)}return gn}function xa(ae){var Ae=-1,ye=Array(ae.size);return ae.forEach(function(nt){ye[++Ae]=nt}),ye}function e7(ae){var Ae=-1,ye=Array(ae.size);return ae.forEach(function(nt){ye[++Ae]=[nt,nt]}),ye}function Lh(ae,Ae,ye){for(var nt=ye-1,Ft=ae.length;++nt<Ft;)if(ae[nt]===Ae)return nt;return-1}function t7(ae,Ae,ye){for(var nt=ye+1;nt--;)if(ae[nt]===Ae)return nt;return nt}function ml(ae){return Eu(ae)?u2(ae):Kv(ae)}function Fi(ae){return Eu(ae)?c2(ae):Zp(ae)}function _h(ae){for(var Ae=ae.length;Ae--&&ma.test(ae.charAt(Ae)););return Ae}var l2=Ih(Vv);function u2(ae){for(var Ae=gl.lastIndex=0;gl.test(ae);)++Ae;return Ae}function c2(ae){return ae.match(gl)||[]}function n7(ae){return ae.match(Wv)||[]}var r7=function ae(Ae){Ae=Ae==null?Wn:Pu.defaults(Wn.Object(),Ae,Pu.pick(Wn,Kp));var ye=Ae.Array,nt=Ae.Date,Ft=Ae.Error,gn=Ae.Function,lr=Ae.Math,Bn=Ae.Object,Wc=Ae.RegExp,i7=Ae.String,Ji=Ae.TypeError,Gs=ye.prototype,m1=gn.prototype,ls=Bn.prototype,Su=Ae["__core-js_shared__"],zc=m1.toString,pn=ls.hasOwnProperty,Tu=0,Nh=function(){var f=/[^.]+$/.exec(Su&&Su.keys&&Su.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),Vc=ls.toString,Hh=zc.call(Bn),f2=Wn._,h2=Wc("^"+zc.call(pn).replace(cl,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Uc=r1?Ae.Buffer:n,js=Ae.Symbol,Xc=Ae.Uint8Array,v1=Uc?Uc.allocUnsafe:n,ko=p1(Bn.getPrototypeOf,Bn),Gh=Bn.create,jh=ls.propertyIsEnumerable,$h=Gs.splice,d2=js?js.isConcatSpreadable:n,$s=js?js.iterator:n,vl=js?js.toStringTag:n,Kc=function(){try{var f=ka(Bn,"defineProperty");return f({},"",{}),f}catch{}}(),g2=Ae.clearTimeout!==Wn.clearTimeout&&Ae.clearTimeout,Nn=nt&&nt.now!==Wn.Date.now&&nt.now,y1=Ae.setTimeout!==Wn.setTimeout&&Ae.setTimeout,yl=lr.ceil,Ea=lr.floor,Wh=Bn.getOwnPropertySymbols,w1=Uc?Uc.isBuffer:n,Du=Ae.isFinite,zh=Gs.join,Au=p1(Bn.keys,Bn),ur=lr.max,Hr=lr.min,o7=nt.now,p2=Ae.parseInt,Yc=lr.random,Vh=Gs.reverse,qc=ka(Ae,"DataView"),wl=ka(Ae,"Map"),Zc=ka(Ae,"Promise"),Pa=ka(Ae,"Set"),Qc=ka(Ae,"WeakMap"),Bu=ka(Bn,"create"),Uh=Qc&&new Qc,Mu={},C1=Oa(qc),Sa=Oa(wl),m2=Oa(Zc),Ru=Oa(Pa),us=Oa(Qc),Ta=js?js.prototype:n,Li=Ta?Ta.valueOf:n,Xh=Ta?Ta.toString:n;function N(f){if(fr(f)&&!Wt(f)&&!(f instanceof $t)){if(f instanceof Gr)return f;if(pn.call(f,"__wrapped__"))return z2(f)}return new Gr(f)}var bu=function(){function f(){}return function(p){if(!sr(p))return{};if(Gh)return Gh(p);f.prototype=p;var C=new f;return f.prototype=n,C}}();function cs(){}function Gr(f,p){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=n}N.templateSettings={escape:ph,evaluate:mh,interpolate:kc,variable:"",imports:{_:N}},N.prototype=cs.prototype,N.prototype.constructor=N,Gr.prototype=bu(cs.prototype),Gr.prototype.constructor=Gr;function $t(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=U,this.__views__=[]}function Kh(){var f=new $t(this.__wrapped__);return f.__actions__=oi(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=oi(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=oi(this.__views__),f}function x1(){if(this.__filtered__){var f=new $t(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function ku(){var f=this.__wrapped__.value(),p=this.__dir__,C=Wt(f),B=p<0,I=C?f.length:0,j=Y1(0,I,this.__views__),X=j.start,J=j.end,ce=J-X,be=B?J:X-1,Oe=this.__iteratees__,Ge=Oe.length,tt=0,dt=Hr(ce,this.__takeCount__);if(!C||!B&&I==ce&&dt==ce)return Gu(f,this.__actions__);var bt=[];e:for(;ce--&&tt<dt;){be+=p;for(var Yt=-1,kt=f[be];++Yt<Ge;){var tn=Oe[Yt],cn=tn.iteratee,$o=tn.type,ji=cn(kt);if($o==ge)kt=ji;else if(!ji){if($o==ve)continue e;break e}}bt[tt++]=kt}return bt}$t.prototype=bu(cs.prototype),$t.prototype.constructor=$t;function Ci(f){var p=-1,C=f==null?0:f.length;for(this.clear();++p<C;){var B=f[p];this.set(B[0],B[1])}}function Hn(){this.__data__=Bu?Bu(null):{},this.size=0}function Fn(f){var p=this.has(f)&&delete this.__data__[f];return this.size-=p?1:0,p}function Da(f){var p=this.__data__;if(Bu){var C=p[f];return C===c?n:C}return pn.call(p,f)?p[f]:n}function jr(f){var p=this.__data__;return Bu?p[f]!==n:pn.call(p,f)}function xi(f,p){var C=this.__data__;return this.size+=this.has(f)?0:1,C[f]=Bu&&p===n?c:p,this}Ci.prototype.clear=Hn,Ci.prototype.delete=Fn,Ci.prototype.get=Da,Ci.prototype.has=jr,Ci.prototype.set=xi;function ii(f){var p=-1,C=f==null?0:f.length;for(this.clear();++p<C;){var B=f[p];this.set(B[0],B[1])}}function Ou(){this.__data__=[],this.size=0}function Ei(f){var p=this.__data__,C=Wr(p,f);if(C<0)return!1;var B=p.length-1;return C==B?p.pop():$h.call(p,C,1),--this.size,!0}function Yh(f){var p=this.__data__,C=Wr(p,f);return C<0?n:p[C][1]}function v2(f){return Wr(this.__data__,f)>-1}function y2(f,p){var C=this.__data__,B=Wr(C,f);return B<0?(++this.size,C.push([f,p])):C[B][1]=p,this}ii.prototype.clear=Ou,ii.prototype.delete=Ei,ii.prototype.get=Yh,ii.prototype.has=v2,ii.prototype.set=y2;function eo(f){var p=-1,C=f==null?0:f.length;for(this.clear();++p<C;){var B=f[p];this.set(B[0],B[1])}}function w2(){this.size=0,this.__data__={hash:new Ci,map:new(wl||ii),string:new Ci}}function Ws(f){var p=pf(this,f).delete(f);return this.size-=p?1:0,p}function qh(f){return pf(this,f).get(f)}function E1(f){return pf(this,f).has(f)}function C2(f,p){var C=pf(this,f),B=C.size;return C.set(f,p),this.size+=C.size==B?0:1,this}eo.prototype.clear=w2,eo.prototype.delete=Ws,eo.prototype.get=qh,eo.prototype.has=E1,eo.prototype.set=C2;function Cl(f){var p=-1,C=f==null?0:f.length;for(this.__data__=new eo;++p<C;)this.add(f[p])}function Aa(f){return this.__data__.set(f,c),this}function Iu(f){return this.__data__.has(f)}Cl.prototype.add=Cl.prototype.push=Aa,Cl.prototype.has=Iu;function $r(f){var p=this.__data__=new ii(f);this.size=p.size}function Zh(){this.__data__=new ii,this.size=0}function Qh(f){var p=this.__data__,C=p.delete(f);return this.size=p.size,C}function to(f){return this.__data__.get(f)}function no(f){return this.__data__.has(f)}function xl(f,p){var C=this.__data__;if(C instanceof ii){var B=C.__data__;if(!wl||B.length<i-1)return B.push([f,p]),this.size=++C.size,this;C=this.__data__=new eo(B)}return C.set(f,p),this.size=C.size,this}$r.prototype.clear=Zh,$r.prototype.delete=Qh,$r.prototype.get=to,$r.prototype.has=no,$r.prototype.set=xl;function fs(f,p){var C=Wt(f),B=!C&&Af(f),I=!C&&!B&&qu(f),j=!C&&!B&&!I&&jd(f),X=C||B||I||j,J=X?d1(f.length,i7):[],ce=J.length;for(var be in f)(p||pn.call(f,be))&&!(X&&(be=="length"||I&&(be=="offset"||be=="parent")||j&&(be=="buffer"||be=="byteLength"||be=="byteOffset")||Vn(be,ce)))&&J.push(be);return J}function hs(f){var p=f.length;return p?f[Nu(0,p-1)]:n}function El(f,p){return Sd(oi(f),zs(p,0,f.length))}function x2(f){return Sd(oi(f))}function Jc(f,p,C){(C!==n&&!ea(f[p],C)||C===n&&!(p in f))&&ds(f,p,C)}function Pl(f,p,C){var B=f[p];(!(pn.call(f,p)&&ea(B,C))||C===n&&!(p in f))&&ds(f,p,C)}function Wr(f,p){for(var C=f.length;C--;)if(ea(f[C][0],p))return C;return-1}function _i(f,p,C,B){return ps(f,function(I,j,X){p(B,I,C(I),X)}),B}function Gn(f,p){return f&&Io(p,Ur(p),f)}function Oo(f,p){return f&&Io(p,fo(p),f)}function ds(f,p,C){p=="__proto__"&&Kc?Kc(f,p,{configurable:!0,enumerable:!0,value:C,writable:!0}):f[p]=C}function Jh(f,p){for(var C=-1,B=p.length,I=ye(B),j=f==null;++C<B;)I[C]=j?n:M7(f,p[C]);return I}function zs(f,p,C){return f===f&&(C!==n&&(f=f<=C?f:C),p!==n&&(f=f>=p?f:p)),f}function Pi(f,p,C,B,I,j){var X,J=p&g,ce=p&v,be=p&y;if(C&&(X=I?C(f,B,I,j):C(f)),X!==n)return X;if(!sr(f))return f;var Oe=Wt(f);if(Oe){if(X=vf(f),!J)return oi(f,X)}else{var Ge=Rr(f),tt=Ge==ke||Ge==vt;if(qu(f))return _1(f,J);if(Ge==Mt||Ge==$e||tt&&!I){if(X=ce||tt?{}:br(f),!J)return ce?a7(f,Oo(X,f)):hd(f,Gn(X,f))}else{if(!En[Ge])return I?f:{};X=l7(f,Ge,J)}}j||(j=new $r);var dt=j.get(f);if(dt)return dt;j.set(f,X),by(f)?f.forEach(function(kt){X.add(Pi(kt,p,C,kt,f,j))}):My(f)&&f.forEach(function(kt,tn){X.set(tn,Pi(kt,p,C,tn,f,j))});var bt=be?ce?gf:df:ce?fo:Ur,Yt=Oe?n:bt(f);return Nr(Yt||f,function(kt,tn){Yt&&(tn=kt,kt=f[tn]),Pl(X,tn,Pi(kt,p,C,tn,f,j))}),X}function E2(f){var p=Ur(f);return function(C){return ef(C,f,p)}}function ef(f,p,C){var B=C.length;if(f==null)return!B;for(f=Bn(f);B--;){var I=C[B],j=p[I],X=f[I];if(X===n&&!(I in f)||!j(X))return!1}return!0}function P1(f,p,C){if(typeof f!="function")throw new Ji(s);return Xu(function(){f.apply(n,C)},p)}function gs(f,p,C,B){var I=-1,j=kh,X=!0,J=f.length,ce=[],be=p.length;if(!J)return ce;C&&(p=In(p,Ii(C))),B?(j=a1,X=!1):p.length>=i&&(j=Hs,X=!1,p=new Cl(p));e:for(;++I<J;){var Oe=f[I],Ge=C==null?Oe:C(Oe);if(Oe=B||Oe!==0?Oe:0,X&&Ge===Ge){for(var tt=be;tt--;)if(p[tt]===Ge)continue e;ce.push(Oe)}else j(p,Ge,B)||ce.push(Oe)}return ce}var ps=ao(Ni),P2=ao(Ba,!0);function tf(f,p){var C=!0;return ps(f,function(B,I,j){return C=!!p(B,I,j),C}),C}function Sl(f,p,C){for(var B=-1,I=f.length;++B<I;){var j=f[B],X=p(j);if(X!=null&&(J===n?X===X&&!jo(X):C(X,J)))var J=X,ce=j}return ce}function S2(f,p,C,B){var I=f.length;for(C=Xt(C),C<0&&(C=-C>I?0:I+C),B=B===n||B>I?I:Xt(B),B<0&&(B+=I),B=C>B?0:Oy(B);C<B;)f[C++]=p;return f}function S1(f,p){var C=[];return ps(f,function(B,I,j){p(B,I,j)&&C.push(B)}),C}function Qn(f,p,C,B,I){var j=-1,X=f.length;for(C||(C=xd),I||(I=[]);++j<X;){var J=f[j];p>0&&C(J)?p>1?Qn(J,p-1,C,B,I):Ca(I,J):B||(I[I.length]=J)}return I}var ed=gd(),nf=gd(!0);function Ni(f,p){return f&&ed(f,p,Ur)}function Ba(f,p){return f&&nf(f,p,Ur)}function Fu(f,p){return wa(p,function(C){return _l(f[C])})}function Vs(f,p){p=ys(p,f);for(var C=0,B=p.length;f!=null&&C<B;)f=f[No(p[C++])];return C&&C==B?f:n}function td(f,p,C){var B=p(f);return Wt(f)?B:Ca(B,C(f))}function Br(f){return f==null?f===n?Ki:hn:vl&&vl in Bn(f)?Cd(f):Z1(f)}function Ma(f,p){return f>p}function ro(f,p){return f!=null&&pn.call(f,p)}function Tl(f,p){return f!=null&&p in Bn(f)}function T1(f,p,C){return f>=Hr(p,C)&&f<ur(p,C)}function nd(f,p,C){for(var B=C?a1:kh,I=f[0].length,j=f.length,X=j,J=ye(j),ce=1/0,be=[];X--;){var Oe=f[X];X&&p&&(Oe=In(Oe,Ii(p))),ce=Hr(Oe.length,ce),J[X]=!C&&(p||I>=120&&Oe.length>=120)?new Cl(X&&Oe):n}Oe=f[0];var Ge=-1,tt=J[0];e:for(;++Ge<I&&be.length<ce;){var dt=Oe[Ge],bt=p?p(dt):dt;if(dt=C||dt!==0?dt:0,!(tt?Hs(tt,bt):B(be,bt,C))){for(X=j;--X;){var Yt=J[X];if(!(Yt?Hs(Yt,bt):B(f[X],bt,C)))continue e}tt&&tt.push(bt),be.push(dt)}}return be}function Us(f,p,C,B){return Ni(f,function(I,j,X){p(B,C(I),j,X)}),B}function io(f,p,C){p=ys(p,f),f=xr(f,p);var B=f==null?f:f[No(li(p))];return B==null?n:ri(B,f,C)}function rd(f){return fr(f)&&Br(f)==$e}function T2(f){return fr(f)&&Br(f)==mr}function Xs(f){return fr(f)&&Br(f)==Q}function oo(f,p,C,B,I){return f===p?!0:f==null||p==null||!fr(f)&&!fr(p)?f!==f&&p!==p:id(f,p,C,B,oo,I)}function id(f,p,C,B,I,j){var X=Wt(f),J=Wt(p),ce=X?Fe:Rr(f),be=J?Fe:Rr(p);ce=ce==$e?Mt:ce,be=be==$e?Mt:be;var Oe=ce==Mt,Ge=be==Mt,tt=ce==be;if(tt&&qu(f)){if(!qu(p))return!1;X=!0,Oe=!1}if(tt&&!Oe)return j||(j=new $r),X||jd(f)?X1(f,p,C,B,I,j):K1(f,p,ce,C,B,I,j);if(!(C&x)){var dt=Oe&&pn.call(f,"__wrapped__"),bt=Ge&&pn.call(p,"__wrapped__");if(dt||bt){var Yt=dt?f.value():f,kt=bt?p.value():p;return j||(j=new $r),I(Yt,kt,C,B,j)}}return tt?(j||(j=new $r),L2(f,p,C,B,I,j)):!1}function D2(f){return fr(f)&&Rr(f)==Ye}function Lu(f,p,C,B){var I=C.length,j=I,X=!B;if(f==null)return!j;for(f=Bn(f);I--;){var J=C[I];if(X&&J[2]?J[1]!==f[J[0]]:!(J[0]in f))return!1}for(;++I<j;){J=C[I];var ce=J[0],be=f[ce],Oe=J[1];if(X&&J[2]){if(be===n&&!(ce in f))return!1}else{var Ge=new $r;if(B)var tt=B(be,Oe,ce,f,p,Ge);if(!(tt===n?oo(Oe,be,x|E,B,Ge):tt))return!1}}return!0}function D1(f){if(!sr(f)||H2(f))return!1;var p=_l(f)?h2:wh;return p.test(Oa(f))}function rf(f){return fr(f)&&Br(f)==dn}function ms(f){return fr(f)&&Rr(f)==_t}function of(f){return fr(f)&&im(f.length)&&!!Dn[Br(f)]}function _u(f){return typeof f=="function"?f:f==null?ho:typeof f=="object"?Wt(f)?zn(f[0],f[1]):od(f):zy(f)}function Ks(f){if(!Qs(f))return Au(f);var p=[];for(var C in Bn(f))pn.call(f,C)&&C!="constructor"&&p.push(C);return p}function A1(f){if(!sr(f))return $2(f);var p=Qs(f),C=[];for(var B in f)B=="constructor"&&(p||!pn.call(f,B))||C.push(B);return C}function Ra(f,p){return f<p}function B1(f,p){var C=-1,B=co(f)?ye(f.length):[];return ps(f,function(I,j,X){B[++C]=p(I,j,X)}),B}function od(f){var p=mf(f);return p.length==1&&p[0][2]?Ed(p[0][0],p[0][1]):function(C){return C===f||Lu(C,f,p)}}function zn(f,p){return it(f)&&wf(p)?Ed(No(f),p):function(C){var B=M7(C,f);return B===n&&B===p?R7(C,f):oo(p,B,x|E)}}function Dl(f,p,C,B,I){f!==p&&ed(p,function(j,X){if(I||(I=new $r),sr(j))M1(f,p,X,C,Dl,B,I);else{var J=B?B(xs(f,X),j,X+"",f,p,I):n;J===n&&(J=j),Jc(f,X,J)}},fo)}function M1(f,p,C,B,I,j,X){var J=xs(f,C),ce=xs(p,C),be=X.get(ce);if(be){Jc(f,C,be);return}var Oe=j?j(J,ce,C+"",f,p,X):n,Ge=Oe===n;if(Ge){var tt=Wt(ce),dt=!tt&&qu(ce),bt=!tt&&!dt&&jd(ce);Oe=ce,tt||dt||bt?Wt(J)?Oe=J:wr(J)?Oe=oi(J):dt?(Ge=!1,Oe=_1(ce,!0)):bt?(Ge=!1,Oe=b2(ce,!0)):Oe=[]:pg(ce)||Af(ce)?(Oe=J,Af(J)?Oe=Iy(J):(!sr(J)||_l(J))&&(Oe=br(ce))):Ge=!1}Ge&&(X.set(ce,Oe),I(Oe,ce,B,j,X),X.delete(ce)),Jc(f,C,Oe)}function sd(f,p){var C=f.length;if(C)return p+=p<0?C:0,Vn(p,C)?f[p]:n}function sf(f,p,C){p.length?p=In(p,function(j){return Wt(j)?function(X){return Vs(X,j.length===1?j[0]:j)}:j}):p=[ho];var B=-1;p=In(p,Ii(St()));var I=B1(f,function(j,X,J){var ce=In(p,function(be){return be(j)});return{criteria:ce,index:++B,value:j}});return qv(I,function(j,X){return s7(j,X,C)})}function R1(f,p){return ba(f,p,function(C,B){return R7(f,B)})}function ba(f,p,C){for(var B=-1,I=p.length,j={};++B<I;){var X=p[B],J=Vs(f,X);C(J,X)&&Bl(j,ys(X,f),J)}return j}function Un(f){return function(p){return Vs(p,f)}}function ir(f,p,C,B){var I=B?c1:Cu,j=-1,X=p.length,J=f;for(f===p&&(p=oi(p)),C&&(J=In(f,Ii(C)));++j<X;)for(var ce=0,be=p[j],Oe=C?C(be):be;(ce=I(J,Oe,ce,B))>-1;)J!==f&&$h.call(J,ce,1),$h.call(f,ce,1);return f}function vr(f,p){for(var C=f?p.length:0,B=C-1;C--;){var I=p[C];if(C==B||I!==j){var j=I;Vn(I)?$h.call(f,I,1):ud(f,I)}}return f}function Nu(f,p){return f+Ea(Yc()*(p-f+1))}function af(f,p,C,B){for(var I=-1,j=ur(yl((p-f)/(C||1)),0),X=ye(j);j--;)X[B?j:++I]=f,f+=C;return X}function Al(f,p){var C="";if(!f||p<1||p>he)return C;do p%2&&(C+=f),p=Ea(p/2),p&&(f+=f);while(p);return C}function Ut(f,p){return Hi(Pd(f,p,ho),f+"")}function zr(f){return hs($d(f))}function b1(f,p){var C=$d(f);return Sd(C,zs(p,0,C.length))}function Bl(f,p,C,B){if(!sr(f))return f;p=ys(p,f);for(var I=-1,j=p.length,X=j-1,J=f;J!=null&&++I<j;){var ce=No(p[I]),be=C;if(ce==="__proto__"||ce==="constructor"||ce==="prototype")return f;if(I!=X){var Oe=J[ce];be=B?B(Oe,ce,J):n,be===n&&(be=sr(Oe)?Oe:Vn(p[I+1])?[]:{})}Pl(J,ce,be),J=J[ce]}return f}var ad=Uh?function(f,p){return Uh.set(f,p),f}:ho,vs=Kc?function(f,p){return Kc(f,"toString",{configurable:!0,enumerable:!1,value:k7(p),writable:!0})}:ho;function so(f){return Sd($d(f))}function Vr(f,p,C){var B=-1,I=f.length;p<0&&(p=-p>I?0:I+p),C=C>I?I:C,C<0&&(C+=I),I=p>C?0:C-p>>>0,p>>>=0;for(var j=ye(I);++B<I;)j[B]=f[B+p];return j}function k1(f,p){var C;return ps(f,function(B,I,j){return C=p(B,I,j),!C}),!!C}function Hu(f,p,C){var B=0,I=f==null?B:f.length;if(typeof p=="number"&&p===p&&I<=Ie){for(;B<I;){var j=B+I>>>1,X=f[j];X!==null&&!jo(X)&&(C?X<=p:X<p)?B=j+1:I=j}return I}return ld(f,p,ho,C)}function ld(f,p,C,B){var I=0,j=f==null?0:f.length;if(j===0)return 0;p=C(p);for(var X=p!==p,J=p===null,ce=jo(p),be=p===n;I<j;){var Oe=Ea((I+j)/2),Ge=C(f[Oe]),tt=Ge!==n,dt=Ge===null,bt=Ge===Ge,Yt=jo(Ge);if(X)var kt=B||bt;else be?kt=bt&&(B||tt):J?kt=bt&&tt&&(B||!dt):ce?kt=bt&&tt&&!dt&&(B||!Yt):dt||Yt?kt=!1:kt=B?Ge<=p:Ge<p;kt?I=Oe+1:j=Oe}return Hr(j,xe)}function O1(f,p){for(var C=-1,B=f.length,I=0,j=[];++C<B;){var X=f[C],J=p?p(X):X;if(!C||!ea(J,ce)){var ce=J;j[I++]=X===0?0:X}}return j}function I1(f){return typeof f=="number"?f:jo(f)?we:+f}function Si(f){if(typeof f=="string")return f;if(Wt(f))return In(f,Si)+"";if(jo(f))return Xh?Xh.call(f):"";var p=f+"";return p=="0"&&1/f==-1/0?"-0":p}function Ys(f,p,C){var B=-1,I=kh,j=f.length,X=!0,J=[],ce=J;if(C)X=!1,I=a1;else if(j>=i){var be=p?null:F2(f);if(be)return xa(be);X=!1,I=Hs,ce=new Cl}else ce=p?[]:J;e:for(;++B<j;){var Oe=f[B],Ge=p?p(Oe):Oe;if(Oe=C||Oe!==0?Oe:0,X&&Ge===Ge){for(var tt=ce.length;tt--;)if(ce[tt]===Ge)continue e;p&&ce.push(Ge),J.push(Oe)}else I(ce,Ge,C)||(ce!==J&&ce.push(Ge),J.push(Oe))}return J}function ud(f,p){return p=ys(p,f),f=xr(f,p),f==null||delete f[No(li(p))]}function F1(f,p,C,B){return Bl(f,p,C(Vs(f,p)),B)}function lf(f,p,C,B){for(var I=f.length,j=B?I:-1;(B?j--:++j<I)&&p(f[j],j,f););return C?Vr(f,B?0:j,B?j+1:I):Vr(f,B?j+1:0,B?I:j)}function Gu(f,p){var C=f;return C instanceof $t&&(C=C.value()),l1(p,function(B,I){return I.func.apply(I.thisArg,Ca([B],I.args))},C)}function cd(f,p,C){var B=f.length;if(B<2)return B?Ys(f[0]):[];for(var I=-1,j=ye(B);++I<B;)for(var X=f[I],J=-1;++J<B;)J!=I&&(j[I]=gs(j[I]||X,f[J],p,C));return Ys(Qn(j,1),p,C)}function uf(f,p,C){for(var B=-1,I=f.length,j=p.length,X={};++B<I;){var J=B<j?p[B]:n;C(X,f[B],J)}return X}function ju(f){return wr(f)?f:[]}function fd(f){return typeof f=="function"?f:ho}function ys(f,p){return Wt(f)?f:it(f,p)?[f]:eg(Mn(f))}var A2=Ut;function qs(f,p,C){var B=f.length;return C=C===n?B:C,!p&&C>=B?f:Vr(f,p,C)}var L1=g2||function(f){return Wn.clearTimeout(f)};function _1(f,p){if(p)return f.slice();var C=f.length,B=v1?v1(C):new f.constructor(C);return f.copy(B),B}function cf(f){var p=new f.constructor(f.byteLength);return new Xc(p).set(new Xc(f)),p}function B2(f,p){var C=p?cf(f.buffer):f.buffer;return new f.constructor(C,f.byteOffset,f.byteLength)}function M2(f){var p=new f.constructor(f.source,Lc.exec(f));return p.lastIndex=f.lastIndex,p}function R2(f){return Li?Bn(Li.call(f)):{}}function b2(f,p){var C=p?cf(f.buffer):f.buffer;return new f.constructor(C,f.byteOffset,f.length)}function N1(f,p){if(f!==p){var C=f!==n,B=f===null,I=f===f,j=jo(f),X=p!==n,J=p===null,ce=p===p,be=jo(p);if(!J&&!be&&!j&&f>p||j&&X&&ce&&!J&&!be||B&&X&&ce||!C&&ce||!I)return 1;if(!B&&!j&&!be&&f<p||be&&C&&I&&!B&&!j||J&&C&&I||!X&&I||!ce)return-1}return 0}function s7(f,p,C){for(var B=-1,I=f.criteria,j=p.criteria,X=I.length,J=C.length;++B<X;){var ce=N1(I[B],j[B]);if(ce){if(B>=J)return ce;var be=C[B];return ce*(be=="desc"?-1:1)}}return f.index-p.index}function k2(f,p,C,B){for(var I=-1,j=f.length,X=C.length,J=-1,ce=p.length,be=ur(j-X,0),Oe=ye(ce+be),Ge=!B;++J<ce;)Oe[J]=p[J];for(;++I<X;)(Ge||I<j)&&(Oe[C[I]]=f[I]);for(;be--;)Oe[J++]=f[I++];return Oe}function H1(f,p,C,B){for(var I=-1,j=f.length,X=-1,J=C.length,ce=-1,be=p.length,Oe=ur(j-J,0),Ge=ye(Oe+be),tt=!B;++I<Oe;)Ge[I]=f[I];for(var dt=I;++ce<be;)Ge[dt+ce]=p[ce];for(;++X<J;)(tt||I<j)&&(Ge[dt+C[X]]=f[I++]);return Ge}function oi(f,p){var C=-1,B=f.length;for(p||(p=ye(B));++C<B;)p[C]=f[C];return p}function Io(f,p,C,B){var I=!C;C||(C={});for(var j=-1,X=p.length;++j<X;){var J=p[j],ce=B?B(C[J],f[J],J,C,f):n;ce===n&&(ce=f[J]),I?ds(C,J,ce):Pl(C,J,ce)}return C}function hd(f,p){return Io(f,Fo(f),p)}function a7(f,p){return Io(f,_2(f),p)}function dd(f,p){return function(C,B){var I=Wt(C)?o1:_i,j=p?p():{};return I(C,f,St(B,2),j)}}function $u(f){return Ut(function(p,C){var B=-1,I=C.length,j=I>1?C[I-1]:n,X=I>2?C[2]:n;for(j=f.length>3&&typeof j=="function"?(I--,j):n,X&&ai(C[0],C[1],X)&&(j=I<3?n:j,I=1),p=Bn(p);++B<I;){var J=C[B];J&&f(p,J,B,j)}return p})}function ao(f,p){return function(C,B){if(C==null)return C;if(!co(C))return f(C,B);for(var I=C.length,j=p?I:-1,X=Bn(C);(p?j--:++j<I)&&B(X[j],j,X)!==!1;);return C}}function gd(f){return function(p,C,B){for(var I=-1,j=Bn(p),X=B(p),J=X.length;J--;){var ce=X[f?J:++I];if(C(j[ce],ce,j)===!1)break}return p}}function pd(f,p,C){var B=p&T,I=Wu(f);function j(){var X=this&&this!==Wn&&this instanceof j?I:f;return X.apply(B?C:this,arguments)}return j}function G1(f){return function(p){p=Mn(p);var C=Eu(p)?Fi(p):n,B=C?C[0]:p.charAt(0),I=C?qs(C,1).join(""):p.slice(1);return B[f]()+I}}function Ml(f){return function(p){return l1($y(jy(p).replace($v,"")),f,"")}}function Wu(f){return function(){var p=arguments;switch(p.length){case 0:return new f;case 1:return new f(p[0]);case 2:return new f(p[0],p[1]);case 3:return new f(p[0],p[1],p[2]);case 4:return new f(p[0],p[1],p[2],p[3]);case 5:return new f(p[0],p[1],p[2],p[3],p[4]);case 6:return new f(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new f(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var C=bu(f.prototype),B=f.apply(C,p);return sr(B)?B:C}}function j1(f,p,C){var B=Wu(f);function I(){for(var j=arguments.length,X=ye(j),J=j,ce=Zs(I);J--;)X[J]=arguments[J];var be=j<3&&X[0]!==ce&&X[j-1]!==ce?[]:Qi(X,ce);if(j-=be.length,j<C)return si(f,p,zu,I.placeholder,n,X,be,n,n,C-j);var Oe=this&&this!==Wn&&this instanceof I?B:f;return ri(Oe,this,X)}return I}function Rl(f){return function(p,C,B){var I=Bn(p);if(!co(p)){var j=St(C,3);p=Ur(p),C=function(J){return j(I[J],J,I)}}var X=f(p,C,B);return X>-1?I[j?p[X]:X]:n}}function md(f){return Cs(function(p){var C=p.length,B=C,I=Gr.prototype.thru;for(f&&p.reverse();B--;){var j=p[B];if(typeof j!="function")throw new Ji(s);if(I&&!X&&Vu(j)=="wrapper")var X=new Gr([],!0)}for(B=X?B:C;++B<C;){j=p[B];var J=Vu(j),ce=J=="wrapper"?wd(j):n;ce&&yf(ce[0])&&ce[1]==(z|R|O|K)&&!ce[4].length&&ce[9]==1?X=X[Vu(ce[0])].apply(X,ce[3]):X=j.length==1&&yf(j)?X[J]():X.thru(j)}return function(){var be=arguments,Oe=be[0];if(X&&be.length==1&&Wt(Oe))return X.plant(Oe).value();for(var Ge=0,tt=C?p[Ge].apply(this,be):Oe;++Ge<C;)tt=p[Ge].call(this,tt);return tt}})}function zu(f,p,C,B,I,j,X,J,ce,be){var Oe=p&z,Ge=p&T,tt=p&D,dt=p&(R|k),bt=p&te,Yt=tt?n:Wu(f);function kt(){for(var tn=arguments.length,cn=ye(tn),$o=tn;$o--;)cn[$o]=arguments[$o];if(dt)var ji=Zs(kt),Wo=i2(cn,ji);if(B&&(cn=k2(cn,B,I,dt)),j&&(cn=H1(cn,j,X,dt)),tn-=Wo,dt&&tn<be){var Cr=Qi(cn,ji);return si(f,p,zu,kt.placeholder,C,cn,Cr,J,ce,be-tn)}var ta=Ge?C:this,Hl=tt?ta[f]:f;return tn=cn.length,J?cn=Lo(cn,J):bt&&tn>1&&cn.reverse(),Oe&&ce<tn&&(cn.length=ce),this&&this!==Wn&&this instanceof kt&&(Hl=Yt||Wu(Hl)),Hl.apply(ta,cn)}return kt}function O2(f,p){return function(C,B){return Us(C,f,p(B),{})}}function ff(f,p){return function(C,B){var I;if(C===n&&B===n)return p;if(C!==n&&(I=C),B!==n){if(I===n)return B;typeof C=="string"||typeof B=="string"?(C=Si(C),B=Si(B)):(C=I1(C),B=I1(B)),I=f(C,B)}return I}}function vd(f){return Cs(function(p){return p=In(p,Ii(St())),Ut(function(C){var B=this;return f(p,function(I){return ri(I,B,C)})})})}function hf(f,p){p=p===n?" ":Si(p);var C=p.length;if(C<2)return C?Al(p,f):p;var B=Al(p,yl(f/ml(p)));return Eu(p)?qs(Fi(B),0,f).join(""):B.slice(0,f)}function I2(f,p,C,B){var I=p&T,j=Wu(f);function X(){for(var J=-1,ce=arguments.length,be=-1,Oe=B.length,Ge=ye(Oe+ce),tt=this&&this!==Wn&&this instanceof X?j:f;++be<Oe;)Ge[be]=B[be];for(;ce--;)Ge[be++]=arguments[++J];return ri(tt,I?C:this,Ge)}return X}function $1(f){return function(p,C,B){return B&&typeof B!="number"&&ai(p,C,B)&&(C=B=n),p=Nl(p),C===n?(C=p,p=0):C=Nl(C),B=B===n?p<C?1:-1:Nl(B),af(p,C,B,f)}}function yd(f){return function(p,C){return typeof p=="string"&&typeof C=="string"||(p=Es(p),C=Es(C)),f(p,C)}}function si(f,p,C,B,I,j,X,J,ce,be){var Oe=p&R,Ge=Oe?X:n,tt=Oe?n:X,dt=Oe?j:n,bt=Oe?n:j;p|=Oe?O:$,p&=~(Oe?$:O),p&S||(p&=-4);var Yt=[f,p,I,dt,Ge,bt,tt,J,ce,be],kt=C.apply(n,Yt);return yf(f)&&Q1(kt,Yt),kt.placeholder=B,J1(kt,f,p)}function Mr(f){var p=lr[f];return function(C,B){if(C=Es(C),B=B==null?0:Hr(Xt(B),292),B&&Du(C)){var I=(Mn(C)+"e").split("e"),j=p(I[0]+"e"+(+I[1]+B));return I=(Mn(j)+"e").split("e"),+(I[0]+"e"+(+I[1]-B))}return p(C)}}var F2=Pa&&1/xa(new Pa([,-0]))[1]==Pe?function(f){return new Pa(f)}:F7;function W1(f){return function(p){var C=Rr(p);return C==Ye?Fh(p):C==_t?e7(p):Zv(p,f(p))}}function ws(f,p,C,B,I,j,X,J){var ce=p&D;if(!ce&&typeof f!="function")throw new Ji(s);var be=B?B.length:0;if(be||(p&=-97,B=I=n),X=X===n?X:ur(Xt(X),0),J=J===n?J:Xt(J),be-=I?I.length:0,p&$){var Oe=B,Ge=I;B=I=n}var tt=ce?n:wd(f),dt=[f,p,C,B,I,Oe,Ge,j,X,J];if(tt&&j2(dt,tt),f=dt[0],p=dt[1],C=dt[2],B=dt[3],I=dt[4],J=dt[9]=dt[9]===n?ce?0:f.length:ur(dt[9]-be,0),!J&&p&(R|k)&&(p&=-25),!p||p==T)var bt=pd(f,p,C);else p==R||p==k?bt=j1(f,p,J):(p==O||p==(T|O))&&!I.length?bt=I2(f,p,C,B):bt=zu.apply(n,dt);var Yt=tt?ad:Q1;return J1(Yt(bt,dt),f,p)}function z1(f,p,C,B){return f===n||ea(f,ls[C])&&!pn.call(B,C)?p:f}function V1(f,p,C,B,I,j){return sr(f)&&sr(p)&&(j.set(p,f),Dl(f,p,n,V1,j),j.delete(p)),f}function U1(f){return pg(f)?n:f}function X1(f,p,C,B,I,j){var X=C&x,J=f.length,ce=p.length;if(J!=ce&&!(X&&ce>J))return!1;var be=j.get(f),Oe=j.get(p);if(be&&Oe)return be==p&&Oe==f;var Ge=-1,tt=!0,dt=C&E?new Cl:n;for(j.set(f,p),j.set(p,f);++Ge<J;){var bt=f[Ge],Yt=p[Ge];if(B)var kt=X?B(Yt,bt,Ge,p,f,j):B(bt,Yt,Ge,f,p,j);if(kt!==n){if(kt)continue;tt=!1;break}if(dt){if(!u1(p,function(tn,cn){if(!Hs(dt,cn)&&(bt===tn||I(bt,tn,C,B,j)))return dt.push(cn)})){tt=!1;break}}else if(!(bt===Yt||I(bt,Yt,C,B,j))){tt=!1;break}}return j.delete(f),j.delete(p),tt}function K1(f,p,C,B,I,j,X){switch(C){case wn:if(f.byteLength!=p.byteLength||f.byteOffset!=p.byteOffset)return!1;f=f.buffer,p=p.buffer;case mr:return!(f.byteLength!=p.byteLength||!j(new Xc(f),new Xc(p)));case et:case Q:case At:return ea(+f,+p);case Te:return f.name==p.name&&f.message==p.message;case dn:case an:return f==p+"";case Ye:var J=Fh;case _t:var ce=B&x;if(J||(J=xa),f.size!=p.size&&!ce)return!1;var be=X.get(f);if(be)return be==p;B|=E,X.set(f,p);var Oe=X1(J(f),J(p),B,I,j,X);return X.delete(f),Oe;case pr:if(Li)return Li.call(f)==Li.call(p)}return!1}function L2(f,p,C,B,I,j){var X=C&x,J=df(f),ce=J.length,be=df(p),Oe=be.length;if(ce!=Oe&&!X)return!1;for(var Ge=ce;Ge--;){var tt=J[Ge];if(!(X?tt in p:pn.call(p,tt)))return!1}var dt=j.get(f),bt=j.get(p);if(dt&&bt)return dt==p&&bt==f;var Yt=!0;j.set(f,p),j.set(p,f);for(var kt=X;++Ge<ce;){tt=J[Ge];var tn=f[tt],cn=p[tt];if(B)var $o=X?B(cn,tn,tt,p,f,j):B(tn,cn,tt,f,p,j);if(!($o===n?tn===cn||I(tn,cn,C,B,j):$o)){Yt=!1;break}kt||(kt=tt=="constructor")}if(Yt&&!kt){var ji=f.constructor,Wo=p.constructor;ji!=Wo&&"constructor"in f&&"constructor"in p&&!(typeof ji=="function"&&ji instanceof ji&&typeof Wo=="function"&&Wo instanceof Wo)&&(Yt=!1)}return j.delete(f),j.delete(p),Yt}function Cs(f){return Hi(Pd(f,n,Dd),f+"")}function df(f){return td(f,Ur,Fo)}function gf(f){return td(f,fo,_2)}var wd=Uh?function(f){return Uh.get(f)}:F7;function Vu(f){for(var p=f.name+"",C=Mu[p],B=pn.call(Mu,p)?C.length:0;B--;){var I=C[B],j=I.func;if(j==null||j==f)return I.name}return p}function Zs(f){var p=pn.call(N,"placeholder")?N:f;return p.placeholder}function St(){var f=N.iteratee||O7;return f=f===O7?_u:f,arguments.length?f(arguments[0],arguments[1]):f}function pf(f,p){var C=f.__data__;return Uu(p)?C[typeof p=="string"?"string":"hash"]:C.map}function mf(f){for(var p=Ur(f),C=p.length;C--;){var B=p[C],I=f[B];p[C]=[B,I,wf(I)]}return p}function ka(f,p){var C=xu(f,p);return D1(C)?C:n}function Cd(f){var p=pn.call(f,vl),C=f[vl];try{f[vl]=n;var B=!0}catch{}var I=Vc.call(f);return B&&(p?f[vl]=C:delete f[vl]),I}var Fo=Wh?function(f){return f==null?[]:(f=Bn(f),wa(Wh(f),function(p){return jh.call(f,p)}))}:L7,_2=Wh?function(f){for(var p=[];f;)Ca(p,Fo(f)),f=ko(f);return p}:L7,Rr=Br;(qc&&Rr(new qc(new ArrayBuffer(1)))!=wn||wl&&Rr(new wl)!=Ye||Zc&&Rr(Zc.resolve())!=kn||Pa&&Rr(new Pa)!=_t||Qc&&Rr(new Qc)!=$n)&&(Rr=function(f){var p=Br(f),C=p==Mt?f.constructor:n,B=C?Oa(C):"";if(B)switch(B){case C1:return wn;case Sa:return Ye;case m2:return kn;case Ru:return _t;case us:return $n}return p});function Y1(f,p,C){for(var B=-1,I=C.length;++B<I;){var j=C[B],X=j.size;switch(j.type){case"drop":f+=X;break;case"dropRight":p-=X;break;case"take":p=Hr(p,f+X);break;case"takeRight":f=ur(f,p-X);break}}return{start:f,end:p}}function N2(f){var p=f.match(fu);return p?p[1].split(Fc):[]}function q1(f,p,C){p=ys(p,f);for(var B=-1,I=p.length,j=!1;++B<I;){var X=No(p[B]);if(!(j=f!=null&&C(f,X)))break;f=f[X]}return j||++B!=I?j:(I=f==null?0:f.length,!!I&&im(I)&&Vn(X,I)&&(Wt(f)||Af(f)))}function vf(f){var p=f.length,C=new f.constructor(p);return p&&typeof f[0]=="string"&&pn.call(f,"index")&&(C.index=f.index,C.input=f.input),C}function br(f){return typeof f.constructor=="function"&&!Qs(f)?bu(ko(f)):{}}function l7(f,p,C){var B=f.constructor;switch(p){case mr:return cf(f);case et:case Q:return new B(+f);case wn:return B2(f,C);case On:case Lr:case ki:case Fs:case ns:case Mo:case ll:case Ro:case qi:return b2(f,C);case Ye:return new B;case At:case an:return new B(f);case dn:return M2(f);case _t:return new B;case pr:return R2(f)}}function u7(f,p){var C=p.length;if(!C)return f;var B=C-1;return p[B]=(C>1?"& ":"")+p[B],p=p.join(C>2?", ":" "),f.replace(cu,`{
/* [wrapped with `+p+`] */
`)}function xd(f){return Wt(f)||Af(f)||!!(d2&&f&&f[d2])}function Vn(f,p){var C=typeof f;return p=p??he,!!p&&(C=="number"||C!="symbol"&&xh.test(f))&&f>-1&&f%1==0&&f<p}function ai(f,p,C){if(!sr(C))return!1;var B=typeof p;return(B=="number"?co(C)&&Vn(p,C.length):B=="string"&&p in C)?ea(C[p],f):!1}function it(f,p){if(Wt(f))return!1;var C=typeof f;return C=="number"||C=="symbol"||C=="boolean"||f==null||jo(f)?!0:vh.test(f)||!Oc.test(f)||p!=null&&f in Bn(p)}function Uu(f){var p=typeof f;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?f!=="__proto__":f===null}function yf(f){var p=Vu(f),C=N[p];if(typeof C!="function"||!(p in $t.prototype))return!1;if(f===C)return!0;var B=wd(C);return!!B&&f===B[0]}function H2(f){return!!Nh&&Nh in f}var c7=Su?_l:_7;function Qs(f){var p=f&&f.constructor,C=typeof p=="function"&&p.prototype||ls;return f===C}function wf(f){return f===f&&!sr(f)}function Ed(f,p){return function(C){return C==null?!1:C[f]===p&&(p!==n||f in Bn(C))}}function G2(f){var p=pe(f,function(B){return C.size===h&&C.clear(),B}),C=p.cache;return p}function j2(f,p){var C=f[1],B=p[1],I=C|B,j=I<(T|D|z),X=B==z&&C==R||B==z&&C==K&&f[7].length<=p[8]||B==(z|K)&&p[7].length<=p[8]&&C==R;if(!(j||X))return f;B&T&&(f[2]=p[2],I|=C&T?0:S);var J=p[3];if(J){var ce=f[3];f[3]=ce?k2(ce,J,p[4]):J,f[4]=ce?Qi(f[3],d):p[4]}return J=p[5],J&&(ce=f[5],f[5]=ce?H1(ce,J,p[6]):J,f[6]=ce?Qi(f[5],d):p[6]),J=p[7],J&&(f[7]=J),B&z&&(f[8]=f[8]==null?p[8]:Hr(f[8],p[8])),f[9]==null&&(f[9]=p[9]),f[0]=p[0],f[1]=I,f}function $2(f){var p=[];if(f!=null)for(var C in Bn(f))p.push(C);return p}function Z1(f){return Vc.call(f)}function Pd(f,p,C){return p=ur(p===n?f.length-1:p,0),function(){for(var B=arguments,I=-1,j=ur(B.length-p,0),X=ye(j);++I<j;)X[I]=B[p+I];I=-1;for(var J=ye(p+1);++I<p;)J[I]=B[I];return J[p]=C(X),ri(f,this,J)}}function xr(f,p){return p.length<2?f:Vs(f,Vr(p,0,-1))}function Lo(f,p){for(var C=f.length,B=Hr(p.length,C),I=oi(f);B--;){var j=p[B];f[B]=Vn(j,C)?I[j]:n}return f}function xs(f,p){if(!(p==="constructor"&&typeof f[p]=="function")&&p!="__proto__")return f[p]}var Q1=_o(ad),Xu=y1||function(f,p){return Wn.setTimeout(f,p)},Hi=_o(vs);function J1(f,p,C){var B=p+"";return Hi(f,u7(B,W2(N2(B),C)))}function _o(f){var p=0,C=0;return function(){var B=o7(),I=oe-(B-C);if(C=B,I>0){if(++p>=ne)return arguments[0]}else p=0;return f.apply(n,arguments)}}function Sd(f,p){var C=-1,B=f.length,I=B-1;for(p=p===n?B:p;++C<p;){var j=Nu(C,I),X=f[j];f[j]=f[C],f[C]=X}return f.length=p,f}var eg=G2(function(f){var p=[];return f.charCodeAt(0)===46&&p.push(""),f.replace(ul,function(C,B,I,j){p.push(I?j.replace(J0,"$1"):B||C)}),p});function No(f){if(typeof f=="string"||jo(f))return f;var p=f+"";return p=="0"&&1/f==-1/0?"-0":p}function Oa(f){if(f!=null){try{return zc.call(f)}catch{}try{return f+""}catch{}}return""}function W2(f,p){return Nr(Le,function(C){var B="_."+C[0];p&C[1]&&!kh(f,B)&&f.push(B)}),f.sort()}function z2(f){if(f instanceof $t)return f.clone();var p=new Gr(f.__wrapped__,f.__chain__);return p.__actions__=oi(f.__actions__),p.__index__=f.__index__,p.__values__=f.__values__,p}function Td(f,p,C){(C?ai(f,p,C):p===n)?p=1:p=ur(Xt(p),0);var B=f==null?0:f.length;if(!B||p<1)return[];for(var I=0,j=0,X=ye(yl(B/p));I<B;)X[j++]=Vr(f,I,I+=p);return X}function tg(f){for(var p=-1,C=f==null?0:f.length,B=0,I=[];++p<C;){var j=f[p];j&&(I[B++]=j)}return I}function lo(){var f=arguments.length;if(!f)return[];for(var p=ye(f-1),C=arguments[0],B=f;B--;)p[B-1]=arguments[B];return Ca(Wt(C)?oi(C):[C],Qn(p,1))}var un=Ut(function(f,p){return wr(f)?gs(f,Qn(p,1,wr,!0)):[]}),Er=Ut(function(f,p){var C=li(p);return wr(C)&&(C=n),wr(f)?gs(f,Qn(p,1,wr,!0),St(C,2)):[]}),cr=Ut(function(f,p){var C=li(p);return wr(C)&&(C=n),wr(f)?gs(f,Qn(p,1,wr,!0),n,C):[]});function kr(f,p,C){var B=f==null?0:f.length;return B?(p=C||p===n?1:Xt(p),Vr(f,p<0?0:p,B)):[]}function Gi(f,p,C){var B=f==null?0:f.length;return B?(p=C||p===n?1:Xt(p),p=B-p,Vr(f,0,p<0?0:p)):[]}function Ku(f,p){return f&&f.length?lf(f,St(p,3),!0,!0):[]}function yr(f,p){return f&&f.length?lf(f,St(p,3),!0):[]}function Cf(f,p,C,B){var I=f==null?0:f.length;return I?(C&&typeof C!="number"&&ai(f,p,C)&&(C=0,B=I),S2(f,p,C,B)):[]}function Ia(f,p,C){var B=f==null?0:f.length;if(!B)return-1;var I=C==null?0:Xt(C);return I<0&&(I=ur(B+I,0)),Oh(f,St(p,3),I)}function xf(f,p,C){var B=f==null?0:f.length;if(!B)return-1;var I=B-1;return C!==n&&(I=Xt(C),I=C<0?ur(B+I,0):Hr(I,B-1)),Oh(f,St(p,3),I,!0)}function Dd(f){var p=f==null?0:f.length;return p?Qn(f,1):[]}function Ef(f){var p=f==null?0:f.length;return p?Qn(f,Pe):[]}function Ti(f,p){var C=f==null?0:f.length;return C?(p=p===n?1:Xt(p),Qn(f,p)):[]}function ng(f){for(var p=-1,C=f==null?0:f.length,B={};++p<C;){var I=f[p];B[I[0]]=I[1]}return B}function bl(f){return f&&f.length?f[0]:n}function Js(f,p,C){var B=f==null?0:f.length;if(!B)return-1;var I=C==null?0:Xt(C);return I<0&&(I=ur(B+I,0)),Cu(f,p,I)}function Ad(f){var p=f==null?0:f.length;return p?Vr(f,0,-1):[]}var rg=Ut(function(f){var p=In(f,ju);return p.length&&p[0]===f[0]?nd(p):[]}),Fa=Ut(function(f){var p=li(f),C=In(f,ju);return p===li(C)?p=n:C.pop(),C.length&&C[0]===f[0]?nd(C,St(p,2)):[]}),Bd=Ut(function(f){var p=li(f),C=In(f,ju);return p=typeof p=="function"?p:n,p&&C.pop(),C.length&&C[0]===f[0]?nd(C,n,p):[]});function La(f,p){return f==null?"":zh.call(f,p)}function li(f){var p=f==null?0:f.length;return p?f[p-1]:n}function Pf(f,p,C){var B=f==null?0:f.length;if(!B)return-1;var I=B;return C!==n&&(I=Xt(C),I=I<0?ur(B+I,0):Hr(I,B-1)),p===p?t7(f,p,I):Oh(f,Jp,I,!0)}function ig(f,p){return f&&f.length?sd(f,Xt(p)):n}var Md=Ut(Sf);function Sf(f,p){return f&&f.length&&p&&p.length?ir(f,p):f}function ui(f,p,C){return f&&f.length&&p&&p.length?ir(f,p,St(C,2)):f}function _a(f,p,C){return f&&f.length&&p&&p.length?ir(f,p,n,C):f}var Ho=Cs(function(f,p){var C=f==null?0:f.length,B=Jh(f,p);return vr(f,In(p,function(I){return Vn(I,C)?+I:I}).sort(N1)),B});function Di(f,p){var C=[];if(!(f&&f.length))return C;var B=-1,I=[],j=f.length;for(p=St(p,3);++B<j;){var X=f[B];p(X,B,f)&&(C.push(X),I.push(B))}return vr(f,I),C}function Rd(f){return f==null?f:Vh.call(f)}function og(f,p,C){var B=f==null?0:f.length;return B?(C&&typeof C!="number"&&ai(f,p,C)?(p=0,C=B):(p=p==null?0:Xt(p),C=C===n?B:Xt(C)),Vr(f,p,C)):[]}function sg(f,p){return Hu(f,p)}function f7(f,p,C){return ld(f,p,St(C,2))}function Na(f,p){var C=f==null?0:f.length;if(C){var B=Hu(f,p);if(B<C&&ea(f[B],p))return B}return-1}function V2(f,p){return Hu(f,p,!0)}function ag(f,p,C){return ld(f,p,St(C,2),!0)}function kl(f,p){var C=f==null?0:f.length;if(C){var B=Hu(f,p,!0)-1;if(ea(f[B],p))return B}return-1}function lg(f){return f&&f.length?O1(f):[]}function Ol(f,p){return f&&f.length?O1(f,St(p,2)):[]}function U2(f){var p=f==null?0:f.length;return p?Vr(f,1,p):[]}function X2(f,p,C){return f&&f.length?(p=C||p===n?1:Xt(p),Vr(f,0,p<0?0:p)):[]}function ug(f,p,C){var B=f==null?0:f.length;return B?(p=C||p===n?1:Xt(p),p=B-p,Vr(f,p<0?0:p,B)):[]}function bd(f,p){return f&&f.length?lf(f,St(p,3),!1,!0):[]}function h7(f,p){return f&&f.length?lf(f,St(p,3)):[]}var d7=Ut(function(f){return Ys(Qn(f,1,wr,!0))}),K2=Ut(function(f){var p=li(f);return wr(p)&&(p=n),Ys(Qn(f,1,wr,!0),St(p,2))}),Y2=Ut(function(f){var p=li(f);return p=typeof p=="function"?p:n,Ys(Qn(f,1,wr,!0),n,p)});function Il(f){return f&&f.length?Ys(f):[]}function g7(f,p){return f&&f.length?Ys(f,St(p,2)):[]}function Yu(f,p){return p=typeof p=="function"?p:n,f&&f.length?Ys(f,n,p):[]}function kd(f){if(!(f&&f.length))return[];var p=0;return f=wa(f,function(C){if(wr(C))return p=ur(C.length,p),!0}),d1(p,function(C){return In(f,f1(C))})}function Xn(f,p){if(!(f&&f.length))return[];var C=kd(f);return p==null?C:In(C,function(B){return ri(p,n,B)})}var p7=Ut(function(f,p){return wr(f)?gs(f,p):[]}),q2=Ut(function(f){return cd(wa(f,wr))}),m7=Ut(function(f){var p=li(f);return wr(p)&&(p=n),cd(wa(f,wr),St(p,2))}),v7=Ut(function(f){var p=li(f);return p=typeof p=="function"?p:n,cd(wa(f,wr),n,p)}),Z2=Ut(kd);function Q2(f,p){return uf(f||[],p||[],Pl)}function y7(f,p){return uf(f||[],p||[],Bl)}var uo=Ut(function(f){var p=f.length,C=p>1?f[p-1]:n;return C=typeof C=="function"?(f.pop(),C):n,Xn(f,C)});function Od(f){var p=N(f);return p.__chain__=!0,p}function w7(f,p){return p(f),f}function Go(f,p){return p(f)}var Id=Cs(function(f){var p=f.length,C=p?f[0]:0,B=this.__wrapped__,I=function(j){return Jh(j,f)};return p>1||this.__actions__.length||!(B instanceof $t)||!Vn(C)?this.thru(I):(B=B.slice(C,+C+(p?1:0)),B.__actions__.push({func:Go,args:[I],thisArg:n}),new Gr(B,this.__chain__).thru(function(j){return p&&!j.length&&j.push(n),j}))});function Fl(){return Od(this)}function Fd(){return new Gr(this.value(),this.__chain__)}function cg(){this.__values__===n&&(this.__values__=ky(this.value()));var f=this.__index__>=this.__values__.length,p=f?n:this.__values__[this.__index__++];return{done:f,value:p}}function fg(){return this}function C7(f){for(var p,C=this;C instanceof cs;){var B=z2(C);B.__index__=0,B.__values__=n,p?I.__wrapped__=B:p=B;var I=B;C=C.__wrapped__}return I.__wrapped__=f,p}function hg(){var f=this.__wrapped__;if(f instanceof $t){var p=f;return this.__actions__.length&&(p=new $t(this)),p=p.reverse(),p.__actions__.push({func:Go,args:[Rd],thisArg:n}),new Gr(p,this.__chain__)}return this.thru(Rd)}function x7(){return Gu(this.__wrapped__,this.__actions__)}var J2=dd(function(f,p,C){pn.call(f,C)?++f[C]:ds(f,C,1)});function em(f,p,C){var B=Wt(f)?s1:tf;return C&&ai(f,p,C)&&(p=n),B(f,St(p,3))}function Ld(f,p){var C=Wt(f)?wa:S1;return C(f,St(p,3))}var _d=Rl(Ia),tm=Rl(xf);function dg(f,p){return Qn(Ll(f,p),1)}function E7(f,p){return Qn(Ll(f,p),Pe)}function nm(f,p,C){return C=C===n?1:Xt(C),Qn(Ll(f,p),C)}function Nd(f,p){var C=Wt(f)?Nr:ps;return C(f,St(p,3))}function Tf(f,p){var C=Wt(f)?bh:P2;return C(f,St(p,3))}var gg=dd(function(f,p,C){pn.call(f,C)?f[C].push(p):ds(f,C,[p])});function Hd(f,p,C,B){f=co(f)?f:$d(f),C=C&&!B?Xt(C):0;var I=f.length;return C<0&&(C=ur(I+C,0)),om(f)?C<=I&&f.indexOf(p,C)>-1:!!I&&Cu(f,p,C)>-1}var rm=Ut(function(f,p,C){var B=-1,I=typeof p=="function",j=co(f)?ye(f.length):[];return ps(f,function(X){j[++B]=I?ri(p,X,C):io(X,p,C)}),j}),P7=dd(function(f,p,C){ds(f,C,p)});function Ll(f,p){var C=Wt(f)?In:B1;return C(f,St(p,3))}function S7(f,p,C,B){return f==null?[]:(Wt(p)||(p=p==null?[]:[p]),C=B?n:C,Wt(C)||(C=C==null?[]:[C]),sf(f,p,C))}var Df=dd(function(f,p,C){f[C?0:1].push(p)},function(){return[[],[]]});function T7(f,p,C){var B=Wt(f)?l1:t2,I=arguments.length<3;return B(f,St(p,4),C,I,ps)}function Gd(f,p,C){var B=Wt(f)?Xv:t2,I=arguments.length<3;return B(f,St(p,4),C,I,P2)}function a(f,p){var C=Wt(f)?wa:S1;return C(f,Ue(St(p,3)))}function u(f){var p=Wt(f)?hs:zr;return p(f)}function m(f,p,C){(C?ai(f,p,C):p===n)?p=1:p=Xt(p);var B=Wt(f)?El:b1;return B(f,p)}function w(f){var p=Wt(f)?x2:so;return p(f)}function P(f){if(f==null)return 0;if(co(f))return om(f)?ml(f):f.length;var p=Rr(f);return p==Ye||p==_t?f.size:Ks(f).length}function A(f,p,C){var B=Wt(f)?u1:k1;return C&&ai(f,p,C)&&(p=n),B(f,St(p,3))}var _=Ut(function(f,p){if(f==null)return[];var C=p.length;return C>1&&ai(f,p[0],p[1])?p=[]:C>2&&ai(p[0],p[1],p[2])&&(p=[p[0]]),sf(f,Qn(p,1),[])}),V=Nn||function(){return Wn.Date.now()};function Z(f,p){if(typeof p!="function")throw new Ji(s);return f=Xt(f),function(){if(--f<1)return p.apply(this,arguments)}}function Ce(f,p,C){return p=C?n:p,p=f&&p==null?f.length:p,ws(f,z,n,n,n,n,p)}function Ne(f,p){var C;if(typeof p!="function")throw new Ji(s);return f=Xt(f),function(){return--f>0&&(C=p.apply(this,arguments)),f<=1&&(p=n),C}}var je=Ut(function(f,p,C){var B=T;if(C.length){var I=Qi(C,Zs(je));B|=O}return ws(f,B,p,C,I)}),_e=Ut(function(f,p,C){var B=T|D;if(C.length){var I=Qi(C,Zs(_e));B|=O}return ws(p,B,f,C,I)});function rt(f,p,C){p=C?n:p;var B=ws(f,R,n,n,n,n,n,p);return B.placeholder=rt.placeholder,B}function at(f,p,C){p=C?n:p;var B=ws(f,k,n,n,n,n,n,p);return B.placeholder=at.placeholder,B}function ct(f,p,C){var B,I,j,X,J,ce,be=0,Oe=!1,Ge=!1,tt=!0;if(typeof f!="function")throw new Ji(s);p=Es(p)||0,sr(C)&&(Oe=!!C.leading,Ge="maxWait"in C,j=Ge?ur(Es(C.maxWait)||0,p):j,tt="trailing"in C?!!C.trailing:tt);function dt(Cr){var ta=B,Hl=I;return B=I=n,be=Cr,X=f.apply(Hl,ta),X}function bt(Cr){return be=Cr,J=Xu(tn,p),Oe?dt(Cr):X}function Yt(Cr){var ta=Cr-ce,Hl=Cr-be,Vy=p-ta;return Ge?Hr(Vy,j-Hl):Vy}function kt(Cr){var ta=Cr-ce,Hl=Cr-be;return ce===n||ta>=p||ta<0||Ge&&Hl>=j}function tn(){var Cr=V();if(kt(Cr))return cn(Cr);J=Xu(tn,Yt(Cr))}function cn(Cr){return J=n,tt&&B?dt(Cr):(B=I=n,X)}function $o(){J!==n&&L1(J),be=0,B=ce=I=J=n}function ji(){return J===n?X:cn(V())}function Wo(){var Cr=V(),ta=kt(Cr);if(B=arguments,I=this,ce=Cr,ta){if(J===n)return bt(ce);if(Ge)return L1(J),J=Xu(tn,p),dt(ce)}return J===n&&(J=Xu(tn,p)),X}return Wo.cancel=$o,Wo.flush=ji,Wo}var or=Ut(function(f,p){return P1(f,1,p)}),de=Ut(function(f,p,C){return P1(f,Es(p)||0,C)});function re(f){return ws(f,te)}function pe(f,p){if(typeof f!="function"||p!=null&&typeof p!="function")throw new Ji(s);var C=function(){var B=arguments,I=p?p.apply(this,B):B[0],j=C.cache;if(j.has(I))return j.get(I);var X=f.apply(this,B);return C.cache=j.set(I,X)||j,X};return C.cache=new(pe.Cache||eo),C}pe.Cache=eo;function Ue(f){if(typeof f!="function")throw new Ji(s);return function(){var p=arguments;switch(p.length){case 0:return!f.call(this);case 1:return!f.call(this,p[0]);case 2:return!f.call(this,p[0],p[1]);case 3:return!f.call(this,p[0],p[1],p[2])}return!f.apply(this,p)}}function ht(f){return Ne(2,f)}var Pt=A2(function(f,p){p=p.length==1&&Wt(p[0])?In(p[0],Ii(St())):In(Qn(p,1),Ii(St()));var C=p.length;return Ut(function(B){for(var I=-1,j=Hr(B.length,C);++I<j;)B[I]=p[I].call(this,B[I]);return ri(f,this,B)})}),Ct=Ut(function(f,p){var C=Qi(p,Zs(Ct));return ws(f,O,n,p,C)}),Rt=Ut(function(f,p){var C=Qi(p,Zs(Rt));return ws(f,$,n,p,C)}),Pr=Cs(function(f,p){return ws(f,K,n,n,n,p)});function mn(f,p){if(typeof f!="function")throw new Ji(s);return p=p===n?p:Xt(p),Ut(f,p)}function Ha(f,p){if(typeof f!="function")throw new Ji(s);return p=p==null?0:ur(Xt(p),0),Ut(function(C){var B=C[p],I=qs(C,0,p);return B&&Ca(I,B),ri(f,this,I)})}function D7(f,p,C){var B=!0,I=!0;if(typeof f!="function")throw new Ji(s);return sr(C)&&(B="leading"in C?!!C.leading:B,I="trailing"in C?!!C.trailing:I),ct(f,p,{leading:B,maxWait:p,trailing:I})}function qB(f){return Ce(f,1)}function ZB(f,p){return Ct(fd(p),f)}function QB(){if(!arguments.length)return[];var f=arguments[0];return Wt(f)?f:[f]}function JB(f){return Pi(f,y)}function eM(f,p){return p=typeof p=="function"?p:n,Pi(f,y,p)}function tM(f){return Pi(f,g|y)}function nM(f,p){return p=typeof p=="function"?p:n,Pi(f,g|y,p)}function rM(f,p){return p==null||ef(f,p,Ur(p))}function ea(f,p){return f===p||f!==f&&p!==p}var iM=yd(Ma),oM=yd(function(f,p){return f>=p}),Af=rd(function(){return arguments}())?rd:function(f){return fr(f)&&pn.call(f,"callee")&&!jh.call(f,"callee")},Wt=ye.isArray,sM=i1?Ii(i1):T2;function co(f){return f!=null&&im(f.length)&&!_l(f)}function wr(f){return fr(f)&&co(f)}function aM(f){return f===!0||f===!1||fr(f)&&Br(f)==et}var qu=w1||_7,lM=wi?Ii(wi):Xs;function uM(f){return fr(f)&&f.nodeType===1&&!pg(f)}function cM(f){if(f==null)return!0;if(co(f)&&(Wt(f)||typeof f=="string"||typeof f.splice=="function"||qu(f)||jd(f)||Af(f)))return!f.length;var p=Rr(f);if(p==Ye||p==_t)return!f.size;if(Qs(f))return!Ks(f).length;for(var C in f)if(pn.call(f,C))return!1;return!0}function fM(f,p){return oo(f,p)}function hM(f,p,C){C=typeof C=="function"?C:n;var B=C?C(f,p):n;return B===n?oo(f,p,n,C):!!B}function A7(f){if(!fr(f))return!1;var p=Br(f);return p==Te||p==Se||typeof f.message=="string"&&typeof f.name=="string"&&!pg(f)}function dM(f){return typeof f=="number"&&Du(f)}function _l(f){if(!sr(f))return!1;var p=Br(f);return p==ke||p==vt||p==Ze||p==Cn}function By(f){return typeof f=="number"&&f==Xt(f)}function im(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=he}function sr(f){var p=typeof f;return f!=null&&(p=="object"||p=="function")}function fr(f){return f!=null&&typeof f=="object"}var My=pl?Ii(pl):D2;function gM(f,p){return f===p||Lu(f,p,mf(p))}function pM(f,p,C){return C=typeof C=="function"?C:n,Lu(f,p,mf(p),C)}function mM(f){return Ry(f)&&f!=+f}function vM(f){if(c7(f))throw new Ft(o);return D1(f)}function yM(f){return f===null}function wM(f){return f==null}function Ry(f){return typeof f=="number"||fr(f)&&Br(f)==At}function pg(f){if(!fr(f)||Br(f)!=Mt)return!1;var p=ko(f);if(p===null)return!0;var C=pn.call(p,"constructor")&&p.constructor;return typeof C=="function"&&C instanceof C&&zc.call(C)==Hh}var B7=Rh?Ii(Rh):rf;function CM(f){return By(f)&&f>=-9007199254740991&&f<=he}var by=wu?Ii(wu):ms;function om(f){return typeof f=="string"||!Wt(f)&&fr(f)&&Br(f)==an}function jo(f){return typeof f=="symbol"||fr(f)&&Br(f)==pr}var jd=qp?Ii(qp):of;function xM(f){return f===n}function EM(f){return fr(f)&&Rr(f)==$n}function PM(f){return fr(f)&&Br(f)==Yi}var SM=yd(Ra),TM=yd(function(f,p){return f<=p});function ky(f){if(!f)return[];if(co(f))return om(f)?Fi(f):oi(f);if($s&&f[$s])return Jv(f[$s]());var p=Rr(f),C=p==Ye?Fh:p==_t?xa:$d;return C(f)}function Nl(f){if(!f)return f===0?f:0;if(f=Es(f),f===Pe||f===-1/0){var p=f<0?-1:1;return p*le}return f===f?f:0}function Xt(f){var p=Nl(f),C=p%1;return p===p?C?p-C:p:0}function Oy(f){return f?zs(Xt(f),0,U):0}function Es(f){if(typeof f=="number")return f;if(jo(f))return we;if(sr(f)){var p=typeof f.valueOf=="function"?f.valueOf():f;f=sr(p)?p+"":p}if(typeof f!="string")return f===0?f:+f;f=n2(f);var C=e1.test(f);return C||Ch.test(f)?Bh(f.slice(2),C?2:8):yh.test(f)?we:+f}function Iy(f){return Io(f,fo(f))}function DM(f){return f?zs(Xt(f),-9007199254740991,he):f===0?f:0}function Mn(f){return f==null?"":Si(f)}var AM=$u(function(f,p){if(Qs(p)||co(p)){Io(p,Ur(p),f);return}for(var C in p)pn.call(p,C)&&Pl(f,C,p[C])}),Fy=$u(function(f,p){Io(p,fo(p),f)}),sm=$u(function(f,p,C,B){Io(p,fo(p),f,B)}),BM=$u(function(f,p,C,B){Io(p,Ur(p),f,B)}),MM=Cs(Jh);function RM(f,p){var C=bu(f);return p==null?C:Gn(C,p)}var bM=Ut(function(f,p){f=Bn(f);var C=-1,B=p.length,I=B>2?p[2]:n;for(I&&ai(p[0],p[1],I)&&(B=1);++C<B;)for(var j=p[C],X=fo(j),J=-1,ce=X.length;++J<ce;){var be=X[J],Oe=f[be];(Oe===n||ea(Oe,ls[be])&&!pn.call(f,be))&&(f[be]=j[be])}return f}),kM=Ut(function(f){return f.push(n,V1),ri(Ly,n,f)});function OM(f,p){return Qp(f,St(p,3),Ni)}function IM(f,p){return Qp(f,St(p,3),Ba)}function FM(f,p){return f==null?f:ed(f,St(p,3),fo)}function LM(f,p){return f==null?f:nf(f,St(p,3),fo)}function _M(f,p){return f&&Ni(f,St(p,3))}function NM(f,p){return f&&Ba(f,St(p,3))}function HM(f){return f==null?[]:Fu(f,Ur(f))}function GM(f){return f==null?[]:Fu(f,fo(f))}function M7(f,p,C){var B=f==null?n:Vs(f,p);return B===n?C:B}function jM(f,p){return f!=null&&q1(f,p,ro)}function R7(f,p){return f!=null&&q1(f,p,Tl)}var $M=O2(function(f,p,C){p!=null&&typeof p.toString!="function"&&(p=Vc.call(p)),f[p]=C},k7(ho)),WM=O2(function(f,p,C){p!=null&&typeof p.toString!="function"&&(p=Vc.call(p)),pn.call(f,p)?f[p].push(C):f[p]=[C]},St),zM=Ut(io);function Ur(f){return co(f)?fs(f):Ks(f)}function fo(f){return co(f)?fs(f,!0):A1(f)}function VM(f,p){var C={};return p=St(p,3),Ni(f,function(B,I,j){ds(C,p(B,I,j),B)}),C}function UM(f,p){var C={};return p=St(p,3),Ni(f,function(B,I,j){ds(C,I,p(B,I,j))}),C}var XM=$u(function(f,p,C){Dl(f,p,C)}),Ly=$u(function(f,p,C,B){Dl(f,p,C,B)}),KM=Cs(function(f,p){var C={};if(f==null)return C;var B=!1;p=In(p,function(j){return j=ys(j,f),B||(B=j.length>1),j}),Io(f,gf(f),C),B&&(C=Pi(C,g|v|y,U1));for(var I=p.length;I--;)ud(C,p[I]);return C});function YM(f,p){return _y(f,Ue(St(p)))}var qM=Cs(function(f,p){return f==null?{}:R1(f,p)});function _y(f,p){if(f==null)return{};var C=In(gf(f),function(B){return[B]});return p=St(p),ba(f,C,function(B,I){return p(B,I[0])})}function ZM(f,p,C){p=ys(p,f);var B=-1,I=p.length;for(I||(I=1,f=n);++B<I;){var j=f==null?n:f[No(p[B])];j===n&&(B=I,j=C),f=_l(j)?j.call(f):j}return f}function QM(f,p,C){return f==null?f:Bl(f,p,C)}function JM(f,p,C,B){return B=typeof B=="function"?B:n,f==null?f:Bl(f,p,C,B)}var Ny=W1(Ur),Hy=W1(fo);function eR(f,p,C){var B=Wt(f),I=B||qu(f)||jd(f);if(p=St(p,4),C==null){var j=f&&f.constructor;I?C=B?new j:[]:sr(f)?C=_l(j)?bu(ko(f)):{}:C={}}return(I?Nr:Ni)(f,function(X,J,ce){return p(C,X,J,ce)}),C}function tR(f,p){return f==null?!0:ud(f,p)}function nR(f,p,C){return f==null?f:F1(f,p,fd(C))}function rR(f,p,C,B){return B=typeof B=="function"?B:n,f==null?f:F1(f,p,fd(C),B)}function $d(f){return f==null?[]:$c(f,Ur(f))}function iR(f){return f==null?[]:$c(f,fo(f))}function oR(f,p,C){return C===n&&(C=p,p=n),C!==n&&(C=Es(C),C=C===C?C:0),p!==n&&(p=Es(p),p=p===p?p:0),zs(Es(f),p,C)}function sR(f,p,C){return p=Nl(p),C===n?(C=p,p=0):C=Nl(C),f=Es(f),T1(f,p,C)}function aR(f,p,C){if(C&&typeof C!="boolean"&&ai(f,p,C)&&(p=C=n),C===n&&(typeof p=="boolean"?(C=p,p=n):typeof f=="boolean"&&(C=f,f=n)),f===n&&p===n?(f=0,p=1):(f=Nl(f),p===n?(p=f,f=0):p=Nl(p)),f>p){var B=f;f=p,p=B}if(C||f%1||p%1){var I=Yc();return Hr(f+I*(p-f+n1("1e-"+((I+"").length-1))),p)}return Nu(f,p)}var lR=Ml(function(f,p,C){return p=p.toLowerCase(),f+(C?Gy(p):p)});function Gy(f){return b7(Mn(f).toLowerCase())}function jy(f){return f=Mn(f),f&&f.replace(Eh,o2).replace(Up,"")}function uR(f,p,C){f=Mn(f),p=Si(p);var B=f.length;C=C===n?B:zs(Xt(C),0,B);var I=C;return C-=p.length,C>=0&&f.slice(C,I)==p}function cR(f){return f=Mn(f),f&&gh.test(f)?f.replace(_s,s2):f}function fR(f){return f=Mn(f),f&&fl.test(f)?f.replace(cl,"\\$&"):f}var hR=Ml(function(f,p,C){return f+(C?"-":"")+p.toLowerCase()}),dR=Ml(function(f,p,C){return f+(C?" ":"")+p.toLowerCase()}),gR=G1("toLowerCase");function pR(f,p,C){f=Mn(f),p=Xt(p);var B=p?ml(f):0;if(!p||B>=p)return f;var I=(p-B)/2;return hf(Ea(I),C)+f+hf(yl(I),C)}function mR(f,p,C){f=Mn(f),p=Xt(p);var B=p?ml(f):0;return p&&B<p?f+hf(p-B,C):f}function vR(f,p,C){f=Mn(f),p=Xt(p);var B=p?ml(f):0;return p&&B<p?hf(p-B,C)+f:f}function yR(f,p,C){return C||p==null?p=0:p&&(p=+p),p2(Mn(f).replace(Ic,""),p||0)}function wR(f,p,C){return(C?ai(f,p,C):p===n)?p=1:p=Xt(p),Al(Mn(f),p)}function CR(){var f=arguments,p=Mn(f[0]);return f.length<3?p:p.replace(f[1],f[2])}var xR=Ml(function(f,p,C){return f+(C?"_":"")+p.toLowerCase()});function ER(f,p,C){return C&&typeof C!="number"&&ai(f,p,C)&&(p=C=n),C=C===n?U:C>>>0,C?(f=Mn(f),f&&(typeof p=="string"||p!=null&&!B7(p))&&(p=Si(p),!p&&Eu(f))?qs(Fi(f),0,C):f.split(p,C)):[]}var PR=Ml(function(f,p,C){return f+(C?" ":"")+b7(p)});function SR(f,p,C){return f=Mn(f),C=C==null?0:zs(Xt(C),0,f.length),p=Si(p),f.slice(C,C+p.length)==p}function TR(f,p,C){var B=N.templateSettings;C&&ai(f,p,C)&&(p=n),f=Mn(f),p=sm({},p,B,z1);var I=sm({},p.imports,B.imports,z1),j=Ur(I),X=$c(I,j),J,ce,be=0,Oe=p.interpolate||hu,Ge="__p += '",tt=Wc((p.escape||hu).source+"|"+Oe.source+"|"+(Oe===kc?Ns:hu).source+"|"+(p.evaluate||hu).source+"|$","g"),dt="//# sourceURL="+(pn.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++zv+"]")+`
`;f.replace(tt,function(kt,tn,cn,$o,ji,Wo){return cn||(cn=$o),Ge+=f.slice(be,Wo).replace(Ph,a2),tn&&(J=!0,Ge+=`' +
__e(`+tn+`) +
'`),ji&&(ce=!0,Ge+=`';
`+ji+`;
__p += '`),cn&&(Ge+=`' +
((__t = (`+cn+`)) == null ? '' : __t) +
'`),be=Wo+kt.length,kt}),Ge+=`';
`;var bt=pn.call(p,"variable")&&p.variable;if(!bt)Ge=`with (obj) {
`+Ge+`
}
`;else if(Q0.test(bt))throw new Ft(l);Ge=(ce?Ge.replace(uu,""):Ge).replace(Rc,"$1").replace(Zi,"$1;"),Ge="function("+(bt||"obj")+`) {
`+(bt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(J?", __e = _.escape":"")+(ce?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ge+`return __p
}`;var Yt=Wy(function(){return gn(j,dt+"return "+Ge).apply(n,X)});if(Yt.source=Ge,A7(Yt))throw Yt;return Yt}function DR(f){return Mn(f).toLowerCase()}function AR(f){return Mn(f).toUpperCase()}function BR(f,p,C){if(f=Mn(f),f&&(C||p===n))return n2(f);if(!f||!(p=Si(p)))return f;var B=Fi(f),I=Fi(p),j=r2(B,I),X=g1(B,I)+1;return qs(B,j,X).join("")}function MR(f,p,C){if(f=Mn(f),f&&(C||p===n))return f.slice(0,_h(f)+1);if(!f||!(p=Si(p)))return f;var B=Fi(f),I=g1(B,Fi(p))+1;return qs(B,0,I).join("")}function RR(f,p,C){if(f=Mn(f),f&&(C||p===n))return f.replace(Ic,"");if(!f||!(p=Si(p)))return f;var B=Fi(f),I=r2(B,Fi(p));return qs(B,I).join("")}function bR(f,p){var C=se,B=me;if(sr(p)){var I="separator"in p?p.separator:I;C="length"in p?Xt(p.length):C,B="omission"in p?Si(p.omission):B}f=Mn(f);var j=f.length;if(Eu(f)){var X=Fi(f);j=X.length}if(C>=j)return f;var J=C-ml(B);if(J<1)return B;var ce=X?qs(X,0,J).join(""):f.slice(0,J);if(I===n)return ce+B;if(X&&(J+=ce.length-J),B7(I)){if(f.slice(J).search(I)){var be,Oe=ce;for(I.global||(I=Wc(I.source,Mn(Lc.exec(I))+"g")),I.lastIndex=0;be=I.exec(Oe);)var Ge=be.index;ce=ce.slice(0,Ge===n?J:Ge)}}else if(f.indexOf(Si(I),J)!=J){var tt=ce.lastIndexOf(I);tt>-1&&(ce=ce.slice(0,tt))}return ce+B}function kR(f){return f=Mn(f),f&&bc.test(f)?f.replace(Ls,l2):f}var OR=Ml(function(f,p,C){return f+(C?" ":"")+p.toUpperCase()}),b7=G1("toUpperCase");function $y(f,p,C){return f=Mn(f),p=C?n:p,p===n?Qv(f)?n7(f):Yv(f):f.match(p)||[]}var Wy=Ut(function(f,p){try{return ri(f,n,p)}catch(C){return A7(C)?C:new Ft(C)}}),IR=Cs(function(f,p){return Nr(p,function(C){C=No(C),ds(f,C,je(f[C],f))}),f});function FR(f){var p=f==null?0:f.length,C=St();return f=p?In(f,function(B){if(typeof B[1]!="function")throw new Ji(s);return[C(B[0]),B[1]]}):[],Ut(function(B){for(var I=-1;++I<p;){var j=f[I];if(ri(j[0],this,B))return ri(j[1],this,B)}})}function LR(f){return E2(Pi(f,g))}function k7(f){return function(){return f}}function _R(f,p){return f==null||f!==f?p:f}var NR=md(),HR=md(!0);function ho(f){return f}function O7(f){return _u(typeof f=="function"?f:Pi(f,g))}function GR(f){return od(Pi(f,g))}function jR(f,p){return zn(f,Pi(p,g))}var $R=Ut(function(f,p){return function(C){return io(C,f,p)}}),WR=Ut(function(f,p){return function(C){return io(f,C,p)}});function I7(f,p,C){var B=Ur(p),I=Fu(p,B);C==null&&!(sr(p)&&(I.length||!B.length))&&(C=p,p=f,f=this,I=Fu(p,Ur(p)));var j=!(sr(C)&&"chain"in C)||!!C.chain,X=_l(f);return Nr(I,function(J){var ce=p[J];f[J]=ce,X&&(f.prototype[J]=function(){var be=this.__chain__;if(j||be){var Oe=f(this.__wrapped__),Ge=Oe.__actions__=oi(this.__actions__);return Ge.push({func:ce,args:arguments,thisArg:f}),Oe.__chain__=be,Oe}return ce.apply(f,Ca([this.value()],arguments))})}),f}function zR(){return Wn._===this&&(Wn._=f2),this}function F7(){}function VR(f){return f=Xt(f),Ut(function(p){return sd(p,f)})}var UR=vd(In),XR=vd(s1),KR=vd(u1);function zy(f){return it(f)?f1(No(f)):Un(f)}function YR(f){return function(p){return f==null?n:Vs(f,p)}}var qR=$1(),ZR=$1(!0);function L7(){return[]}function _7(){return!1}function QR(){return{}}function JR(){return""}function eb(){return!0}function tb(f,p){if(f=Xt(f),f<1||f>he)return[];var C=U,B=Hr(f,U);p=St(p),f-=U;for(var I=d1(B,p);++C<f;)p(C);return I}function nb(f){return Wt(f)?In(f,No):jo(f)?[f]:oi(eg(Mn(f)))}function rb(f){var p=++Tu;return Mn(f)+p}var ib=ff(function(f,p){return f+p},0),ob=Mr("ceil"),sb=ff(function(f,p){return f/p},1),ab=Mr("floor");function lb(f){return f&&f.length?Sl(f,ho,Ma):n}function ub(f,p){return f&&f.length?Sl(f,St(p,2),Ma):n}function cb(f){return e2(f,ho)}function fb(f,p){return e2(f,St(p,2))}function hb(f){return f&&f.length?Sl(f,ho,Ra):n}function db(f,p){return f&&f.length?Sl(f,St(p,2),Ra):n}var gb=ff(function(f,p){return f*p},1),pb=Mr("round"),mb=ff(function(f,p){return f-p},0);function vb(f){return f&&f.length?h1(f,ho):0}function yb(f,p){return f&&f.length?h1(f,St(p,2)):0}return N.after=Z,N.ary=Ce,N.assign=AM,N.assignIn=Fy,N.assignInWith=sm,N.assignWith=BM,N.at=MM,N.before=Ne,N.bind=je,N.bindAll=IR,N.bindKey=_e,N.castArray=QB,N.chain=Od,N.chunk=Td,N.compact=tg,N.concat=lo,N.cond=FR,N.conforms=LR,N.constant=k7,N.countBy=J2,N.create=RM,N.curry=rt,N.curryRight=at,N.debounce=ct,N.defaults=bM,N.defaultsDeep=kM,N.defer=or,N.delay=de,N.difference=un,N.differenceBy=Er,N.differenceWith=cr,N.drop=kr,N.dropRight=Gi,N.dropRightWhile=Ku,N.dropWhile=yr,N.fill=Cf,N.filter=Ld,N.flatMap=dg,N.flatMapDeep=E7,N.flatMapDepth=nm,N.flatten=Dd,N.flattenDeep=Ef,N.flattenDepth=Ti,N.flip=re,N.flow=NR,N.flowRight=HR,N.fromPairs=ng,N.functions=HM,N.functionsIn=GM,N.groupBy=gg,N.initial=Ad,N.intersection=rg,N.intersectionBy=Fa,N.intersectionWith=Bd,N.invert=$M,N.invertBy=WM,N.invokeMap=rm,N.iteratee=O7,N.keyBy=P7,N.keys=Ur,N.keysIn=fo,N.map=Ll,N.mapKeys=VM,N.mapValues=UM,N.matches=GR,N.matchesProperty=jR,N.memoize=pe,N.merge=XM,N.mergeWith=Ly,N.method=$R,N.methodOf=WR,N.mixin=I7,N.negate=Ue,N.nthArg=VR,N.omit=KM,N.omitBy=YM,N.once=ht,N.orderBy=S7,N.over=UR,N.overArgs=Pt,N.overEvery=XR,N.overSome=KR,N.partial=Ct,N.partialRight=Rt,N.partition=Df,N.pick=qM,N.pickBy=_y,N.property=zy,N.propertyOf=YR,N.pull=Md,N.pullAll=Sf,N.pullAllBy=ui,N.pullAllWith=_a,N.pullAt=Ho,N.range=qR,N.rangeRight=ZR,N.rearg=Pr,N.reject=a,N.remove=Di,N.rest=mn,N.reverse=Rd,N.sampleSize=m,N.set=QM,N.setWith=JM,N.shuffle=w,N.slice=og,N.sortBy=_,N.sortedUniq=lg,N.sortedUniqBy=Ol,N.split=ER,N.spread=Ha,N.tail=U2,N.take=X2,N.takeRight=ug,N.takeRightWhile=bd,N.takeWhile=h7,N.tap=w7,N.throttle=D7,N.thru=Go,N.toArray=ky,N.toPairs=Ny,N.toPairsIn=Hy,N.toPath=nb,N.toPlainObject=Iy,N.transform=eR,N.unary=qB,N.union=d7,N.unionBy=K2,N.unionWith=Y2,N.uniq=Il,N.uniqBy=g7,N.uniqWith=Yu,N.unset=tR,N.unzip=kd,N.unzipWith=Xn,N.update=nR,N.updateWith=rR,N.values=$d,N.valuesIn=iR,N.without=p7,N.words=$y,N.wrap=ZB,N.xor=q2,N.xorBy=m7,N.xorWith=v7,N.zip=Z2,N.zipObject=Q2,N.zipObjectDeep=y7,N.zipWith=uo,N.entries=Ny,N.entriesIn=Hy,N.extend=Fy,N.extendWith=sm,I7(N,N),N.add=ib,N.attempt=Wy,N.camelCase=lR,N.capitalize=Gy,N.ceil=ob,N.clamp=oR,N.clone=JB,N.cloneDeep=tM,N.cloneDeepWith=nM,N.cloneWith=eM,N.conformsTo=rM,N.deburr=jy,N.defaultTo=_R,N.divide=sb,N.endsWith=uR,N.eq=ea,N.escape=cR,N.escapeRegExp=fR,N.every=em,N.find=_d,N.findIndex=Ia,N.findKey=OM,N.findLast=tm,N.findLastIndex=xf,N.findLastKey=IM,N.floor=ab,N.forEach=Nd,N.forEachRight=Tf,N.forIn=FM,N.forInRight=LM,N.forOwn=_M,N.forOwnRight=NM,N.get=M7,N.gt=iM,N.gte=oM,N.has=jM,N.hasIn=R7,N.head=bl,N.identity=ho,N.includes=Hd,N.indexOf=Js,N.inRange=sR,N.invoke=zM,N.isArguments=Af,N.isArray=Wt,N.isArrayBuffer=sM,N.isArrayLike=co,N.isArrayLikeObject=wr,N.isBoolean=aM,N.isBuffer=qu,N.isDate=lM,N.isElement=uM,N.isEmpty=cM,N.isEqual=fM,N.isEqualWith=hM,N.isError=A7,N.isFinite=dM,N.isFunction=_l,N.isInteger=By,N.isLength=im,N.isMap=My,N.isMatch=gM,N.isMatchWith=pM,N.isNaN=mM,N.isNative=vM,N.isNil=wM,N.isNull=yM,N.isNumber=Ry,N.isObject=sr,N.isObjectLike=fr,N.isPlainObject=pg,N.isRegExp=B7,N.isSafeInteger=CM,N.isSet=by,N.isString=om,N.isSymbol=jo,N.isTypedArray=jd,N.isUndefined=xM,N.isWeakMap=EM,N.isWeakSet=PM,N.join=La,N.kebabCase=hR,N.last=li,N.lastIndexOf=Pf,N.lowerCase=dR,N.lowerFirst=gR,N.lt=SM,N.lte=TM,N.max=lb,N.maxBy=ub,N.mean=cb,N.meanBy=fb,N.min=hb,N.minBy=db,N.stubArray=L7,N.stubFalse=_7,N.stubObject=QR,N.stubString=JR,N.stubTrue=eb,N.multiply=gb,N.nth=ig,N.noConflict=zR,N.noop=F7,N.now=V,N.pad=pR,N.padEnd=mR,N.padStart=vR,N.parseInt=yR,N.random=aR,N.reduce=T7,N.reduceRight=Gd,N.repeat=wR,N.replace=CR,N.result=ZM,N.round=pb,N.runInContext=ae,N.sample=u,N.size=P,N.snakeCase=xR,N.some=A,N.sortedIndex=sg,N.sortedIndexBy=f7,N.sortedIndexOf=Na,N.sortedLastIndex=V2,N.sortedLastIndexBy=ag,N.sortedLastIndexOf=kl,N.startCase=PR,N.startsWith=SR,N.subtract=mb,N.sum=vb,N.sumBy=yb,N.template=TR,N.times=tb,N.toFinite=Nl,N.toInteger=Xt,N.toLength=Oy,N.toLower=DR,N.toNumber=Es,N.toSafeInteger=DM,N.toString=Mn,N.toUpper=AR,N.trim=BR,N.trimEnd=MR,N.trimStart=RR,N.truncate=bR,N.unescape=kR,N.uniqueId=rb,N.upperCase=OR,N.upperFirst=b7,N.each=Nd,N.eachRight=Tf,N.first=bl,I7(N,function(){var f={};return Ni(N,function(p,C){pn.call(N.prototype,C)||(f[C]=p)}),f}(),{chain:!1}),N.VERSION=r,Nr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){N[f].placeholder=N}),Nr(["drop","take"],function(f,p){$t.prototype[f]=function(C){C=C===n?1:ur(Xt(C),0);var B=this.__filtered__&&!p?new $t(this):this.clone();return B.__filtered__?B.__takeCount__=Hr(C,B.__takeCount__):B.__views__.push({size:Hr(C,U),type:f+(B.__dir__<0?"Right":"")}),B},$t.prototype[f+"Right"]=function(C){return this.reverse()[f](C).reverse()}}),Nr(["filter","map","takeWhile"],function(f,p){var C=p+1,B=C==ve||C==Me;$t.prototype[f]=function(I){var j=this.clone();return j.__iteratees__.push({iteratee:St(I,3),type:C}),j.__filtered__=j.__filtered__||B,j}}),Nr(["head","last"],function(f,p){var C="take"+(p?"Right":"");$t.prototype[f]=function(){return this[C](1).value()[0]}}),Nr(["initial","tail"],function(f,p){var C="drop"+(p?"":"Right");$t.prototype[f]=function(){return this.__filtered__?new $t(this):this[C](1)}}),$t.prototype.compact=function(){return this.filter(ho)},$t.prototype.find=function(f){return this.filter(f).head()},$t.prototype.findLast=function(f){return this.reverse().find(f)},$t.prototype.invokeMap=Ut(function(f,p){return typeof f=="function"?new $t(this):this.map(function(C){return io(C,f,p)})}),$t.prototype.reject=function(f){return this.filter(Ue(St(f)))},$t.prototype.slice=function(f,p){f=Xt(f);var C=this;return C.__filtered__&&(f>0||p<0)?new $t(C):(f<0?C=C.takeRight(-f):f&&(C=C.drop(f)),p!==n&&(p=Xt(p),C=p<0?C.dropRight(-p):C.take(p-f)),C)},$t.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},$t.prototype.toArray=function(){return this.take(U)},Ni($t.prototype,function(f,p){var C=/^(?:filter|find|map|reject)|While$/.test(p),B=/^(?:head|last)$/.test(p),I=N[B?"take"+(p=="last"?"Right":""):p],j=B||/^find/.test(p);I&&(N.prototype[p]=function(){var X=this.__wrapped__,J=B?[1]:arguments,ce=X instanceof $t,be=J[0],Oe=ce||Wt(X),Ge=function(tn){var cn=I.apply(N,Ca([tn],J));return B&&tt?cn[0]:cn};Oe&&C&&typeof be=="function"&&be.length!=1&&(ce=Oe=!1);var tt=this.__chain__,dt=!!this.__actions__.length,bt=j&&!tt,Yt=ce&&!dt;if(!j&&Oe){X=Yt?X:new $t(this);var kt=f.apply(X,J);return kt.__actions__.push({func:Go,args:[Ge],thisArg:n}),new Gr(kt,tt)}return bt&&Yt?f.apply(this,J):(kt=this.thru(Ge),bt?B?kt.value()[0]:kt.value():kt)})}),Nr(["pop","push","shift","sort","splice","unshift"],function(f){var p=Gs[f],C=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",B=/^(?:pop|shift)$/.test(f);N.prototype[f]=function(){var I=arguments;if(B&&!this.__chain__){var j=this.value();return p.apply(Wt(j)?j:[],I)}return this[C](function(X){return p.apply(Wt(X)?X:[],I)})}}),Ni($t.prototype,function(f,p){var C=N[p];if(C){var B=C.name+"";pn.call(Mu,B)||(Mu[B]=[]),Mu[B].push({name:p,func:C})}}),Mu[zu(n,D).name]=[{name:"wrapper",func:n}],$t.prototype.clone=Kh,$t.prototype.reverse=x1,$t.prototype.value=ku,N.prototype.at=Id,N.prototype.chain=Fl,N.prototype.commit=Fd,N.prototype.next=cg,N.prototype.plant=C7,N.prototype.reverse=hg,N.prototype.toJSON=N.prototype.valueOf=N.prototype.value=x7,N.prototype.first=N.prototype.head,$s&&(N.prototype[$s]=fg),N},Pu=r7();as?((as.exports=Pu)._=Pu,jc._=Pu):Wn._=Pu}).call(eJ)}(Rg,Rg.exports)),Rg.exports}var nJ=tJ();const rJ=({min:e=0,max:t=100,step:n=1,defaultValue:r=100,disabled:i=!1,onChange:o,beforeStart:s,afterEnd:l})=>{const[c,h]=G.useState(!1),[d,g]=G.useState(r),v=G.useRef(0),y=G.useRef(null),x=G.useRef(null);G.useEffect(()=>{if(y.current&&x.current){const S=y.current.getBoundingClientRect(),R=x.current.getBoundingClientRect();v.current=OO(R.width/2/S.width*100)}},[x,y]),G.useEffect(()=>{g(r)},[r]);const E=G.useCallback(nJ.throttle(S=>{if(y.current&&x.current){const R=y.current.getBoundingClientRect(),k=S.clientX-R.left;let O=Math.min(Math.max(k/R.width,0),1);O>=(100-v.current)/100?O=1:O<=v.current/100&&(O=0);const $=Math.round(O*(t-e)/n)*n+e;g($),o&&o($)}},50,{leading:!0,trailing:!0}),[e,t,n,o]),T=G.useCallback(()=>{const S=k=>{h(!0),E(k)},R=()=>{document.removeEventListener("pointermove",S),document.removeEventListener("pointerup",R),l&&l(),setTimeout(()=>{h(!1)},0)};document.addEventListener("pointermove",S),document.addEventListener("pointerup",R)},[E]);let D=(d-e)/(t-e)*100;return D>=100-v.current&&(D=100-v.current),D<=v.current&&(D=v.current),M.jsx("div",{className:sn("slider-container",{disabled:i}),children:M.jsxs("div",{ref:y,className:"slider-track",onClick:S=>{i||c||E(S)},onPointerDown:S=>{S.preventDefault(),!i&&(s&&s(),T())},children:[M.jsx("div",{className:"slider-range",style:{width:`${D}%`}}),M.jsx("div",{ref:x,className:"slider-thumb",style:{left:`${D}%`}})]})})},yE=fy(TB,4),xy=xt.forwardRef((e,t)=>{const n=Dr(),{t:r}=Zn(),{currentColor:i,onColorChange:o,onOpacityChange:s}=e,[l,c]=G.useState(i&&dh(i)||yE[0][0].value),[h,d]=G.useState(()=>{const g=i&&q0(i);return Jo(g)?100:g});return M.jsxs(Ri.Col,{gap:3,children:[M.jsx(rJ,{step:5,defaultValue:h,onChange:g=>{d(g),s(g)},beforeStart:()=>{Or.set(n,!0),Ss.setSplittingOnce(n,!0)},afterEnd:()=>{Or.set(n,!1)},disabled:l===TB[0].value}),M.jsx(Ri.Col,{gap:2,children:yE.map((g,v)=>M.jsx(Ri.Row,{gap:2,children:g.map(y=>M.jsxs("button",{className:`color-select-item ${l===y.value?"active":""} ${p0(y.value)?"no-color":""}`,style:{backgroundColor:p0(y.value)?YQ:y.value,color:JQ(y.value)?Cy:ei},onClick:()=>{c(y.value),y.value===wy&&d(100),o(y.value)},title:r(y.name||"color.unknown"),"aria-label":r(y.name||"color.unknown"),children:[p0(y.value)&&Gq,l===y.value&&jq]},y.value))},v))})]})}),BB=(e,t)=>Be.isMindElement(e,t)||fe.isDrawElement(t)&&Fp(t)||wv(e,t),MB=(e,t)=>{let n=t.fill;return n||(Be.isMindElement(e,t)&&(n=XD(e,t)),(fe.isDrawElement(t)||fe.isCustomGeometryElement(e,t))&&(n=Cv(e,t))),n},RB=(e,t)=>{let n=t.strokeColor;return n||(Be.isMindElement(e,t)&&(n=Z8(e,t)),(fe.isDrawElement(t)||fe.isCustomGeometryElement(e,t))&&(n=U0(e,t))),n},iJ=(e,t)=>{pa.setFillColor(e,null,{getMemorizeKey:z0,callback:(n,r)=>{if(!BB(e,n))return;const i=MB(e,n);if(!QQ(i))return;const o=dh(i),s=zp(t)?o:Y0(o,t);Xe.setNode(e,{fill:s},r)}})},oJ=(e,t)=>{pa.setFillColor(e,null,{getMemorizeKey:z0,callback:(n,r)=>{if(!BB(e,n))return;const i=MB(e,n),o=q0(i);p0(t)?Xe.setNode(e,{fill:null},r):Jo(o)||zp(o)?Xe.setNode(e,{fill:t},r):Xe.setNode(e,{fill:Y0(t,o)},r)}})},sJ=(e,t)=>{pa.setStrokeColor(e,null,{getMemorizeKey:z0,callback:(n,r)=>{const i=RB(e,n),o=dh(i),s=zp(t)?o:Y0(o,t);Xe.setNode(e,{strokeColor:s},r)}})},aJ=(e,t)=>{pa.setStrokeColor(e,null,{getMemorizeKey:z0,callback:(n,r)=>{const i=RB(e,n),o=q0(i);p0(t)?Xe.setNode(e,{strokeColor:null},r):Jo(o)||zp(o)?Xe.setNode(e,{strokeColor:t},r):Xe.setNode(e,{strokeColor:Y0(t,o)},r)}})},lJ=(e,t,n)=>{const r=q0(t);p0(n)?X6.setTextColor(e,null):X6.setTextColor(e,Y0(n,r))},uJ=(e,t,n)=>{const r=dh(t),i=zp(n)?r:Y0(r,n);X6.setTextColor(e,i)},cJ=({board:e,currentColor:t,fontColorIcon:n,title:r})=>{const[i,o]=G.useState(!1),s=F.getBoardContainer(e);return M.jsxs(ca,{sideOffset:12,open:i,onOpenChange:l=>{o(l)},placement:"top",children:[M.jsx(fa,{asChild:!0,children:M.jsx(bn,{className:sn("property-button"),selected:i,visible:!0,icon:n,type:"button",title:r,"aria-label":r,onPointerUp:()=>{o(!i)}})}),M.jsx(ha,{container:s,children:M.jsx(Bo,{padding:4,className:sn(`${tl}`),children:M.jsx(xy,{onColorChange:l=>{lJ(e,t||l,l)},onOpacityChange:l=>{t&&uJ(e,t,l)},currentColor:t})})})]})},fJ=({board:e,currentColor:t,currentStyle:n,title:r,hasStrokeStyle:i,children:o})=>{const[s,l]=G.useState(!1),c=t&&dh(t),h=t?q0(t):100,d=F.getBoardContainer(e),{t:g}=Zn(),v=AB(h)?$q:DB(c)?Wq:void 0,y=x=>{pa.setStrokeStyle(e,x,{getMemorizeKey:z0})};return M.jsxs(ca,{sideOffset:12,open:s,onOpenChange:x=>{l(x)},placement:"top",children:[M.jsx(fa,{asChild:!0,children:M.jsx(bn,{className:sn("property-button"),visible:!0,icon:v,type:"button",title:r,"aria-label":r,onPointerUp:()=>{l(!s)},children:!v&&o})}),M.jsx(ha,{container:d,children:M.jsx(Bo,{padding:4,className:sn(`${tl}`,"stroke-setting",{"has-stroke-style":i}),children:M.jsxs(Ri.Col,{children:[i&&M.jsxs(Ri.Row,{className:sn("stroke-style-picker"),children:[M.jsx(bn,{visible:!0,selected:!n||n===Wi.solid,icon:zq,type:"button",title:`${r}  ${g("stroke.solid")}`,"aria-label":`${r}  ${g("stroke.solid")}`,onPointerUp:()=>{y(Wi.solid)}}),M.jsx(bn,{visible:!0,selected:n===Wi.dashed,icon:Vq,type:"button",title:`${r}  ${g("stroke.dashed")}`,"aria-label":`${r}  ${g("stroke.dashed")}`,onPointerUp:()=>{y(Wi.dashed)}}),M.jsx(bn,{visible:!0,selected:n===Wi.dotted,icon:Uq,type:"button",title:`${r}  ${g("stroke.dotted")}`,"aria-label":`${r}  ${g("stroke.dotted")}`,onPointerUp:()=>{y(Wi.dotted)}})]}),M.jsx(xy,{onColorChange:x=>{aJ(e,x)},onOpacityChange:x=>{sJ(e,x)},currentColor:t})]})})})]})},hJ=({board:e,currentColor:t,title:n,children:r})=>{const[i,o]=G.useState(!1),s=t&&dh(t),l=t?q0(t):100,c=F.getBoardContainer(e),h=!s||AB(l)?Hq:void 0;return M.jsxs(ca,{sideOffset:12,open:i,onOpenChange:d=>{o(d)},placement:"top",children:[M.jsx(fa,{asChild:!0,children:M.jsx(bn,{className:sn("property-button"),visible:!0,icon:h,type:"button",title:n,"aria-label":n,onPointerUp:()=>{o(!i)},children:!h&&r})}),M.jsx(ha,{container:c,children:M.jsx(Bo,{padding:4,className:sn(`${tl}`),children:M.jsx(xy,{onColorChange:d=>{oJ(e,d)},onOpacityChange:d=>{iJ(e,d)},currentColor:t})})})]})},dJ=({board:e,title:t})=>{const{t:n}=Zn(),{appState:r,setAppState:i}=Is();return M.jsx(bn,{className:sn("property-button"),visible:!0,icon:eZ,type:"button",title:t,"aria-label":t,onPointerUp:()=>{const o=Qe(e)[0],s=x8(o);Ka.getLinkElement(s)||Ka.wrapLink(s,n("textPlaceholders.link"),""),setTimeout(()=>{const h=Ka.getLinkElement(s)[0],d=ze.toDOMNode(s,h);i({...r,linkState:{editor:s,targetDom:d,targetElement:h,isEditing:!0,isHovering:!1,isHoveringOrigin:!1}})},0)}})},gJ=({end:e,property:t})=>{const n=Dr(),{marker:r}=t,{t:i}=Zn(),o=s=>{pa.setProperty(n,{[e]:{...t,marker:s}})};return M.jsx(Bo,{padding:2,className:sn(`${tl} ${e==="source"?"source-arrow-island":""} `),children:M.jsxs(Ri.Row,{gap:1,children:[M.jsx(bn,{className:sn("property-button"),visible:!0,icon:kA,type:"button",title:i("line.none"),"aria-label":i("line.none"),selected:r==="none",onPointerUp:()=>{o("none")}}),M.jsx(bn,{className:sn("property-button"),visible:!0,icon:bA,type:"button",title:i("line.arrow"),"aria-label":i("line.arrow"),selected:r==="arrow",onPointerUp:()=>{o("arrow")}})]})})},wE=({board:e,end:t,endProperty:n})=>{const[r,i]=G.useState(!1),o=n==null?void 0:n.marker,s=F.getBoardContainer(e),{t:l}=Zn(),c=`${l(`line.${t}`)}  ${l(`line.${o}`)}`;return M.jsxs(ca,{sideOffset:12,open:r,onOpenChange:h=>{i(h)},placement:"top",children:[M.jsx(fa,{asChild:!0,children:M.jsx(bn,{className:sn(`property-button  ${t==="source"?"source-arrow-button":""}`),visible:!0,icon:o==="none"?kA:bA,type:"button",title:c,"aria-label":c,selected:r,onPointerUp:()=>{i(!r)}})}),M.jsx(ha,{container:s,children:M.jsx(gJ,{end:t,property:n})})]})},pJ=()=>{var y,x;const e=Dr(),{t}=Zn(),n=Qe(e),[r,i]=G.useState(!1),o=G.useRef(r),s=n.length>0&&!mi(e)&&!n.some(fe.isImage),{viewport:l,selection:c,children:h}=e,{refs:d,floatingStyles:g}=Gv({placement:"right-start",middleware:[my(32),vy()]});let v={fill:"red"};if(s&&!r){const E=n.some(k=>wJ(e,k))&&!F.hasBeenTextEditing(e),T=n.some(k=>xJ(e,k)),D=n.some(k=>bB(e,k))&&!F.hasBeenTextEditing(e),S=n.some(k=>CJ(e,k))&&!F.hasBeenTextEditing(e),R=n.every(k=>fe.isArrowLine(k));v={...yJ(e),hasFill:E,hasFontColor:T,hasStroke:D,hasStrokeStyle:S,hasText:T,isLine:R}}return G.useEffect(()=>{if(s){const E=n.length>0;if(!r&&E){const T=Qe(e),D=on(e,T,!1),[S,R]=b.getPoints(D),k=S6(e,g3(e,S)),O=S6(e,g3(e,R)),$=O[0]-k[0],z=O[1]-k[1];d.setPositionReference({getBoundingClientRect(){return{width:$,height:z,x:k[0],y:k[1],top:k[1],left:k[0],right:k[0]+$,bottom:k[1]+z}}})}}},[l,c,h,r]),G.useEffect(()=>{o.current=r},[r]),G.useEffect(()=>{const{pointerUp:E,pointerMove:T}=e;return e.pointerMove=D=>{(gc(e)||dc(e))&&!o.current&&i(!0),T(D)},e.pointerUp=D=>{o.current&&(gc(e)||dc(e))&&i(!1),E(D)},()=>{e.pointerUp=E,e.pointerMove=T}},[e]),M.jsx(M.Fragment,{children:s&&!r&&M.jsx(Bo,{padding:1,className:sn("popup-toolbar",tl),ref:d.setFloating,style:g,children:M.jsxs(Ri.Row,{gap:1,children:[v.hasFontColor&&M.jsx(cJ,{board:e,currentColor:(y=v.marks)==null?void 0:y.color,title:t("popupToolbar.fontColor"),fontColorIcon:M.jsx(Xq,{currentColor:(x=v.marks)==null?void 0:x.color})},0),v.hasStroke&&M.jsx(fJ,{board:e,currentColor:v.strokeColor,currentStyle:v.strokeStyle,title:t("popupToolbar.stroke"),hasStrokeStyle:v.hasStrokeStyle||!1,children:M.jsx("label",{className:sn("stroke-label","color-label"),style:{borderColor:v.strokeColor}})},1),v.hasFill&&M.jsx(hJ,{board:e,currentColor:v.fill,title:t("popupToolbar.fillColor"),children:M.jsx("label",{className:sn("fill-label","color-label",{"color-white":v.fill&&DB(dh(v.fill))}),style:{backgroundColor:v.fill}})},2),v.hasText&&M.jsx(dJ,{board:e,title:t("popupToolbar.link")},3),v.isLine&&M.jsxs(M.Fragment,{children:[M.jsx(wE,{board:e,end:"source",endProperty:v.source},4),M.jsx(wE,{board:e,end:"target",endProperty:v.target},5)]})]})})})},mJ=(e,t)=>{const n=gT(t);return{fill:t.fill,strokeColor:Z8(e,t),strokeStyle:X0(e,t),marks:n}},vJ=(e,t)=>{const n=gT(t);return{fill:t.fill,strokeColor:U0(e,t),strokeStyle:X0(e,t),marks:n,source:(t==null?void 0:t.source)||{},target:(t==null?void 0:t.target)||{}}},yJ=e=>{const t=Qe(e)[0];return Be.isMindElement(e,t)?mJ(e,t):vJ(e,t)},wJ=(e,t)=>Be.isMindElement(e,t)||wv(e,t)?!0:fe.isDrawElement(t)?fe.isShapeElement(t)&&!fe.isImage(t)&&!fe.isText(t)&&Fp(t):!1,bB=(e,t)=>Be.isMindElement(e,t)||Ps.isFreehand(t)?!0:fe.isDrawElement(t)?fe.isShapeElement(t)&&!fe.isImage(t)&&!fe.isText(t)||fe.isArrowLine(t)||fe.isVectorLine(t)||fe.isTable(t):!1,CJ=(e,t)=>bB(e,t),xJ=(e,t)=>Be.isMindElement(e,t)?!0:fe.isDrawElement(t)?Mz([t]):!1,kB=({icon:e,shortcut:t,href:n,children:r,onSelect:i,className:o="",selected:s,...l})=>{const c=wB(l.onClick,i);return M.jsx("a",{...l,href:n,target:"_blank",rel:"noreferrer",className:w4(o,s),title:l.title??l["aria-label"],onClick:c,children:M.jsx(CB,{icon:e,shortcut:t,children:r})})};kB.displayName="MenuItemLink";const OB=()=>{const e=Dr(),{t}=Zn();return M.jsx(Mi,{"data-testid":"save-button",onSelect:()=>{TA(e)},icon:_q,"aria-label":t("menu.saveFile"),shortcut:Cp("CtrlOrCmd+S"),children:t("menu.saveFile")})};OB.displayName="SaveToFile";const IB=()=>{const e=Dr(),t=sS(),{t:n}=Zn(),r=(i,o,s)=>{e.children=i,e.viewport=o||{zoom:1},e.theme={themeColorMode:hr.default},t.update(e.children,{board:e,parent:e,parentG:F.getElementHost(e)}),fn.fitViewport(e)};return M.jsx(Mi,{"data-testid":"open-button",onSelect:()=>{zY(e).then(i=>{r(i.elements,i.viewport)})},icon:Nq,"aria-label":n("menu.open"),children:n("menu.open")})};IB.displayName="OpenFile";const FB=()=>{const e=Dr(),t=G.useContext(jv),{t:n}=Zn();return M.jsx(Mi,{icon:Iq,"data-testid":"image-export-button",onSelect:()=>{t3(e,!0)},submenu:M.jsxs(K0,{onSelect:()=>{var i;const r=new CustomEvent(R0.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});(i=t.onSelect)==null||i.call(t,r)},children:[M.jsx(Mi,{onSelect:()=>{t3(e,!0)},"aria-label":n("menu.exportImage.png"),children:n("menu.exportImage.png")}),M.jsx(Mi,{onSelect:()=>{t3(e,!1)},"aria-label":n("menu.exportImage.jpg"),children:n("menu.exportImage.jpg")})]}),shortcut:Cp("CtrlOrCmd+Shift+E"),"aria-label":n("menu.exportImage"),children:n("menu.exportImage")})};FB.displayName="SaveAsImage";const LB=()=>{const{appState:e,setAppState:t}=Is(),{t:n}=Zn();return M.jsx(Mi,{icon:H3,"data-testid":"reset-button",onSelect:()=>{t({...e,openCleanConfirm:!0})},shortcut:Cp("CtrlOrCmd+Backspace"),"aria-label":n("menu.cleanBoard"),children:n("menu.cleanBoard")})};LB.displayName="CleanBoard";const _B=()=>M.jsx(kB,{icon:Oq,href:"https://github.com/plait-board/drawnix","aria-label":"GitHub",children:"GitHub"});_B.displayName="Socials";const NB=()=>{const{language:e,setLanguage:t,t:n}=Zn(),r=G.useContext(jv);return M.jsx(Mi,{icon:MA,"data-testid":"language-switcher-button",onSelect:()=>{},submenu:M.jsxs(K0,{onSelect:()=>{var o;const i=new CustomEvent(R0.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});(o=r.onSelect)==null||o.call(r,i)},children:[M.jsx(Mi,{onSelect:()=>{t("zh")},"aria-label":n("language.chinese"),selected:e==="zh",children:n("language.chinese")}),M.jsx(Mi,{onSelect:()=>{t("en")},"aria-label":n("language.english"),selected:e==="en",children:n("language.english")}),M.jsx(Mi,{onSelect:()=>{t("ru")},"aria-label":n("language.russian"),selected:e==="ru",children:n("language.russian")})]}),"aria-label":n("language.switcher"),children:n("language.switcher")})};NB.displayName="LanguageSwitcherMenu";const HB=()=>M.jsx("div",{style:{height:"1px",backgroundColor:"var(--color-gray-10)",margin:".5rem 0"}});HB.displayName="MenuSeparator";const EJ=()=>{const e=Dr(),{t}=Zn(),n=F.getBoardContainer(e),r=Qe(e),[i,o]=G.useState(!1),s=e.history.undos.length<=0,l=e.history.redos.length<=0;return M.jsx(Bo,{padding:1,className:sn("app-toolbar",tl),children:M.jsxs(Ri.Row,{gap:1,children:[M.jsxs(ca,{sideOffset:12,open:i,onOpenChange:c=>{o(c)},placement:"bottom-start",children:[M.jsx(fa,{asChild:!0,children:M.jsx(bn,{type:"icon",visible:!0,selected:i,icon:MA,title:t("general.menu"),"aria-label":t("general.menu"),onPointerDown:()=>{o(!i)}})}),M.jsx(ha,{container:n,children:M.jsxs(K0,{onSelect:()=>{o(!1)},children:[M.jsx(IB,{}),M.jsx(OB,{}),M.jsx(FB,{}),M.jsx(LB,{}),M.jsx(HB,{}),M.jsx(NB,{}),M.jsx(_B,{})]})})]},0),M.jsx(bn,{type:"icon",icon:Kq,visible:!0,title:t("general.undo"),"aria-label":t("general.undo"),onPointerUp:()=>{e.undo()},disabled:s},1),M.jsx(bn,{type:"icon",icon:Yq,visible:!0,title:t("general.redo"),"aria-label":t("general.redo"),onPointerUp:()=>{e.redo()},disabled:l},2),r.length>0&&M.jsx(bn,{className:"duplicate",type:"icon",icon:qq,visible:!0,title:t("general.duplicate"),"aria-label":t("general.duplicate"),onPointerUp:()=>{J4(e)}},3),r.length>0&&M.jsx(bn,{className:"trash",type:"icon",icon:H3,visible:!0,title:t("general.delete"),"aria-label":t("general.delete"),onPointerUp:()=>{Q4(e)}},4)]})})},PJ=e=>n=>{const{globalKeyDown:r,keyDown:i}=n;return n.globalKeyDown=o=>{if(!(o.target instanceof HTMLInputElement||o.target instanceof HTMLTextAreaElement)&&(F.getMovingPointInBoard(n)||F.isMovingPointInBoard(n))&&!F.hasBeenTextEditing(n)){if(Qt.isHotkey(["mod+shift+e"],{byKey:!0})(o)){t3(n,!0),o.preventDefault();return}if(Qt.isHotkey(["mod+s"],{byKey:!0})(o)){TA(n),o.preventDefault();return}if(Qt.isHotkey(["mod+backspace"])(o)||Qt.isHotkey(["mod+delete"])(o)){e({openCleanConfirm:!0}),o.preventDefault();return}if(Qt.isHotkey(["mod+u"])(o)&&SB(n),!o.altKey&&!o.metaKey&&!o.ctrlKey){if(o.key==="h"&&(fn.updatePointerType(n,Zt.hand),e({pointer:Zt.hand})),o.key==="v"&&(fn.updatePointerType(n,Zt.selection),e({pointer:Zt.selection})),o.key==="m"&&(yo(n,qr.dnd),fn.updatePointerType(n,Xl.mind),e({pointer:Xl.mind})),o.key==="e"&&(yo(n,qr.drawing),fn.updatePointerType(n,Ko.eraser),e({pointer:Ko.eraser})),o.key==="p"&&(yo(n,qr.drawing),fn.updatePointerType(n,Ko.feltTipPen),e({pointer:Ko.feltTipPen})),o.key==="a"&&!Qt.isHotkey(["mod+a"])(o)&&Qe(n).length===0&&(yo(n,qr.drawing),fn.updatePointerType(n,Ln.straight),e({pointer:Ln.straight})),o.key==="r"||o.key==="o"||o.key==="t"){const l={r:pt.rectangle,o:pt.ellipse,t:pt.text};l[o.key]===pt.text?yo(n,qr.dnd):yo(n,qr.drawing),fn.updatePointerType(n,l[o.key]),e({pointer:l[o.key]})}o.preventDefault();return}}r(o)},n.keyDown=o=>{if(Qt.isHotkey(["mod+z"],{byKey:!0})(o)){n.undo(),o.preventDefault();return}if(Qt.isHotkey(["mod+shift+z"],{byKey:!0})(o)){n.redo(),o.preventDefault();return}i(o)},n};function SJ(){return[Ko.feltTipPen,Ko.eraser]}const CE=(e,t)=>({id:Sn(),type:"freehand",shape:e,points:t}),GB=(e,t,n)=>{const r=pc(e,n,t)||n,i=t.points;return Lp(t.points)&&hc(r,i)||up(i,r)},TJ=(e,t,n)=>{const r=b.getRectangleByPoints([n.anchor,n.focus]);return b3(r,t.points,t.angle)},xE=e=>Qe(e).filter(t=>Ps.isFreehand(t)),DJ=e=>OA[e].strokeColor,AJ=e=>OA[e].fill,BJ=(e,t)=>{const n=DJ(e.theme.themeColorMode);return t.strokeColor||n},MJ=(e,t)=>{const n=Ps.isFreehand(t)&&wv(e,t)?AJ(e.theme.themeColorMode):vv.fill;return t.fill||n};function RJ(e,t){return Math.exp(-(e*e)/(2*t*t))}function bJ(e,t,n){if(e.length<2)return e;const r=Math.floor(n/2),i=[];function o(l){if(l<0){const c=-l-1;if(c<e.length)return[2*e[0][0]-e[c][0],2*e[0][1]-e[c][1]]}else if(l>=e.length){const c=2*e.length-l-1;if(c>=0)return[2*e[e.length-1][0]-e[c][0],2*e[e.length-1][1]-e[c][1]]}return e[l]}function s(l){const c=Math.min(l,e.length-1-l);return Math.min(r,c+Math.floor(r/2))}for(let l=0;l<e.length;l++){let c=0,h=0,d=0;const g=s(l);for(let v=-g;v<=g;v++){const y=l+v,x=o(y);let E=RJ(v,t);if(l<r||l>=e.length-r){const T=1+.5*(1-Math.abs(v)/g);E*=v===0?T:1}c+=x[0]*E,h+=x[1]*E,d+=E}l===0||l===e.length-1?i.push([e[l][0],e[l][1]]):i.push([c/d,h/d])}return i}class jB extends ts{draw(t){const n=Vt(t),r=BJ(this.board,t),i=MJ(this.board,t),o={strokeWidth:n,stroke:r,fill:i,fillStyle:"solid"},s=F.getRoughSVG(this.board).curve(bJ(t.points,1,3),o);return zt(s,"round"),s}canDraw(t){return!0}}class kJ extends Tc{constructor(){super()}initializeGenerator(){this.activeGenerator=bp(this.board,{getRectangle:t=>b.getRectangleByPoints(t.points),getStrokeWidth:()=>gr,getStrokeOpacity:()=>1,hasResizeHandle:()=>gv(this.board,this.element)}),this.generator=new jB(this.board)}initialize(){super.initialize(),this.initializeGenerator(),this.generator.processDrawing(this.element,this.getElementG())}onContextChanged(t,n){t.element!==n.element||t.hasThemeChanged?(this.generator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected})):(t.selected!==n.selected||t.selected)&&this.activeGenerator.processDrawing(this.element,F.getActiveHost(this.board),{selected:this.selected})}destroy(){var t;super.destroy(),(t=this.activeGenerator)==null||t.destroy()}}class OJ{constructor(t={}){this.defaultOptions={smoothing:.65,velocityWeight:.2,curvatureWeight:.3,minDistance:.2,maxPoints:8,pressureSensitivity:.5,tiltSensitivity:.3,velocityThreshold:800,samplingRate:5},this.points=[],this.lastProcessedTime=0,this.movingAverageVelocity=[],this.velocityWindowSize=3,this.options={...this.defaultOptions,...t}}process(t,n={}){const r=n.timestamp??Date.now();if(this.points.length===0){const c={point:t,timestamp:r,...n};return this.points.push(c),this.lastProcessedTime=r,t}if(r-this.lastProcessedTime<this.options.samplingRate&&r-this.lastProcessedTime<2)return null;const i={point:t,timestamp:r,...n};if(!this.checkDistance(t)&&this.points.length>1&&r-this.lastProcessedTime<32)return null;this.updatePoints(i);const s=this.calculateDynamicParameters(i),l=this.smooth(t,s);return this.lastProcessedTime=r,l}reset(){this.points=[],this.lastProcessedTime=0,this.movingAverageVelocity=[]}updatePoints(t){this.points.push(t),this.points.length>this.options.maxPoints&&this.points.shift()}checkDistance(t){if(this.points.length===0)return!0;const n=this.points[this.points.length-1].point,r=this.getDistance(n,t);let i=this.options.minDistance;if(this.movingAverageVelocity.length>0){const o=this.getAverageVelocity();i*=Math.max(.5,Math.min(1.5,o/200))}return r>=i}calculateDynamicParameters(t){const n=this.calculateVelocity(t);this.updateMovingAverage(n);const r=this.getAverageVelocity(),i={...this.options};if(t.pressure!==void 0){const s=Math.pow(t.pressure,1.2);i.smoothing*=1-s*i.pressureSensitivity*.8}const o=Math.min(r/i.velocityThreshold,1);if(i.velocityWeight=.2+o*.3,i.smoothing*=1+o*.2,t.tiltX!==void 0&&t.tiltY!==void 0){const s=Math.sqrt(t.tiltX**2+t.tiltY**2)/90;i.smoothing*=1+s*i.tiltSensitivity*.7}return i}smooth(t,n){if(this.points.length<2)return t;const r=this.calculateWeights(n),i=r.reduce((s,l)=>s+l,0);if(i===0)return t;const o=[0,0];for(let s=0;s<this.points.length;s++){const l=r[s]/i;o[0]+=this.points[s].point[0]*l,o[1]+=this.points[s].point[1]*l}return o}calculateWeights(t){const n=[],r=this.points.length-1;for(let i=0;i<this.points.length;i++){let o=Math.pow(t.smoothing,(r-i)*.8);if(i<r){const s=this.getPointVelocity(i);o*=1+s*t.velocityWeight*.8}if(i>0&&i<r){const s=this.getPointCurvature(i);o*=1+s*t.curvatureWeight*.7}n.push(o)}return n}getDistance(t,n){return Tt(t[0],t[1],n[0],n[1])}calculateVelocity(t){if(this.points.length<2)return 0;const n=this.points[this.points.length-1],r=this.getDistance(n.point,t.point),i=t.timestamp-n.timestamp;return i>0?r/i:0}updateMovingAverage(t){this.movingAverageVelocity.push(t),this.movingAverageVelocity.length>this.velocityWindowSize&&this.movingAverageVelocity.shift()}getAverageVelocity(){return this.movingAverageVelocity.length===0?0:this.movingAverageVelocity.reduce((t,n)=>t+n)/this.movingAverageVelocity.length}getPointVelocity(t){if(t>=this.points.length-1)return 0;const n=this.points[t],r=this.points[t+1],i=this.getDistance(n.point,r.point),o=r.timestamp-n.timestamp;return o>0?i/o:0}getPointCurvature(t){if(t<=0||t>=this.points.length-1)return 0;const n=this.points[t-1].point,r=this.points[t].point,i=this.points[t+1].point,o=this.getDistance(n,r),s=this.getDistance(r,i),l=this.getDistance(n,i),c=(o+s+l)/2;return 4*Math.sqrt(Math.max(0,c*(c-o)*(c-s)*(c-l)))/(o*s*l+1e-4)}}const IJ=e=>{const{pointerDown:t,pointerMove:n,pointerUp:r,globalPointerUp:i}=e;let o=!1,s=!1,l=[],c=null;const h=new jB(e),d=new OJ({smoothing:.7,pressureSensitivity:.6});let g=null;const v=y=>{if(o){const x=F.getPointer(e);s&&l.push(l[0]),g=CE(x,l)}g&&!y&&Xe.insertNode(e,g,[e.children.length]),h==null||h.destroy(),g=null,o=!1,l=[],d.reset()};return e.pointerDown=y=>{const x=SJ();if(F.isInPointer(e,x)&&lh(e)){o=!0,c=[y.x,y.y];const T=d.process(c),D=Dt(e,Bt(e,T[0],T[1]));l.push(D)}t(y)},e.pointerMove=y=>{if(o){const x=[y.x,y.y];c&&Tt(c[0],c[1],x[0],x[1])<8?s=!0:s=!1;const E=d.process(x);if(E){h==null||h.destroy();const T=Dt(e,Bt(e,E[0],E[1]));l.push(T);const D=F.getPointer(e);g=CE(D,l),h.processDrawing(g,F.getElementTopHost(e))}return}n(y)},e.pointerUp=y=>{v(),r(y)},e.globalPointerUp=y=>{v(!0),i(y)},e},FJ=e=>{const t=e,{getDeletedFragment:n,buildFragment:r,insertFragment:i}=t;return t.getDeletedFragment=o=>{const s=xE(t);return s.length&&o.push(...s),n(o)},t.buildFragment=(o,s,l,c)=>{const h=xE(t);if(h.length){const d=lT(t,h,s?[s.x,s.y]:[0,0]);o=cv(o,{text:"",type:eu.elements,elements:d})}return r(o,s,l,c)},t.insertFragment=(o,s,l)=>{var h;const c=(h=o==null?void 0:o.elements)==null?void 0:h.filter(d=>Ps.isFreehand(d));c&&c.length>0&&uT(t,c,s),i(o,s,l)},t},LJ=e=>{const{pointerDown:t,pointerMove:n,pointerUp:r,globalPointerUp:i}=e;let o=!1;const s=new Set,l=d=>{const g=Dt(e,Bt(e,d[0],d[1]));e.children.filter(y=>Ps.isFreehand(y)).forEach(y=>{!s.has(y.id)&&GB(e,y,g)&&(yn.getElementG(y).style.opacity="0.2",s.add(y.id))})},c=()=>{if(s.size>0){const d=e.children.filter(g=>s.has(g.id));d.length>0&&e8.removeElements(e,d)}},h=()=>{o&&(c(),o=!1,s.clear())};return e.pointerDown=d=>{if(F.isInPointer(e,[Ko.eraser])&&lh(e)){o=!0,s.clear();const v=[d.x,d.y];l(v);return}t(d)},e.pointerMove=d=>{if(o){da(e,"with-freehand-erase",()=>{const g=[d.x,d.y];l(g)});return}n(d)},e.pointerUp=d=>{if(o){h();return}r(d)},e.globalPointerUp=d=>{if(o){h();return}i(d)},e},_J=e=>{const{getRectangle:t,drawElement:n,isHit:r,isRectangleHit:i,getOneHitElement:o,isMovable:s,isAlign:l}=e;return e.drawElement=c=>Ps.isFreehand(c.element)?kJ:n(c),e.getRectangle=c=>Ps.isFreehand(c)?b.getRectangleByPoints(c.points):t(c),e.isRectangleHit=(c,h)=>Ps.isFreehand(c)?TJ(e,c,h):i(c,h),e.isHit=(c,h,d)=>Ps.isFreehand(c)?GB(e,c,h):r(c,h,d),e.getOneHitElement=c=>c.every(d=>Ps.isFreehand(d))?UT(e,c):o(c),e.isMovable=c=>Ps.isFreehand(c)?!0:s(c),e.isAlign=c=>Ps.isFreehand(c)?!0:l(c),e.setPluginOptions(mT,{customGeometryTypes:[IA]}),LJ(FJ(IJ(e)))},NJ=()=>{const e=Dr(),{t}=Zn(),n=e.theme;return M.jsx(Bo,{padding:1,className:sn("theme-toolbar",tl),children:M.jsxs("select",{onChange:r=>{const i=r.target.value;fn.updateThemeColor(e,i)},value:n.themeColorMode,children:[M.jsx("option",{value:"default",children:t("theme.default")}),M.jsx("option",{value:"colorful",children:t("theme.colorful")}),M.jsx("option",{value:"soft",children:t("theme.soft")}),M.jsx("option",{value:"retro",children:t("theme.retro")}),M.jsx("option",{value:"dark",children:t("theme.dark")}),M.jsx("option",{value:"starry",children:t("theme.starry")})]})})},$B=new WeakMap,EE=e=>!!$B.get(e),WB=(e,t)=>{$B.set(e,t)},HJ=e=>n=>{const{pointerDown:r}=n;return n.pointerDown=i=>{R6(i)&&!EE(n)&&(WB(n,!0),e({isPencilMode:!0})),!(EE(n)&&!R6(i))&&r(i)},n},GJ=()=>{const e=Dr(),{appState:t,setAppState:n}=Is();return M.jsx(M.Fragment,{children:t.isPencilMode&&M.jsx("div",{className:"pencil-mode-toolbar",children:M.jsx(bn,{type:"button",visible:!0,title:"X Pencil","aria-label":"Arrow",label:"Pencil X",onPointerDown:()=>{n({...t,isPencilMode:!1}),WB(e,!1)}})})})};function jJ({initialOpen:e=!1,open:t,onOpenChange:n}={}){const[r,i]=G.useState(e),[o,s]=G.useState(),[l,c]=G.useState(),h=t??r,d=n??i,g=Gv({open:h,onOpenChange:d}),v=g.context,y=hB(v,{enabled:t==null}),x=dB(v,{outsidePressEvent:"mousedown"}),E=pB(v),T=gB([y,x,E]);return G.useMemo(()=>({open:h,setOpen:d,...T,...g,labelId:o,descriptionId:l,setLabelId:s,setDescriptionId:c}),[h,d,T,g,o,l])}const zB=G.createContext(null),Vp=()=>{const e=G.useContext(zB);if(e==null)throw new Error("Dialog components must be wrapped in <Dialog />");return e};function C4({children:e,...t}){const n=jJ(t);return M.jsx(zB.Provider,{value:n,children:e})}G.forwardRef(function({children:t,asChild:n=!1,...r},i){const o=Vp(),s=t.ref,l=Nv([o.refs.setReference,i,s]);return n&&G.isValidElement(t)?G.cloneElement(t,o.getReferenceProps({ref:l,...r,...t.props,"data-state":o.open?"open":"closed"})):M.jsx("button",{ref:l,"data-state":o.open?"open":"closed",...o.getReferenceProps(r),children:t})});const x4=G.forwardRef(function(t,n){const{context:r,...i}=Vp(),o=Nv([i.refs.setFloating,n]);return r.open?M.jsx(uB,{root:t.container,children:M.jsx(_Q,{className:"Dialog-overlay",lockScroll:!0,children:M.jsx(fB,{context:r,children:M.jsx("div",{ref:o,"aria-labelledby":i.labelId,"aria-describedby":i.descriptionId,...i.getFloatingProps(t),children:t.children})})})}):null});G.forwardRef(function({children:t,...n},r){const{setLabelId:i}=Vp(),o=Wp();return G.useLayoutEffect(()=>(i(o),()=>i(void 0)),[o,i]),M.jsx("h2",{...n,ref:r,id:o,children:t})});G.forwardRef(function({children:t,...n},r){const{setDescriptionId:i}=Vp(),o=Wp();return G.useLayoutEffect(()=>(i(o),()=>i(void 0)),[o,i]),M.jsx("p",{...n,ref:r,id:o,children:t})});G.forwardRef(function(t,n){const{setOpen:r}=Vp();return M.jsx("button",{type:"button",...t,ref:n,onClick:()=>r(!1)})});const $J="modulepreload",WJ=function(e){return"/"+e},PE={},VB=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=WJ(c),c in PE)return;PE[c]=!0;const h=c.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":$J,h||(g.as="script"),g.crossOrigin="",g.href=c,l&&g.setAttribute("nonce",l),document.head.appendChild(g),h)return new Promise((v,y)=>{g.addEventListener("load",v),g.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return i.then(s=>{for(const l of s||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},UB=({children:e})=>M.jsx("div",{className:"ttd-dialog-panels",children:e}),Y3=({label:e,children:t,panelAction:n,panelActionDisabled:r=!1,onTextSubmitInProgress:i,renderTopRight:o,renderSubmitShortcut:s,renderBottomRight:l})=>M.jsxs("div",{className:"ttd-dialog-panel",children:[M.jsxs("div",{className:"ttd-dialog-panel__header",children:[M.jsx("label",{children:e}),o==null?void 0:o()]}),t,M.jsxs("div",{className:sn("ttd-dialog-panel-button-container",{invisible:!n}),style:{display:"flex",alignItems:"center"},children:[M.jsx("button",{className:"ttd-dialog-panel-button drawnix-button ",onClick:n&&n.action,disabled:r||i,children:M.jsxs("div",{className:sn({invisible:i}),children:[n==null?void 0:n.label,(n==null?void 0:n.icon)&&M.jsx("span",{children:n.icon})]})}),!r&&!i&&(s==null?void 0:s()),l==null?void 0:l()]})]}),SE={CTRL_OR_CMD:VO||d3?"metaKey":"ctrlKey",ENTER:"Enter"},XB=({input:e,placeholder:t,onChange:n,onKeyboardSubmit:r})=>{const i=G.useRef(null),o=G.useRef(r);return o.current=r,G.useEffect(()=>{if(!o.current)return;const s=i.current;if(s){const l=c=>{var h;c[SE.CTRL_OR_CMD]&&c.key===SE.ENTER&&(c.preventDefault(),(h=o.current)==null||h.call(o))};return s.addEventListener(R0.KEYDOWN,l),()=>{s.removeEventListener(R0.KEYDOWN,l)}}},[]),M.jsx("textarea",{className:"ttd-dialog-input",onChange:n,value:e,placeholder:t,autoFocus:!0,ref:i})},zJ=({error:e})=>M.jsxs("div",{"data-testid":"ttd-dialog-output-error",className:"ttd-dialog-output-error",children:["Error! ",M.jsx("p",{children:e})]}),KB=({error:e,value:t,loaded:n})=>{const r=[SD,EA,fT,BA],i={readonly:!0,hideScrollbar:!1,disabledScrollOnNonFocus:!0,themeColors:ID};return M.jsxs("div",{className:"ttd-dialog-output-wrapper",children:[e&&M.jsx(zJ,{error:e.message}),M.jsx("div",{style:{opacity:e?"0.15":1},className:"ttd-dialog-output-canvas-container",children:M.jsx(pT,{value:t,options:i,plugins:r,children:M.jsx(aS,{})})})]})},YB=()=>M.jsxs("div",{className:"ttd-dialog-submit-shortcut",children:[M.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:Cp("CtrlOrCmd")}),M.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:Cp("Enter")})]}),VJ=`flowchart TD
 A[Christmas] -->|Get money| B(Go shopping)
 B --> C{Let me think}
 C -->|One| D[Laptop]
 C -->|Two| E[iPhone]
 C -->|Three| F[Car]`,UJ=()=>{const{appState:e,setAppState:t}=Is(),{t:n,language:r}=Zn(),[i,o]=G.useState({loaded:!1,api:Promise.resolve({parseMermaidToDrawnix:async()=>({elements:[]})})});G.useEffect(()=>{(async()=>{try{const T=await VB(()=>import("./index-BXE7jjaw.js").then(D=>D.b6),[]);o({loaded:!0,api:Promise.resolve(T)})}catch(T){console.error("Failed to load mermaid library:",T),v(new Error(n("dialog.error.loadMermaid")))}})()},[]);const[s,l]=G.useState(()=>VJ),[c,h]=G.useState(()=>[]),d=G.useDeferredValue(s.trim()),[g,v]=G.useState(null),y=Dr();G.useEffect(()=>{(async()=>{try{const T=await i.api;let D;try{D=await T.parseMermaidToDrawnix(d)}catch{D=await T.parseMermaidToDrawnix(d.replace(/"/g,"'"))}const{elements:S}=D;h(S),v(null)}catch(T){v(T)}})()},[d,i]);const x=()=>{if(!c.length)return;const E=F.getBoardContainer(y).getBoundingClientRect(),T=[E.width/2,E.height/2],D=y.viewport.zoom,S=N0(y),R=S[0]+T[0]/D,k=S[1]+T[1]/D,O=c,$=b.getBoundingRectangle(O.filter(K=>!So.isGroup(K)).map(K=>b.getRectangleByPoints(K.points))),z=[R-$.width/2,k-$.height/2];y.insertFragment({elements:JSON.parse(JSON.stringify(O))},z,ua.paste),t({...e,openDialogType:null})};return M.jsxs(M.Fragment,{children:[M.jsx("div",{className:"ttd-dialog-desc",children:r==="zh"?M.jsxs(M.Fragment,{children:[n("dialog.mermaid.description")," ",M.jsx("a",{href:"https://mermaid.js.org/syntax/flowchart.html",target:"_blank",rel:"noreferrer",children:n("dialog.mermaid.flowchart")}),"",M.jsx("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",target:"_blank",rel:"noreferrer",children:n("dialog.mermaid.sequence")})," ",""," ",M.jsx("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",target:"_blank",rel:"noreferrer",children:n("dialog.mermaid.class")}),n("dialog.mermaid.otherTypes")]}):M.jsxs(M.Fragment,{children:[n("dialog.mermaid.description")," ",M.jsx("a",{href:"https://mermaid.js.org/syntax/flowchart.html",target:"_blank",rel:"noreferrer",children:n("dialog.mermaid.flowchart")}),","," ",M.jsx("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",target:"_blank",rel:"noreferrer",children:n("dialog.mermaid.sequence")}),","," ",M.jsx("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",target:"_blank",rel:"noreferrer",children:n("dialog.mermaid.class")}),n("dialog.mermaid.otherTypes")]})}),M.jsxs(UB,{children:[M.jsx(Y3,{label:n("dialog.mermaid.syntax"),children:M.jsx(XB,{input:s,placeholder:n("dialog.mermaid.placeholder"),onChange:E=>l(E.target.value),onKeyboardSubmit:()=>{x()}})}),M.jsx(Y3,{label:n("dialog.mermaid.preview"),panelAction:{action:()=>{x()},label:n("dialog.mermaid.insert")},renderSubmitShortcut:()=>M.jsx(YB,{}),children:M.jsx(KB,{value:c,loaded:i.loaded,error:g})})]})]})},XJ=()=>{const{appState:e,setAppState:t}=Is(),{t:n,language:r}=Zn(),[i,o]=G.useState({loaded:!1,api:Promise.resolve({parseMarkdownToDrawnix:(E,T)=>null})});G.useEffect(()=>{(async()=>{try{const T=await VB(()=>import("./index-D5O5Ora_.js"),__vite__mapDeps([0,1]));o({loaded:!0,api:Promise.resolve(T)})}catch(T){console.error("Failed to load mermaid library:",T),v(new Error(n("dialog.error.loadMermaid")))}})()},[]);const[s,l]=G.useState(()=>n("markdown.example")),[c,h]=G.useState(()=>[]),d=G.useDeferredValue(s.trim()),[g,v]=G.useState(null),y=Dr();G.useEffect(()=>{l(n("markdown.example"))},[r]),G.useEffect(()=>{(async()=>{try{const T=await i.api;let D;try{D=await T.parseMarkdownToDrawnix(d)}catch{D=await T.parseMarkdownToDrawnix(d.replace(/"/g,"'"))}const S=D;S.points=[[0,0]],S&&(h([S]),v(null))}catch(T){v(T)}})()},[d,i]);const x=()=>{if(!c.length)return;const E=F.getBoardContainer(y).getBoundingClientRect(),T=[E.width/4,E.height/2-20],D=y.viewport.zoom,S=N0(y),R=S[0]+T[0]/D,k=S[1]+T[1]/D,O=c;y.insertFragment({elements:JSON.parse(JSON.stringify(O))},[R,k],ua.paste),t({...e,openDialogType:null})};return M.jsxs(M.Fragment,{children:[M.jsx("div",{className:"ttd-dialog-desc",children:n("dialog.markdown.description")}),M.jsxs(UB,{children:[M.jsx(Y3,{label:n("dialog.markdown.syntax"),children:M.jsx(XB,{input:s,placeholder:n("dialog.markdown.placeholder"),onChange:E=>l(E.target.value),onKeyboardSubmit:()=>{x()}})}),M.jsx(Y3,{label:n("dialog.markdown.preview"),panelAction:{action:()=>{x()},label:n("dialog.markdown.insert")},renderSubmitShortcut:()=>M.jsx(YB,{}),children:M.jsx(KB,{value:c,loaded:i.loaded,error:g})})]})]})},KJ=({container:e})=>{const{appState:t,setAppState:n}=Is();return M.jsxs(M.Fragment,{children:[M.jsx(C4,{open:t.openDialogType===Gf.mermaidToDrawnix,onOpenChange:r=>{n({...t,openDialogType:r?Gf.mermaidToDrawnix:null})},children:M.jsx(x4,{className:"Dialog ttd-dialog",container:e,children:M.jsx(UJ,{})})}),M.jsx(C4,{open:t.openDialogType===Gf.markdownToDrawnix,onOpenChange:r=>{n({...t,openDialogType:r?Gf.markdownToDrawnix:null})},children:M.jsx(x4,{className:"Dialog ttd-dialog",container:e,children:M.jsx(XJ,{})})})]})},YJ=({container:e})=>{const{appState:t,setAppState:n}=Is(),{t:r}=Zn(),i=Dr();return M.jsx(C4,{open:t.openCleanConfirm,onOpenChange:o=>{n({...t,openCleanConfirm:o})},children:M.jsxs(x4,{className:"clean-confirm",container:e,children:[M.jsx("h2",{className:"clean-confirm__title",children:r("cleanConfirm.title")}),M.jsx("p",{className:"clean-confirm__description",children:r("cleanConfirm.description")}),M.jsxs("div",{className:"clean-confirm__actions",children:[M.jsx("button",{className:"clean-confirm__button clean-confirm__button--cancel",onClick:()=>{n({...t,openCleanConfirm:!1})},children:r("cleanConfirm.cancel")}),M.jsx("button",{className:"clean-confirm__button clean-confirm__button--ok",autoFocus:!0,onClick:()=>{i.deleteFragment(i.children),n({...t,openCleanConfirm:!1})},children:r("cleanConfirm.ok")})]})]})})},TE=e=>{const{appState:t}=e;return t&&t.linkState&&t.linkState.isHovering},DE=e=>{const{appState:t}=e;return t&&t.linkState&&t.linkState.isEditing},qJ=e=>n=>{const{pointerMove:r}=n;let i=null,o=null;return n.pointerMove=s=>{(F.isPointer(n,Zt.selection)||F.isPointer(n,Zt.hand))&&!gc(n)&&!Vl(n)&&!TE(n)&&!DE(n)&&da(n,"with-text-link",()=>{const l=s.target.closest(".plait-board-link");if(l&&l!==i){const c=l.closest(".plait-text-container"),h=ze.toSlateNode(void 0,c),d=ze.toSlateNode(void 0,l);i=l,e({linkState:{targetDom:l,targetElement:d,editor:h,isEditing:!1,isHovering:!1,isHoveringOrigin:!0}}),clearTimeout(o)}else!l&&i&&(o=setTimeout(()=>{!TE(n)&&!DE(n)&&e({linkState:null})},300),i=null)}),r(s)},n},ZJ=()=>{var T,D,S,R;const{t:e}=Zn(),[t,n]=G.useState(""),{appState:r,setAppState:i}=Is(),o=Dr(),{refs:s,floatingStyles:l}=Gv({placement:"top",middleware:[my(20),vy()]}),c=r.linkState,h=((T=r.linkState)==null?void 0:T.targetDom)||null,d=((D=r.linkState)==null?void 0:D.isEditing)||!1,g=((S=r.linkState)==null?void 0:S.isHoveringOrigin)||!1,v=((R=r.linkState)==null?void 0:R.isHovering)||!1,y=d||g||v,x=G.useRef(r.linkState);G.useEffect(()=>{x.current=r.linkState,r.linkState?n(r.linkState.targetElement.url):n("")},[r.linkState]),G.useEffect(()=>{if(h){const k=h.getBoundingClientRect();s.setPositionReference({getBoundingClientRect(){return{x:k.x,y:k.y,width:k.width,height:k.height,top:k.y,left:k.x,right:k.x+k.width,bottom:k.y+k.height}}})}},[o.viewport,h]),G.useEffect(()=>{const k=O=>{if(s.floating.current&&!s.floating.current.contains(O.target)){if(x.current){const $=Ka.getLinkElement(x.current.editor);$&&!$[0].url.trim()&&Ka.unwrapLink(x.current.editor)}i({...r,linkState:null})}};return document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[]);const E=()=>{if(t!==c.targetElement.url){const O=c.editor,$=c.targetElement,z=ze.findPath(O,$);Re.setNodes(O,{url:t},{at:z})}const k=Ka.getLinkElement(c.editor);i({...r,linkState:{...r.linkState,targetElement:k[0],isEditing:!1,isHoveringOrigin:!0}})};return y&&M.jsx(Bo,{ref:s.setFloating,style:l,padding:1,className:sn("link-popup"),onPointerEnter:()=>{v||i({...r,linkState:{...r.linkState,isHovering:!0}})},onPointerLeave:()=>{d||i({...r,linkState:{...r.linkState,isHovering:!1}})},children:M.jsx(Ri.Row,{gap:1,align:"center",children:d?M.jsxs(M.Fragment,{children:[M.jsx("input",{type:"text",value:t,onChange:k=>{n(k.target.value)},onKeyDown:k=>{k.key==="Enter"&&E()},className:"link-popup__input",autoFocus:!0}),M.jsx(bn,{type:"icon",visible:!0,icon:H3,title:e("popupLink.delLink"),"aria-label":e("popupLink.delLink"),onPointerDown:()=>{const k=c.editor,O=c.targetElement,$=ze.findPath(k,O);Re.unwrapNodes(k,{at:$}),i({...r,linkState:null})}})]}):M.jsxs(M.Fragment,{children:[M.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"link-popup__link",children:t}),M.jsx(bn,{className:"link-popup__edit",type:"icon",visible:!0,icon:hy,title:"Edit link","aria-label":"Edit link",onPointerDown:({event:k})=>{k.preventDefault(),i({...r,linkState:{...r.linkState,isEditing:!0}})}}),M.jsx(bn,{type:"icon",visible:!0,icon:H3,title:e("popupLink.delLink"),"aria-label":e("popupLink.delLink"),onPointerDown:()=>{const k=c.editor,O=c.targetElement,$=ze.findPath(k,O);Re.unwrapNodes(k,{at:$}),i({...r,linkState:null})}})]})})})},QJ=({value:e,viewport:t,theme:n,onChange:r,onSelectionChange:i,onViewportChange:o,onThemeChange:s,onValueChange:l,afterInit:c})=>{const h={readonly:!1,hideScrollbar:!1,disabledScrollOnNonFocus:!1,themeColors:ID},[d,g]=G.useState(()=>{const D=new EY(window.navigator.userAgent);return{pointer:Zt.hand,isMobile:D.mobile()!==null,isPencilMode:!1,openDialogType:null,openCleanConfirm:!1}}),[v,y]=G.useState(null);v&&(v.appState=d);const x=D=>{g({...d,...D})},E=[SD,fT,EA,PY,BA,PJ(x),_J,HJ(x),qJ(x)],T=G.useRef(null);return M.jsx(sq,{children:M.jsx(yB.Provider,{value:{appState:d,setAppState:g},children:M.jsx("div",{className:sn("drawnix",{"drawnix--mobile":d.isMobile}),ref:T,children:M.jsxs(pT,{value:e,viewport:t,theme:n,options:h,plugins:E,onChange:D=>{r&&r(D)},onSelectionChange:i,onViewportChange:o,onThemeChange:s,onValueChange:l,children:[M.jsx(aS,{afterInit:D=>{y(D),c&&c(D)}}),M.jsx(EJ,{}),M.jsx(XQ,{}),M.jsx(KQ,{}),M.jsx(NJ,{}),M.jsx(pJ,{}),M.jsx(ZJ,{}),M.jsx(GJ,{}),M.jsx(KJ,{container:T.current}),M.jsx(YJ,{container:T.current})]})})})})};function _m(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var q5={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var AE;function JJ(){return AE||(AE=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,o){function s(h,d){if(!i[h]){if(!r[h]){var g=typeof _m=="function"&&_m;if(!d&&g)return g(h,!0);if(l)return l(h,!0);var v=new Error("Cannot find module '"+h+"'");throw v.code="MODULE_NOT_FOUND",v}var y=i[h]={exports:{}};r[h][0].call(y.exports,function(x){var E=r[h][1][x];return s(E||x)},y,y.exports,n,r,i,o)}return i[h].exports}for(var l=typeof _m=="function"&&_m,c=0;c<o.length;c++)s(o[c]);return s}({1:[function(n,r,i){(function(o){var s=o.MutationObserver||o.WebKitMutationObserver,l;if(s){var c=0,h=new s(x),d=o.document.createTextNode("");h.observe(d,{characterData:!0}),l=function(){d.data=c=++c%2}}else if(!o.setImmediate&&typeof o.MessageChannel<"u"){var g=new o.MessageChannel;g.port1.onmessage=x,l=function(){g.port2.postMessage(0)}}else"document"in o&&"onreadystatechange"in o.document.createElement("script")?l=function(){var T=o.document.createElement("script");T.onreadystatechange=function(){x(),T.onreadystatechange=null,T.parentNode.removeChild(T),T=null},o.document.documentElement.appendChild(T)}:l=function(){setTimeout(x,0)};var v,y=[];function x(){v=!0;for(var T,D,S=y.length;S;){for(D=y,y=[],T=-1;++T<S;)D[T]();S=y.length}v=!1}r.exports=E;function E(T){y.push(T)===1&&!v&&l()}}).call(this,typeof As<"u"?As:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var o=n(1);function s(){}var l={},c=["REJECTED"],h=["FULFILLED"],d=["PENDING"];r.exports=g;function g(O){if(typeof O!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,O!==s&&E(this,O)}g.prototype.catch=function(O){return this.then(null,O)},g.prototype.then=function(O,$){if(typeof O!="function"&&this.state===h||typeof $!="function"&&this.state===c)return this;var z=new this.constructor(s);if(this.state!==d){var K=this.state===h?O:$;y(z,K,this.outcome)}else this.queue.push(new v(z,O,$));return z};function v(O,$,z){this.promise=O,typeof $=="function"&&(this.onFulfilled=$,this.callFulfilled=this.otherCallFulfilled),typeof z=="function"&&(this.onRejected=z,this.callRejected=this.otherCallRejected)}v.prototype.callFulfilled=function(O){l.resolve(this.promise,O)},v.prototype.otherCallFulfilled=function(O){y(this.promise,this.onFulfilled,O)},v.prototype.callRejected=function(O){l.reject(this.promise,O)},v.prototype.otherCallRejected=function(O){y(this.promise,this.onRejected,O)};function y(O,$,z){o(function(){var K;try{K=$(z)}catch(te){return l.reject(O,te)}K===O?l.reject(O,new TypeError("Cannot resolve promise with itself")):l.resolve(O,K)})}l.resolve=function(O,$){var z=T(x,$);if(z.status==="error")return l.reject(O,z.value);var K=z.value;if(K)E(O,K);else{O.state=h,O.outcome=$;for(var te=-1,se=O.queue.length;++te<se;)O.queue[te].callFulfilled($)}return O},l.reject=function(O,$){O.state=c,O.outcome=$;for(var z=-1,K=O.queue.length;++z<K;)O.queue[z].callRejected($);return O};function x(O){var $=O&&O.then;if(O&&(typeof O=="object"||typeof O=="function")&&typeof $=="function")return function(){$.apply(O,arguments)}}function E(O,$){var z=!1;function K(ne){z||(z=!0,l.reject(O,ne))}function te(ne){z||(z=!0,l.resolve(O,ne))}function se(){$(te,K)}var me=T(se);me.status==="error"&&K(me.value)}function T(O,$){var z={};try{z.value=O($),z.status="success"}catch(K){z.status="error",z.value=K}return z}g.resolve=D;function D(O){return O instanceof this?O:l.resolve(new this(s),O)}g.reject=S;function S(O){var $=new this(s);return l.reject($,O)}g.all=R;function R(O){var $=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=O.length,K=!1;if(!z)return this.resolve([]);for(var te=new Array(z),se=0,me=-1,ne=new this(s);++me<z;)oe(O[me],me);return ne;function oe(ve,ge){$.resolve(ve).then(Me,function(Pe){K||(K=!0,l.reject(ne,Pe))});function Me(Pe){te[ge]=Pe,++se===z&&!K&&(K=!0,l.resolve(ne,te))}}}g.race=k;function k(O){var $=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=O.length,K=!1;if(!z)return this.resolve([]);for(var te=-1,se=new this(s);++te<z;)me(O[te]);return se;function me(ne){$.resolve(ne).then(function(oe){K||(K=!0,l.resolve(se,oe))},function(oe){K||(K=!0,l.reject(se,oe))})}}},{1:1}],3:[function(n,r,i){(function(o){typeof o.Promise!="function"&&(o.Promise=n(2))}).call(this,typeof As<"u"?As:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H};function s(H,q){if(!(H instanceof q))throw new TypeError("Cannot call a class as a function")}function l(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var c=l();function h(){try{if(!c||!c.open)return!1;var H=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),q=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!H||q)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function d(H,q){H=H||[],q=q||{};try{return new Blob(H,q)}catch(ee){if(ee.name!=="TypeError")throw ee;for(var W=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,ie=new W,ue=0;ue<H.length;ue+=1)ie.append(H[ue]);return ie.getBlob(q.type)}}typeof Promise>"u"&&n(3);var g=Promise;function v(H,q){q&&H.then(function(W){q(null,W)},function(W){q(W)})}function y(H,q,W){typeof q=="function"&&H.then(q),typeof W=="function"&&H.catch(W)}function x(H){return typeof H!="string"&&(console.warn(H+" used as a key, but it is not a string."),H=String(H)),H}function E(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var T="local-forage-detect-blob-support",D=void 0,S={},R=Object.prototype.toString,k="readonly",O="readwrite";function $(H){for(var q=H.length,W=new ArrayBuffer(q),ie=new Uint8Array(W),ue=0;ue<q;ue++)ie[ue]=H.charCodeAt(ue);return W}function z(H){return new g(function(q){var W=H.transaction(T,O),ie=d([""]);W.objectStore(T).put(ie,"key"),W.onabort=function(ue){ue.preventDefault(),ue.stopPropagation(),q(!1)},W.oncomplete=function(){var ue=navigator.userAgent.match(/Chrome\/(\d+)/),ee=navigator.userAgent.match(/Edge\//);q(ee||!ue||parseInt(ue[1],10)>=43)}}).catch(function(){return!1})}function K(H){return typeof D=="boolean"?g.resolve(D):z(H).then(function(q){return D=q,D})}function te(H){var q=S[H.name],W={};W.promise=new g(function(ie,ue){W.resolve=ie,W.reject=ue}),q.deferredOperations.push(W),q.dbReady?q.dbReady=q.dbReady.then(function(){return W.promise}):q.dbReady=W.promise}function se(H){var q=S[H.name],W=q.deferredOperations.pop();if(W)return W.resolve(),W.promise}function me(H,q){var W=S[H.name],ie=W.deferredOperations.pop();if(ie)return ie.reject(q),ie.promise}function ne(H,q){return new g(function(W,ie){if(S[H.name]=S[H.name]||xe(),H.db)if(q)te(H),H.db.close();else return W(H.db);var ue=[H.name];q&&ue.push(H.version);var ee=c.open.apply(c,ue);q&&(ee.onupgradeneeded=function(De){var He=ee.result;try{He.createObjectStore(H.storeName),De.oldVersion<=1&&He.createObjectStore(T)}catch(Ve){if(Ve.name==="ConstraintError")console.warn('The database "'+H.name+'" has been upgraded from version '+De.oldVersion+" to version "+De.newVersion+', but the storage "'+H.storeName+'" already exists.');else throw Ve}}),ee.onerror=function(De){De.preventDefault(),ie(ee.error)},ee.onsuccess=function(){var De=ee.result;De.onversionchange=function(He){He.target.close()},W(De),se(H)}})}function oe(H){return ne(H,!1)}function ve(H){return ne(H,!0)}function ge(H,q){if(!H.db)return!0;var W=!H.db.objectStoreNames.contains(H.storeName),ie=H.version<H.db.version,ue=H.version>H.db.version;if(ie&&(H.version!==q&&console.warn('The database "'+H.name+`" can't be downgraded from version `+H.db.version+" to version "+H.version+"."),H.version=H.db.version),ue||W){if(W){var ee=H.db.version+1;ee>H.version&&(H.version=ee)}return!0}return!1}function Me(H){return new g(function(q,W){var ie=new FileReader;ie.onerror=W,ie.onloadend=function(ue){var ee=btoa(ue.target.result||"");q({__local_forage_encoded_blob:!0,data:ee,type:H.type})},ie.readAsBinaryString(H)})}function Pe(H){var q=$(atob(H.data));return d([q],{type:H.type})}function he(H){return H&&H.__local_forage_encoded_blob}function le(H){var q=this,W=q._initReady().then(function(){var ie=S[q._dbInfo.name];if(ie&&ie.dbReady)return ie.dbReady});return y(W,H,H),W}function we(H){te(H);for(var q=S[H.name],W=q.forages,ie=0;ie<W.length;ie++){var ue=W[ie];ue._dbInfo.db&&(ue._dbInfo.db.close(),ue._dbInfo.db=null)}return H.db=null,oe(H).then(function(ee){return H.db=ee,ge(H)?ve(H):ee}).then(function(ee){H.db=q.db=ee;for(var De=0;De<W.length;De++)W[De]._dbInfo.db=ee}).catch(function(ee){throw me(H,ee),ee})}function U(H,q,W,ie){ie===void 0&&(ie=1);try{var ue=H.db.transaction(H.storeName,q);W(null,ue)}catch(ee){if(ie>0&&(!H.db||ee.name==="InvalidStateError"||ee.name==="NotFoundError"))return g.resolve().then(function(){if(!H.db||ee.name==="NotFoundError"&&!H.db.objectStoreNames.contains(H.storeName)&&H.version<=H.db.version)return H.db&&(H.version=H.db.version+1),ve(H)}).then(function(){return we(H).then(function(){U(H,q,W,ie-1)})}).catch(W);W(ee)}}function xe(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function Ie(H){var q=this,W={db:null};if(H)for(var ie in H)W[ie]=H[ie];var ue=S[W.name];ue||(ue=xe(),S[W.name]=ue),ue.forages.push(q),q._initReady||(q._initReady=q.ready,q.ready=le);var ee=[];function De(){return g.resolve()}for(var He=0;He<ue.forages.length;He++){var Ve=ue.forages[He];Ve!==q&&ee.push(Ve._initReady().catch(De))}var We=ue.forages.slice(0);return g.all(ee).then(function(){return W.db=ue.db,oe(W)}).then(function(qe){return W.db=qe,ge(W,q._defaultConfig.version)?ve(W):qe}).then(function(qe){W.db=ue.db=qe,q._dbInfo=W;for(var st=0;st<We.length;st++){var Nt=We[st];Nt!==q&&(Nt._dbInfo.db=W.db,Nt._dbInfo.version=W.version)}})}function Le(H,q){var W=this;H=x(H);var ie=new g(function(ue,ee){W.ready().then(function(){U(W._dbInfo,k,function(De,He){if(De)return ee(De);try{var Ve=He.objectStore(W._dbInfo.storeName),We=Ve.get(H);We.onsuccess=function(){var qe=We.result;qe===void 0&&(qe=null),he(qe)&&(qe=Pe(qe)),ue(qe)},We.onerror=function(){ee(We.error)}}catch(qe){ee(qe)}})}).catch(ee)});return v(ie,q),ie}function $e(H,q){var W=this,ie=new g(function(ue,ee){W.ready().then(function(){U(W._dbInfo,k,function(De,He){if(De)return ee(De);try{var Ve=He.objectStore(W._dbInfo.storeName),We=Ve.openCursor(),qe=1;We.onsuccess=function(){var st=We.result;if(st){var Nt=st.value;he(Nt)&&(Nt=Pe(Nt));var ln=H(Nt,st.key,qe++);ln!==void 0?ue(ln):st.continue()}else ue()},We.onerror=function(){ee(We.error)}}catch(st){ee(st)}})}).catch(ee)});return v(ie,q),ie}function Fe(H,q,W){var ie=this;H=x(H);var ue=new g(function(ee,De){var He;ie.ready().then(function(){return He=ie._dbInfo,R.call(q)==="[object Blob]"?K(He.db).then(function(Ve){return Ve?q:Me(q)}):q}).then(function(Ve){U(ie._dbInfo,O,function(We,qe){if(We)return De(We);try{var st=qe.objectStore(ie._dbInfo.storeName);Ve===null&&(Ve=void 0);var Nt=st.put(Ve,H);qe.oncomplete=function(){Ve===void 0&&(Ve=null),ee(Ve)},qe.onabort=qe.onerror=function(){var ln=Nt.error?Nt.error:Nt.transaction.error;De(ln)}}catch(ln){De(ln)}})}).catch(De)});return v(ue,W),ue}function Ze(H,q){var W=this;H=x(H);var ie=new g(function(ue,ee){W.ready().then(function(){U(W._dbInfo,O,function(De,He){if(De)return ee(De);try{var Ve=He.objectStore(W._dbInfo.storeName),We=Ve.delete(H);He.oncomplete=function(){ue()},He.onerror=function(){ee(We.error)},He.onabort=function(){var qe=We.error?We.error:We.transaction.error;ee(qe)}}catch(qe){ee(qe)}})}).catch(ee)});return v(ie,q),ie}function et(H){var q=this,W=new g(function(ie,ue){q.ready().then(function(){U(q._dbInfo,O,function(ee,De){if(ee)return ue(ee);try{var He=De.objectStore(q._dbInfo.storeName),Ve=He.clear();De.oncomplete=function(){ie()},De.onabort=De.onerror=function(){var We=Ve.error?Ve.error:Ve.transaction.error;ue(We)}}catch(We){ue(We)}})}).catch(ue)});return v(W,H),W}function Q(H){var q=this,W=new g(function(ie,ue){q.ready().then(function(){U(q._dbInfo,k,function(ee,De){if(ee)return ue(ee);try{var He=De.objectStore(q._dbInfo.storeName),Ve=He.count();Ve.onsuccess=function(){ie(Ve.result)},Ve.onerror=function(){ue(Ve.error)}}catch(We){ue(We)}})}).catch(ue)});return v(W,H),W}function Se(H,q){var W=this,ie=new g(function(ue,ee){if(H<0){ue(null);return}W.ready().then(function(){U(W._dbInfo,k,function(De,He){if(De)return ee(De);try{var Ve=He.objectStore(W._dbInfo.storeName),We=!1,qe=Ve.openKeyCursor();qe.onsuccess=function(){var st=qe.result;if(!st){ue(null);return}H===0||We?ue(st.key):(We=!0,st.advance(H))},qe.onerror=function(){ee(qe.error)}}catch(st){ee(st)}})}).catch(ee)});return v(ie,q),ie}function Te(H){var q=this,W=new g(function(ie,ue){q.ready().then(function(){U(q._dbInfo,k,function(ee,De){if(ee)return ue(ee);try{var He=De.objectStore(q._dbInfo.storeName),Ve=He.openKeyCursor(),We=[];Ve.onsuccess=function(){var qe=Ve.result;if(!qe){ie(We);return}We.push(qe.key),qe.continue()},Ve.onerror=function(){ue(Ve.error)}}catch(qe){ue(qe)}})}).catch(ue)});return v(W,H),W}function ke(H,q){q=E.apply(this,arguments);var W=this.config();H=typeof H!="function"&&H||{},H.name||(H.name=H.name||W.name,H.storeName=H.storeName||W.storeName);var ie=this,ue;if(!H.name)ue=g.reject("Invalid arguments");else{var ee=H.name===W.name&&ie._dbInfo.db,De=ee?g.resolve(ie._dbInfo.db):oe(H).then(function(He){var Ve=S[H.name],We=Ve.forages;Ve.db=He;for(var qe=0;qe<We.length;qe++)We[qe]._dbInfo.db=He;return He});H.storeName?ue=De.then(function(He){if(He.objectStoreNames.contains(H.storeName)){var Ve=He.version+1;te(H);var We=S[H.name],qe=We.forages;He.close();for(var st=0;st<qe.length;st++){var Nt=qe[st];Nt._dbInfo.db=null,Nt._dbInfo.version=Ve}var ln=new g(function(en,Et){var Tn=c.open(H.name,Ve);Tn.onerror=function(_r){var os=Tn.result;os.close(),Et(_r)},Tn.onupgradeneeded=function(){var _r=Tn.result;_r.deleteObjectStore(H.storeName)},Tn.onsuccess=function(){var _r=Tn.result;_r.close(),en(_r)}});return ln.then(function(en){We.db=en;for(var Et=0;Et<qe.length;Et++){var Tn=qe[Et];Tn._dbInfo.db=en,se(Tn._dbInfo)}}).catch(function(en){throw(me(H,en)||g.resolve()).catch(function(){}),en})}}):ue=De.then(function(He){te(H);var Ve=S[H.name],We=Ve.forages;He.close();for(var qe=0;qe<We.length;qe++){var st=We[qe];st._dbInfo.db=null}var Nt=new g(function(ln,en){var Et=c.deleteDatabase(H.name);Et.onerror=function(){var Tn=Et.result;Tn&&Tn.close(),en(Et.error)},Et.onblocked=function(){console.warn('dropInstance blocked for database "'+H.name+'" until all open connections are closed')},Et.onsuccess=function(){var Tn=Et.result;Tn&&Tn.close(),ln(Tn)}});return Nt.then(function(ln){Ve.db=ln;for(var en=0;en<We.length;en++){var Et=We[en];se(Et._dbInfo)}}).catch(function(ln){throw(me(H,ln)||g.resolve()).catch(function(){}),ln})})}return v(ue,q),ue}var vt={_driver:"asyncStorage",_initStorage:Ie,_support:h(),iterate:$e,getItem:Le,setItem:Fe,removeItem:Ze,clear:et,length:Q,key:Se,keys:Te,dropInstance:ke};function Ye(){return typeof openDatabase=="function"}var At="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hn="~~local_forage_type~",Mt=/^~~local_forage_type~([^~]+)~/,kn="__lfsc__:",Cn=kn.length,dn="arbf",_t="blob",an="si08",pr="ui08",Ki="uic8",$n="si16",Yi="si32",mr="ur16",wn="ui32",On="fl32",Lr="fl64",ki=Cn+dn.length,Fs=Object.prototype.toString;function ns(H){var q=H.length*.75,W=H.length,ie,ue=0,ee,De,He,Ve;H[H.length-1]==="="&&(q--,H[H.length-2]==="="&&q--);var We=new ArrayBuffer(q),qe=new Uint8Array(We);for(ie=0;ie<W;ie+=4)ee=At.indexOf(H[ie]),De=At.indexOf(H[ie+1]),He=At.indexOf(H[ie+2]),Ve=At.indexOf(H[ie+3]),qe[ue++]=ee<<2|De>>4,qe[ue++]=(De&15)<<4|He>>2,qe[ue++]=(He&3)<<6|Ve&63;return We}function Mo(H){var q=new Uint8Array(H),W="",ie;for(ie=0;ie<q.length;ie+=3)W+=At[q[ie]>>2],W+=At[(q[ie]&3)<<4|q[ie+1]>>4],W+=At[(q[ie+1]&15)<<2|q[ie+2]>>6],W+=At[q[ie+2]&63];return q.length%3===2?W=W.substring(0,W.length-1)+"=":q.length%3===1&&(W=W.substring(0,W.length-2)+"=="),W}function ll(H,q){var W="";if(H&&(W=Fs.call(H)),H&&(W==="[object ArrayBuffer]"||H.buffer&&Fs.call(H.buffer)==="[object ArrayBuffer]")){var ie,ue=kn;H instanceof ArrayBuffer?(ie=H,ue+=dn):(ie=H.buffer,W==="[object Int8Array]"?ue+=an:W==="[object Uint8Array]"?ue+=pr:W==="[object Uint8ClampedArray]"?ue+=Ki:W==="[object Int16Array]"?ue+=$n:W==="[object Uint16Array]"?ue+=mr:W==="[object Int32Array]"?ue+=Yi:W==="[object Uint32Array]"?ue+=wn:W==="[object Float32Array]"?ue+=On:W==="[object Float64Array]"?ue+=Lr:q(new Error("Failed to get type for BinaryArray"))),q(ue+Mo(ie))}else if(W==="[object Blob]"){var ee=new FileReader;ee.onload=function(){var De=hn+H.type+"~"+Mo(this.result);q(kn+_t+De)},ee.readAsArrayBuffer(H)}else try{q(JSON.stringify(H))}catch(De){console.error("Couldn't convert value into a JSON string: ",H),q(null,De)}}function Ro(H){if(H.substring(0,Cn)!==kn)return JSON.parse(H);var q=H.substring(ki),W=H.substring(Cn,ki),ie;if(W===_t&&Mt.test(q)){var ue=q.match(Mt);ie=ue[1],q=q.substring(ue[0].length)}var ee=ns(q);switch(W){case dn:return ee;case _t:return d([ee],{type:ie});case an:return new Int8Array(ee);case pr:return new Uint8Array(ee);case Ki:return new Uint8ClampedArray(ee);case $n:return new Int16Array(ee);case mr:return new Uint16Array(ee);case Yi:return new Int32Array(ee);case wn:return new Uint32Array(ee);case On:return new Float32Array(ee);case Lr:return new Float64Array(ee);default:throw new Error("Unkown type: "+W)}}var qi={serialize:ll,deserialize:Ro,stringToBuffer:ns,bufferToString:Mo};function uu(H,q,W,ie){H.executeSql("CREATE TABLE IF NOT EXISTS "+q.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],W,ie)}function Rc(H){var q=this,W={db:null};if(H)for(var ie in H)W[ie]=typeof H[ie]!="string"?H[ie].toString():H[ie];var ue=new g(function(ee,De){try{W.db=openDatabase(W.name,String(W.version),W.description,W.size)}catch(He){return De(He)}W.db.transaction(function(He){uu(He,W,function(){q._dbInfo=W,ee()},function(Ve,We){De(We)})},De)});return W.serializer=qi,ue}function Zi(H,q,W,ie,ue,ee){H.executeSql(W,ie,ue,function(De,He){He.code===He.SYNTAX_ERR?De.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[q.storeName],function(Ve,We){We.rows.length?ee(Ve,He):uu(Ve,q,function(){Ve.executeSql(W,ie,ue,ee)},ee)},ee):ee(De,He)},ee)}function Ls(H,q){var W=this;H=x(H);var ie=new g(function(ue,ee){W.ready().then(function(){var De=W._dbInfo;De.db.transaction(function(He){Zi(He,De,"SELECT * FROM "+De.storeName+" WHERE key = ? LIMIT 1",[H],function(Ve,We){var qe=We.rows.length?We.rows.item(0).value:null;qe&&(qe=De.serializer.deserialize(qe)),ue(qe)},function(Ve,We){ee(We)})})}).catch(ee)});return v(ie,q),ie}function _s(H,q){var W=this,ie=new g(function(ue,ee){W.ready().then(function(){var De=W._dbInfo;De.db.transaction(function(He){Zi(He,De,"SELECT * FROM "+De.storeName,[],function(Ve,We){for(var qe=We.rows,st=qe.length,Nt=0;Nt<st;Nt++){var ln=qe.item(Nt),en=ln.value;if(en&&(en=De.serializer.deserialize(en)),en=H(en,ln.key,Nt+1),en!==void 0){ue(en);return}}ue()},function(Ve,We){ee(We)})})}).catch(ee)});return v(ie,q),ie}function bc(H,q,W,ie){var ue=this;H=x(H);var ee=new g(function(De,He){ue.ready().then(function(){q===void 0&&(q=null);var Ve=q,We=ue._dbInfo;We.serializer.serialize(q,function(qe,st){st?He(st):We.db.transaction(function(Nt){Zi(Nt,We,"INSERT OR REPLACE INTO "+We.storeName+" (key, value) VALUES (?, ?)",[H,qe],function(){De(Ve)},function(ln,en){He(en)})},function(Nt){if(Nt.code===Nt.QUOTA_ERR){if(ie>0){De(bc.apply(ue,[H,Ve,W,ie-1]));return}He(Nt)}})})}).catch(He)});return v(ee,W),ee}function gh(H,q,W){return bc.apply(this,[H,q,W,1])}function ph(H,q){var W=this;H=x(H);var ie=new g(function(ue,ee){W.ready().then(function(){var De=W._dbInfo;De.db.transaction(function(He){Zi(He,De,"DELETE FROM "+De.storeName+" WHERE key = ?",[H],function(){ue()},function(Ve,We){ee(We)})})}).catch(ee)});return v(ie,q),ie}function mh(H){var q=this,W=new g(function(ie,ue){q.ready().then(function(){var ee=q._dbInfo;ee.db.transaction(function(De){Zi(De,ee,"DELETE FROM "+ee.storeName,[],function(){ie()},function(He,Ve){ue(Ve)})})}).catch(ue)});return v(W,H),W}function kc(H){var q=this,W=new g(function(ie,ue){q.ready().then(function(){var ee=q._dbInfo;ee.db.transaction(function(De){Zi(De,ee,"SELECT COUNT(key) as c FROM "+ee.storeName,[],function(He,Ve){var We=Ve.rows.item(0).c;ie(We)},function(He,Ve){ue(Ve)})})}).catch(ue)});return v(W,H),W}function Oc(H,q){var W=this,ie=new g(function(ue,ee){W.ready().then(function(){var De=W._dbInfo;De.db.transaction(function(He){Zi(He,De,"SELECT key FROM "+De.storeName+" WHERE id = ? LIMIT 1",[H+1],function(Ve,We){var qe=We.rows.length?We.rows.item(0).key:null;ue(qe)},function(Ve,We){ee(We)})})}).catch(ee)});return v(ie,q),ie}function vh(H){var q=this,W=new g(function(ie,ue){q.ready().then(function(){var ee=q._dbInfo;ee.db.transaction(function(De){Zi(De,ee,"SELECT key FROM "+ee.storeName,[],function(He,Ve){for(var We=[],qe=0;qe<Ve.rows.length;qe++)We.push(Ve.rows.item(qe).key);ie(We)},function(He,Ve){ue(Ve)})})}).catch(ue)});return v(W,H),W}function ul(H){return new g(function(q,W){H.transaction(function(ie){ie.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ue,ee){for(var De=[],He=0;He<ee.rows.length;He++)De.push(ee.rows.item(He).name);q({db:H,storeNames:De})},function(ue,ee){W(ee)})},function(ie){W(ie)})})}function cl(H,q){q=E.apply(this,arguments);var W=this.config();H=typeof H!="function"&&H||{},H.name||(H.name=H.name||W.name,H.storeName=H.storeName||W.storeName);var ie=this,ue;return H.name?ue=new g(function(ee){var De;H.name===W.name?De=ie._dbInfo.db:De=openDatabase(H.name,"","",0),H.storeName?ee({db:De,storeNames:[H.storeName]}):ee(ul(De))}).then(function(ee){return new g(function(De,He){ee.db.transaction(function(Ve){function We(ln){return new g(function(en,Et){Ve.executeSql("DROP TABLE IF EXISTS "+ln,[],function(){en()},function(Tn,_r){Et(_r)})})}for(var qe=[],st=0,Nt=ee.storeNames.length;st<Nt;st++)qe.push(We(ee.storeNames[st]));g.all(qe).then(function(){De()}).catch(function(ln){He(ln)})},function(Ve){He(Ve)})})}):ue=g.reject("Invalid arguments"),v(ue,q),ue}var fl={_driver:"webSQLStorage",_initStorage:Rc,_support:Ye(),iterate:_s,getItem:Ls,setItem:gh,removeItem:ph,clear:mh,length:kc,key:Oc,keys:vh,dropInstance:cl};function Ic(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ma(H,q){var W=H.name+"/";return H.storeName!==q.storeName&&(W+=H.storeName+"/"),W}function cu(){var H="_localforage_support_test";try{return localStorage.setItem(H,!0),localStorage.removeItem(H),!1}catch{return!0}}function fu(){return!cu()||localStorage.length>0}function Fc(H){var q=this,W={};if(H)for(var ie in H)W[ie]=H[ie];return W.keyPrefix=ma(H,q._defaultConfig),fu()?(q._dbInfo=W,W.serializer=qi,g.resolve()):g.reject()}function Z0(H){var q=this,W=q.ready().then(function(){for(var ie=q._dbInfo.keyPrefix,ue=localStorage.length-1;ue>=0;ue--){var ee=localStorage.key(ue);ee.indexOf(ie)===0&&localStorage.removeItem(ee)}});return v(W,H),W}function Q0(H,q){var W=this;H=x(H);var ie=W.ready().then(function(){var ue=W._dbInfo,ee=localStorage.getItem(ue.keyPrefix+H);return ee&&(ee=ue.serializer.deserialize(ee)),ee});return v(ie,q),ie}function J0(H,q){var W=this,ie=W.ready().then(function(){for(var ue=W._dbInfo,ee=ue.keyPrefix,De=ee.length,He=localStorage.length,Ve=1,We=0;We<He;We++){var qe=localStorage.key(We);if(qe.indexOf(ee)===0){var st=localStorage.getItem(qe);if(st&&(st=ue.serializer.deserialize(st)),st=H(st,qe.substring(De),Ve++),st!==void 0)return st}}});return v(ie,q),ie}function Ns(H,q){var W=this,ie=W.ready().then(function(){var ue=W._dbInfo,ee;try{ee=localStorage.key(H)}catch{ee=null}return ee&&(ee=ee.substring(ue.keyPrefix.length)),ee});return v(ie,q),ie}function Lc(H){var q=this,W=q.ready().then(function(){for(var ie=q._dbInfo,ue=localStorage.length,ee=[],De=0;De<ue;De++){var He=localStorage.key(De);He.indexOf(ie.keyPrefix)===0&&ee.push(He.substring(ie.keyPrefix.length))}return ee});return v(W,H),W}function yh(H){var q=this,W=q.keys().then(function(ie){return ie.length});return v(W,H),W}function e1(H,q){var W=this;H=x(H);var ie=W.ready().then(function(){var ue=W._dbInfo;localStorage.removeItem(ue.keyPrefix+H)});return v(ie,q),ie}function wh(H,q,W){var ie=this;H=x(H);var ue=ie.ready().then(function(){q===void 0&&(q=null);var ee=q;return new g(function(De,He){var Ve=ie._dbInfo;Ve.serializer.serialize(q,function(We,qe){if(qe)He(qe);else try{localStorage.setItem(Ve.keyPrefix+H,We),De(ee)}catch(st){(st.name==="QuotaExceededError"||st.name==="NS_ERROR_DOM_QUOTA_REACHED")&&He(st),He(st)}})})});return v(ue,W),ue}function Ch(H,q){if(q=E.apply(this,arguments),H=typeof H!="function"&&H||{},!H.name){var W=this.config();H.name=H.name||W.name,H.storeName=H.storeName||W.storeName}var ie=this,ue;return H.name?ue=new g(function(ee){H.storeName?ee(ma(H,ie._defaultConfig)):ee(H.name+"/")}).then(function(ee){for(var De=localStorage.length-1;De>=0;De--){var He=localStorage.key(De);He.indexOf(ee)===0&&localStorage.removeItem(He)}}):ue=g.reject("Invalid arguments"),v(ue,q),ue}var xh={_driver:"localStorageWrapper",_initStorage:Fc,_support:Ic(),iterate:J0,getItem:Q0,setItem:wh,removeItem:e1,clear:Z0,length:yh,key:Ns,keys:Lc,dropInstance:Ch},Eh=function(q,W){return q===W||typeof q=="number"&&typeof W=="number"&&isNaN(q)&&isNaN(W)},hu=function(q,W){for(var ie=q.length,ue=0;ue<ie;){if(Eh(q[ue],W))return!0;ue++}return!1},Ph=Array.isArray||function(H){return Object.prototype.toString.call(H)==="[object Array]"},xn={},Sh={},rs={INDEXEDDB:vt,WEBSQL:fl,LOCALSTORAGE:xh},Th=[rs.INDEXEDDB._driver,rs.WEBSQL._driver,rs.LOCALSTORAGE._driver],is=["dropInstance"],du=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(is),_c={description:"",driver:Th.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function gu(H,q){H[q]=function(){var W=arguments;return H.ready().then(function(){return H[q].apply(H,W)})}}function yi(){for(var H=1;H<arguments.length;H++){var q=arguments[H];if(q)for(var W in q)q.hasOwnProperty(W)&&(Ph(q[W])?arguments[0][W]=q[W].slice():arguments[0][W]=q[W])}return arguments[0]}var t1=function(){function H(q){s(this,H);for(var W in rs)if(rs.hasOwnProperty(W)){var ie=rs[W],ue=ie._driver;this[W]=ue,xn[ue]||this.defineDriver(ie)}this._defaultConfig=yi({},_c),this._config=yi({},this._defaultConfig,q),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return H.prototype.config=function(W){if((typeof W>"u"?"undefined":o(W))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var ie in W){if(ie==="storeName"&&(W[ie]=W[ie].replace(/\W/g,"_")),ie==="version"&&typeof W[ie]!="number")return new Error("Database version must be a number.");this._config[ie]=W[ie]}return"driver"in W&&W.driver?this.setDriver(this._config.driver):!0}else return typeof W=="string"?this._config[W]:this._config},H.prototype.defineDriver=function(W,ie,ue){var ee=new g(function(De,He){try{var Ve=W._driver,We=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!W._driver){He(We);return}for(var qe=du.concat("_initStorage"),st=0,Nt=qe.length;st<Nt;st++){var ln=qe[st],en=!hu(is,ln);if((en||W[ln])&&typeof W[ln]!="function"){He(We);return}}var Et=function(){for(var os=function(dl){return function(){var ss=new Error("Method "+dl+" is not implemented by the current driver"),bo=g.reject(ss);return v(bo,arguments[arguments.length-1]),bo}},pu=0,Nc=is.length;pu<Nc;pu++){var hl=is[pu];W[hl]||(W[hl]=os(hl))}};Et();var Tn=function(os){xn[Ve]&&console.info("Redefining LocalForage driver: "+Ve),xn[Ve]=W,Sh[Ve]=os,De()};"_support"in W?W._support&&typeof W._support=="function"?W._support().then(Tn,He):Tn(!!W._support):Tn(!0)}catch(_r){He(_r)}});return y(ee,ie,ue),ee},H.prototype.driver=function(){return this._driver||null},H.prototype.getDriver=function(W,ie,ue){var ee=xn[W]?g.resolve(xn[W]):g.reject(new Error("Driver not found."));return y(ee,ie,ue),ee},H.prototype.getSerializer=function(W){var ie=g.resolve(qi);return y(ie,W),ie},H.prototype.ready=function(W){var ie=this,ue=ie._driverSet.then(function(){return ie._ready===null&&(ie._ready=ie._initDriver()),ie._ready});return y(ue,W,W),ue},H.prototype.setDriver=function(W,ie,ue){var ee=this;Ph(W)||(W=[W]);var De=this._getSupportedDrivers(W);function He(){ee._config.driver=ee.driver()}function Ve(st){return ee._extend(st),He(),ee._ready=ee._initStorage(ee._config),ee._ready}function We(st){return function(){var Nt=0;function ln(){for(;Nt<st.length;){var en=st[Nt];return Nt++,ee._dbInfo=null,ee._ready=null,ee.getDriver(en).then(Ve).catch(ln)}He();var Et=new Error("No available storage method found.");return ee._driverSet=g.reject(Et),ee._driverSet}return ln()}}var qe=this._driverSet!==null?this._driverSet.catch(function(){return g.resolve()}):g.resolve();return this._driverSet=qe.then(function(){var st=De[0];return ee._dbInfo=null,ee._ready=null,ee.getDriver(st).then(function(Nt){ee._driver=Nt._driver,He(),ee._wrapLibraryMethodsWithReady(),ee._initDriver=We(De)})}).catch(function(){He();var st=new Error("No available storage method found.");return ee._driverSet=g.reject(st),ee._driverSet}),y(this._driverSet,ie,ue),this._driverSet},H.prototype.supports=function(W){return!!Sh[W]},H.prototype._extend=function(W){yi(this,W)},H.prototype._getSupportedDrivers=function(W){for(var ie=[],ue=0,ee=W.length;ue<ee;ue++){var De=W[ue];this.supports(De)&&ie.push(De)}return ie},H.prototype._wrapLibraryMethodsWithReady=function(){for(var W=0,ie=du.length;W<ie;W++)gu(this,du[W])},H.prototype.createInstance=function(W){return new H(W)},H}(),Oi=new t1;r.exports=Oi},{3:3}]},{},[4])(4)})}(q5)),q5.exports}var eee=JJ();const Vg=Cc(eee),BE="main_board_content";Vg.config({name:"Drawnix",storeName:"drawnix_store",driver:[Vg.INDEXEDDB,Vg.LOCALSTORAGE]});function tee(){const[e,t]=G.useState({children:[]});return G.useEffect(()=>{(async()=>{const r=await Vg.getItem(BE);if(r){t(r);return}t({children:Bb})})()},[]),M.jsx(QJ,{value:e.children,viewport:e.viewport,theme:e.theme,onChange:n=>{Vg.setItem(BE,n),t(n)},afterInit:n=>{console.log("board initialized")}})}const nee=q3.createRoot(document.getElementById("root"));nee.render(M.jsx(G.StrictMode,{children:M.jsx(tee,{})}));export{Xr as A,pt as B,S0 as D,gt as F,Je as M,Ke as N,So as P,b as R,Wi as S,VB as _,_p as a,sl as b,cF as c,N8 as d,ql as e,sz as f,Cc as g,DT as h,Ln as i,ut as j,Sn as k,Bv as l,W0 as m,Mv as n,As as o,_m as p};
